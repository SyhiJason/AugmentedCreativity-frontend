(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();var dd={exports:{}},cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function DS(){if(t_)return cl;t_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var g in l)g!=="key"&&(h[g]=l[g])}else h=l;return l=h.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:h}}return cl.Fragment=t,cl.jsx=i,cl.jsxs=i,cl}var e_;function xS(){return e_||(e_=1,dd.exports=DS()),dd.exports}var B=xS(),md={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function OS(){if(n_)return It;n_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function D(C){return C===null||typeof C!="object"?null:(C=I&&C[I]||C["@@iterator"],typeof C=="function"?C:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,et={};function J(C,$,it){this.props=C,this.context=$,this.refs=et,this.updater=it||G}J.prototype.isReactComponent={},J.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},J.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function St(){}St.prototype=J.prototype;function mt(C,$,it){this.props=C,this.context=$,this.refs=et,this.updater=it||G}var ct=mt.prototype=new St;ct.constructor=mt,X(ct,J.prototype),ct.isPureReactComponent=!0;var Lt=Array.isArray,yt={H:null,A:null,T:null,S:null,V:null},Ct=Object.prototype.hasOwnProperty;function M(C,$,it,W,ht,Nt){return it=Nt.ref,{$$typeof:s,type:C,key:$,ref:it!==void 0?it:null,props:Nt}}function A(C,$){return M(C.type,$,void 0,void 0,void 0,C.props)}function b(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function N(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(it){return $[it]})}var O=/\/+/g;function V(C,$){return typeof C=="object"&&C!==null&&C.key!=null?N(""+C.key):$.toString(36)}function R(){}function Te(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(R,R):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function zt(C,$,it,W,ht){var Nt=typeof C;(Nt==="undefined"||Nt==="boolean")&&(C=null);var vt=!1;if(C===null)vt=!0;else switch(Nt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(C.$$typeof){case s:case t:vt=!0;break;case S:return vt=C._init,zt(vt(C._payload),$,it,W,ht)}}if(vt)return ht=ht(C),vt=W===""?"."+V(C,0):W,Lt(ht)?(it="",vt!=null&&(it=vt.replace(O,"$&/")+"/"),zt(ht,$,it,"",function(bt){return bt})):ht!=null&&(b(ht)&&(ht=A(ht,it+(ht.key==null||C&&C.key===ht.key?"":(""+ht.key).replace(O,"$&/")+"/")+vt)),$.push(ht)),1;vt=0;var pe=W===""?".":W+":";if(Lt(C))for(var st=0;st<C.length;st++)W=C[st],Nt=pe+V(W,st),vt+=zt(W,$,it,Nt,ht);else if(st=D(C),typeof st=="function")for(C=st.call(C),st=0;!(W=C.next()).done;)W=W.value,Nt=pe+V(W,st++),vt+=zt(W,$,it,Nt,ht);else if(Nt==="object"){if(typeof C.then=="function")return zt(Te(C),$,it,W,ht);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return vt}function H(C,$,it){if(C==null)return C;var W=[],ht=0;return zt(C,W,"","",function(Nt){return $.call(it,Nt,ht++)}),W}function nt(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(it){(C._status===0||C._status===-1)&&(C._status=1,C._result=it)},function(it){(C._status===0||C._status===-1)&&(C._status=2,C._result=it)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var ot=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function jt(){}return It.Children={map:H,forEach:function(C,$,it){H(C,function(){$.apply(this,arguments)},it)},count:function(C){var $=0;return H(C,function(){$++}),$},toArray:function(C){return H(C,function($){return $})||[]},only:function(C){if(!b(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},It.Component=J,It.Fragment=i,It.Profiler=l,It.PureComponent=mt,It.StrictMode=r,It.Suspense=y,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=yt,It.__COMPILER_RUNTIME={__proto__:null,c:function(C){return yt.H.useMemoCache(C)}},It.cache=function(C){return function(){return C.apply(null,arguments)}},It.cloneElement=function(C,$,it){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var W=X({},C.props),ht=C.key,Nt=void 0;if($!=null)for(vt in $.ref!==void 0&&(Nt=void 0),$.key!==void 0&&(ht=""+$.key),$)!Ct.call($,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&$.ref===void 0||(W[vt]=$[vt]);var vt=arguments.length-2;if(vt===1)W.children=it;else if(1<vt){for(var pe=Array(vt),st=0;st<vt;st++)pe[st]=arguments[st+2];W.children=pe}return M(C.type,ht,void 0,void 0,Nt,W)},It.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:h,_context:C},C},It.createElement=function(C,$,it){var W,ht={},Nt=null;if($!=null)for(W in $.key!==void 0&&(Nt=""+$.key),$)Ct.call($,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ht[W]=$[W]);var vt=arguments.length-2;if(vt===1)ht.children=it;else if(1<vt){for(var pe=Array(vt),st=0;st<vt;st++)pe[st]=arguments[st+2];ht.children=pe}if(C&&C.defaultProps)for(W in vt=C.defaultProps,vt)ht[W]===void 0&&(ht[W]=vt[W]);return M(C,Nt,void 0,void 0,null,ht)},It.createRef=function(){return{current:null}},It.forwardRef=function(C){return{$$typeof:g,render:C}},It.isValidElement=b,It.lazy=function(C){return{$$typeof:S,_payload:{_status:-1,_result:C},_init:nt}},It.memo=function(C,$){return{$$typeof:_,type:C,compare:$===void 0?null:$}},It.startTransition=function(C){var $=yt.T,it={};yt.T=it;try{var W=C(),ht=yt.S;ht!==null&&ht(it,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(jt,ot)}catch(Nt){ot(Nt)}finally{yt.T=$}},It.unstable_useCacheRefresh=function(){return yt.H.useCacheRefresh()},It.use=function(C){return yt.H.use(C)},It.useActionState=function(C,$,it){return yt.H.useActionState(C,$,it)},It.useCallback=function(C,$){return yt.H.useCallback(C,$)},It.useContext=function(C){return yt.H.useContext(C)},It.useDebugValue=function(){},It.useDeferredValue=function(C,$){return yt.H.useDeferredValue(C,$)},It.useEffect=function(C,$,it){var W=yt.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(C,$)},It.useId=function(){return yt.H.useId()},It.useImperativeHandle=function(C,$,it){return yt.H.useImperativeHandle(C,$,it)},It.useInsertionEffect=function(C,$){return yt.H.useInsertionEffect(C,$)},It.useLayoutEffect=function(C,$){return yt.H.useLayoutEffect(C,$)},It.useMemo=function(C,$){return yt.H.useMemo(C,$)},It.useOptimistic=function(C,$){return yt.H.useOptimistic(C,$)},It.useReducer=function(C,$,it){return yt.H.useReducer(C,$,it)},It.useRef=function(C){return yt.H.useRef(C)},It.useState=function(C){return yt.H.useState(C)},It.useSyncExternalStore=function(C,$,it){return yt.H.useSyncExternalStore(C,$,it)},It.useTransition=function(){return yt.H.useTransition()},It.version="19.1.0",It}var i_;function em(){return i_||(i_=1,md.exports=OS()),md.exports}var ft=em(),gd={exports:{}},hl={},pd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function MS(){return s_||(s_=1,function(s){function t(H,nt){var ot=H.length;H.push(nt);t:for(;0<ot;){var jt=ot-1>>>1,C=H[jt];if(0<l(C,nt))H[jt]=nt,H[ot]=C,ot=jt;else break t}}function i(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var nt=H[0],ot=H.pop();if(ot!==nt){H[0]=ot;t:for(var jt=0,C=H.length,$=C>>>1;jt<$;){var it=2*(jt+1)-1,W=H[it],ht=it+1,Nt=H[ht];if(0>l(W,ot))ht<C&&0>l(Nt,W)?(H[jt]=Nt,H[ht]=ot,jt=ht):(H[jt]=W,H[it]=ot,jt=it);else if(ht<C&&0>l(Nt,ot))H[jt]=Nt,H[ht]=ot,jt=ht;else break t}}return nt}function l(H,nt){var ot=H.sortIndex-nt.sortIndex;return ot!==0?ot:H.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var y=[],_=[],S=1,I=null,D=3,G=!1,X=!1,et=!1,J=!1,St=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;function Lt(H){for(var nt=i(_);nt!==null;){if(nt.callback===null)r(_);else if(nt.startTime<=H)r(_),nt.sortIndex=nt.expirationTime,t(y,nt);else break;nt=i(_)}}function yt(H){if(et=!1,Lt(H),!X)if(i(y)!==null)X=!0,Ct||(Ct=!0,V());else{var nt=i(_);nt!==null&&zt(yt,nt.startTime-H)}}var Ct=!1,M=-1,A=5,b=-1;function N(){return J?!0:!(s.unstable_now()-b<A)}function O(){if(J=!1,Ct){var H=s.unstable_now();b=H;var nt=!0;try{t:{X=!1,et&&(et=!1,mt(M),M=-1),G=!0;var ot=D;try{e:{for(Lt(H),I=i(y);I!==null&&!(I.expirationTime>H&&N());){var jt=I.callback;if(typeof jt=="function"){I.callback=null,D=I.priorityLevel;var C=jt(I.expirationTime<=H);if(H=s.unstable_now(),typeof C=="function"){I.callback=C,Lt(H),nt=!0;break e}I===i(y)&&r(y),Lt(H)}else r(y);I=i(y)}if(I!==null)nt=!0;else{var $=i(_);$!==null&&zt(yt,$.startTime-H),nt=!1}}break t}finally{I=null,D=ot,G=!1}nt=void 0}}finally{nt?V():Ct=!1}}}var V;if(typeof ct=="function")V=function(){ct(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Te=R.port2;R.port1.onmessage=O,V=function(){Te.postMessage(null)}}else V=function(){St(O,0)};function zt(H,nt){M=St(function(){H(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(H){switch(D){case 1:case 2:case 3:var nt=3;break;default:nt=D}var ot=D;D=nt;try{return H()}finally{D=ot}},s.unstable_requestPaint=function(){J=!0},s.unstable_runWithPriority=function(H,nt){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ot=D;D=H;try{return nt()}finally{D=ot}},s.unstable_scheduleCallback=function(H,nt,ot){var jt=s.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?jt+ot:jt):ot=jt,H){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ot+C,H={id:S++,callback:nt,priorityLevel:H,startTime:ot,expirationTime:C,sortIndex:-1},ot>jt?(H.sortIndex=ot,t(_,H),i(y)===null&&H===i(_)&&(et?(mt(M),M=-1):et=!0,zt(yt,ot-jt))):(H.sortIndex=C,t(y,H),X||G||(X=!0,Ct||(Ct=!0,V()))),H},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(H){var nt=D;return function(){var ot=D;D=nt;try{return H.apply(this,arguments)}finally{D=ot}}}}(yd)),yd}var r_;function VS(){return r_||(r_=1,pd.exports=MS()),pd.exports}var _d={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function kS(){if(a_)return Je;a_=1;var s=em();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(y,_,S){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:y,containerInfo:_,implementation:S}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Je.createPortal=function(y,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return h(y,_,null,S)},Je.flushSync=function(y){var _=d.T,S=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=_,r.p=S,r.d.f()}},Je.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(y,_))},Je.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Je.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var S=_.as,I=g(S,_.crossOrigin),D=typeof _.integrity=="string"?_.integrity:void 0,G=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?r.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:D,fetchPriority:G}):S==="script"&&r.d.X(y,{crossOrigin:I,integrity:D,fetchPriority:G,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Je.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);r.d.M(y,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(y)},Je.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,I=g(S,_.crossOrigin);r.d.L(y,S,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Je.preloadModule=function(y,_){if(typeof y=="string")if(_){var S=g(_.as,_.crossOrigin);r.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(y)},Je.requestFormReset=function(y){r.d.r(y)},Je.unstable_batchedUpdates=function(y,_){return y(_)},Je.useFormState=function(y,_,S){return d.H.useFormState(y,_,S)},Je.useFormStatus=function(){return d.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var o_;function PS(){if(o_)return _d.exports;o_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),_d.exports=kS(),_d.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function US(){if(l_)return hl;l_=1;var s=VS(),t=em(),i=PS();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(h(e)!==e)throw Error(r(188))}function y(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(o=c.return,o!==null){a=o;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return g(c),e;if(f===o)return g(c),n;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=c,o=f;else{for(var v=!1,E=c.child;E;){if(E===a){v=!0,a=c,o=f;break}if(E===o){v=!0,o=c,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=c;break}if(E===o){v=!0,o=f,a=c;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function _(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=_(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),et=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),St=Symbol.for("react.provider"),mt=Symbol.for("react.consumer"),ct=Symbol.for("react.context"),Lt=Symbol.for("react.forward_ref"),yt=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case J:return"Profiler";case et:return"StrictMode";case yt:return"Suspense";case Ct:return"SuspenseList";case b:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case G:return"Portal";case ct:return(e.displayName||"Context")+".Provider";case mt:return(e._context.displayName||"Context")+".Consumer";case Lt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:Te(e.type)||"Memo";case A:n=e._payload,e=e._init;try{return Te(e(n))}catch{}}return null}var zt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},jt=[],C=-1;function $(e){return{current:e}}function it(e){0>C||(e.current=jt[C],jt[C]=null,C--)}function W(e,n){C++,jt[C]=e.current,e.current=n}var ht=$(null),Nt=$(null),vt=$(null),pe=$(null);function st(e,n){switch(W(vt,n),W(Nt,e),W(ht,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Cy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Cy(n),e=Ny(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ht),W(ht,e)}function bt(){it(ht),it(Nt),it(vt)}function Et(e){e.memoizedState!==null&&W(pe,e);var n=ht.current,a=Ny(n,e.type);n!==a&&(W(Nt,e),W(ht,a))}function Ot(e){Nt.current===e&&(it(ht),it(Nt)),pe.current===e&&(it(pe),rl._currentValue=ot)}var $t=Object.prototype.hasOwnProperty,Ft=s.unstable_scheduleCallback,ce=s.unstable_cancelCallback,Un=s.unstable_shouldYield,Ei=s.unstable_requestPaint,ln=s.unstable_now,es=s.unstable_getCurrentPriorityLevel,Ti=s.unstable_ImmediatePriority,Yn=s.unstable_UserBlockingPriority,$s=s.unstable_NormalPriority,dh=s.unstable_LowPriority,qr=s.unstable_IdlePriority,io=s.log,Hl=s.unstable_setDisableYieldValue,de=null,Zt=null;function dn(e){if(typeof io=="function"&&Hl(e),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(de,e)}catch{}}var $e=Math.clz32?Math.clz32:Zs,Gl=Math.log,mh=Math.LN2;function Zs(e){return e>>>=0,e===0?32:31-(Gl(e)/mh|0)|0}var Js=256,Ws=4194304;function Ln(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hr(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?c=Ln(o):(v&=E,v!==0?c=Ln(v):a||(a=E&~e,a!==0&&(c=Ln(a))))):(E=o&~f,E!==0?c=Ln(E):v!==0?c=Ln(v):a||(a=o&~e,a!==0&&(c=Ln(a)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:c}function tr(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function so(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ro(){var e=Js;return Js<<=1,(Js&4194048)===0&&(Js=256),e}function ao(){var e=Ws;return Ws<<=1,(Ws&62914560)===0&&(Ws=4194304),e}function Si(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ai(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function oo(e,n,a,o,c,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,w=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var F=31-$e(a),Y=1<<F;E[F]=0,w[F]=-1;var z=L[F];if(z!==null)for(L[F]=null,F=0;F<z.length;F++){var j=z[F];j!==null&&(j.lane&=-536870913)}a&=~Y}o!==0&&Kn(e,o,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~n))}function Kn(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-$e(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function lo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-$e(a),c=1<<o;c&n|e[o]&n&&(e[o]|=n),a&=~c}}function ns(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function is(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:Ky(e.type))}function Fl(e,n){var a=nt.p;try{return nt.p=e,n()}finally{nt.p=a}}var le=Math.random().toString(36).slice(2),Ce="__reactFiber$"+le,Se="__reactProps$"+le,Sn="__reactContainer$"+le,uo="__reactEvents$"+le,gh="__reactListeners$"+le,ss="__reactHandles$"+le,Ql="__reactResources$"+le,er="__reactMarker$"+le;function rs(e){delete e[Ce],delete e[Se],delete e[uo],delete e[gh],delete e[ss]}function bi(e){var n=e[Ce];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Sn]||a[Ce]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=My(e);e!==null;){if(a=e[Ce])return a;e=My(e)}return n}e=a,a=e.parentNode}return null}function Xn(e){if(e=e[Ce]||e[Sn]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function $n(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function sn(e){var n=e[Ql];return n||(n=e[Ql]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ye(e){e[er]=!0}var co=new Set,Fr={};function zn(e,n){wi(e,n),wi(e+"Capture",n)}function wi(e,n){for(Fr[e]=n,e=0;e<n.length;e++)co.add(n[e])}var Yl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kl={},nr={};function Xl(e){return $t.call(nr,e)?!0:$t.call(Kl,e)?!1:Yl.test(e)?nr[e]=!0:(Kl[e]=!0,!1)}function as(e,n,a){if(Xl(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Zn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function qe(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}var ir,$l;function Ri(e){if(ir===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ir=n&&n[1]||"",$l=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ir+e+$l}var Qr=!1;function Yr(e,n){if(!e||Qr)return"";Qr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(j){var z=j}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(j){z=j}e.call(Y.prototype)}}else{try{throw Error()}catch(j){z=j}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(j){if(j&&z&&typeof j.stack=="string")return[j.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var w=v.split(`
`),L=E.split(`
`);for(c=o=0;o<w.length&&!w[o].includes("DetermineComponentFrameRoot");)o++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(o===w.length||c===L.length)for(o=w.length-1,c=L.length-1;1<=o&&0<=c&&w[o]!==L[c];)c--;for(;1<=o&&0<=c;o--,c--)if(w[o]!==L[c]){if(o!==1||c!==1)do if(o--,c--,0>c||w[o]!==L[c]){var F=`
`+w[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=c);break}}}finally{Qr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ri(a):""}function ho(e){switch(e.tag){case 26:case 27:case 5:return Ri(e.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Yr(e.type,!1);case 11:return Yr(e.type.render,!1);case 1:return Yr(e.type,!0);case 31:return Ri("Activity");default:return""}}function Kr(e){try{var n="";do n+=ho(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fo(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ph(e){var n=fo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Xr(e){e._valueTracker||(e._valueTracker=ph(e))}function mo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=fo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function sr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yh=/[\n"\\]/g;function Ae(e){return e.replace(yh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function mn(e,n,a,o,c,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+rn(n)):e.value!==""+rn(n)&&(e.value=""+rn(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?os(e,v,rn(n)):a!=null?os(e,v,rn(a)):o!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+rn(E):e.removeAttribute("name")}function rr(e,n,a,o,c,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+rn(a):"",n=n!=null?""+rn(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function os(e,n,a){n==="number"&&sr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ii(e,n,a,o){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&o&&(e[a].defaultSelected=!0)}else{for(a=""+rn(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function te(e,n,a){if(n!=null&&(n=""+rn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+rn(a):""}function ar(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(zt(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=rn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function An(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||or.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function go(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&a[c]!==o&&Zl(e,c,o)}else for(var f in n)n.hasOwnProperty(f)&&Zl(e,f,n[f])}function po(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(e){return vh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ci=null;function bn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ni=null,Di=null;function yo(e){var n=Xn(e);if(n&&(e=n.stateNode)){var a=e[Se]||null;t:switch(e=n.stateNode,n.type){case"input":if(mn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ae(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var c=o[Se]||null;if(!c)throw Error(r(90));mn(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&mo(o)}break t;case"textarea":te(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ii(e,!!a.multiple,n,!1)}}}var Jn=!1;function Jl(e,n,a){if(Jn)return e(n,a);Jn=!0;try{var o=e(n);return o}finally{if(Jn=!1,(Ni!==null||Di!==null)&&(Fu(),Ni&&(n=Ni,e=Di,Di=Ni=null,yo(n),e)))for(n=0;n<e.length;n++)yo(e[n])}}function lr(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Se]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wn=!1;if(jn)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){wn=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{wn=!1}var Wn=null,ls=null,xi=null;function _o(){if(xi)return xi;var e,n=ls,a=n.length,o,c="value"in Wn?Wn.value:Wn.textContent,f=c.length;for(e=0;e<a&&n[e]===c[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===c[f-o];o++);return xi=c.slice(e,1<o?1-o:void 0)}function ti(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ei(){return!0}function vo(){return!1}function Pe(e){function n(a,o,c,f,v){this._reactName=a,this._targetInst=c,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ei:vo,this.isPropagationStopped=vo,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),n}var Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zr=Pe(Kt),cr=S({},Kt,{view:0,detail:0}),Wl=Pe(cr),Jr,Wr,ni,hr=S({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ni&&(ni&&e.type==="mousemove"?(Jr=e.screenX-ni.screenX,Wr=e.screenY-ni.screenY):Wr=Jr=0,ni=e),Jr)},movementY:function(e){return"movementY"in e?e.movementY:Wr}}),Rn=Pe(hr),tu=S({},hr,{dataTransfer:0}),Eh=Pe(tu),fr=S({},cr,{relatedTarget:0}),ta=Pe(fr),Eo=S({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0}),ea=Pe(Eo),eu=S({},Kt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),na=Pe(eu),Th=S({},Kt,{data:0}),To=Pe(Th),dr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function So(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=iu[e])?!!n[e]:!1}function mr(){return So}var su=S({},cr,{key:function(e){if(e.key){var n=dr[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(e){return e.type==="keypress"?ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ia=Pe(su),ru=S({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ao=Pe(ru),Oi=S({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),au=Pe(Oi),ou=S({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),lu=Pe(ou),uu=S({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sa=Pe(uu),an=S({},Kt,{newState:0,oldState:0}),cu=Pe(an),hu=[9,13,27,32],ii=jn&&"CompositionEvent"in window,u=null;jn&&"documentMode"in document&&(u=document.documentMode);var m=jn&&"TextEvent"in window&&!u,p=jn&&(!ii||u&&8<u&&11>=u),T=" ",P=!1;function q(e,n){switch(e){case"keyup":return hu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bt=!1;function Ne(e,n){switch(e){case"compositionend":return tt(n);case"keypress":return n.which!==32?null:(P=!0,T);case"textInput":return e=n.data,e===T&&P?null:e;default:return null}}function qt(e,n){if(Bt)return e==="compositionend"||!ii&&q(e,n)?(e=_o(),xi=ls=Wn=null,Bt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return p&&n.locale!=="ko"?null:n.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function De(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ue[e.type]:n==="textarea"}function Mi(e,n,a,o){Ni?Di?Di.push(o):Di=[o]:Ni=o,n=Zu(n,"onChange"),0<n.length&&(a=new Zr("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var He=null,si=null;function bo(e){Ay(e,0)}function fu(e){var n=$n(e);if(mo(n))return e}function Gm(e,n){if(e==="change")return n}var Fm=!1;if(jn){var Sh;if(jn){var Ah="oninput"in document;if(!Ah){var Qm=document.createElement("div");Qm.setAttribute("oninput","return;"),Ah=typeof Qm.oninput=="function"}Sh=Ah}else Sh=!1;Fm=Sh&&(!document.documentMode||9<document.documentMode)}function Ym(){He&&(He.detachEvent("onpropertychange",Km),si=He=null)}function Km(e){if(e.propertyName==="value"&&fu(si)){var n=[];Mi(n,si,e,bn(e)),Jl(bo,n)}}function aT(e,n,a){e==="focusin"?(Ym(),He=n,si=a,He.attachEvent("onpropertychange",Km)):e==="focusout"&&Ym()}function oT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fu(si)}function lT(e,n){if(e==="click")return fu(n)}function uT(e,n){if(e==="input"||e==="change")return fu(n)}function cT(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var gn=typeof Object.is=="function"?Object.is:cT;function wo(e,n){if(gn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var c=a[o];if(!$t.call(n,c)||!gn(e[c],n[c]))return!1}return!0}function Xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $m(e,n){var a=Xm(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Xm(a)}}function Zm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Zm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Jm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=sr(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=sr(e.document)}return n}function bh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var hT=jn&&"documentMode"in document&&11>=document.documentMode,ra=null,wh=null,Ro=null,Rh=!1;function Wm(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rh||ra==null||ra!==sr(o)||(o=ra,"selectionStart"in o&&bh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ro&&wo(Ro,o)||(Ro=o,o=Zu(wh,"onSelect"),0<o.length&&(n=new Zr("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=ra)))}function gr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var aa={animationend:gr("Animation","AnimationEnd"),animationiteration:gr("Animation","AnimationIteration"),animationstart:gr("Animation","AnimationStart"),transitionrun:gr("Transition","TransitionRun"),transitionstart:gr("Transition","TransitionStart"),transitioncancel:gr("Transition","TransitionCancel"),transitionend:gr("Transition","TransitionEnd")},Ih={},tg={};jn&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function pr(e){if(Ih[e])return Ih[e];if(!aa[e])return e;var n=aa[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in tg)return Ih[e]=n[a];return e}var eg=pr("animationend"),ng=pr("animationiteration"),ig=pr("animationstart"),fT=pr("transitionrun"),dT=pr("transitionstart"),mT=pr("transitioncancel"),sg=pr("transitionend"),rg=new Map,Ch="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ch.push("scrollEnd");function Bn(e,n){rg.set(e,n),zn(n,[e])}var ag=new WeakMap;function In(e,n){if(typeof e=="object"&&e!==null){var a=ag.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Kr(n)},ag.set(e,n),n)}return{value:e,source:n,stack:Kr(n)}}var Cn=[],oa=0,Nh=0;function du(){for(var e=oa,n=Nh=oa=0;n<e;){var a=Cn[n];Cn[n++]=null;var o=Cn[n];Cn[n++]=null;var c=Cn[n];Cn[n++]=null;var f=Cn[n];if(Cn[n++]=null,o!==null&&c!==null){var v=o.pending;v===null?c.next=c:(c.next=v.next,v.next=c),o.pending=c}f!==0&&og(a,c,f)}}function mu(e,n,a,o){Cn[oa++]=e,Cn[oa++]=n,Cn[oa++]=a,Cn[oa++]=o,Nh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Dh(e,n,a,o){return mu(e,n,a,o),gu(e)}function la(e,n){return mu(e,null,null,n),gu(e)}function og(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&n!==null&&(c=31-$e(a),e=f.hiddenUpdates,o=e[c],o===null?e[c]=[n]:o.push(n),n.lane=a|536870912),f):null}function gu(e){if(50<Zo)throw Zo=0,Uf=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ua={};function gT(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(e,n,a,o){return new gT(e,n,a,o)}function xh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vi(e,n){var a=e.alternate;return a===null?(a=pn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function lg(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function pu(e,n,a,o,c,f){var v=0;if(o=e,typeof e=="function")xh(e)&&(v=1);else if(typeof e=="string")v=yS(e,a,ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case b:return e=pn(31,a,n,c),e.elementType=b,e.lanes=f,e;case X:return yr(a.children,c,f,n);case et:v=8,c|=24;break;case J:return e=pn(12,a,n,c|2),e.elementType=J,e.lanes=f,e;case yt:return e=pn(13,a,n,c),e.elementType=yt,e.lanes=f,e;case Ct:return e=pn(19,a,n,c),e.elementType=Ct,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case St:case ct:v=10;break t;case mt:v=9;break t;case Lt:v=11;break t;case M:v=14;break t;case A:v=16,o=null;break t}v=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=pn(v,a,n,c),n.elementType=e,n.type=o,n.lanes=f,n}function yr(e,n,a,o){return e=pn(7,e,o,n),e.lanes=a,e}function Oh(e,n,a){return e=pn(6,e,null,n),e.lanes=a,e}function Mh(e,n,a){return n=pn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ca=[],ha=0,yu=null,_u=0,Nn=[],Dn=0,_r=null,ki=1,Pi="";function vr(e,n){ca[ha++]=_u,ca[ha++]=yu,yu=e,_u=n}function ug(e,n,a){Nn[Dn++]=ki,Nn[Dn++]=Pi,Nn[Dn++]=_r,_r=e;var o=ki;e=Pi;var c=32-$e(o)-1;o&=~(1<<c),a+=1;var f=32-$e(n)+c;if(30<f){var v=c-c%5;f=(o&(1<<v)-1).toString(32),o>>=v,c-=v,ki=1<<32-$e(n)+c|a<<c|o,Pi=f+e}else ki=1<<f|a<<c|o,Pi=e}function Vh(e){e.return!==null&&(vr(e,1),ug(e,1,0))}function kh(e){for(;e===yu;)yu=ca[--ha],ca[ha]=null,_u=ca[--ha],ca[ha]=null;for(;e===_r;)_r=Nn[--Dn],Nn[Dn]=null,Pi=Nn[--Dn],Nn[Dn]=null,ki=Nn[--Dn],Nn[Dn]=null}var on=null,me=null,Yt=!1,Er=null,ri=!1,Ph=Error(r(519));function Tr(e){var n=Error(r(418,""));throw No(In(n,e)),Ph}function cg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Ce]=e,n[Se]=o,a){case"dialog":Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":case"embed":Vt("load",n);break;case"video":case"audio":for(a=0;a<Wo.length;a++)Vt(Wo[a],n);break;case"source":Vt("error",n);break;case"img":case"image":case"link":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"input":Vt("invalid",n),rr(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Xr(n);break;case"select":Vt("invalid",n);break;case"textarea":Vt("invalid",n),ar(n,o.value,o.defaultValue,o.children),Xr(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Iy(n.textContent,a)?(o.popover!=null&&(Vt("beforetoggle",n),Vt("toggle",n)),o.onScroll!=null&&Vt("scroll",n),o.onScrollEnd!=null&&Vt("scrollend",n),o.onClick!=null&&(n.onclick=Ju),n=!0):n=!1,n||Tr(e)}function hg(e){for(on=e.return;on;)switch(on.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:on=on.return}}function Io(e){if(e!==on)return!1;if(!Yt)return hg(e),Yt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Wf(e.type,e.memoizedProps)),a=!a),a&&me&&Tr(e),hg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){me=Hn(e.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}me=null}}else n===27?(n=me,bs(e.type)?(e=id,id=null,me=e):me=n):me=on?Hn(e.stateNode.nextSibling):null;return!0}function Co(){me=on=null,Yt=!1}function fg(){var e=Er;return e!==null&&(hn===null?hn=e:hn.push.apply(hn,e),Er=null),e}function No(e){Er===null?Er=[e]:Er.push(e)}var Uh=$(null),Sr=null,Ui=null;function us(e,n,a){W(Uh,n._currentValue),n._currentValue=a}function Li(e){e._currentValue=Uh.current,it(Uh)}function Lh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function zh(e,n,a,o){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var w=0;w<n.length;w++)if(E.context===n[w]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Lh(f.return,a,e),o||(v=null);break t}f=E.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(r(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Lh(v,a,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Do(e,n,a,o){e=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=c.type;gn(c.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(c===pe.current){if(v=c.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(rl):e=[rl])}c=c.return}e!==null&&zh(n,e,a,o),n.flags|=262144}function vu(e){for(e=e.firstContext;e!==null;){if(!gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ar(e){Sr=e,Ui=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return dg(Sr,e)}function Eu(e,n){return Sr===null&&Ar(e),dg(e,n)}function dg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Ui===null){if(e===null)throw Error(r(308));Ui=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ui=Ui.next=n;return a}var pT=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},yT=s.unstable_scheduleCallback,_T=s.unstable_NormalPriority,xe={$$typeof:ct,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new pT,data:new Map,refCount:0}}function xo(e){e.refCount--,e.refCount===0&&yT(_T,function(){e.controller.abort()})}var Oo=null,Bh=0,fa=0,da=null;function vT(e,n){if(Oo===null){var a=Oo=[];Bh=0,fa=Gf(),da={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Bh++,n.then(mg,mg),n}function mg(){if(--Bh===0&&Oo!==null){da!==null&&(da.status="fulfilled");var e=Oo;Oo=null,fa=0,da=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ET(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),o}var gg=H.S;H.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&vT(e,n),gg!==null&&gg(e,n)};var br=$(null);function qh(){var e=br.current;return e!==null?e:re.pooledCache}function Tu(e,n){n===null?W(br,br.current):W(br,n.pool)}function pg(){var e=qh();return e===null?null:{parent:xe._currentValue,pool:e}}var Mo=Error(r(460)),yg=Error(r(474)),Su=Error(r(542)),Hh={then:function(){}};function _g(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Au(){}function vg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Au,Au),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Tg(e),e;default:if(typeof n.status=="string")n.then(Au,Au);else{if(e=re,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Tg(e),e}throw Vo=n,Mo}}var Vo=null;function Eg(){if(Vo===null)throw Error(r(459));var e=Vo;return Vo=null,e}function Tg(e){if(e===Mo||e===Su)throw Error(r(483))}var cs=!1;function Gh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function hs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function fs(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Jt&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=gu(e),og(e,null,a),n}return mu(e,o,n,a),gu(e)}function ko(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,lo(e,a)}}function Qh(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?c=f=n:f=f.next=n}else c=f=n;a={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Yh=!1;function Po(){if(Yh){var e=da;if(e!==null)throw e}}function Uo(e,n,a,o){Yh=!1;var c=e.updateQueue;cs=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var w=E,L=w.next;w.next=null,v===null?f=L:v.next=L,v=w;var F=e.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=L:E.next=L,F.lastBaseUpdate=w))}if(f!==null){var Y=c.baseState;v=0,F=L=w=null,E=f;do{var z=E.lane&-536870913,j=z!==E.lane;if(j?(Ht&z)===z:(o&z)===z){z!==0&&z===fa&&(Yh=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Tt=e,gt=E;z=n;var ie=a;switch(gt.tag){case 1:if(Tt=gt.payload,typeof Tt=="function"){Y=Tt.call(ie,Y,z);break t}Y=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=gt.payload,z=typeof Tt=="function"?Tt.call(ie,Y,z):Tt,z==null)break t;Y=S({},Y,z);break t;case 2:cs=!0}}z=E.callback,z!==null&&(e.flags|=64,j&&(e.flags|=8192),j=c.callbacks,j===null?c.callbacks=[z]:j.push(z))}else j={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(L=F=j,w=Y):F=F.next=j,v|=z;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;j=E,E=j.next,j.next=null,c.lastBaseUpdate=j,c.shared.pending=null}}while(!0);F===null&&(w=Y),c.baseState=w,c.firstBaseUpdate=L,c.lastBaseUpdate=F,f===null&&(c.shared.lanes=0),Es|=v,e.lanes=v,e.memoizedState=Y}}function Sg(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Ag(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Sg(a[e],n)}var ma=$(null),bu=$(0);function bg(e,n){e=Fi,W(bu,e),W(ma,n),Fi=e|n.baseLanes}function Kh(){W(bu,Fi),W(ma,ma.current)}function Xh(){Fi=bu.current,it(ma),it(bu)}var ds=0,Dt=null,ee=null,be=null,wu=!1,ga=!1,wr=!1,Ru=0,Lo=0,pa=null,TT=0;function _e(){throw Error(r(321))}function $h(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!gn(e[a],n[a]))return!1;return!0}function Zh(e,n,a,o,c,f){return ds=f,Dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=e===null||e.memoizedState===null?op:lp,wr=!1,f=a(o,c),wr=!1,ga&&(f=Rg(n,a,o,c)),wg(e),f}function wg(e){H.H=Ou;var n=ee!==null&&ee.next!==null;if(ds=0,be=ee=Dt=null,wu=!1,Lo=0,pa=null,n)throw Error(r(300));e===null||Le||(e=e.dependencies,e!==null&&vu(e)&&(Le=!0))}function Rg(e,n,a,o){Dt=e;var c=0;do{if(ga&&(pa=null),Lo=0,ga=!1,25<=c)throw Error(r(301));if(c+=1,be=ee=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=CT,f=n(a,o)}while(ga);return f}function ST(){var e=H.H,n=e.useState()[0];return n=typeof n.then=="function"?zo(n):n,e=e.useState()[0],(ee!==null?ee.memoizedState:null)!==e&&(Dt.flags|=1024),n}function Jh(){var e=Ru!==0;return Ru=0,e}function Wh(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function tf(e){if(wu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}wu=!1}ds=0,be=ee=Dt=null,ga=!1,Lo=Ru=0,pa=null}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Dt.memoizedState=be=e:be=be.next=e,be}function we(){if(ee===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=ee.next;var n=be===null?Dt.memoizedState:be.next;if(n!==null)be=n,ee=e;else{if(e===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));ee=e,e={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},be===null?Dt.memoizedState=be=e:be=be.next=e}return be}function ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zo(e){var n=Lo;return Lo+=1,pa===null&&(pa=[]),e=vg(pa,e,n),n=Dt,(be===null?n.memoizedState:be.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?op:lp),e}function Iu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zo(e);if(e.$$typeof===ct)return Ze(e)}throw Error(r(438,String(e)))}function nf(e){var n=null,a=Dt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Dt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ef(),Dt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=N;return n.index++,a}function zi(e,n){return typeof n=="function"?n(e):n}function Cu(e){var n=we();return sf(n,ee,e)}function sf(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var c=e.baseQueue,f=o.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}n.baseQueue=c=f,o.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{n=c.next;var E=v=null,w=null,L=n,F=!1;do{var Y=L.lane&-536870913;if(Y!==L.lane?(Ht&Y)===Y:(ds&Y)===Y){var z=L.revertLane;if(z===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Y===fa&&(F=!0);else if((ds&z)===z){L=L.next,z===fa&&(F=!0);continue}else Y={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},w===null?(E=w=Y,v=f):w=w.next=Y,Dt.lanes|=z,Es|=z;Y=L.action,wr&&a(f,Y),f=L.hasEagerState?L.eagerState:a(f,Y)}else z={lane:Y,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},w===null?(E=w=z,v=f):w=w.next=z,Dt.lanes|=Y,Es|=Y;L=L.next}while(L!==null&&L!==n);if(w===null?v=f:w.next=E,!gn(f,e.memoizedState)&&(Le=!0,F&&(a=da,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=w,o.lastRenderedState=f}return c===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function rf(e){var n=we(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,c=a.pending,f=n.memoizedState;if(c!==null){a.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);gn(f,n.memoizedState)||(Le=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function Ig(e,n,a){var o=Dt,c=we(),f=Yt;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!gn((ee||c).memoizedState,a);v&&(c.memoizedState=a,Le=!0),c=c.queue;var E=Dg.bind(null,o,c,e);if(jo(2048,8,E,[e]),c.getSnapshot!==n||v||be!==null&&be.memoizedState.tag&1){if(o.flags|=2048,ya(9,Nu(),Ng.bind(null,o,c,a,n),null),re===null)throw Error(r(349));f||(ds&124)!==0||Cg(o,n,a)}return a}function Cg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Dt.updateQueue,n===null?(n=ef(),Dt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Ng(e,n,a,o){n.value=a,n.getSnapshot=o,xg(n)&&Og(e)}function Dg(e,n,a){return a(function(){xg(n)&&Og(e)})}function xg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!gn(e,a)}catch{return!0}}function Og(e){var n=la(e,2);n!==null&&Tn(n,e,2)}function af(e){var n=un();if(typeof e=="function"){var a=e;if(e=a(),wr){dn(!0);try{a()}finally{dn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},n}function Mg(e,n,a,o){return e.baseState=a,sf(e,ee,typeof o=="function"?o:zi)}function AT(e,n,a,o,c){if(xu(e))throw Error(r(485));if(e=n.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Vg(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Vg(e,n){var a=n.action,o=n.payload,c=e.state;if(n.isTransition){var f=H.T,v={};H.T=v;try{var E=a(c,o),w=H.S;w!==null&&w(v,E),kg(e,n,E)}catch(L){of(e,n,L)}finally{H.T=f}}else try{f=a(c,o),kg(e,n,f)}catch(L){of(e,n,L)}}function kg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Pg(e,n,o)},function(o){return of(e,n,o)}):Pg(e,n,a)}function Pg(e,n,a){n.status="fulfilled",n.value=a,Ug(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Vg(e,a)))}function of(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Ug(n),n=n.next;while(n!==o)}e.action=null}function Ug(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Lg(e,n){return n}function zg(e,n){if(Yt){var a=re.formState;if(a!==null){t:{var o=Dt;if(Yt){if(me){e:{for(var c=me,f=ri;c.nodeType!==8;){if(!f){c=null;break e}if(c=Hn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){me=Hn(c.nextSibling),o=c.data==="F!";break t}}Tr(o)}o=!1}o&&(n=a[0])}}return a=un(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lg,lastRenderedState:n},a.queue=o,a=sp.bind(null,Dt,o),o.dispatch=a,o=af(!1),f=ff.bind(null,Dt,!1,o.queue),o=un(),c={state:n,dispatch:null,action:e,pending:null},o.queue=c,a=AT.bind(null,Dt,c,f,a),c.dispatch=a,o.memoizedState=e,[n,a,!1]}function jg(e){var n=we();return Bg(n,ee,e)}function Bg(e,n,a){if(n=sf(e,n,Lg)[0],e=Cu(zi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=zo(n)}catch(v){throw v===Mo?Su:v}else o=n;n=we();var c=n.queue,f=c.dispatch;return a!==n.memoizedState&&(Dt.flags|=2048,ya(9,Nu(),bT.bind(null,c,a),null)),[o,f,e]}function bT(e,n){e.action=n}function qg(e){var n=we(),a=ee;if(a!==null)return Bg(n,a,e);we(),n=n.memoizedState,a=we();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function ya(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Dt.updateQueue,n===null&&(n=ef(),Dt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Nu(){return{destroy:void 0,resource:void 0}}function Hg(){return we().memoizedState}function Du(e,n,a,o){var c=un();o=o===void 0?null:o,Dt.flags|=e,c.memoizedState=ya(1|n,Nu(),a,o)}function jo(e,n,a,o){var c=we();o=o===void 0?null:o;var f=c.memoizedState.inst;ee!==null&&o!==null&&$h(o,ee.memoizedState.deps)?c.memoizedState=ya(n,f,a,o):(Dt.flags|=e,c.memoizedState=ya(1|n,f,a,o))}function Gg(e,n){Du(8390656,8,e,n)}function Fg(e,n){jo(2048,8,e,n)}function Qg(e,n){return jo(4,2,e,n)}function Yg(e,n){return jo(4,4,e,n)}function Kg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Xg(e,n,a){a=a!=null?a.concat([e]):null,jo(4,4,Kg.bind(null,n,e),a)}function lf(){}function $g(e,n){var a=we();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&$h(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Zg(e,n){var a=we();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&$h(n,o[1]))return o[0];if(o=e(),wr){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[o,n],o}function uf(e,n,a){return a===void 0||(ds&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=ty(),Dt.lanes|=e,Es|=e,a)}function Jg(e,n,a,o){return gn(a,n)?a:ma.current!==null?(e=uf(e,a,o),gn(e,n)||(Le=!0),e):(ds&42)===0?(Le=!0,e.memoizedState=a):(e=ty(),Dt.lanes|=e,Es|=e,n)}function Wg(e,n,a,o,c){var f=nt.p;nt.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,ff(e,!1,n,a);try{var w=c(),L=H.S;if(L!==null&&L(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=ET(w,o);Bo(e,n,F,En(e))}else Bo(e,n,o,En(e))}catch(Y){Bo(e,n,{then:function(){},status:"rejected",reason:Y},En())}finally{nt.p=f,H.T=v}}function wT(){}function cf(e,n,a,o){if(e.tag!==5)throw Error(r(476));var c=tp(e).queue;Wg(e,c,n,ot,a===null?wT:function(){return ep(e),a(o)})}function tp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ot},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function ep(e){var n=tp(e).next.queue;Bo(e,n,{},En())}function hf(){return Ze(rl)}function np(){return we().memoizedState}function ip(){return we().memoizedState}function RT(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=En();e=hs(a);var o=fs(n,e,a);o!==null&&(Tn(o,n,a),ko(o,n,a)),n={cache:jh()},e.payload=n;return}n=n.return}}function IT(e,n,a){var o=En();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xu(e)?rp(n,a):(a=Dh(e,n,a,o),a!==null&&(Tn(a,e,o),ap(a,n,o)))}function sp(e,n,a){var o=En();Bo(e,n,a,o)}function Bo(e,n,a,o){var c={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xu(e))rp(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(c.hasEagerState=!0,c.eagerState=E,gn(E,v))return mu(e,n,c,0),re===null&&du(),!1}catch{}finally{}if(a=Dh(e,n,c,o),a!==null)return Tn(a,e,o),ap(a,n,o),!0}return!1}function ff(e,n,a,o){if(o={lane:2,revertLane:Gf(),action:o,hasEagerState:!1,eagerState:null,next:null},xu(e)){if(n)throw Error(r(479))}else n=Dh(e,a,o,2),n!==null&&Tn(n,e,2)}function xu(e){var n=e.alternate;return e===Dt||n!==null&&n===Dt}function rp(e,n){ga=wu=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function ap(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,lo(e,a)}}var Ou={readContext:Ze,use:Iu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},op={readContext:Ze,use:Iu,useCallback:function(e,n){return un().memoizedState=[e,n===void 0?null:n],e},useContext:Ze,useEffect:Gg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Du(4194308,4,Kg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Du(4194308,4,e,n)},useInsertionEffect:function(e,n){Du(4,2,e,n)},useMemo:function(e,n){var a=un();n=n===void 0?null:n;var o=e();if(wr){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=un();if(a!==void 0){var c=a(n);if(wr){dn(!0);try{a(n)}finally{dn(!1)}}}else c=n;return o.memoizedState=o.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},o.queue=e,e=e.dispatch=IT.bind(null,Dt,e),[o.memoizedState,e]},useRef:function(e){var n=un();return e={current:e},n.memoizedState=e},useState:function(e){e=af(e);var n=e.queue,a=sp.bind(null,Dt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:lf,useDeferredValue:function(e,n){var a=un();return uf(a,e,n)},useTransition:function(){var e=af(!1);return e=Wg.bind(null,Dt,e.queue,!0,!1),un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Dt,c=un();if(Yt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),re===null)throw Error(r(349));(Ht&124)!==0||Cg(o,n,a)}c.memoizedState=a;var f={value:a,getSnapshot:n};return c.queue=f,Gg(Dg.bind(null,o,f,e),[e]),o.flags|=2048,ya(9,Nu(),Ng.bind(null,o,f,a,n),null),a},useId:function(){var e=un(),n=re.identifierPrefix;if(Yt){var a=Pi,o=ki;a=(o&~(1<<32-$e(o)-1)).toString(32)+a,n="«"+n+"R"+a,a=Ru++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=TT++,n="«"+n+"r"+a.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:hf,useFormState:zg,useActionState:zg,useOptimistic:function(e){var n=un();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=ff.bind(null,Dt,!0,a),a.dispatch=n,[e,n]},useMemoCache:nf,useCacheRefresh:function(){return un().memoizedState=RT.bind(null,Dt)}},lp={readContext:Ze,use:Iu,useCallback:$g,useContext:Ze,useEffect:Fg,useImperativeHandle:Xg,useInsertionEffect:Qg,useLayoutEffect:Yg,useMemo:Zg,useReducer:Cu,useRef:Hg,useState:function(){return Cu(zi)},useDebugValue:lf,useDeferredValue:function(e,n){var a=we();return Jg(a,ee.memoizedState,e,n)},useTransition:function(){var e=Cu(zi)[0],n=we().memoizedState;return[typeof e=="boolean"?e:zo(e),n]},useSyncExternalStore:Ig,useId:np,useHostTransitionStatus:hf,useFormState:jg,useActionState:jg,useOptimistic:function(e,n){var a=we();return Mg(a,ee,e,n)},useMemoCache:nf,useCacheRefresh:ip},CT={readContext:Ze,use:Iu,useCallback:$g,useContext:Ze,useEffect:Fg,useImperativeHandle:Xg,useInsertionEffect:Qg,useLayoutEffect:Yg,useMemo:Zg,useReducer:rf,useRef:Hg,useState:function(){return rf(zi)},useDebugValue:lf,useDeferredValue:function(e,n){var a=we();return ee===null?uf(a,e,n):Jg(a,ee.memoizedState,e,n)},useTransition:function(){var e=rf(zi)[0],n=we().memoizedState;return[typeof e=="boolean"?e:zo(e),n]},useSyncExternalStore:Ig,useId:np,useHostTransitionStatus:hf,useFormState:qg,useActionState:qg,useOptimistic:function(e,n){var a=we();return ee!==null?Mg(a,ee,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:nf,useCacheRefresh:ip},_a=null,qo=0;function Mu(e){var n=qo;return qo+=1,_a===null&&(_a=[]),vg(_a,e,n)}function Ho(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Vu(e,n){throw n.$$typeof===I?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function up(e){var n=e._init;return n(e._payload)}function cp(e){function n(k,x){if(e){var U=k.deletions;U===null?(k.deletions=[x],k.flags|=16):U.push(x)}}function a(k,x){if(!e)return null;for(;x!==null;)n(k,x),x=x.sibling;return null}function o(k){for(var x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function c(k,x){return k=Vi(k,x),k.index=0,k.sibling=null,k}function f(k,x,U){return k.index=U,e?(U=k.alternate,U!==null?(U=U.index,U<x?(k.flags|=67108866,x):U):(k.flags|=67108866,x)):(k.flags|=1048576,x)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,x,U,Q){return x===null||x.tag!==6?(x=Oh(U,k.mode,Q),x.return=k,x):(x=c(x,U),x.return=k,x)}function w(k,x,U,Q){var at=U.type;return at===X?F(k,x,U.props.children,Q,U.key):x!==null&&(x.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===A&&up(at)===x.type)?(x=c(x,U.props),Ho(x,U),x.return=k,x):(x=pu(U.type,U.key,U.props,null,k.mode,Q),Ho(x,U),x.return=k,x)}function L(k,x,U,Q){return x===null||x.tag!==4||x.stateNode.containerInfo!==U.containerInfo||x.stateNode.implementation!==U.implementation?(x=Mh(U,k.mode,Q),x.return=k,x):(x=c(x,U.children||[]),x.return=k,x)}function F(k,x,U,Q,at){return x===null||x.tag!==7?(x=yr(U,k.mode,Q,at),x.return=k,x):(x=c(x,U),x.return=k,x)}function Y(k,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Oh(""+x,k.mode,U),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case D:return U=pu(x.type,x.key,x.props,null,k.mode,U),Ho(U,x),U.return=k,U;case G:return x=Mh(x,k.mode,U),x.return=k,x;case A:var Q=x._init;return x=Q(x._payload),Y(k,x,U)}if(zt(x)||V(x))return x=yr(x,k.mode,U,null),x.return=k,x;if(typeof x.then=="function")return Y(k,Mu(x),U);if(x.$$typeof===ct)return Y(k,Eu(k,x),U);Vu(k,x)}return null}function z(k,x,U,Q){var at=x!==null?x.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return at!==null?null:E(k,x,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===at?w(k,x,U,Q):null;case G:return U.key===at?L(k,x,U,Q):null;case A:return at=U._init,U=at(U._payload),z(k,x,U,Q)}if(zt(U)||V(U))return at!==null?null:F(k,x,U,Q,null);if(typeof U.then=="function")return z(k,x,Mu(U),Q);if(U.$$typeof===ct)return z(k,x,Eu(k,U),Q);Vu(k,U)}return null}function j(k,x,U,Q,at){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(U)||null,E(x,k,""+Q,at);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return k=k.get(Q.key===null?U:Q.key)||null,w(x,k,Q,at);case G:return k=k.get(Q.key===null?U:Q.key)||null,L(x,k,Q,at);case A:var xt=Q._init;return Q=xt(Q._payload),j(k,x,U,Q,at)}if(zt(Q)||V(Q))return k=k.get(U)||null,F(x,k,Q,at,null);if(typeof Q.then=="function")return j(k,x,U,Mu(Q),at);if(Q.$$typeof===ct)return j(k,x,U,Eu(x,Q),at);Vu(x,Q)}return null}function Tt(k,x,U,Q){for(var at=null,xt=null,ut=x,pt=x=0,je=null;ut!==null&&pt<U.length;pt++){ut.index>pt?(je=ut,ut=null):je=ut.sibling;var Qt=z(k,ut,U[pt],Q);if(Qt===null){ut===null&&(ut=je);break}e&&ut&&Qt.alternate===null&&n(k,ut),x=f(Qt,x,pt),xt===null?at=Qt:xt.sibling=Qt,xt=Qt,ut=je}if(pt===U.length)return a(k,ut),Yt&&vr(k,pt),at;if(ut===null){for(;pt<U.length;pt++)ut=Y(k,U[pt],Q),ut!==null&&(x=f(ut,x,pt),xt===null?at=ut:xt.sibling=ut,xt=ut);return Yt&&vr(k,pt),at}for(ut=o(ut);pt<U.length;pt++)je=j(ut,k,pt,U[pt],Q),je!==null&&(e&&je.alternate!==null&&ut.delete(je.key===null?pt:je.key),x=f(je,x,pt),xt===null?at=je:xt.sibling=je,xt=je);return e&&ut.forEach(function(Ns){return n(k,Ns)}),Yt&&vr(k,pt),at}function gt(k,x,U,Q){if(U==null)throw Error(r(151));for(var at=null,xt=null,ut=x,pt=x=0,je=null,Qt=U.next();ut!==null&&!Qt.done;pt++,Qt=U.next()){ut.index>pt?(je=ut,ut=null):je=ut.sibling;var Ns=z(k,ut,Qt.value,Q);if(Ns===null){ut===null&&(ut=je);break}e&&ut&&Ns.alternate===null&&n(k,ut),x=f(Ns,x,pt),xt===null?at=Ns:xt.sibling=Ns,xt=Ns,ut=je}if(Qt.done)return a(k,ut),Yt&&vr(k,pt),at;if(ut===null){for(;!Qt.done;pt++,Qt=U.next())Qt=Y(k,Qt.value,Q),Qt!==null&&(x=f(Qt,x,pt),xt===null?at=Qt:xt.sibling=Qt,xt=Qt);return Yt&&vr(k,pt),at}for(ut=o(ut);!Qt.done;pt++,Qt=U.next())Qt=j(ut,k,pt,Qt.value,Q),Qt!==null&&(e&&Qt.alternate!==null&&ut.delete(Qt.key===null?pt:Qt.key),x=f(Qt,x,pt),xt===null?at=Qt:xt.sibling=Qt,xt=Qt);return e&&ut.forEach(function(NS){return n(k,NS)}),Yt&&vr(k,pt),at}function ie(k,x,U,Q){if(typeof U=="object"&&U!==null&&U.type===X&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:t:{for(var at=U.key;x!==null;){if(x.key===at){if(at=U.type,at===X){if(x.tag===7){a(k,x.sibling),Q=c(x,U.props.children),Q.return=k,k=Q;break t}}else if(x.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===A&&up(at)===x.type){a(k,x.sibling),Q=c(x,U.props),Ho(Q,U),Q.return=k,k=Q;break t}a(k,x);break}else n(k,x);x=x.sibling}U.type===X?(Q=yr(U.props.children,k.mode,Q,U.key),Q.return=k,k=Q):(Q=pu(U.type,U.key,U.props,null,k.mode,Q),Ho(Q,U),Q.return=k,k=Q)}return v(k);case G:t:{for(at=U.key;x!==null;){if(x.key===at)if(x.tag===4&&x.stateNode.containerInfo===U.containerInfo&&x.stateNode.implementation===U.implementation){a(k,x.sibling),Q=c(x,U.children||[]),Q.return=k,k=Q;break t}else{a(k,x);break}else n(k,x);x=x.sibling}Q=Mh(U,k.mode,Q),Q.return=k,k=Q}return v(k);case A:return at=U._init,U=at(U._payload),ie(k,x,U,Q)}if(zt(U))return Tt(k,x,U,Q);if(V(U)){if(at=V(U),typeof at!="function")throw Error(r(150));return U=at.call(U),gt(k,x,U,Q)}if(typeof U.then=="function")return ie(k,x,Mu(U),Q);if(U.$$typeof===ct)return ie(k,x,Eu(k,U),Q);Vu(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,x!==null&&x.tag===6?(a(k,x.sibling),Q=c(x,U),Q.return=k,k=Q):(a(k,x),Q=Oh(U,k.mode,Q),Q.return=k,k=Q),v(k)):a(k,x)}return function(k,x,U,Q){try{qo=0;var at=ie(k,x,U,Q);return _a=null,at}catch(ut){if(ut===Mo||ut===Su)throw ut;var xt=pn(29,ut,null,k.mode);return xt.lanes=Q,xt.return=k,xt}finally{}}}var va=cp(!0),hp=cp(!1),xn=$(null),ai=null;function ms(e){var n=e.alternate;W(Oe,Oe.current&1),W(xn,e),ai===null&&(n===null||ma.current!==null||n.memoizedState!==null)&&(ai=e)}function fp(e){if(e.tag===22){if(W(Oe,Oe.current),W(xn,e),ai===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ai=e)}}else gs()}function gs(){W(Oe,Oe.current),W(xn,xn.current)}function ji(e){it(xn),ai===e&&(ai=null),it(Oe)}var Oe=$(0);function ku(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||nd(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function df(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:S({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var mf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=En(),c=hs(o);c.payload=n,a!=null&&(c.callback=a),n=fs(e,c,o),n!==null&&(Tn(n,e,o),ko(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=En(),c=hs(o);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=fs(e,c,o),n!==null&&(Tn(n,e,o),ko(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=En(),o=hs(a);o.tag=2,n!=null&&(o.callback=n),n=fs(e,o,a),n!==null&&(Tn(n,e,a),ko(n,e,a))}};function dp(e,n,a,o,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!wo(a,o)||!wo(c,f):!0}function mp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&mf.enqueueReplaceState(n,n.state,null)}function Rr(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=S({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Pu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function gp(e){Pu(e)}function pp(e){console.error(e)}function yp(e){Pu(e)}function Uu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function _p(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function gf(e,n,a){return a=hs(a),a.tag=3,a.payload={element:null},a.callback=function(){Uu(e,n)},a}function vp(e){return e=hs(e),e.tag=3,e}function Ep(e,n,a,o){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=o.value;e.payload=function(){return c(f)},e.callback=function(){_p(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){_p(n,a,o),typeof c!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function NT(e,n,a,o,c){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Do(n,a,c,!0),a=xn.current,a!==null){switch(a.tag){case 13:return ai===null?zf():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=c,o===Hh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Bf(e,o,c)),!1;case 22:return a.flags|=65536,o===Hh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Bf(e,o,c)),!1}throw Error(r(435,a.tag))}return Bf(e,o,c),zf(),!1}if(Yt)return n=xn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==Ph&&(e=Error(r(422),{cause:o}),No(In(e,a)))):(o!==Ph&&(n=Error(r(423),{cause:o}),No(In(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,o=In(o,a),c=gf(e.stateNode,o,c),Qh(e,c),ge!==4&&(ge=2)),!1;var f=Error(r(520),{cause:o});if(f=In(f,a),$o===null?$o=[f]:$o.push(f),ge!==4&&(ge=2),n===null)return!0;o=In(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=gf(a.stateNode,o,e),Qh(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ts===null||!Ts.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=vp(c),Ep(c,e,a,o),Qh(a,c),!1}a=a.return}while(a!==null);return!1}var Tp=Error(r(461)),Le=!1;function Ge(e,n,a,o){n.child=e===null?hp(n,null,a,o):va(n,e.child,a,o)}function Sp(e,n,a,o,c){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ar(n),o=Zh(e,n,a,v,f,c),E=Jh(),e!==null&&!Le?(Wh(e,n,c),Bi(e,n,c)):(Yt&&E&&Vh(n),n.flags|=1,Ge(e,n,o,c),n.child)}function Ap(e,n,a,o,c){if(e===null){var f=a.type;return typeof f=="function"&&!xh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,bp(e,n,f,o,c)):(e=pu(a.type,null,o,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Af(e,c)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:wo,a(v,o)&&e.ref===n.ref)return Bi(e,n,c)}return n.flags|=1,e=Vi(f,o),e.ref=n.ref,e.return=n,n.child=e}function bp(e,n,a,o,c){if(e!==null){var f=e.memoizedProps;if(wo(f,o)&&e.ref===n.ref)if(Le=!1,n.pendingProps=o=f,Af(e,c))(e.flags&131072)!==0&&(Le=!0);else return n.lanes=e.lanes,Bi(e,n,c)}return pf(e,n,a,o,c)}function wp(e,n,a){var o=n.pendingProps,c=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Rp(e,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Tu(n,f!==null?f.cachePool:null),f!==null?bg(n,f):Kh(),fp(n);else return n.lanes=n.childLanes=536870912,Rp(e,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(Tu(n,f.cachePool),bg(n,f),gs(),n.memoizedState=null):(e!==null&&Tu(n,null),Kh(),gs());return Ge(e,n,c,a),n.child}function Rp(e,n,a,o){var c=qh();return c=c===null?null:{parent:xe._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},e!==null&&Tu(n,null),Kh(),fp(n),e!==null&&Do(e,n,o,!0),null}function Lu(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function pf(e,n,a,o,c){return Ar(n),a=Zh(e,n,a,o,void 0,c),o=Jh(),e!==null&&!Le?(Wh(e,n,c),Bi(e,n,c)):(Yt&&o&&Vh(n),n.flags|=1,Ge(e,n,a,c),n.child)}function Ip(e,n,a,o,c,f){return Ar(n),n.updateQueue=null,a=Rg(n,o,a,c),wg(e),o=Jh(),e!==null&&!Le?(Wh(e,n,f),Bi(e,n,f)):(Yt&&o&&Vh(n),n.flags|=1,Ge(e,n,a,f),n.child)}function Cp(e,n,a,o,c){if(Ar(n),n.stateNode===null){var f=ua,v=a.contextType;typeof v=="object"&&v!==null&&(f=Ze(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=mf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Gh(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?Ze(v):ua,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(df(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&mf.enqueueReplaceState(f,f.state,null),Uo(n,o,f,c),Po(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,w=Rr(a,E);f.props=w;var L=f.context,F=a.contextType;v=ua,typeof F=="object"&&F!==null&&(v=Ze(F));var Y=a.getDerivedStateFromProps;F=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&mp(n,f,o,v),cs=!1;var z=n.memoizedState;f.state=z,Uo(n,o,f,c),Po(),L=n.memoizedState,E||z!==L||cs?(typeof Y=="function"&&(df(n,a,Y,o),L=n.memoizedState),(w=cs||dp(n,a,w,o,z,L,v))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=w):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Fh(e,n),v=n.memoizedProps,F=Rr(a,v),f.props=F,Y=n.pendingProps,z=f.context,L=a.contextType,w=ua,typeof L=="object"&&L!==null&&(w=Ze(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Y||z!==w)&&mp(n,f,o,w),cs=!1,z=n.memoizedState,f.state=z,Uo(n,o,f,c),Po();var j=n.memoizedState;v!==Y||z!==j||cs||e!==null&&e.dependencies!==null&&vu(e.dependencies)?(typeof E=="function"&&(df(n,a,E,o),j=n.memoizedState),(F=cs||dp(n,a,F,o,z,j,w)||e!==null&&e.dependencies!==null&&vu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,j,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,j,w)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=j),f.props=o,f.state=j,f.context=w,o=F):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Lu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=va(n,e.child,null,c),n.child=va(n,null,a,c)):Ge(e,n,a,c),n.memoizedState=f.state,e=n.child):e=Bi(e,n,c),e}function Np(e,n,a,o){return Co(),n.flags|=256,Ge(e,n,a,o),n.child}var yf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(e){return{baseLanes:e,cachePool:pg()}}function vf(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=On),e}function Dp(e,n,a){var o=n.pendingProps,c=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Oe.current&2)!==0),v&&(c=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Yt){if(c?ms(n):gs(),Yt){var E=me,w;if(w=E){t:{for(w=E,E=ri;w.nodeType!==8;){if(!E){E=null;break t}if(w=Hn(w.nextSibling),w===null){E=null;break t}}E=w}E!==null?(n.memoizedState={dehydrated:E,treeContext:_r!==null?{id:ki,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},w=pn(18,null,null,0),w.stateNode=E,w.return=n,n.child=w,on=n,me=null,w=!0):w=!1}w||Tr(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return nd(E)?n.lanes=32:n.lanes=536870912,null;ji(n)}return E=o.children,o=o.fallback,c?(gs(),c=n.mode,E=zu({mode:"hidden",children:E},c),o=yr(o,c,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,c=n.child,c.memoizedState=_f(a),c.childLanes=vf(e,v,a),n.memoizedState=yf,o):(ms(n),Ef(n,E))}if(w=e.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(f)n.flags&256?(ms(n),n.flags&=-257,n=Tf(e,n,a)):n.memoizedState!==null?(gs(),n.child=e.child,n.flags|=128,n=null):(gs(),c=o.fallback,E=n.mode,o=zu({mode:"visible",children:o.children},E),c=yr(c,E,a,null),c.flags|=2,o.return=n,c.return=n,o.sibling=c,n.child=o,va(n,e.child,null,a),o=n.child,o.memoizedState=_f(a),o.childLanes=vf(e,v,a),n.memoizedState=yf,n=c);else if(ms(n),nd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(r(419)),o.stack="",o.digest=v,No({value:o,source:null,stack:null}),n=Tf(e,n,a)}else if(Le||Do(e,n,a,!1),v=(a&e.childLanes)!==0,Le||v){if(v=re,v!==null&&(o=a&-a,o=(o&42)!==0?1:ns(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==w.retryLane))throw w.retryLane=o,la(e,o),Tn(v,e,o),Tp;E.data==="$?"||zf(),n=Tf(e,n,a)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=w.treeContext,me=Hn(E.nextSibling),on=n,Yt=!0,Er=null,ri=!1,e!==null&&(Nn[Dn++]=ki,Nn[Dn++]=Pi,Nn[Dn++]=_r,ki=e.id,Pi=e.overflow,_r=n),n=Ef(n,o.children),n.flags|=4096);return n}return c?(gs(),c=o.fallback,E=n.mode,w=e.child,L=w.sibling,o=Vi(w,{mode:"hidden",children:o.children}),o.subtreeFlags=w.subtreeFlags&65011712,L!==null?c=Vi(L,c):(c=yr(c,E,a,null),c.flags|=2),c.return=n,o.return=n,o.sibling=c,n.child=o,o=c,c=n.child,E=e.child.memoizedState,E===null?E=_f(a):(w=E.cachePool,w!==null?(L=xe._currentValue,w=w.parent!==L?{parent:L,pool:L}:w):w=pg(),E={baseLanes:E.baseLanes|a,cachePool:w}),c.memoizedState=E,c.childLanes=vf(e,v,a),n.memoizedState=yf,o):(ms(n),a=e.child,e=a.sibling,a=Vi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Ef(e,n){return n=zu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function zu(e,n){return e=pn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Tf(e,n,a){return va(n,e.child,null,a),e=Ef(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function xp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Lh(e.return,n,a)}function Sf(e,n,a,o,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=c)}function Op(e,n,a){var o=n.pendingProps,c=o.revealOrder,f=o.tail;if(Ge(e,n,o.children,a),o=Oe.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xp(e,a,n);else if(e.tag===19)xp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(W(Oe,o),c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&ku(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),Sf(n,!1,c,a,f);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&ku(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Sf(n,!0,a,null,f);break;case"together":Sf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Bi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Es|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Do(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=Vi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Vi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Af(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&vu(e)))}function DT(e,n,a){switch(n.tag){case 3:st(n,n.stateNode.containerInfo),us(n,xe,e.memoizedState.cache),Co();break;case 27:case 5:Et(n);break;case 4:st(n,n.stateNode.containerInfo);break;case 10:us(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(ms(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Dp(e,n,a):(ms(n),e=Bi(e,n,a),e!==null?e.sibling:null);ms(n);break;case 19:var c=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Do(e,n,a,!1),o=(a&n.childLanes)!==0),c){if(o)return Op(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(Oe,Oe.current),o)break;return null;case 22:case 23:return n.lanes=0,wp(e,n,a);case 24:us(n,xe,e.memoizedState.cache)}return Bi(e,n,a)}function Mp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Le=!0;else{if(!Af(e,a)&&(n.flags&128)===0)return Le=!1,DT(e,n,a);Le=(e.flags&131072)!==0}else Le=!1,Yt&&(n.flags&1048576)!==0&&ug(n,_u,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,c=o._init;if(o=c(o._payload),n.type=o,typeof o=="function")xh(o)?(e=Rr(o,e),n.tag=1,n=Cp(null,n,o,e,a)):(n.tag=0,n=pf(null,n,o,e,a));else{if(o!=null){if(c=o.$$typeof,c===Lt){n.tag=11,n=Sp(null,n,o,e,a);break t}else if(c===M){n.tag=14,n=Ap(null,n,o,e,a);break t}}throw n=Te(o)||o,Error(r(306,n,""))}}return n;case 0:return pf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,c=Rr(o,n.pendingProps),Cp(e,n,o,c,a);case 3:t:{if(st(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var f=n.memoizedState;c=f.element,Fh(e,n),Uo(n,o,null,a);var v=n.memoizedState;if(o=v.cache,us(n,xe,o),o!==f.cache&&zh(n,[xe],a,!0),Po(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Np(e,n,o,a);break t}else if(o!==c){c=In(Error(r(424)),n),No(c),n=Np(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(me=Hn(e.firstChild),on=n,Yt=!0,Er=null,ri=!0,a=hp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Co(),o===c){n=Bi(e,n,a);break t}Ge(e,n,o,a)}n=n.child}return n;case 26:return Lu(e,n),e===null?(a=Uy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Yt||(a=n.type,e=n.pendingProps,o=Wu(vt.current).createElement(a),o[Ce]=n,o[Se]=e,Qe(o,a,e),ye(o),n.stateNode=o):n.memoizedState=Uy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Et(n),e===null&&Yt&&(o=n.stateNode=Vy(n.type,n.pendingProps,vt.current),on=n,ri=!0,c=me,bs(n.type)?(id=c,me=Hn(o.firstChild)):me=c),Ge(e,n,n.pendingProps.children,a),Lu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Yt&&((c=o=me)&&(o=sS(o,n.type,n.pendingProps,ri),o!==null?(n.stateNode=o,on=n,me=Hn(o.firstChild),ri=!1,c=!0):c=!1),c||Tr(n)),Et(n),c=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,Wf(c,f)?o=null:v!==null&&Wf(c,v)&&(n.flags|=32),n.memoizedState!==null&&(c=Zh(e,n,ST,null,null,a),rl._currentValue=c),Lu(e,n),Ge(e,n,o,a),n.child;case 6:return e===null&&Yt&&((e=a=me)&&(a=rS(a,n.pendingProps,ri),a!==null?(n.stateNode=a,on=n,me=null,e=!0):e=!1),e||Tr(n)),null;case 13:return Dp(e,n,a);case 4:return st(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=va(n,null,o,a):Ge(e,n,o,a),n.child;case 11:return Sp(e,n,n.type,n.pendingProps,a);case 7:return Ge(e,n,n.pendingProps,a),n.child;case 8:return Ge(e,n,n.pendingProps.children,a),n.child;case 12:return Ge(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,us(n,n.type,o.value),Ge(e,n,o.children,a),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,Ar(n),c=Ze(c),o=o(c),n.flags|=1,Ge(e,n,o,a),n.child;case 14:return Ap(e,n,n.type,n.pendingProps,a);case 15:return bp(e,n,n.type,n.pendingProps,a);case 19:return Op(e,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},e===null?(a=zu(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Vi(e.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return wp(e,n,a);case 24:return Ar(n),o=Ze(xe),e===null?(c=qh(),c===null&&(c=re,f=jh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),n.memoizedState={parent:o,cache:c},Gh(n),us(n,xe,c)):((e.lanes&a)!==0&&(Fh(e,n),Uo(n,null,null,a),Po()),c=e.memoizedState,f=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),us(n,xe,o)):(o=f.cache,us(n,xe,o),o!==c.cache&&zh(n,[xe],a,!0))),Ge(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function qi(e){e.flags|=4}function Vp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!qy(n)){if(n=xn.current,n!==null&&((Ht&4194048)===Ht?ai!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||n!==ai))throw Vo=Hh,yg;e.flags|=8192}}function ju(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ao():536870912,e.lanes|=n,Aa|=n)}function Go(e,n){if(!Yt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function he(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function xT(e,n,a){var o=n.pendingProps;switch(kh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(n),null;case 1:return he(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Li(xe),bt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Io(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,fg())),he(n),null;case 26:return a=n.memoizedState,e===null?(qi(n),a!==null?(he(n),Vp(n,a)):(he(n),n.flags&=-16777217)):a?a!==e.memoizedState?(qi(n),he(n),Vp(n,a)):(he(n),n.flags&=-16777217):(e.memoizedProps!==o&&qi(n),he(n),n.flags&=-16777217),null;case 27:Ot(n),a=vt.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return he(n),null}e=ht.current,Io(n)?cg(n):(e=Vy(c,o,a),n.stateNode=e,qi(n))}return he(n),null;case 5:if(Ot(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return he(n),null}if(e=ht.current,Io(n))cg(n);else{switch(c=Wu(vt.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?c.createElement("select",{is:o.is}):c.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?c.createElement(a,{is:o.is}):c.createElement(a)}}e[Ce]=n,e[Se]=o;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;t:switch(Qe(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&qi(n)}}return he(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=vt.current,Io(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,c=on,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}e[Ce]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Iy(e.nodeValue,a)),e||Tr(n)}else e=Wu(e).createTextNode(o),e[Ce]=n,n.stateNode=e}return he(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Io(n),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(r(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[Ce]=n}else Co(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;he(n),c=!1}else c=fg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(ji(n),n):(ji(n),null)}if(ji(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),ju(n,n.updateQueue),he(n),null;case 4:return bt(),e===null&&Kf(n.stateNode.containerInfo),he(n),null;case 10:return Li(n.type),he(n),null;case 19:if(it(Oe),c=n.memoizedState,c===null)return he(n),null;if(o=(n.flags&128)!==0,f=c.rendering,f===null)if(o)Go(c,!1);else{if(ge!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=ku(e),f!==null){for(n.flags|=128,Go(c,!1),e=f.updateQueue,n.updateQueue=e,ju(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)lg(a,e),a=a.sibling;return W(Oe,Oe.current&1|2),n.child}e=e.sibling}c.tail!==null&&ln()>Hu&&(n.flags|=128,o=!0,Go(c,!1),n.lanes=4194304)}else{if(!o)if(e=ku(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,ju(n,e),Go(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Yt)return he(n),null}else 2*ln()-c.renderingStartTime>Hu&&a!==536870912&&(n.flags|=128,o=!0,Go(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(e=c.last,e!==null?e.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=ln(),n.sibling=null,e=Oe.current,W(Oe,o?e&1|2:e&1),n):(he(n),null);case 22:case 23:return ji(n),Xh(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(he(n),n.subtreeFlags&6&&(n.flags|=8192)):he(n),a=n.updateQueue,a!==null&&ju(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&it(br),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Li(xe),he(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function OT(e,n){switch(kh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Li(xe),bt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ot(n),null;case 13:if(ji(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Co()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return it(Oe),null;case 4:return bt(),null;case 10:return Li(n.type),null;case 22:case 23:return ji(n),Xh(),e!==null&&it(br),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Li(xe),null;case 25:return null;default:return null}}function kp(e,n){switch(kh(n),n.tag){case 3:Li(xe),bt();break;case 26:case 27:case 5:Ot(n);break;case 4:bt();break;case 13:ji(n);break;case 19:it(Oe);break;case 10:Li(n.type);break;case 22:case 23:ji(n),Xh(),e!==null&&it(br);break;case 24:Li(xe)}}function Fo(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var c=o.next;a=c;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==c)}}catch(E){se(n,n.return,E)}}function ps(e,n,a){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,c=n;var w=a,L=E;try{L()}catch(F){se(c,w,F)}}}o=o.next}while(o!==f)}}catch(F){se(n,n.return,F)}}function Pp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Ag(n,a)}catch(o){se(e,e.return,o)}}}function Up(e,n,a){a.props=Rr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){se(e,n,o)}}function Qo(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(c){se(e,n,c)}}function oi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(c){se(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){se(e,n,c)}else a.current=null}function Lp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(c){se(e,e.return,c)}}function bf(e,n,a){try{var o=e.stateNode;WT(o,e.type,a,n),o[Se]=n}catch(c){se(e,e.return,c)}}function zp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bs(e.type)||e.tag===4}function wf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ju));else if(o!==4&&(o===27&&bs(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Rf(e,n,a),e=e.sibling;e!==null;)Rf(e,n,a),e=e.sibling}function Bu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&bs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Bu(e,n,a),e=e.sibling;e!==null;)Bu(e,n,a),e=e.sibling}function jp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Qe(n,o,a),n[Ce]=e,n[Se]=a}catch(f){se(e,e.return,f)}}var Hi=!1,ve=!1,If=!1,Bp=typeof WeakSet=="function"?WeakSet:Set,ze=null;function MT(e,n){if(e=e.containerInfo,Zf=rc,e=Jm(e),bh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var c=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,w=-1,L=0,F=0,Y=e,z=null;e:for(;;){for(var j;Y!==a||c!==0&&Y.nodeType!==3||(E=v+c),Y!==f||o!==0&&Y.nodeType!==3||(w=v+o),Y.nodeType===3&&(v+=Y.nodeValue.length),(j=Y.firstChild)!==null;)z=Y,Y=j;for(;;){if(Y===e)break e;if(z===a&&++L===c&&(E=v),z===f&&++F===o&&(w=v),(j=Y.nextSibling)!==null)break;Y=z,z=Y.parentNode}Y=j}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jf={focusedElem:e,selectionRange:a},rc=!1,ze=n;ze!==null;)if(n=ze,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,ze=e;else for(;ze!==null;){switch(n=ze,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,c=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Tt=Rr(a.type,c,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Tt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(gt){se(a,a.return,gt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)ed(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,ze=e;break}ze=n.return}}function qp(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ys(e,a),o&4&&Fo(5,a);break;case 1:if(ys(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){se(a,a.return,v)}else{var c=Rr(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){se(a,a.return,v)}}o&64&&Pp(a),o&512&&Qo(a,a.return);break;case 3:if(ys(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Ag(e,n)}catch(v){se(a,a.return,v)}}break;case 27:n===null&&o&4&&jp(a);case 26:case 5:ys(e,a),n===null&&o&4&&Lp(a),o&512&&Qo(a,a.return);break;case 12:ys(e,a);break;case 13:ys(e,a),o&4&&Fp(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=qT.bind(null,a),aS(e,a))));break;case 22:if(o=a.memoizedState!==null||Hi,!o){n=n!==null&&n.memoizedState!==null||ve,c=Hi;var f=ve;Hi=o,(ve=n)&&!f?_s(e,a,(a.subtreeFlags&8772)!==0):ys(e,a),Hi=c,ve=f}break;case 30:break;default:ys(e,a)}}function Hp(e){var n=e.alternate;n!==null&&(e.alternate=null,Hp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&rs(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ue=null,cn=!1;function Gi(e,n,a){for(a=a.child;a!==null;)Gp(e,n,a),a=a.sibling}function Gp(e,n,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(de,a)}catch{}switch(a.tag){case 26:ve||oi(a,n),Gi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ve||oi(a,n);var o=ue,c=cn;bs(a.type)&&(ue=a.stateNode,cn=!1),Gi(e,n,a),el(a.stateNode),ue=o,cn=c;break;case 5:ve||oi(a,n);case 6:if(o=ue,c=cn,ue=null,Gi(e,n,a),ue=o,cn=c,ue!==null)if(cn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(a.stateNode)}catch(f){se(a,n,f)}else try{ue.removeChild(a.stateNode)}catch(f){se(a,n,f)}break;case 18:ue!==null&&(cn?(e=ue,Oy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ul(e)):Oy(ue,a.stateNode));break;case 4:o=ue,c=cn,ue=a.stateNode.containerInfo,cn=!0,Gi(e,n,a),ue=o,cn=c;break;case 0:case 11:case 14:case 15:ve||ps(2,a,n),ve||ps(4,a,n),Gi(e,n,a);break;case 1:ve||(oi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Up(a,n,o)),Gi(e,n,a);break;case 21:Gi(e,n,a);break;case 22:ve=(o=ve)||a.memoizedState!==null,Gi(e,n,a),ve=o;break;default:Gi(e,n,a)}}function Fp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ul(e)}catch(a){se(n,n.return,a)}}function VT(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Bp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Bp),n;default:throw Error(r(435,e.tag))}}function Cf(e,n){var a=VT(e);n.forEach(function(o){var c=HT.bind(null,e,o);a.has(o)||(a.add(o),o.then(c,c))})}function yn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var c=a[o],f=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(bs(E.type)){ue=E.stateNode,cn=!1;break t}break;case 5:ue=E.stateNode,cn=!1;break t;case 3:case 4:ue=E.stateNode.containerInfo,cn=!0;break t}E=E.return}if(ue===null)throw Error(r(160));Gp(f,v,c),ue=null,cn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Qp(n,e),n=n.sibling}var qn=null;function Qp(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(n,e),_n(e),o&4&&(ps(3,e,e.return),Fo(3,e),ps(5,e,e.return));break;case 1:yn(n,e),_n(e),o&512&&(ve||a===null||oi(a,a.return)),o&64&&Hi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var c=qn;if(yn(n,e),_n(e),o&512&&(ve||a===null||oi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,c=c.ownerDocument||c;e:switch(o){case"title":f=c.getElementsByTagName("title")[0],(!f||f[er]||f[Ce]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(o),c.head.insertBefore(f,c.querySelector("head > title"))),Qe(f,o,a),f[Ce]=e,ye(f),o=f;break t;case"link":var v=jy("link","href",c).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=c.createElement(o),Qe(f,o,a),c.head.appendChild(f);break;case"meta":if(v=jy("meta","content",c).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=c.createElement(o),Qe(f,o,a),c.head.appendChild(f);break;default:throw Error(r(468,o))}f[Ce]=e,ye(f),o=f}e.stateNode=o}else By(c,e.type,e.stateNode);else e.stateNode=zy(c,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?By(c,e.type,e.stateNode):zy(c,o,e.memoizedProps)):o===null&&e.stateNode!==null&&bf(e,e.memoizedProps,a.memoizedProps)}break;case 27:yn(n,e),_n(e),o&512&&(ve||a===null||oi(a,a.return)),a!==null&&o&4&&bf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(yn(n,e),_n(e),o&512&&(ve||a===null||oi(a,a.return)),e.flags&32){c=e.stateNode;try{An(c,"")}catch(j){se(e,e.return,j)}}o&4&&e.stateNode!=null&&(c=e.memoizedProps,bf(e,c,a!==null?a.memoizedProps:c)),o&1024&&(If=!0);break;case 6:if(yn(n,e),_n(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(j){se(e,e.return,j)}}break;case 3:if(nc=null,c=qn,qn=tc(n.containerInfo),yn(n,e),qn=c,_n(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{ul(n.containerInfo)}catch(j){se(e,e.return,j)}If&&(If=!1,Yp(e));break;case 4:o=qn,qn=tc(e.stateNode.containerInfo),yn(n,e),_n(e),qn=o;break;case 12:yn(n,e),_n(e);break;case 13:yn(n,e),_n(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vf=ln()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Cf(e,o)));break;case 22:c=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,L=Hi,F=ve;if(Hi=L||c,ve=F||w,yn(n,e),ve=F,Hi=L,_n(e),o&8192)t:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||w||Hi||ve||Ir(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){w=a=n;try{if(f=w.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var Y=w.memoizedProps.style,z=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(j){se(w,w.return,j)}}}else if(n.tag===6){if(a===null){w=n;try{w.stateNode.nodeValue=c?"":w.memoizedProps}catch(j){se(w,w.return,j)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Cf(e,a))));break;case 19:yn(n,e),_n(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Cf(e,o)));break;case 30:break;case 21:break;default:yn(n,e),_n(e)}}function _n(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(zp(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var c=a.stateNode,f=wf(e);Bu(e,f,c);break;case 5:var v=a.stateNode;a.flags&32&&(An(v,""),a.flags&=-33);var E=wf(e);Bu(e,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,L=wf(e);Rf(e,L,w);break;default:throw Error(r(161))}}catch(F){se(e,e.return,F)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Yp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Yp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ys(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)qp(e,n.alternate,n),n=n.sibling}function Ir(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ps(4,n,n.return),Ir(n);break;case 1:oi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Up(n,n.return,a),Ir(n);break;case 27:el(n.stateNode);case 26:case 5:oi(n,n.return),Ir(n);break;case 22:n.memoizedState===null&&Ir(n);break;case 30:Ir(n);break;default:Ir(n)}e=e.sibling}}function _s(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=e,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:_s(c,f,a),Fo(4,f);break;case 1:if(_s(c,f,a),o=f,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){se(o,o.return,L)}if(o=f,c=o.updateQueue,c!==null){var E=o.stateNode;try{var w=c.shared.hiddenCallbacks;if(w!==null)for(c.shared.hiddenCallbacks=null,c=0;c<w.length;c++)Sg(w[c],E)}catch(L){se(o,o.return,L)}}a&&v&64&&Pp(f),Qo(f,f.return);break;case 27:jp(f);case 26:case 5:_s(c,f,a),a&&o===null&&v&4&&Lp(f),Qo(f,f.return);break;case 12:_s(c,f,a);break;case 13:_s(c,f,a),a&&v&4&&Fp(c,f);break;case 22:f.memoizedState===null&&_s(c,f,a),Qo(f,f.return);break;case 30:break;default:_s(c,f,a)}n=n.sibling}}function Nf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&xo(a))}function Df(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xo(e))}function li(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Kp(e,n,a,o),n=n.sibling}function Kp(e,n,a,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:li(e,n,a,o),c&2048&&Fo(9,n);break;case 1:li(e,n,a,o);break;case 3:li(e,n,a,o),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xo(e)));break;case 12:if(c&2048){li(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){se(n,n.return,w)}}else li(e,n,a,o);break;case 13:li(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?li(e,n,a,o):Yo(e,n):f._visibility&2?li(e,n,a,o):(f._visibility|=2,Ea(e,n,a,o,(n.subtreeFlags&10256)!==0)),c&2048&&Nf(v,n);break;case 24:li(e,n,a,o),c&2048&&Df(n.alternate,n);break;default:li(e,n,a,o)}}function Ea(e,n,a,o,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,v=n,E=a,w=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ea(f,v,E,w,c),Fo(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?Ea(f,v,E,w,c):Yo(f,v):(F._visibility|=2,Ea(f,v,E,w,c)),c&&L&2048&&Nf(v.alternate,v);break;case 24:Ea(f,v,E,w,c),c&&L&2048&&Df(v.alternate,v);break;default:Ea(f,v,E,w,c)}n=n.sibling}}function Yo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,c=o.flags;switch(o.tag){case 22:Yo(a,o),c&2048&&Nf(o.alternate,o);break;case 24:Yo(a,o),c&2048&&Df(o.alternate,o);break;default:Yo(a,o)}n=n.sibling}}var Ko=8192;function Ta(e){if(e.subtreeFlags&Ko)for(e=e.child;e!==null;)Xp(e),e=e.sibling}function Xp(e){switch(e.tag){case 26:Ta(e),e.flags&Ko&&e.memoizedState!==null&&vS(qn,e.memoizedState,e.memoizedProps);break;case 5:Ta(e);break;case 3:case 4:var n=qn;qn=tc(e.stateNode.containerInfo),Ta(e),qn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ko,Ko=16777216,Ta(e),Ko=n):Ta(e));break;default:Ta(e)}}function $p(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Xo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ze=o,Jp(o,e)}$p(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zp(e),e=e.sibling}function Zp(e){switch(e.tag){case 0:case 11:case 15:Xo(e),e.flags&2048&&ps(9,e,e.return);break;case 3:Xo(e);break;case 12:Xo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,qu(e)):Xo(e);break;default:Xo(e)}}function qu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ze=o,Jp(o,e)}$p(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ps(8,n,n.return),qu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,qu(n));break;default:qu(n)}e=e.sibling}}function Jp(e,n){for(;ze!==null;){var a=ze;switch(a.tag){case 0:case 11:case 15:ps(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:xo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ze=o;else t:for(a=e;ze!==null;){o=ze;var c=o.sibling,f=o.return;if(Hp(o),o===a){ze=null;break t}if(c!==null){c.return=f,ze=c;break t}ze=f}}}var kT={getCacheForType:function(e){var n=Ze(xe),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},PT=typeof WeakMap=="function"?WeakMap:Map,Jt=0,re=null,Mt=null,Ht=0,Wt=0,vn=null,vs=!1,Sa=!1,xf=!1,Fi=0,ge=0,Es=0,Cr=0,Of=0,On=0,Aa=0,$o=null,hn=null,Mf=!1,Vf=0,Hu=1/0,Gu=null,Ts=null,Fe=0,Ss=null,ba=null,wa=0,kf=0,Pf=null,Wp=null,Zo=0,Uf=null;function En(){if((Jt&2)!==0&&Ht!==0)return Ht&-Ht;if(H.T!==null){var e=fa;return e!==0?e:Gf()}return is()}function ty(){On===0&&(On=(Ht&536870912)===0||Yt?ro():536870912);var e=xn.current;return e!==null&&(e.flags|=32),On}function Tn(e,n,a){(e===re&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)&&(Ra(e,0),As(e,Ht,On,!1)),Ai(e,a),((Jt&2)===0||e!==re)&&(e===re&&((Jt&2)===0&&(Cr|=a),ge===4&&As(e,Ht,On,!1)),ui(e))}function ey(e,n,a){if((Jt&6)!==0)throw Error(r(327));var o=!a&&(n&124)===0&&(n&e.expiredLanes)===0||tr(e,n),c=o?zT(e,n):jf(e,n,!0),f=o;do{if(c===0){Sa&&!o&&As(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!UT(a)){c=jf(e,n,!1),f=!1;continue}if(c===2){if(f=n,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;c=$o;var w=E.current.memoizedState.isDehydrated;if(w&&(Ra(E,v).flags|=256),v=jf(E,v,!1),v!==2){if(xf&&!w){E.errorRecoveryDisabledLanes|=f,Cr|=f,c=4;break t}f=hn,hn=c,f!==null&&(hn===null?hn=f:hn.push.apply(hn,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){Ra(e,0),As(e,n,0,!0);break}t:{switch(o=e,f=c,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:As(o,n,On,!vs);break t;case 2:hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(c=Vf+300-ln(),10<c)){if(As(o,n,On,!vs),Hr(o,0,!0)!==0)break t;o.timeoutHandle=Dy(ny.bind(null,o,a,hn,Gu,Mf,n,On,Cr,Aa,vs,f,2,-0,0),c);break t}ny(o,a,hn,Gu,Mf,n,On,Cr,Aa,vs,f,0,-0,0)}}break}while(!0);ui(e)}function ny(e,n,a,o,c,f,v,E,w,L,F,Y,z,j){if(e.timeoutHandle=-1,Y=n.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(sl={stylesheets:null,count:0,unsuspend:_S},Xp(n),Y=ES(),Y!==null)){e.cancelPendingCommit=Y(uy.bind(null,e,n,f,a,o,c,v,E,w,F,1,z,j)),As(e,f,v,!L);return}uy(e,n,f,a,o,c,v,E,w)}function UT(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var c=a[o],f=c.getSnapshot;c=c.value;try{if(!gn(f(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function As(e,n,a,o){n&=~Of,n&=~Cr,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var c=n;0<c;){var f=31-$e(c),v=1<<f;o[f]=-1,c&=~v}a!==0&&Kn(e,a,n)}function Fu(){return(Jt&6)===0?(Jo(0),!1):!0}function Lf(){if(Mt!==null){if(Wt===0)var e=Mt.return;else e=Mt,Ui=Sr=null,tf(e),_a=null,qo=0,e=Mt;for(;e!==null;)kp(e.alternate,e),e=e.return;Mt=null}}function Ra(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,eS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Lf(),re=e,Mt=a=Vi(e.current,null),Ht=n,Wt=0,vn=null,vs=!1,Sa=tr(e,n),xf=!1,Aa=On=Of=Cr=Es=ge=0,hn=$o=null,Mf=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var c=31-$e(o),f=1<<c;n|=e[c],o&=~f}return Fi=n,du(),a}function iy(e,n){Dt=null,H.H=Ou,n===Mo||n===Su?(n=Eg(),Wt=3):n===yg?(n=Eg(),Wt=4):Wt=n===Tp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,vn=n,Mt===null&&(ge=1,Uu(e,In(n,e.current)))}function sy(){var e=H.H;return H.H=Ou,e===null?Ou:e}function ry(){var e=H.A;return H.A=kT,e}function zf(){ge=4,vs||(Ht&4194048)!==Ht&&xn.current!==null||(Sa=!0),(Es&134217727)===0&&(Cr&134217727)===0||re===null||As(re,Ht,On,!1)}function jf(e,n,a){var o=Jt;Jt|=2;var c=sy(),f=ry();(re!==e||Ht!==n)&&(Gu=null,Ra(e,n)),n=!1;var v=ge;t:do try{if(Wt!==0&&Mt!==null){var E=Mt,w=vn;switch(Wt){case 8:Lf(),v=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(n=!0);var L=Wt;if(Wt=0,vn=null,Ia(e,E,w,L),a&&Sa){v=0;break t}break;default:L=Wt,Wt=0,vn=null,Ia(e,E,w,L)}}LT(),v=ge;break}catch(F){iy(e,F)}while(!0);return n&&e.shellSuspendCounter++,Ui=Sr=null,Jt=o,H.H=c,H.A=f,Mt===null&&(re=null,Ht=0,du()),v}function LT(){for(;Mt!==null;)ay(Mt)}function zT(e,n){var a=Jt;Jt|=2;var o=sy(),c=ry();re!==e||Ht!==n?(Gu=null,Hu=ln()+500,Ra(e,n)):Sa=tr(e,n);t:do try{if(Wt!==0&&Mt!==null){n=Mt;var f=vn;e:switch(Wt){case 1:Wt=0,vn=null,Ia(e,n,f,1);break;case 2:case 9:if(_g(f)){Wt=0,vn=null,oy(n);break}n=function(){Wt!==2&&Wt!==9||re!==e||(Wt=7),ui(e)},f.then(n,n);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:_g(f)?(Wt=0,vn=null,oy(n)):(Wt=0,vn=null,Ia(e,n,f,7));break;case 5:var v=null;switch(Mt.tag){case 26:v=Mt.memoizedState;case 5:case 27:var E=Mt;if(!v||qy(v)){Wt=0,vn=null;var w=E.sibling;if(w!==null)Mt=w;else{var L=E.return;L!==null?(Mt=L,Qu(L)):Mt=null}break e}}Wt=0,vn=null,Ia(e,n,f,5);break;case 6:Wt=0,vn=null,Ia(e,n,f,6);break;case 8:Lf(),ge=6;break t;default:throw Error(r(462))}}jT();break}catch(F){iy(e,F)}while(!0);return Ui=Sr=null,H.H=o,H.A=c,Jt=a,Mt!==null?0:(re=null,Ht=0,du(),ge)}function jT(){for(;Mt!==null&&!Un();)ay(Mt)}function ay(e){var n=Mp(e.alternate,e,Fi);e.memoizedProps=e.pendingProps,n===null?Qu(e):Mt=n}function oy(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Ip(a,n,n.pendingProps,n.type,void 0,Ht);break;case 11:n=Ip(a,n,n.pendingProps,n.type.render,n.ref,Ht);break;case 5:tf(n);default:kp(a,n),n=Mt=lg(n,Fi),n=Mp(a,n,Fi)}e.memoizedProps=e.pendingProps,n===null?Qu(e):Mt=n}function Ia(e,n,a,o){Ui=Sr=null,tf(n),_a=null,qo=0;var c=n.return;try{if(NT(e,c,n,a,Ht)){ge=1,Uu(e,In(a,e.current)),Mt=null;return}}catch(f){if(c!==null)throw Mt=c,f;ge=1,Uu(e,In(a,e.current)),Mt=null;return}n.flags&32768?(Yt||o===1?e=!0:Sa||(Ht&536870912)!==0?e=!1:(vs=e=!0,(o===2||o===9||o===3||o===6)&&(o=xn.current,o!==null&&o.tag===13&&(o.flags|=16384))),ly(n,e)):Qu(n)}function Qu(e){var n=e;do{if((n.flags&32768)!==0){ly(n,vs);return}e=n.return;var a=xT(n.alternate,n,Fi);if(a!==null){Mt=a;return}if(n=n.sibling,n!==null){Mt=n;return}Mt=n=e}while(n!==null);ge===0&&(ge=5)}function ly(e,n){do{var a=OT(e.alternate,e);if(a!==null){a.flags&=32767,Mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=a}while(e!==null);ge=6,Mt=null}function uy(e,n,a,o,c,f,v,E,w){e.cancelPendingCommit=null;do Yu();while(Fe!==0);if((Jt&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Nh,oo(e,a,f,v,E,w),e===re&&(Mt=re=null,Ht=0),ba=n,Ss=e,wa=a,kf=f,Pf=c,Wp=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,GT($s,function(){return my(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,c=nt.p,nt.p=2,v=Jt,Jt|=4;try{MT(e,n,a)}finally{Jt=v,nt.p=c,H.T=o}}Fe=1,cy(),hy(),fy()}}function cy(){if(Fe===1){Fe=0;var e=Ss,n=ba,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=nt.p;nt.p=2;var c=Jt;Jt|=4;try{Qp(n,e);var f=Jf,v=Jm(e.containerInfo),E=f.focusedElem,w=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Zm(E.ownerDocument.documentElement,E)){if(w!==null&&bh(E)){var L=w.start,F=w.end;if(F===void 0&&(F=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(F,E.value.length);else{var Y=E.ownerDocument||document,z=Y&&Y.defaultView||window;if(z.getSelection){var j=z.getSelection(),Tt=E.textContent.length,gt=Math.min(w.start,Tt),ie=w.end===void 0?gt:Math.min(w.end,Tt);!j.extend&&gt>ie&&(v=ie,ie=gt,gt=v);var k=$m(E,gt),x=$m(E,ie);if(k&&x&&(j.rangeCount!==1||j.anchorNode!==k.node||j.anchorOffset!==k.offset||j.focusNode!==x.node||j.focusOffset!==x.offset)){var U=Y.createRange();U.setStart(k.node,k.offset),j.removeAllRanges(),gt>ie?(j.addRange(U),j.extend(x.node,x.offset)):(U.setEnd(x.node,x.offset),j.addRange(U))}}}}for(Y=[],j=E;j=j.parentNode;)j.nodeType===1&&Y.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var Q=Y[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}rc=!!Zf,Jf=Zf=null}finally{Jt=c,nt.p=o,H.T=a}}e.current=n,Fe=2}}function hy(){if(Fe===2){Fe=0;var e=Ss,n=ba,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=nt.p;nt.p=2;var c=Jt;Jt|=4;try{qp(e,n.alternate,n)}finally{Jt=c,nt.p=o,H.T=a}}Fe=3}}function fy(){if(Fe===4||Fe===3){Fe=0,Ei();var e=Ss,n=ba,a=wa,o=Wp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Fe=5:(Fe=0,ba=Ss=null,dy(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ts=null),Gr(a),n=n.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(de,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=H.T,c=nt.p,nt.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=n,nt.p=c}}(wa&3)!==0&&Yu(),ui(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===Uf?Zo++:(Zo=0,Uf=e):Zo=0,Jo(0)}}function dy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,xo(n)))}function Yu(e){return cy(),hy(),fy(),my()}function my(){if(Fe!==5)return!1;var e=Ss,n=kf;kf=0;var a=Gr(wa),o=H.T,c=nt.p;try{nt.p=32>a?32:a,H.T=null,a=Pf,Pf=null;var f=Ss,v=wa;if(Fe=0,ba=Ss=null,wa=0,(Jt&6)!==0)throw Error(r(331));var E=Jt;if(Jt|=4,Zp(f.current),Kp(f,f.current,v,a),Jt=E,Jo(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(de,f)}catch{}return!0}finally{nt.p=c,H.T=o,dy(e,n)}}function gy(e,n,a){n=In(a,n),n=gf(e.stateNode,n,2),e=fs(e,n,2),e!==null&&(Ai(e,2),ui(e))}function se(e,n,a){if(e.tag===3)gy(e,e,a);else for(;n!==null;){if(n.tag===3){gy(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ts===null||!Ts.has(o))){e=In(a,e),a=vp(2),o=fs(n,a,2),o!==null&&(Ep(a,o,n,e),Ai(o,2),ui(o));break}}n=n.return}}function Bf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new PT;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(a)||(xf=!0,c.add(a),e=BT.bind(null,e,n,a),n.then(e,e))}function BT(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,re===e&&(Ht&a)===a&&(ge===4||ge===3&&(Ht&62914560)===Ht&&300>ln()-Vf?(Jt&2)===0&&Ra(e,0):Of|=a,Aa===Ht&&(Aa=0)),ui(e)}function py(e,n){n===0&&(n=ao()),e=la(e,n),e!==null&&(Ai(e,n),ui(e))}function qT(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),py(e,a)}function HT(e,n){var a=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),py(e,a)}function GT(e,n){return Ft(e,n)}var Ku=null,Ca=null,qf=!1,Xu=!1,Hf=!1,Nr=0;function ui(e){e!==Ca&&e.next===null&&(Ca===null?Ku=Ca=e:Ca=Ca.next=e),Xu=!0,qf||(qf=!0,QT())}function Jo(e,n){if(!Hf&&Xu){Hf=!0;do for(var a=!1,o=Ku;o!==null;){if(e!==0){var c=o.pendingLanes;if(c===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-$e(42|e)+1)-1,f&=c&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ey(o,f))}else f=Ht,f=Hr(o,o===re?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||tr(o,f)||(a=!0,Ey(o,f));o=o.next}while(a);Hf=!1}}function FT(){yy()}function yy(){Xu=qf=!1;var e=0;Nr!==0&&(tS()&&(e=Nr),Nr=0);for(var n=ln(),a=null,o=Ku;o!==null;){var c=o.next,f=_y(o,n);f===0?(o.next=null,a===null?Ku=c:a.next=c,c===null&&(Ca=a)):(a=o,(e!==0||(f&3)!==0)&&(Xu=!0)),o=c}Jo(e)}function _y(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-$e(f),E=1<<v,w=c[v];w===-1?((E&a)===0||(E&o)!==0)&&(c[v]=so(E,n)):w<=n&&(e.expiredLanes|=E),f&=~E}if(n=re,a=Ht,a=Hr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ce(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||tr(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&ce(o),Gr(a)){case 2:case 8:a=Yn;break;case 32:a=$s;break;case 268435456:a=qr;break;default:a=$s}return o=vy.bind(null,e),a=Ft(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&ce(o),e.callbackPriority=2,e.callbackNode=null,2}function vy(e,n){if(Fe!==0&&Fe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Yu()&&e.callbackNode!==a)return null;var o=Ht;return o=Hr(e,e===re?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(ey(e,o,n),_y(e,ln()),e.callbackNode!=null&&e.callbackNode===a?vy.bind(null,e):null)}function Ey(e,n){if(Yu())return null;ey(e,n,!0)}function QT(){nS(function(){(Jt&6)!==0?Ft(Ti,FT):yy()})}function Gf(){return Nr===0&&(Nr=ro()),Nr}function Ty(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$r(""+e)}function Sy(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function YT(e,n,a,o,c){if(n==="submit"&&a&&a.stateNode===c){var f=Ty((c[Se]||null).action),v=o.submitter;v&&(n=(n=v[Se]||null)?Ty(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new Zr("action","action",null,o,c);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Nr!==0){var w=v?Sy(c,v):new FormData(c);cf(a,{pending:!0,data:w,method:c.method,action:f},null,w)}}else typeof f=="function"&&(E.preventDefault(),w=v?Sy(c,v):new FormData(c),cf(a,{pending:!0,data:w,method:c.method,action:f},f,w))},currentTarget:c}]})}}for(var Ff=0;Ff<Ch.length;Ff++){var Qf=Ch[Ff],KT=Qf.toLowerCase(),XT=Qf[0].toUpperCase()+Qf.slice(1);Bn(KT,"on"+XT)}Bn(eg,"onAnimationEnd"),Bn(ng,"onAnimationIteration"),Bn(ig,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(fT,"onTransitionRun"),Bn(dT,"onTransitionStart"),Bn(mT,"onTransitionCancel"),Bn(sg,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function Ay(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],c=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],w=E.instance,L=E.currentTarget;if(E=E.listener,w!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(F){Pu(F)}c.currentTarget=null,f=w}else for(v=0;v<o.length;v++){if(E=o[v],w=E.instance,L=E.currentTarget,E=E.listener,w!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(F){Pu(F)}c.currentTarget=null,f=w}}}}function Vt(e,n){var a=n[uo];a===void 0&&(a=n[uo]=new Set);var o=e+"__bubble";a.has(o)||(by(n,e,2,!1),a.add(o))}function Yf(e,n,a){var o=0;n&&(o|=4),by(a,e,o,n)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Kf(e){if(!e[$u]){e[$u]=!0,co.forEach(function(a){a!=="selectionchange"&&($T.has(a)||Yf(a,!1,e),Yf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[$u]||(n[$u]=!0,Yf("selectionchange",!1,n))}}function by(e,n,a,o){switch(Ky(n)){case 2:var c=AS;break;case 8:c=bS;break;default:c=ld}a=c.bind(null,n,a,e),c=void 0,!wn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function Xf(e,n,a,o,c){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===c)break;if(v===4)for(v=o.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;E!==null;){if(v=bi(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){o=f=v;continue t}E=E.parentNode}}o=o.return}Jl(function(){var L=f,F=bn(a),Y=[];t:{var z=rg.get(e);if(z!==void 0){var j=Zr,Tt=e;switch(e){case"keypress":if(ti(a)===0)break t;case"keydown":case"keyup":j=ia;break;case"focusin":Tt="focus",j=ta;break;case"focusout":Tt="blur",j=ta;break;case"beforeblur":case"afterblur":j=ta;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=au;break;case eg:case ng:case ig:j=ea;break;case sg:j=lu;break;case"scroll":case"scrollend":j=Wl;break;case"wheel":j=sa;break;case"copy":case"cut":case"paste":j=na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Ao;break;case"toggle":case"beforetoggle":j=cu}var gt=(n&4)!==0,ie=!gt&&(e==="scroll"||e==="scrollend"),k=gt?z!==null?z+"Capture":null:z;gt=[];for(var x=L,U;x!==null;){var Q=x;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||k===null||(Q=lr(x,k),Q!=null&&gt.push(tl(x,Q,U))),ie)break;x=x.return}0<gt.length&&(z=new j(z,Tt,null,a,F),Y.push({event:z,listeners:gt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",z&&a!==Ci&&(Tt=a.relatedTarget||a.fromElement)&&(bi(Tt)||Tt[Sn]))break t;if((j||z)&&(z=F.window===F?F:(z=F.ownerDocument)?z.defaultView||z.parentWindow:window,j?(Tt=a.relatedTarget||a.toElement,j=L,Tt=Tt?bi(Tt):null,Tt!==null&&(ie=h(Tt),gt=Tt.tag,Tt!==ie||gt!==5&&gt!==27&&gt!==6)&&(Tt=null)):(j=null,Tt=L),j!==Tt)){if(gt=Rn,Q="onMouseLeave",k="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(gt=Ao,Q="onPointerLeave",k="onPointerEnter",x="pointer"),ie=j==null?z:$n(j),U=Tt==null?z:$n(Tt),z=new gt(Q,x+"leave",j,a,F),z.target=ie,z.relatedTarget=U,Q=null,bi(F)===L&&(gt=new gt(k,x+"enter",Tt,a,F),gt.target=U,gt.relatedTarget=ie,Q=gt),ie=Q,j&&Tt)e:{for(gt=j,k=Tt,x=0,U=gt;U;U=Na(U))x++;for(U=0,Q=k;Q;Q=Na(Q))U++;for(;0<x-U;)gt=Na(gt),x--;for(;0<U-x;)k=Na(k),U--;for(;x--;){if(gt===k||k!==null&&gt===k.alternate)break e;gt=Na(gt),k=Na(k)}gt=null}else gt=null;j!==null&&wy(Y,z,j,gt,!1),Tt!==null&&ie!==null&&wy(Y,ie,Tt,gt,!0)}}t:{if(z=L?$n(L):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var at=Gm;else if(De(z))if(Fm)at=uT;else{at=oT;var xt=aT}else j=z.nodeName,!j||j.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&po(L.elementType)&&(at=Gm):at=lT;if(at&&(at=at(e,L))){Mi(Y,at,a,F);break t}xt&&xt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&os(z,"number",z.value)}switch(xt=L?$n(L):window,e){case"focusin":(De(xt)||xt.contentEditable==="true")&&(ra=xt,wh=L,Ro=null);break;case"focusout":Ro=wh=ra=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,Wm(Y,a,F);break;case"selectionchange":if(hT)break;case"keydown":case"keyup":Wm(Y,a,F)}var ut;if(ii)t:{switch(e){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else Bt?q(e,a)&&(pt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(pt="onCompositionStart");pt&&(p&&a.locale!=="ko"&&(Bt||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Bt&&(ut=_o()):(Wn=F,ls="value"in Wn?Wn.value:Wn.textContent,Bt=!0)),xt=Zu(L,pt),0<xt.length&&(pt=new To(pt,e,null,a,F),Y.push({event:pt,listeners:xt}),ut?pt.data=ut:(ut=tt(a),ut!==null&&(pt.data=ut)))),(ut=m?Ne(e,a):qt(e,a))&&(pt=Zu(L,"onBeforeInput"),0<pt.length&&(xt=new To("onBeforeInput","beforeinput",null,a,F),Y.push({event:xt,listeners:pt}),xt.data=ut)),YT(Y,e,L,a,F)}Ay(Y,n)})}function tl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Zu(e,n){for(var a=n+"Capture",o=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=lr(e,a),c!=null&&o.unshift(tl(e,c,f)),c=lr(e,n),c!=null&&o.push(tl(e,c,f))),e.tag===3)return o;e=e.return}return[]}function Na(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function wy(e,n,a,o,c){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,w=E.alternate,L=E.stateNode;if(E=E.tag,w!==null&&w===o)break;E!==5&&E!==26&&E!==27||L===null||(w=L,c?(L=lr(a,f),L!=null&&v.unshift(tl(a,L,w))):c||(L=lr(a,f),L!=null&&v.push(tl(a,L,w)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var ZT=/\r\n?/g,JT=/\u0000|\uFFFD/g;function Ry(e){return(typeof e=="string"?e:""+e).replace(ZT,`
`).replace(JT,"")}function Iy(e,n){return n=Ry(n),Ry(e)===n}function Ju(){}function ne(e,n,a,o,c,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||An(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&An(e,""+o);break;case"className":Zn(e,"class",o);break;case"tabIndex":Zn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(e,a,o);break;case"style":go(e,o,f);break;case"data":if(n!=="object"){Zn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=$r(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&ne(e,n,"name",c.name,c,null),ne(e,n,"formEncType",c.formEncType,c,null),ne(e,n,"formMethod",c.formMethod,c,null),ne(e,n,"formTarget",c.formTarget,c,null)):(ne(e,n,"encType",c.encType,c,null),ne(e,n,"method",c.method,c,null),ne(e,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=$r(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Ju);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=$r(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),as(e,"popover",o);break;case"xlinkActuate":qe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":qe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":qe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":qe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":qe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":qe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":qe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":qe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":qe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":as(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_h.get(a)||a,as(e,a,o))}}function $f(e,n,a,o,c,f){switch(a){case"style":go(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?An(e,o):(typeof o=="number"||typeof o=="bigint")&&An(e,""+o);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fr.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),f=e[Se]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,c),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,c);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):as(e,a,o)}}}function Qe(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var o=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ne(e,n,f,v,a,null)}}c&&ne(e,n,"srcSet",a.srcSet,a,null),o&&ne(e,n,"src",a.src,a,null);return;case"input":Vt("invalid",e);var E=f=v=c=null,w=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":c=F;break;case"type":v=F;break;case"checked":w=F;break;case"defaultChecked":L=F;break;case"value":f=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:ne(e,n,o,F,a,null)}}rr(e,f,E,w,L,v,c,!1),Xr(e);return;case"select":Vt("invalid",e),o=v=f=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:ne(e,n,c,E,a,null)}n=f,a=v,e.multiple=!!o,n!=null?Ii(e,!!o,n,!1):a!=null&&Ii(e,!!o,a,!0);return;case"textarea":Vt("invalid",e),f=c=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:ne(e,n,v,E,a,null)}ar(e,o,c,f),Xr(e);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(o=a[w],o!=null))switch(w){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ne(e,n,w,o,a,null)}return;case"dialog":Vt("beforetoggle",e),Vt("toggle",e),Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(o=0;o<Wo.length;o++)Vt(Wo[o],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ne(e,n,L,o,a,null)}return;default:if(po(n)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&$f(e,n,F,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&ne(e,n,E,o,a,null))}function WT(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,E=null,w=null,L=null,F=null;for(j in a){var Y=a[j];if(a.hasOwnProperty(j)&&Y!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":w=Y;default:o.hasOwnProperty(j)||ne(e,n,j,null,o,Y)}}for(var z in o){var j=o[z];if(Y=a[z],o.hasOwnProperty(z)&&(j!=null||Y!=null))switch(z){case"type":f=j;break;case"name":c=j;break;case"checked":L=j;break;case"defaultChecked":F=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,n));break;default:j!==Y&&ne(e,n,z,j,o,Y)}}mn(e,v,E,w,L,F,f,c);return;case"select":j=v=E=z=null;for(f in a)if(w=a[f],a.hasOwnProperty(f)&&w!=null)switch(f){case"value":break;case"multiple":j=w;default:o.hasOwnProperty(f)||ne(e,n,f,null,o,w)}for(c in o)if(f=o[c],w=a[c],o.hasOwnProperty(c)&&(f!=null||w!=null))switch(c){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==w&&ne(e,n,c,f,o,w)}n=E,a=v,o=j,z!=null?Ii(e,!!a,z,!1):!!o!=!!a&&(n!=null?Ii(e,!!a,n,!0):Ii(e,!!a,a?[]:"",!1));return;case"textarea":j=z=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ne(e,n,E,null,o,c)}for(v in o)if(c=o[v],f=a[v],o.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":z=c;break;case"defaultValue":j=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==f&&ne(e,n,v,c,o,f)}te(e,z,j);return;case"option":for(var Tt in a)if(z=a[Tt],a.hasOwnProperty(Tt)&&z!=null&&!o.hasOwnProperty(Tt))switch(Tt){case"selected":e.selected=!1;break;default:ne(e,n,Tt,null,o,z)}for(w in o)if(z=o[w],j=a[w],o.hasOwnProperty(w)&&z!==j&&(z!=null||j!=null))switch(w){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:ne(e,n,w,z,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in a)z=a[gt],a.hasOwnProperty(gt)&&z!=null&&!o.hasOwnProperty(gt)&&ne(e,n,gt,null,o,z);for(L in o)if(z=o[L],j=a[L],o.hasOwnProperty(L)&&z!==j&&(z!=null||j!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,n));break;default:ne(e,n,L,z,o,j)}return;default:if(po(n)){for(var ie in a)z=a[ie],a.hasOwnProperty(ie)&&z!==void 0&&!o.hasOwnProperty(ie)&&$f(e,n,ie,void 0,o,z);for(F in o)z=o[F],j=a[F],!o.hasOwnProperty(F)||z===j||z===void 0&&j===void 0||$f(e,n,F,z,o,j);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&ne(e,n,k,null,o,z);for(Y in o)z=o[Y],j=a[Y],!o.hasOwnProperty(Y)||z===j||z==null&&j==null||ne(e,n,Y,z,o,j)}var Zf=null,Jf=null;function Wu(e){return e.nodeType===9?e:e.ownerDocument}function Cy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ny(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Wf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var td=null;function tS(){var e=window.event;return e&&e.type==="popstate"?e===td?!1:(td=e,!0):(td=null,!1)}var Dy=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,xy=typeof Promise=="function"?Promise:void 0,nS=typeof queueMicrotask=="function"?queueMicrotask:typeof xy<"u"?function(e){return xy.resolve(null).then(e).catch(iS)}:Dy;function iS(e){setTimeout(function(){throw e})}function bs(e){return e==="head"}function Oy(e,n){var a=n,o=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&el(v.documentElement),a&2&&el(v.body),a&4)for(a=v.head,el(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[er]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(c===0){e.removeChild(f),ul(n);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);ul(n)}function ed(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ed(a),rs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function sS(e,n,a,o){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[er])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function rS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Hn(e.nextSibling),e===null))return null;return e}function nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function aS(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Hn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var id=null;function My(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function Vy(e,n,a){switch(n=Wu(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function el(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);rs(e)}var Mn=new Map,ky=new Set;function tc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qi=nt.d;nt.d={f:oS,r:lS,D:uS,C:cS,L:hS,m:fS,X:mS,S:dS,M:gS};function oS(){var e=Qi.f(),n=Fu();return e||n}function lS(e){var n=Xn(e);n!==null&&n.tag===5&&n.type==="form"?ep(n):Qi.r(e)}var Da=typeof document>"u"?null:document;function Py(e,n,a){var o=Da;if(o&&typeof n=="string"&&n){var c=Ae(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),ky.has(c)||(ky.add(c),e={rel:e,crossOrigin:a,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),Qe(n,"link",e),ye(n),o.head.appendChild(n)))}}function uS(e){Qi.D(e),Py("dns-prefetch",e,null)}function cS(e,n){Qi.C(e,n),Py("preconnect",e,n)}function hS(e,n,a){Qi.L(e,n,a);var o=Da;if(o&&e&&n){var c='link[rel="preload"][as="'+Ae(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Ae(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Ae(a.imageSizes)+'"]')):c+='[href="'+Ae(e)+'"]';var f=c;switch(n){case"style":f=xa(e);break;case"script":f=Oa(e)}Mn.has(f)||(e=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Mn.set(f,e),o.querySelector(c)!==null||n==="style"&&o.querySelector(nl(f))||n==="script"&&o.querySelector(il(f))||(n=o.createElement("link"),Qe(n,"link",e),ye(n),o.head.appendChild(n)))}}function fS(e,n){Qi.m(e,n);var a=Da;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Ae(o)+'"][href="'+Ae(e)+'"]',f=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Oa(e)}if(!Mn.has(f)&&(e=S({rel:"modulepreload",href:e},n),Mn.set(f,e),a.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(il(f)))return}o=a.createElement("link"),Qe(o,"link",e),ye(o),a.head.appendChild(o)}}}function dS(e,n,a){Qi.S(e,n,a);var o=Da;if(o&&e){var c=sn(o).hoistableStyles,f=xa(e);n=n||"default";var v=c.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(nl(f)))E.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Mn.get(f))&&sd(e,a);var w=v=o.createElement("link");ye(w),Qe(w,"link",e),w._p=new Promise(function(L,F){w.onload=L,w.onerror=F}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ec(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},c.set(f,v)}}}function mS(e,n){Qi.X(e,n);var a=Da;if(a&&e){var o=sn(a).hoistableScripts,c=Oa(e),f=o.get(c);f||(f=a.querySelector(il(c)),f||(e=S({src:e,async:!0},n),(n=Mn.get(c))&&rd(e,n),f=a.createElement("script"),ye(f),Qe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function gS(e,n){Qi.M(e,n);var a=Da;if(a&&e){var o=sn(a).hoistableScripts,c=Oa(e),f=o.get(c);f||(f=a.querySelector(il(c)),f||(e=S({src:e,async:!0,type:"module"},n),(n=Mn.get(c))&&rd(e,n),f=a.createElement("script"),ye(f),Qe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function Uy(e,n,a,o){var c=(c=vt.current)?tc(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=xa(a.href),a=sn(c).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=xa(a.href);var f=sn(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(nl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Mn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mn.set(e,a),f||pS(c,e,a,v.state))),n&&o===null)throw Error(r(528,""));return v}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Oa(a),a=sn(c).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function xa(e){return'href="'+Ae(e)+'"'}function nl(e){return'link[rel="stylesheet"]['+e+"]"}function Ly(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function pS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Qe(n,"link",a),ye(n),e.head.appendChild(n))}function Oa(e){return'[src="'+Ae(e)+'"]'}function il(e){return"script[async]"+e}function zy(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Ae(a.href)+'"]');if(o)return n.instance=o,ye(o),o;var c=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ye(o),Qe(o,"style",c),ec(o,a.precedence,e),n.instance=o;case"stylesheet":c=xa(a.href);var f=e.querySelector(nl(c));if(f)return n.state.loading|=4,n.instance=f,ye(f),f;o=Ly(a),(c=Mn.get(c))&&sd(o,c),f=(e.ownerDocument||e).createElement("link"),ye(f);var v=f;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Qe(f,"link",o),n.state.loading|=4,ec(f,a.precedence,e),n.instance=f;case"script":return f=Oa(a.src),(c=e.querySelector(il(f)))?(n.instance=c,ye(c),c):(o=a,(c=Mn.get(f))&&(o=S({},a),rd(o,c)),e=e.ownerDocument||e,c=e.createElement("script"),ye(c),Qe(c,"link",o),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,ec(o,a.precedence,e));return n.instance}function ec(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,f=c,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function sd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function rd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var nc=null;function jy(e,n,a){if(nc===null){var o=new Map,c=nc=new Map;c.set(a,o)}else c=nc,o=c.get(a),o||(o=new Map,c.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[er]||f[Ce]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function By(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function yS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function qy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var sl=null;function _S(){}function vS(e,n,a){if(sl===null)throw Error(r(475));var o=sl;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=xa(a.href),f=e.querySelector(nl(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=ic.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,ye(f);return}f=e.ownerDocument||e,a=Ly(a),(c=Mn.get(c))&&sd(a,c),f=f.createElement("link"),ye(f);var v=f;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Qe(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=ic.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function ES(){if(sl===null)throw Error(r(475));var e=sl;return e.stylesheets&&e.count===0&&ad(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&ad(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function ic(){if(this.count--,this.count===0){if(this.stylesheets)ad(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var sc=null;function ad(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,sc=new Map,n.forEach(TS,e),sc=null,ic.call(e))}function TS(e,n){if(!(n.state.loading&4)){var a=sc.get(e);if(a)var o=a.get(null);else{a=new Map,sc.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}c=n.instance,v=c.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,c),a.set(v,c),this.count++,o=ic.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var rl={$$typeof:ct,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function SS(e,n,a,o,c,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Hy(e,n,a,o,c,f,v,E,w,L,F,Y){return e=new SS(e,n,a,v,E,w,L,Y),n=1,f===!0&&(n|=24),f=pn(3,null,null,n),e.current=f,f.stateNode=e,n=jh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},Gh(f),e}function Gy(e){return e?(e=ua,e):ua}function Fy(e,n,a,o,c,f){c=Gy(c),o.context===null?o.context=c:o.pendingContext=c,o=hs(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=fs(e,o,n),a!==null&&(Tn(a,e,n),ko(a,e,n))}function Qy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function od(e,n){Qy(e,n),(e=e.alternate)&&Qy(e,n)}function Yy(e){if(e.tag===13){var n=la(e,67108864);n!==null&&Tn(n,e,67108864),od(e,67108864)}}var rc=!0;function AS(e,n,a,o){var c=H.T;H.T=null;var f=nt.p;try{nt.p=2,ld(e,n,a,o)}finally{nt.p=f,H.T=c}}function bS(e,n,a,o){var c=H.T;H.T=null;var f=nt.p;try{nt.p=8,ld(e,n,a,o)}finally{nt.p=f,H.T=c}}function ld(e,n,a,o){if(rc){var c=ud(o);if(c===null)Xf(e,n,o,ac,a),Xy(e,o);else if(RS(c,e,n,a,o))o.stopPropagation();else if(Xy(e,o),n&4&&-1<wS.indexOf(e)){for(;c!==null;){var f=Xn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Ln(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-$e(v);E.entanglements[1]|=w,v&=~w}ui(f),(Jt&6)===0&&(Hu=ln()+500,Jo(0))}}break;case 13:E=la(f,2),E!==null&&Tn(E,f,2),Fu(),od(f,2)}if(f=ud(o),f===null&&Xf(e,n,o,ac,a),f===c)break;c=f}c!==null&&o.stopPropagation()}else Xf(e,n,o,null,a)}}function ud(e){return e=bn(e),cd(e)}var ac=null;function cd(e){if(ac=null,e=bi(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ac=e,null}function Ky(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(es()){case Ti:return 2;case Yn:return 8;case $s:case dh:return 32;case qr:return 268435456;default:return 32}default:return 32}}var hd=!1,ws=null,Rs=null,Is=null,al=new Map,ol=new Map,Cs=[],wS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xy(e,n){switch(e){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":al.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(n.pointerId)}}function ll(e,n,a,o,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Xn(n),n!==null&&Yy(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function RS(e,n,a,o,c){switch(n){case"focusin":return ws=ll(ws,e,n,a,o,c),!0;case"dragenter":return Rs=ll(Rs,e,n,a,o,c),!0;case"mouseover":return Is=ll(Is,e,n,a,o,c),!0;case"pointerover":var f=c.pointerId;return al.set(f,ll(al.get(f)||null,e,n,a,o,c)),!0;case"gotpointercapture":return f=c.pointerId,ol.set(f,ll(ol.get(f)||null,e,n,a,o,c)),!0}return!1}function $y(e){var n=bi(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,Fl(e.priority,function(){if(a.tag===13){var o=En();o=ns(o);var c=la(a,o);c!==null&&Tn(c,a,o),od(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=ud(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ci=o,a.target.dispatchEvent(o),Ci=null}else return n=Xn(a),n!==null&&Yy(n),e.blockedOn=a,!1;n.shift()}return!0}function Zy(e,n,a){oc(e)&&a.delete(n)}function IS(){hd=!1,ws!==null&&oc(ws)&&(ws=null),Rs!==null&&oc(Rs)&&(Rs=null),Is!==null&&oc(Is)&&(Is=null),al.forEach(Zy),ol.forEach(Zy)}function lc(e,n){e.blockedOn===n&&(e.blockedOn=null,hd||(hd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,IS)))}var uc=null;function Jy(e){uc!==e&&(uc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){uc===e&&(uc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],c=e[n+2];if(typeof o!="function"){if(cd(o||a)===null)continue;break}var f=Xn(a);f!==null&&(e.splice(n,3),n-=3,cf(f,{pending:!0,data:c,method:a.method,action:o},o,c))}}))}function ul(e){function n(w){return lc(w,e)}ws!==null&&lc(ws,e),Rs!==null&&lc(Rs,e),Is!==null&&lc(Is,e),al.forEach(n),ol.forEach(n);for(var a=0;a<Cs.length;a++){var o=Cs[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Cs.length&&(a=Cs[0],a.blockedOn===null);)$y(a),a.blockedOn===null&&Cs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],v=c[Se]||null;if(typeof f=="function")v||Jy(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[Se]||null)E=v.formAction;else if(cd(c)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),Jy(a)}}}function fd(e){this._internalRoot=e}cc.prototype.render=fd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=En();Fy(a,o,e,n,null,null)},cc.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Fy(e.current,2,null,e,null,null),Fu(),n[Sn]=null}};function cc(e){this._internalRoot=e}cc.prototype.unstable_scheduleHydration=function(e){if(e){var n=is();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Cs.length&&n!==0&&n<Cs[a].priority;a++);Cs.splice(a,0,e),a===0&&$y(e)}};var Wy=t.version;if(Wy!=="19.1.0")throw Error(r(527,Wy,"19.1.0"));nt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(n),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var CS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{de=hc.inject(CS),Zt=hc}catch{}}return hl.createRoot=function(e,n){if(!l(e))throw Error(r(299));var a=!1,o="",c=gp,f=pp,v=yp,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Hy(e,1,!1,null,null,a,o,c,f,v,E,null),e[Sn]=n.current,Kf(e),new fd(n)},hl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(r(299));var o=!1,c="",f=gp,v=pp,E=yp,w=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=Hy(e,1,!0,n,a??null,o,c,f,v,E,w,L),n.context=Gy(null),a=n.current,o=En(),o=ns(o),c=hs(o),c.callback=null,fs(a,c,o),a=o,n.current.lanes=a,Ai(n,a),ui(n),e[Sn]=n.current,Kf(e),new cc(n)},hl.version="19.1.0",hl}var u_;function LS(){if(u_)return gd.exports;u_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),gd.exports=US(),gd.exports}var zS=LS();const jS=()=>{};var c_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},BS=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const h=s[i++];t[r++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=s[i++],d=s[i++],g=s[i++],y=((l&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const h=s[i++],d=s[i++];t[r++]=String.fromCharCode((l&15)<<12|(h&63)<<6|d&63)}}return t.join("")},Lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const h=s[l],d=l+1<s.length,g=d?s[l+1]:0,y=l+2<s.length,_=y?s[l+2]:0,S=h>>2,I=(h&3)<<4|g>>4;let D=(g&15)<<2|_>>6,G=_&63;y||(G=64,d||(D=64)),r.push(i[S],i[I],i[D],i[G])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Uv(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):BS(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const h=i[s.charAt(l++)],g=l<s.length?i[s.charAt(l)]:0;++l;const _=l<s.length?i[s.charAt(l)]:64;++l;const I=l<s.length?i[s.charAt(l)]:64;if(++l,h==null||g==null||_==null||I==null)throw new qS;const D=h<<2|g>>4;if(r.push(D),_!==64){const G=g<<4&240|_>>2;if(r.push(G),I!==64){const X=_<<6&192|I;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(s){const t=Uv(s);return Lv.encodeByteArray(t,!0)},Nc=function(s){return HS(s).replace(/\./g,"")},zv=function(s){try{return Lv.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=()=>GS().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof c_>"u")return;const s=c_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},YS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&zv(s[1]);return t&&JSON.parse(t)},Kc=()=>{try{return jS()||FS()||QS()||YS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},jv=s=>Kc()?.emulatorHosts?.[s],KS=s=>{const t=jv(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Bv=()=>Kc()?.config,qv=s=>Kc()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hv(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,h=s.sub||s.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Nc(JSON.stringify(i)),Nc(JSON.stringify(d)),""].join(".")}const pl={};function ZS(){const s={prod:[],emulator:[]};for(const t of Object.keys(pl))pl[t]?s.emulator.push(t):s.prod.push(t);return s}function JS(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let h_=!1;function Gv(s,t){if(typeof window>"u"||typeof document>"u"||!$a(window.location.host)||pl[s]===t||pl[s]||h_)return;pl[s]=t;function i(D){return`__firebase__banner__${D}`}const r="__firebase__banner",h=ZS().prod.length>0;function d(){const D=document.getElementById(r);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,G){D.setAttribute("width","24"),D.setAttribute("id",G),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function _(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{h_=!0,d()},D}function S(D,G){D.setAttribute("id",G),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function I(){const D=JS(r),G=i("text"),X=document.getElementById(G)||document.createElement("span"),et=i("learnmore"),J=document.getElementById(et)||document.createElement("a"),St=i("preprendIcon"),mt=document.getElementById(St)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ct=D.element;g(ct),S(J,et);const Lt=_();y(mt,St),ct.append(mt,X,J,Lt),document.body.appendChild(ct)}h?(X.innerText="Preview backend disconnected.",mt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function tA(){const s=Kc()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function iA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sA(){const s=nn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function rA(){return!tA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aA(){try{return typeof indexedDB=="object"}catch{return!1}}function oA(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="FirebaseError";class ts extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=lA,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},l=`${this.service}/${t}`,h=this.errors[t],d=h?uA(h,r):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new ts(l,g,r)}}function uA(s,t){return s.replace(cA,(i,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const cA=/\{\$([^}]+)}/g;function hA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Mr(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const l of i){if(!r.includes(l))return!1;const h=s[l],d=t[l];if(f_(h)&&f_(d)){if(!Mr(h,d))return!1}else if(h!==d)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function f_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function fA(s,t){const i=new dA(s,t);return i.subscribe.bind(i)}class dA{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let l;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");mA(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:r},l.next===void 0&&(l.next=vd),l.error===void 0&&(l.error=vd),l.complete===void 0&&(l.complete=vd);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mA(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(s){return s&&s._delegate?s._delegate:s}class Vr{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new XS;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yA(t))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:l});r.resolve(h)}catch{}}}}clearInstance(t=Dr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Dr){return this.instances.has(t)}getOptions(t=Dr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);r===g&&d.resolve(l)}return l}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const h=this.instances.get(r);return h&&t(h,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pA(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Dr){return this.component?this.component.multipleInstances?t:Dr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pA(s){return s===Dr?void 0:s}function yA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new gA(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(kt||(kt={}));const vA={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},EA=kt.INFO,TA={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},SA=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=TA[t];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class nm{constructor(t){this.name=t,this._logLevel=EA,this._logHandler=SA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}const AA=(s,t)=>t.some(i=>s instanceof i);let d_,m_;function bA(){return d_||(d_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wA(){return m_||(m_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fv=new WeakMap,xd=new WeakMap,Qv=new WeakMap,Ed=new WeakMap,im=new WeakMap;function RA(s){const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",h),s.removeEventListener("error",d)},h=()=>{i(Ps(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",h),s.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&Fv.set(i,s)}).catch(()=>{}),im.set(t,s),t}function IA(s){if(xd.has(s))return;const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",h),s.removeEventListener("error",d),s.removeEventListener("abort",d)},h=()=>{i(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",h),s.addEventListener("error",d),s.addEventListener("abort",d)});xd.set(s,t)}let Od={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return xd.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Qv.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ps(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function CA(s){Od=s(Od)}function NA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(Td(this),t,...i);return Qv.set(r,t.sort?t.sort():[t]),Ps(r)}:wA().includes(s)?function(...t){return s.apply(Td(this),t),Ps(Fv.get(this))}:function(...t){return Ps(s.apply(Td(this),t))}}function DA(s){return typeof s=="function"?NA(s):(s instanceof IDBTransaction&&IA(s),AA(s,bA())?new Proxy(s,Od):s)}function Ps(s){if(s instanceof IDBRequest)return RA(s);if(Ed.has(s))return Ed.get(s);const t=DA(s);return t!==s&&(Ed.set(s,t),im.set(t,s)),t}const Td=s=>im.get(s);function xA(s,t,{blocked:i,upgrade:r,blocking:l,terminated:h}={}){const d=indexedDB.open(s,t),g=Ps(d);return r&&d.addEventListener("upgradeneeded",y=>{r(Ps(d.result),y.oldVersion,y.newVersion,Ps(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{h&&y.addEventListener("close",()=>h()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const OA=["get","getKey","getAll","getAllKeys","count"],MA=["put","add","delete","clear"],Sd=new Map;function g_(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Sd.get(t))return Sd.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,l=MA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||OA.includes(i)))return;const h=async function(d,...g){const y=this.transaction(d,l?"readwrite":"readonly");let _=y.store;return r&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),l&&y.done]))[0]};return Sd.set(t,h),h}CA(s=>({...s,get:(t,i,r)=>g_(t,i)||s.get(t,i,r),has:(t,i)=>!!g_(t,i)||s.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(kA(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function kA(s){return s.getComponent()?.type==="VERSION"}const Md="@firebase/app",p_="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new nm("@firebase/app"),PA="@firebase/app-compat",UA="@firebase/analytics-compat",LA="@firebase/analytics",zA="@firebase/app-check-compat",jA="@firebase/app-check",BA="@firebase/auth",qA="@firebase/auth-compat",HA="@firebase/database",GA="@firebase/data-connect",FA="@firebase/database-compat",QA="@firebase/functions",YA="@firebase/functions-compat",KA="@firebase/installations",XA="@firebase/installations-compat",$A="@firebase/messaging",ZA="@firebase/messaging-compat",JA="@firebase/performance",WA="@firebase/performance-compat",tb="@firebase/remote-config",eb="@firebase/remote-config-compat",nb="@firebase/storage",ib="@firebase/storage-compat",sb="@firebase/firestore",rb="@firebase/ai",ab="@firebase/firestore-compat",ob="firebase",lb="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="[DEFAULT]",ub={[Md]:"fire-core",[PA]:"fire-core-compat",[LA]:"fire-analytics",[UA]:"fire-analytics-compat",[jA]:"fire-app-check",[zA]:"fire-app-check-compat",[BA]:"fire-auth",[qA]:"fire-auth-compat",[HA]:"fire-rtdb",[GA]:"fire-data-connect",[FA]:"fire-rtdb-compat",[QA]:"fire-fn",[YA]:"fire-fn-compat",[KA]:"fire-iid",[XA]:"fire-iid-compat",[$A]:"fire-fcm",[ZA]:"fire-fcm-compat",[JA]:"fire-perf",[WA]:"fire-perf-compat",[tb]:"fire-rc",[eb]:"fire-rc-compat",[nb]:"fire-gcs",[ib]:"fire-gcs-compat",[sb]:"fire-fst",[ab]:"fire-fst-compat",[rb]:"fire-vertex","fire-js":"fire-js",[ob]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,cb=new Map,kd=new Map;function y_(s,t){try{s.container.addComponent(t)}catch(i){Xi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function qa(s){const t=s.name;if(kd.has(t))return Xi.debug(`There were multiple attempts to register component ${t}.`),!1;kd.set(t,s);for(const i of Dc.values())y_(i,s);for(const i of cb.values())y_(i,s);return!0}function sm(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function Gn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new Ml("app","Firebase",hb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=lb;function Yv(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:Vd,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw Us.create("bad-app-name",{appName:String(l)});if(i||(i=Bv()),!i)throw Us.create("no-options");const h=Dc.get(l);if(h){if(Mr(i,h.options)&&Mr(r,h.config))return h;throw Us.create("duplicate-app",{appName:l})}const d=new _A(l);for(const y of kd.values())d.addComponent(y);const g=new fb(i,r,d);return Dc.set(l,g),g}function Kv(s=Vd){const t=Dc.get(s);if(!t&&s===Vd&&Bv())return Yv();if(!t)throw Us.create("no-app",{appName:s});return t}function Ls(s,t,i){let r=ub[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const d=[`Unable to register library "${r}" with version "${t}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xi.warn(d.join(" "));return}qa(new Vr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebase-heartbeat-database",mb=1,bl="firebase-heartbeat-store";let Ad=null;function Xv(){return Ad||(Ad=xA(db,mb,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(bl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Us.create("idb-open",{originalErrorMessage:s.message})})),Ad}async function gb(s){try{const i=(await Xv()).transaction(bl),r=await i.objectStore(bl).get($v(s));return await i.done,r}catch(t){if(t instanceof ts)Xi.warn(t.message);else{const i=Us.create("idb-get",{originalErrorMessage:t?.message});Xi.warn(i.message)}}}async function __(s,t){try{const r=(await Xv()).transaction(bl,"readwrite");await r.objectStore(bl).put(t,$v(s)),await r.done}catch(i){if(i instanceof ts)Xi.warn(i.message);else{const r=Us.create("idb-set",{originalErrorMessage:i?.message});Xi.warn(r.message)}}}function $v(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=1024,yb=30;class _b{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Eb(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=v_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>yb){const l=Tb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v_(),{heartbeatsToSend:i,unsentEntries:r}=vb(this._heartbeatsCache.heartbeats),l=Nc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Xi.warn(t),""}}}function v_(){return new Date().toISOString().substring(0,10)}function vb(s,t=pb){const i=[];let r=s.slice();for(const l of s){const h=i.find(d=>d.agent===l.agent);if(h){if(h.dates.push(l.date),E_(i)>t){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),E_(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class Eb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aA()?oA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await gb(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return __(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return __(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function E_(s){return Nc(JSON.stringify({version:2,heartbeats:s})).length}function Tb(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(s){qa(new Vr("platform-logger",t=>new VA(t),"PRIVATE")),qa(new Vr("heartbeat",t=>new _b(t),"PRIVATE")),Ls(Md,p_,s),Ls(Md,p_,"esm2020"),Ls("fire-js","")}Sb("");var Ab="firebase",bb="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(Ab,bb,"app");function Zv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wb=Zv,Jv=new Ml("auth","Firebase",Zv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new nm("@firebase/auth");function Rb(s,...t){xc.logLevel<=kt.WARN&&xc.warn(`Auth (${Za}): ${s}`,...t)}function vc(s,...t){xc.logLevel<=kt.ERROR&&xc.error(`Auth (${Za}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(s,...t){throw rm(s,...t)}function hi(s,...t){return rm(s,...t)}function Wv(s,t,i){const r={...wb(),[t]:i};return new Ml("auth","Firebase",r).create(t,{appName:s.name})}function zs(s){return Wv(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rm(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return Jv.create(s,...t)}function At(s,t,...i){if(!s)throw rm(t,...i)}function Yi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw vc(t),new Error(t)}function Zi(s,t){s||Yi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(){return typeof self<"u"&&self.location?.href||""}function Ib(){return T_()==="http:"||T_()==="https:"}function T_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ib()||nA()||"connection"in navigator)?navigator.onLine:!0}function Nb(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,i){this.shortDelay=t,this.longDelay=i,Zi(i>t,"Short delay should be less than long delay!"),this.isMobile=WS()||iA()}get(){return Cb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(s,t){Zi(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ob=new kl(3e4,6e4);function Xc(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Ja(s,t,i,r,l={}){return e0(s,l,async()=>{let h={},d={};r&&(t==="GET"?d=r:h={body:JSON.stringify(r)});const g=Vl({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const _={method:t,headers:y,...h};return eA()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&$a(s.emulatorConfig.host)&&(_.credentials="include"),t0.fetch()(await i0(s,s.config.apiHost,i,g),_)})}async function e0(s,t,i){s._canInitEmulator=!1;const r={...Db,...t};try{const l=new Mb(s),h=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await h.json();if("needConfirmation"in d)throw fc(s,"account-exists-with-different-credential",d);if(h.ok&&!("errorMessage"in d))return d;{const g=h.ok?d.errorMessage:d.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw fc(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw fc(s,"user-disabled",d);const S=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Wv(s,S,_);$i(s,S)}}catch(l){if(l instanceof ts)throw l;$i(s,"network-request-failed",{message:String(l)})}}async function n0(s,t,i,r,l={}){const h=await Ja(s,t,i,r,l);return"mfaPendingCredential"in h&&$i(s,"multi-factor-auth-required",{_serverResponse:h}),h}async function i0(s,t,i,r){const l=`${t}${i}?${r}`,h=s,d=h.config.emulator?am(s.config,l):`${s.config.apiScheme}://${l}`;return xb.includes(i)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(d).toString():d}class Mb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),Ob.get())})}}function fc(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=hi(s,t,r);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(s,t){return Ja(s,"POST","/v1/accounts:delete",t)}async function Oc(s,t){return Ja(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function kb(s,t=!1){const i=Pn(s),r=await i.getIdToken(t),l=om(r);At(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,d=h?.sign_in_provider;return{claims:l,token:r,authTime:yl(bd(l.auth_time)),issuedAtTime:yl(bd(l.iat)),expirationTime:yl(bd(l.exp)),signInProvider:d||null,signInSecondFactor:h?.sign_in_second_factor||null}}function bd(s){return Number(s)*1e3}function om(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return vc("JWT malformed, contained fewer than 3 sections"),null;try{const l=zv(i);return l?JSON.parse(l):(vc("Failed to decode base64 JWT payload"),null)}catch(l){return vc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function S_(s){const t=om(s);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof ts&&Pb(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Pb({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(s){const t=s.auth,i=await s.getIdToken(),r=await wl(s,Oc(t,{idToken:i}));At(r?.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const h=l.providerUserInfo?.length?s0(l.providerUserInfo):[],d=zb(s.providerData,h),g=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!d?.length,_=g?y:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ud(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(s,S)}async function Lb(s){const t=Pn(s);await Mc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function zb(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function s0(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(s,t){const i=await e0(s,{},async()=>{const r=Vl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=s.config,d=await i0(s,l,"/v1/token",`key=${h}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:r};return s.emulatorConfig&&$a(s.emulatorConfig.host)&&(y.credentials="include"),t0.fetch()(d,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Bb(s,t){return Ja(s,"POST","/v2/accounts:revokeToken",Xc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):S_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){At(t.length!==0,"internal-error");const i=S_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:l,expiresIn:h}=await jb(t,i);this.updateTokensAndExpiration(r,l,Number(h))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:l,expirationTime:h}=i,d=new La;return r&&(At(typeof r=="string","internal-error",{appName:t}),d.refreshToken=r),l&&(At(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),h&&(At(typeof h=="number","internal-error",{appName:t}),d.expirationTime=h),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(s,t){At(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Fn{constructor({uid:t,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new Ub(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ud(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await wl(this,this.stsTokenManager.getToken(this.auth,t));return At(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return kb(this,t)}reload(){return Lb(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Fn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await Mc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(zs(this.auth));const t=await this.getIdToken();return await wl(this,Vb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,l=i.email??void 0,h=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,S=i.lastLoginAt??void 0,{uid:I,emailVerified:D,isAnonymous:G,providerData:X,stsTokenManager:et}=i;At(I&&et,t,"internal-error");const J=La.fromJSON(this.name,et);At(typeof I=="string",t,"internal-error"),Ds(r,t.name),Ds(l,t.name),At(typeof D=="boolean",t,"internal-error"),At(typeof G=="boolean",t,"internal-error"),Ds(h,t.name),Ds(d,t.name),Ds(g,t.name),Ds(y,t.name),Ds(_,t.name),Ds(S,t.name);const St=new Fn({uid:I,auth:t,email:l,emailVerified:D,displayName:r,isAnonymous:G,photoURL:d,phoneNumber:h,tenantId:g,stsTokenManager:J,createdAt:_,lastLoginAt:S});return X&&Array.isArray(X)&&(St.providerData=X.map(mt=>({...mt}))),y&&(St._redirectEventId=y),St}static async _fromIdTokenResponse(t,i,r=!1){const l=new La;l.updateFromServerResponse(i);const h=new Fn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await Mc(h),h}static async _fromGetAccountInfoResponse(t,i,r){const l=i.users[0];At(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?s0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!h?.length,g=new La;g.updateFromIdToken(r);const y=new Fn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Ud(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function Ki(s){Zi(s instanceof Function,"Expected a class definition");let t=A_.get(s);return t?(Zi(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,A_.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}r0.type="NONE";const b_=r0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(s,t,i){return`firebase:${s}:${t}:${i}`}class za{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:l,name:h}=this.auth;this.fullUserKey=Ec(this.userKey,l.apiKey,h),this.fullPersistenceKey=Ec("persistence",l.apiKey,h),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Oc(this.auth,{idToken:t}).catch(()=>{});return i?Fn._fromGetAccountInfoResponse(this.auth,i,t):null}return Fn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new za(Ki(b_),t,r);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let h=l[0]||Ki(b_);const d=Ec(r,t.config.apiKey,t.name);let g=null;for(const _ of i)try{const S=await _._get(d);if(S){let I;if(typeof S=="string"){const D=await Oc(t,{idToken:S}).catch(()=>{});if(!D)break;I=await Fn._fromGetAccountInfoResponse(t,D,S)}else I=Fn._fromJSON(t,S);_!==h&&(g=I),h=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!h._shouldAllowMigration||!y.length?new za(h,t,r):(h=y[0],g&&await h._set(d,g.toJSON()),await Promise.all(i.map(async _=>{if(_!==h)try{await _._remove(d)}catch{}})),new za(h,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(u0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(a0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(h0(t))return"Blackberry";if(f0(t))return"Webos";if(o0(t))return"Safari";if((t.includes("chrome/")||l0(t))&&!t.includes("edge/"))return"Chrome";if(c0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function a0(s=nn()){return/firefox\//i.test(s)}function o0(s=nn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function l0(s=nn()){return/crios\//i.test(s)}function u0(s=nn()){return/iemobile/i.test(s)}function c0(s=nn()){return/android/i.test(s)}function h0(s=nn()){return/blackberry/i.test(s)}function f0(s=nn()){return/webos/i.test(s)}function lm(s=nn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qb(s=nn()){return lm(s)&&!!window.navigator?.standalone}function Hb(){return sA()&&document.documentMode===10}function d0(s=nn()){return lm(s)||c0(s)||f0(s)||h0(s)||/windows phone/i.test(s)||u0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(s,t=[]){let i;switch(s){case"Browser":i=w_(nn());break;case"Worker":i=`${w_(nn())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Za}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=h=>new Promise((d,g)=>{try{const y=t(h);d(y)}catch(y){g(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(s,t={}){return Ja(s,"GET","/v2/passwordPolicy",Xc(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=6;class Yb{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??Qb,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,i,r,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new Gb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Ki(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await za.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Oc(this,{idToken:t}),r=await Fn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Gn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,d=r?._redirectEventId,g=await this.tryRedirectSignIn(t);(!h||h===d)&&g?.user&&(r=g.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Mc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Nb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Gn(this.app))return Promise.reject(zs(this));const i=t?Pn(t):null;return i&&At(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Gn(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Fb(this),i=new Yb(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ml("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bb(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Ki(t)||this._popupRedirectResolver;At(i,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[Ki(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,l){if(this._deleted)return()=>{};const h=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(g,this,"internal-error"),g.then(()=>{d||h(this.currentUser)}),typeof i=="function"){const y=t.addObserver(i,r,l);return()=>{d=!0,y()}}else{const y=t.addObserver(i);return()=>{d=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=m0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Rb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function $c(s){return Pn(s)}class R_{constructor(t){this.auth=t,this.observer=null,this.addObserver=fA(i=>this.observer=i)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xb(s){um=s}function $b(s){return um.loadJS(s)}function Zb(){return um.gapiScript}function Jb(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(s,t){const i=sm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),h=i.getOptions();if(Mr(h,t??{}))return l;$i(l,"already-initialized")}return i.initialize({options:t})}function t1(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Ki);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function e1(s,t,i){const r=$c(s);At(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,h=g0(t),{host:d,port:g}=n1(t),y=g===null?"":`:${g}`,_={url:`${h}//${d}${y}/`},S=Object.freeze({host:d,port:g,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){At(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),At(Mr(_,r.config.emulator)&&Mr(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,$a(d)?(Hv(`${h}//${d}${y}`),Gv("Auth",!0)):i1()}function g0(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function n1(s){const t=g0(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const h=l[1];return{host:h,port:I_(r.substr(h.length+1))}}else{const[h,d]=r.split(":");return{host:h,port:I_(d)}}}function I_(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function i1(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Yi("not implemented")}_getIdTokenResponse(t){return Yi("not implemented")}_linkToIdToken(t,i){return Yi("not implemented")}_getReauthenticationResolver(t){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(s,t){return n0(s,"POST","/v1/accounts:signInWithIdp",Xc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="http://localhost";class kr extends p0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new kr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):$i("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...h}=i;if(!r||!l)return null;const d=new kr(r,l);return d.idToken=h.idToken||void 0,d.accessToken=h.accessToken||void 0,d.secret=h.secret,d.nonce=h.nonce,d.pendingToken=h.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return ja(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,ja(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,ja(t,i)}buildRequest(){const t={requestUri:s1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Vl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends y0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Pl{constructor(){super("facebook.com")}static credential(t){return kr._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xs.credential(t.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return kr._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return Os.credential(i,r)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Pl{constructor(){super("github.com")}static credential(t){return kr._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ms.credentialFromTaggedObject(t)}static credentialFromError(t){return Ms.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ms.credential(t.oauthAccessToken)}catch{return null}}}Ms.GITHUB_SIGN_IN_METHOD="github.com";Ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Pl{constructor(){super("twitter.com")}static credential(t,i){return kr._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Vs.credentialFromTaggedObject(t)}static credentialFromError(t){return Vs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return Vs.credential(i,r)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(s,t){return n0(s,"POST","/v1/accounts:signUp",Xc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,l=!1){const h=await Fn._fromIdTokenResponse(t,r,l),d=C_(r);return new Hs({user:h,providerId:d,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const l=C_(r);return new Hs({user:t,providerId:l,_tokenResponse:r,operationType:i})}}function C_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(s){if(Gn(s.app))return Promise.reject(zs(s));const t=$c(s);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Hs({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await r1(t,{returnSecureToken:!0}),r=await Hs._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends ts{constructor(t,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Vc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,l){return new Vc(t,i,r,l)}}function _0(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Vc._fromErrorAndOperation(s,h,t,r):h})}async function o1(s,t,i=!1){const r=await wl(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return Hs._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(s,t,i=!1){const{auth:r}=s;if(Gn(r.app))return Promise.reject(zs(r));const l="reauthenticate";try{const h=await wl(s,_0(r,l,t,s),i);At(h.idToken,r,"internal-error");const d=om(h.idToken);At(d,r,"internal-error");const{sub:g}=d;return At(s.uid===g,r,"user-mismatch"),Hs._forOperation(s,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&$i(r,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(s,t,i=!1){if(Gn(s.app))return Promise.reject(zs(s));const r="signIn",l=await _0(s,r,t),h=await Hs._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(h.user),h}function c1(s,t,i,r){return Pn(s).onIdTokenChanged(t,i,r)}function h1(s,t,i){return Pn(s).beforeAuthStateChanged(t,i)}function f1(s,t,i,r){return Pn(s).onAuthStateChanged(t,i,r)}const kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(kc,"1"),this.storage.removeItem(kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1e3,m1=10;class E0 extends v0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&t(i,l,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const r=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!i&&this.localCache[r]===d||this.notifyListeners(r,d)},h=this.storage.getItem(r);Hb()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,m1):l()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}E0.type="LOCAL";const g1=E0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends v0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}T0.type="SESSION";const S0=T0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const r=new Zc(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:l,data:h}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const g=Array.from(d).map(async _=>_(i.origin,h)),y=await p1(g);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,d;return new Promise((g,y)=>{const _=cm("",20);l.port1.start();const S=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(I){const D=I;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(S),h=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),g(D.data.response);break;default:clearTimeout(S),clearTimeout(h),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function _1(s){fi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function v1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E1(){return navigator?.serviceWorker?.controller||null}function T1(){return A0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="firebaseLocalStorageDb",S1=1,Pc="firebaseLocalStorage",w0="fbase_key";class Ul{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Jc(s,t){return s.transaction([Pc],t?"readwrite":"readonly").objectStore(Pc)}function A1(){const s=indexedDB.deleteDatabase(b0);return new Ul(s).toPromise()}function Ld(){const s=indexedDB.open(b0,S1);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Pc,{keyPath:w0})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Pc)?t(r):(r.close(),await A1(),t(await Ld()))})})}async function N_(s,t,i){const r=Jc(s,!0).put({[w0]:t,value:i});return new Ul(r).toPromise()}async function b1(s,t){const i=Jc(s,!1).get(t),r=await new Ul(i).toPromise();return r===void 0?null:r.value}function D_(s,t){const i=Jc(s,!0).delete(t);return new Ul(i).toPromise()}const w1=800,R1=3;class R0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ld(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>R1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(T1()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await v1(),!this.activeServiceWorker)return;this.sender=new y1(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||E1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ld();return await N_(t,kc,"1"),await D_(t,kc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>N_(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>b1(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>D_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=Jc(l,!1).getAll();return new Ul(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R0.type="LOCAL";const I1=R0;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(s,t){return t?Ki(t):(At(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends p0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ja(t,this._buildIdpRequest())}_linkToIdToken(t,i){return ja(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return ja(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function N1(s){return u1(s.auth,new hm(s),s.bypassAuthState)}function D1(s){const{auth:t,user:i}=s;return At(i,t,"internal-error"),l1(i,new hm(s),s.bypassAuthState)}async function x1(s){const{auth:t,user:i}=s;return At(i,t,"internal-error"),o1(i,new hm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,i,r,l,h=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:l,tenantId:h,error:d,type:g}=t;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return N1;case"linkViaPopup":case"linkViaRedirect":return x1;case"reauthViaPopup":case"reauthViaRedirect":return D1;default:$i(this.auth,"internal-error")}}resolve(t){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new kl(2e3,1e4);class Ua extends I0{constructor(t,i,r,l,h){super(t,i,l,h),this.provider=r,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const t=cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,O1.get())};t()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="pendingRedirect",Tc=new Map;class V1 extends I0{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=Tc.get(this.auth._key());if(!t){try{const r=await k1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}Tc.set(this.auth._key(),t)}return this.bypassAuthState||Tc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k1(s,t){const i=L1(t),r=U1(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function P1(s,t){Tc.set(s._key(),t)}function U1(s){return Ki(s._redirectPersistence)}function L1(s){return Ec(M1,s.config.apiKey,s.name)}async function z1(s,t,i=!1){if(Gn(s.app))return Promise.reject(zs(s));const r=$c(s),l=C1(r,t),d=await new V1(r,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=600*1e3;class B1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!q1(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!C0(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError(hi(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=j1&&this.cachedEventUids.clear(),this.cachedEventUids.has(x_(t))}saveEventToCache(t){this.cachedEventUids.add(x_(t)),this.lastProcessedEventTime=Date.now()}}function x_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function C0({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function q1(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(s,t={}){return Ja(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F1=/^https?/;async function Q1(s){if(s.config.emulator)return;const{authorizedDomains:t}=await H1(s);for(const i of t)try{if(Y1(i))return}catch{}$i(s,"unauthorized-domain")}function Y1(s){const t=Pd(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===r}if(!F1.test(i))return!1;if(G1.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new kl(3e4,6e4);function O_(){const s=fi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function X1(s){return new Promise((t,i)=>{function r(){O_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{O_(),i(hi(s,"network-request-failed"))},timeout:K1.get()})}if(fi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(fi().gapi?.load)r();else{const l=Jb("iframefcb");return fi()[l]=()=>{gapi.load?r():i(hi(s,"network-request-failed"))},$b(`${Zb()}?onload=${l}`).catch(h=>i(h))}}).catch(t=>{throw Sc=null,t})}let Sc=null;function $1(s){return Sc=Sc||X1(s),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new kl(5e3,15e3),J1="__/auth/iframe",W1="emulator/auth/iframe",tw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ew=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nw(s){const t=s.config;At(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?am(t,W1):`https://${s.config.authDomain}/${J1}`,r={apiKey:t.apiKey,appName:s.name,v:Za},l=ew.get(s.config.apiHost);l&&(r.eid=l);const h=s._getFrameworks();return h.length&&(r.fw=h.join(",")),`${i}?${Vl(r).slice(1)}`}async function iw(s){const t=await $1(s),i=fi().gapi;return At(i,s,"internal-error"),t.open({where:document.body,url:nw(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tw,dontclear:!0},r=>new Promise(async(l,h)=>{await r.restyle({setHideOnLeave:!1});const d=hi(s,"network-request-failed"),g=fi().setTimeout(()=>{h(d)},Z1.get());function y(){fi().clearTimeout(g),l(r)}r.ping(y).then(y,()=>{h(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rw=500,aw=600,ow="_blank",lw="http://localhost";class M_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uw(s,t,i,r=rw,l=aw){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const y={...sw,width:r.toString(),height:l.toString(),top:h,left:d},_=nn().toLowerCase();i&&(g=l0(_)?ow:i),a0(_)&&(t=t||lw,y.scrollbars="yes");const S=Object.entries(y).reduce((D,[G,X])=>`${D}${G}=${X},`,"");if(qb(_)&&g!=="_self")return cw(t||"",g),new M_(null);const I=window.open(t||"",g,S);At(I,s,"popup-blocked");try{I.focus()}catch{}return new M_(I)}function cw(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="__/auth/handler",fw="emulator/auth/handler",dw=encodeURIComponent("fac");async function V_(s,t,i,r,l,h){At(s.config.authDomain,s,"auth-domain-config-required"),At(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:Za,eventId:l};if(t instanceof y0){t.setDefaultLanguage(s.languageCode),d.providerId=t.providerId||"",hA(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[S,I]of Object.entries({}))d[S]=I}if(t instanceof Pl){const S=t.getScopes().filter(I=>I!=="");S.length>0&&(d.scopes=S.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const S of Object.keys(g))g[S]===void 0&&delete g[S];const y=await s._getAppCheckToken(),_=y?`#${dw}=${encodeURIComponent(y)}`:"";return`${mw(s)}?${Vl(g).slice(1)}${_}`}function mw({config:s}){return s.emulator?am(s,fw):`https://${s.authDomain}/${hw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class gw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S0,this._completeRedirectFn=z1,this._overrideRedirectResult=P1}async _openPopup(t,i,r,l){Zi(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await V_(t,i,r,Pd(),l);return uw(t,h,cm())}async _openRedirect(t,i,r,l){await this._originValidation(t);const h=await V_(t,i,r,Pd(),l);return _1(h),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:h}=this.eventManagers[i];return l?Promise.resolve(l):(Zi(h,"If manager is not set, promise should be"),h)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await iw(t),r=new B1(t);return i.register("authEvent",l=>(At(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(wd,{type:wd},l=>{const h=l?.[0]?.[wd];h!==void 0&&i(!!h),$i(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=Q1(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return d0()||o0()||lm()}}const pw=gw;var k_="@firebase/auth",P_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vw(s){qa(new Vr("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=r.options;At(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m0(s)},_=new Kb(r,l,h,y);return t1(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),qa(new Vr("auth-internal",t=>{const i=$c(t.getProvider("auth").getImmediate());return(r=>new yw(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(k_,P_,_w(s)),Ls(k_,P_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=300,Tw=qv("authIdTokenMaxAge")||Ew;let U_=null;const Sw=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>Tw)return;const l=i?.token;U_!==l&&(U_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Aw(s=Kv()){const t=sm(s,"auth");if(t.isInitialized())return t.getImmediate();const i=Wb(s,{popupRedirectResolver:pw,persistence:[I1,g1,S0]}),r=qv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(r,location.origin);if(location.origin===h.origin){const d=Sw(h.toString());h1(i,d,()=>d(i.currentUser)),c1(i,g=>d(g))}}const l=jv("auth");return l&&e1(i,`http://${l}`),i}function bw(){return document.getElementsByTagName("head")?.[0]??document}Xb({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const h=hi("internal-error");h.customData=l,i(h)},r.type="text/javascript",r.charset="UTF-8",bw().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vw("Browser");var L_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,N0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,A){function b(){}b.prototype=A.prototype,M.D=A.prototype,M.prototype=new b,M.prototype.constructor=M,M.C=function(N,O,V){for(var R=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)R[Te-2]=arguments[Te];return A.prototype[O].apply(N,R)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,A,b){b||(b=0);var N=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)N[O]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(O=0;16>O;++O)N[O]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=M.g[0],b=M.g[1],O=M.g[2];var V=M.g[3],R=A+(V^b&(O^V))+N[0]+3614090360&4294967295;A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+N[1]+3905402710&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+N[2]+606105819&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+N[3]+3250441966&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(V^b&(O^V))+N[4]+4118548399&4294967295,A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+N[5]+1200080426&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+N[6]+2821735955&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+N[7]+4249261313&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(V^b&(O^V))+N[8]+1770035416&4294967295,A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+N[9]+2336552879&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+N[10]+4294925233&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+N[11]+2304563134&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(V^b&(O^V))+N[12]+1804603682&4294967295,A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+N[13]+4254626195&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+N[14]+2792965006&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+N[15]+1236535329&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(O^V&(b^O))+N[1]+4129170786&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+N[6]+3225465664&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+N[11]+643717713&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+N[0]+3921069994&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(b^O))+N[5]+3593408605&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+N[10]+38016083&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+N[15]+3634488961&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+N[4]+3889429448&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(b^O))+N[9]+568446438&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+N[14]+3275163606&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+N[3]+4107603335&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+N[8]+1163531501&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(b^O))+N[13]+2850285829&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+N[2]+4243563512&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+N[7]+1735328473&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+N[12]+2368359562&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(b^O^V)+N[5]+4294588738&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+N[8]+2272392833&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+N[11]+1839030562&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+N[14]+4259657740&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(b^O^V)+N[1]+2763975236&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+N[4]+1272893353&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+N[7]+4139469664&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+N[10]+3200236656&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(b^O^V)+N[13]+681279174&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+N[0]+3936430074&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+N[3]+3572445317&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+N[6]+76029189&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(b^O^V)+N[9]+3654602809&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+N[12]+3873151461&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+N[15]+530742520&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+N[2]+3299628645&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(O^(b|~V))+N[0]+4096336452&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+N[7]+1126891415&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+N[14]+2878612391&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+N[5]+4237533241&4294967295,b=O+(R<<21&4294967295|R>>>11),R=A+(O^(b|~V))+N[12]+1700485571&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+N[3]+2399980690&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+N[10]+4293915773&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+N[1]+2240044497&4294967295,b=O+(R<<21&4294967295|R>>>11),R=A+(O^(b|~V))+N[8]+1873313359&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+N[15]+4264355552&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+N[6]+2734768916&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+N[13]+1309151649&4294967295,b=O+(R<<21&4294967295|R>>>11),R=A+(O^(b|~V))+N[4]+4149444226&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+N[11]+3174756917&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+N[2]+718787259&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+A&4294967295,M.g[1]=M.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+V&4294967295}r.prototype.u=function(M,A){A===void 0&&(A=M.length);for(var b=A-this.blockSize,N=this.B,O=this.h,V=0;V<A;){if(O==0)for(;V<=b;)l(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<A;)if(N[O++]=M.charCodeAt(V++),O==this.blockSize){l(this,N),O=0;break}}else for(;V<A;)if(N[O++]=M[V++],O==this.blockSize){l(this,N),O=0;break}}this.h=O,this.o+=A},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var A=1;A<M.length-8;++A)M[A]=0;var b=8*this.o;for(A=M.length-8;A<M.length;++A)M[A]=b&255,b/=256;for(this.u(M),M=Array(16),A=b=0;4>A;++A)for(var N=0;32>N;N+=8)M[b++]=this.g[A]>>>N&255;return M};function h(M,A){var b=g;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=A(M)}function d(M,A){this.h=A;for(var b=[],N=!0,O=M.length-1;0<=O;O--){var V=M[O]|0;N&&V==A||(b[O]=V,N=!1)}this.g=b}var g={};function y(M){return-128<=M&&128>M?h(M,function(A){return new d([A|0],0>A?-1:0)}):new d([M|0],0>M?-1:0)}function _(M){if(isNaN(M)||!isFinite(M))return I;if(0>M)return J(_(-M));for(var A=[],b=1,N=0;M>=b;N++)A[N]=M/b|0,b*=4294967296;return new d(A,0)}function S(M,A){if(M.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(M.charAt(0)=="-")return J(S(M.substring(1),A));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=_(Math.pow(A,8)),N=I,O=0;O<M.length;O+=8){var V=Math.min(8,M.length-O),R=parseInt(M.substring(O,O+V),A);8>V?(V=_(Math.pow(A,V)),N=N.j(V).add(_(R))):(N=N.j(b),N=N.add(_(R)))}return N}var I=y(0),D=y(1),G=y(16777216);s=d.prototype,s.m=function(){if(et(this))return-J(this).m();for(var M=0,A=1,b=0;b<this.g.length;b++){var N=this.i(b);M+=(0<=N?N:4294967296+N)*A,A*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(X(this))return"0";if(et(this))return"-"+J(this).toString(M);for(var A=_(Math.pow(M,6)),b=this,N="";;){var O=Lt(b,A).g;b=St(b,O.j(A));var V=((0<b.g.length?b.g[0]:b.h)>>>0).toString(M);if(b=O,X(b))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function X(M){if(M.h!=0)return!1;for(var A=0;A<M.g.length;A++)if(M.g[A]!=0)return!1;return!0}function et(M){return M.h==-1}s.l=function(M){return M=St(this,M),et(M)?-1:X(M)?0:1};function J(M){for(var A=M.g.length,b=[],N=0;N<A;N++)b[N]=~M.g[N];return new d(b,~M.h).add(D)}s.abs=function(){return et(this)?J(this):this},s.add=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],N=0,O=0;O<=A;O++){var V=N+(this.i(O)&65535)+(M.i(O)&65535),R=(V>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);N=R>>>16,V&=65535,R&=65535,b[O]=R<<16|V}return new d(b,b[b.length-1]&-2147483648?-1:0)};function St(M,A){return M.add(J(A))}s.j=function(M){if(X(this)||X(M))return I;if(et(this))return et(M)?J(this).j(J(M)):J(J(this).j(M));if(et(M))return J(this.j(J(M)));if(0>this.l(G)&&0>M.l(G))return _(this.m()*M.m());for(var A=this.g.length+M.g.length,b=[],N=0;N<2*A;N++)b[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<M.g.length;O++){var V=this.i(N)>>>16,R=this.i(N)&65535,Te=M.i(O)>>>16,zt=M.i(O)&65535;b[2*N+2*O]+=R*zt,mt(b,2*N+2*O),b[2*N+2*O+1]+=V*zt,mt(b,2*N+2*O+1),b[2*N+2*O+1]+=R*Te,mt(b,2*N+2*O+1),b[2*N+2*O+2]+=V*Te,mt(b,2*N+2*O+2)}for(N=0;N<A;N++)b[N]=b[2*N+1]<<16|b[2*N];for(N=A;N<2*A;N++)b[N]=0;return new d(b,0)};function mt(M,A){for(;(M[A]&65535)!=M[A];)M[A+1]+=M[A]>>>16,M[A]&=65535,A++}function ct(M,A){this.g=M,this.h=A}function Lt(M,A){if(X(A))throw Error("division by zero");if(X(M))return new ct(I,I);if(et(M))return A=Lt(J(M),A),new ct(J(A.g),J(A.h));if(et(A))return A=Lt(M,J(A)),new ct(J(A.g),A.h);if(30<M.g.length){if(et(M)||et(A))throw Error("slowDivide_ only works with positive integers.");for(var b=D,N=A;0>=N.l(M);)b=yt(b),N=yt(N);var O=Ct(b,1),V=Ct(N,1);for(N=Ct(N,2),b=Ct(b,2);!X(N);){var R=V.add(N);0>=R.l(M)&&(O=O.add(b),V=R),N=Ct(N,1),b=Ct(b,1)}return A=St(M,O.j(A)),new ct(O,A)}for(O=I;0<=M.l(A);){for(b=Math.max(1,Math.floor(M.m()/A.m())),N=Math.ceil(Math.log(b)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=_(b),R=V.j(A);et(R)||0<R.l(M);)b-=N,V=_(b),R=V.j(A);X(V)&&(V=D),O=O.add(V),M=St(M,R)}return new ct(O,M)}s.A=function(M){return Lt(this,M).h},s.and=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],N=0;N<A;N++)b[N]=this.i(N)&M.i(N);return new d(b,this.h&M.h)},s.or=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],N=0;N<A;N++)b[N]=this.i(N)|M.i(N);return new d(b,this.h|M.h)},s.xor=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],N=0;N<A;N++)b[N]=this.i(N)^M.i(N);return new d(b,this.h^M.h)};function yt(M){for(var A=M.g.length+1,b=[],N=0;N<A;N++)b[N]=M.i(N)<<1|M.i(N-1)>>>31;return new d(b,M.h)}function Ct(M,A){var b=A>>5;A%=32;for(var N=M.g.length-b,O=[],V=0;V<N;V++)O[V]=0<A?M.i(V+b)>>>A|M.i(V+b+1)<<32-A:M.i(V+b);return new d(O,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,N0=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=S,js=d}).apply(typeof L_<"u"?L_:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D0,fl,x0,Ac,zd,O0,M0,V0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,p){return u==Array.prototype||u==Object.prototype||(u[m]=p.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var m=0;m<u.length;++m){var p=u[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=i(this);function l(u,m){if(m)t:{var p=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var P=u[T];if(!(P in p))break t;p=p[P]}u=u[u.length-1],T=p[u],m=m(T),m!=T&&m!=null&&t(p,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var p=0,T=!1,P={next:function(){if(!T&&p<u.length){var q=p++;return{value:m(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}l("Array.prototype.values",function(u){return u||function(){return h(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function S(u,m,p){return u.call.apply(u.bind,arguments)}function I(u,m,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,T),u.apply(m,P)}}return function(){return u.apply(m,arguments)}}function D(u,m,p){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:I,D.apply(null,arguments)}function G(u,m){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function X(u,m){function p(){}p.prototype=m.prototype,u.aa=m.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,P,q){for(var tt=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)tt[Bt-2]=arguments[Bt];return m.prototype[P].apply(T,tt)}}function et(u){const m=u.length;if(0<m){const p=Array(m);for(let T=0;T<m;T++)p[T]=u[T];return p}return[]}function J(u,m){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(y(T)){const P=u.length||0,q=T.length||0;u.length=P+q;for(let tt=0;tt<q;tt++)u[P+tt]=T[tt]}else u.push(T)}}class St{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function mt(u){return/^[\s\xa0]*$/.test(u)}function ct(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Lt(u){return Lt[" "](u),u}Lt[" "]=function(){};var yt=ct().indexOf("Gecko")!=-1&&!(ct().toLowerCase().indexOf("webkit")!=-1&&ct().indexOf("Edge")==-1)&&!(ct().indexOf("Trident")!=-1||ct().indexOf("MSIE")!=-1)&&ct().indexOf("Edge")==-1;function Ct(u,m,p){for(const T in u)m.call(p,u[T],T,u)}function M(u,m){for(const p in u)m.call(void 0,u[p],p,u)}function A(u){const m={};for(const p in u)m[p]=u[p];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let p,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(p in T)u[p]=T[p];for(let q=0;q<b.length;q++)p=b[q],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function O(u){var m=1;u=u.split(":");const p=[];for(;0<m&&u.length;)p.push(u.shift()),m--;return u.length&&p.push(u.join(":")),p}function V(u){g.setTimeout(()=>{throw u},0)}function R(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Te{constructor(){this.h=this.g=null}add(m,p){const T=zt.get();T.set(m,p),this.h?this.h.next=T:this.g=T,this.h=T}}var zt=new St(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,ot=!1,jt=new Te,C=()=>{const u=g.Promise.resolve(void 0);nt=()=>{u.then($)}};var $=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(p){V(p)}var m=zt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ot=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ht=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};g.addEventListener("test",p,m),g.removeEventListener("test",p,m)}catch{}return u}();function Nt(u,m){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(yt){t:{try{Lt(m.nodeName);var P=!0;break t}catch{}P=!1}P||(m=null)}}else p=="mouseover"?m=u.fromElement:p=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Nt.aa.h.call(this)}}X(Nt,W);var vt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),st=0;function bt(u,m,p,T,P){this.listener=u,this.proxy=null,this.src=m,this.type=p,this.capture=!!T,this.ha=P,this.key=++st,this.da=this.fa=!1}function Et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ot(u){this.src=u,this.g={},this.h=0}Ot.prototype.add=function(u,m,p,T,P){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var tt=Ft(u,m,T,P);return-1<tt?(m=u[tt],p||(m.fa=!1)):(m=new bt(m,this.src,q,!!T,P),m.fa=p,u.push(m)),m};function $t(u,m){var p=m.type;if(p in u.g){var T=u.g[p],P=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=P)&&Array.prototype.splice.call(T,P,1),q&&(Et(m),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Ft(u,m,p,T){for(var P=0;P<u.length;++P){var q=u[P];if(!q.da&&q.listener==m&&q.capture==!!p&&q.ha==T)return P}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),Un={};function Ei(u,m,p,T,P){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Ei(u,m[q],p,T,P);return null}return p=Hl(p),u&&u[pe]?u.K(m,p,_(T)?!!T.capture:!1,P):ln(u,m,p,!1,T,P)}function ln(u,m,p,T,P,q){if(!m)throw Error("Invalid event type");var tt=_(P)?!!P.capture:!!P,Bt=qr(u);if(Bt||(u[ce]=Bt=new Ot(u)),p=Bt.add(m,p,T,tt,q),p.proxy)return p;if(T=es(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)ht||(P=tt),P===void 0&&(P=!1),u.addEventListener(m.toString(),T,P);else if(u.attachEvent)u.attachEvent($s(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function es(){function u(p){return m.call(u.src,u.listener,p)}const m=dh;return u}function Ti(u,m,p,T,P){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ti(u,m[q],p,T,P);else T=_(T)?!!T.capture:!!T,p=Hl(p),u&&u[pe]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],p=Ft(q,p,T,P),-1<p&&(Et(q[p]),Array.prototype.splice.call(q,p,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=qr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ft(m,p,T,P)),(p=-1<u?m[u]:null)&&Yn(p))}function Yn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[pe])$t(m.i,u);else{var p=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(p,T,u.capture):m.detachEvent?m.detachEvent($s(p),T):m.addListener&&m.removeListener&&m.removeListener(T),(p=qr(m))?($t(p,u),p.h==0&&(p.src=null,m[ce]=null)):Et(u)}}}function $s(u){return u in Un?Un[u]:Un[u]="on"+u}function dh(u,m){if(u.da)u=!0;else{m=new Nt(m,this);var p=u.listener,T=u.ha||u.src;u.fa&&Yn(u),u=p.call(T,m)}return u}function qr(u){return u=u[ce],u instanceof Ot?u:null}var io="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hl(u){return typeof u=="function"?u:(u[io]||(u[io]=function(m){return u.handleEvent(m)}),u[io])}function de(){it.call(this),this.i=new Ot(this),this.M=this,this.F=null}X(de,it),de.prototype[pe]=!0,de.prototype.removeEventListener=function(u,m,p,T){Ti(this,u,m,p,T)};function Zt(u,m){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new W(m,u);else if(m instanceof W)m.target=m.target||u;else{var P=m;m=new W(T,u),N(m,P)}if(P=!0,p)for(var q=p.length-1;0<=q;q--){var tt=m.g=p[q];P=dn(tt,T,!0,m)&&P}if(tt=m.g=u,P=dn(tt,T,!0,m)&&P,P=dn(tt,T,!1,m)&&P,p)for(q=0;q<p.length;q++)tt=m.g=p[q],P=dn(tt,T,!1,m)&&P}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var p=u.g[m],T=0;T<p.length;T++)Et(p[T]);delete u.g[m],u.h--}}this.F=null},de.prototype.K=function(u,m,p,T){return this.i.add(String(u),m,!1,p,T)},de.prototype.L=function(u,m,p,T){return this.i.add(String(u),m,!0,p,T)};function dn(u,m,p,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,q=0;q<m.length;++q){var tt=m[q];if(tt&&!tt.da&&tt.capture==p){var Bt=tt.listener,Ne=tt.ha||tt.src;tt.fa&&$t(u.i,tt),P=Bt.call(Ne,T)!==!1&&P}}return P&&!T.defaultPrevented}function $e(u,m,p){if(typeof u=="function")p&&(u=D(u,p));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Gl(u){u.g=$e(()=>{u.g=null,u.i&&(u.i=!1,Gl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class mh extends it{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Gl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(u){it.call(this),this.h=u,this.g={}}X(Zs,it);var Js=[];function Ws(u){Ct(u.g,function(m,p){this.g.hasOwnProperty(p)&&Yn(m)},u),u.g={}}Zs.prototype.N=function(){Zs.aa.N.call(this),Ws(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=g.JSON.stringify,Hr=g.JSON.parse,tr=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function so(){}so.prototype.h=null;function ro(u){return u.h||(u.h=u.i())}function ao(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ai(){W.call(this,"d")}X(Ai,W);function oo(){W.call(this,"c")}X(oo,W);var Kn={},lo=null;function ns(){return lo=lo||new de}Kn.La="serverreachability";function Gr(u){W.call(this,Kn.La,u)}X(Gr,W);function is(u){const m=ns();Zt(m,new Gr(m))}Kn.STAT_EVENT="statevent";function Fl(u,m){W.call(this,Kn.STAT_EVENT,u),this.stat=m}X(Fl,W);function le(u){const m=ns();Zt(m,new Fl(m,u))}Kn.Ma="timingevent";function Ce(u,m){W.call(this,Kn.Ma,u),this.size=m}X(Ce,W);function Se(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function Sn(){this.g=!0}Sn.prototype.xa=function(){this.g=!1};function uo(u,m,p,T,P,q){u.info(function(){if(u.g)if(q)for(var tt="",Bt=q.split("&"),Ne=0;Ne<Bt.length;Ne++){var qt=Bt[Ne].split("=");if(1<qt.length){var Ue=qt[0];qt=qt[1];var De=Ue.split("_");tt=2<=De.length&&De[1]=="type"?tt+(Ue+"="+qt+"&"):tt+(Ue+"=redacted&")}}else tt=null;else tt=q;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+m+`
`+p+`
`+tt})}function gh(u,m,p,T,P,q,tt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+m+`
`+p+`
`+q+" "+tt})}function ss(u,m,p,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+er(u,p)+(T?" "+T:"")})}function Ql(u,m){u.info(function(){return"TIMEOUT: "+m})}Sn.prototype.info=function(){};function er(u,m){if(!u.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var P=T[1];if(Array.isArray(P)&&!(1>P.length)){var q=P[0];if(q!="noop"&&q!="stop"&&q!="close")for(var tt=1;tt<P.length;tt++)P[tt]=""}}}}return Ln(p)}catch{return m}}var rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function $n(){}X($n,so),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Xn=new $n;function sn(u,m,p,T){this.j=u,this.i=m,this.l=p,this.R=T||1,this.U=new Zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}var co={},Fr={};function zn(u,m,p){u.L=1,u.v=ar(mn(m)),u.m=p,u.P=!0,wi(u,null)}function wi(u,m){u.F=Date.now(),nr(u),u.A=mn(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),yo(p.i,"t",T),u.C=0,p=u.j.J,u.h=new ye,u.g=lu(u.j,p?m:null,!u.m),0<u.O&&(u.M=new mh(D(u.Y,u,u.g),u.O)),m=u.U,p=u.g,T=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(Js[0]=P.toString()),P=Js);for(var q=0;q<P.length;q++){var tt=Ei(p,P[q],T||m.handleEvent,!1,m.h||m);if(!tt)break;m.g[tt.key]=tt}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),is(),uo(u.i,u.u,u.A,u.l,u.R,u.m)}sn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Rn(u)==3?m.j():this.Y(u)},sn.prototype.Y=function(u){try{if(u==this.g)t:{const De=Rn(this.g);var m=this.g.Ba();const Mi=this.g.Z();if(!(3>De)&&(De!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||De!=4||m==7||(m==8||0>=Mi?is(3):is(2)),as(this);var p=this.g.Z();this.X=p;e:if(Yl(this)){var T=tu(this.g);u="";var P=T.length,q=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qe(this),Zn(this);var tt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(q&&m==P-1)});T.length=0,this.h.g+=u,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=p==200,gh(this.i,this.u,this.A,this.l,this.R,De,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Bt,Ne=this.g;if((Bt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(Bt)){var qt=Bt;break e}}qt=null}if(p=qt)ss(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ir(this,p);else{this.o=!1,this.s=3,le(12),qe(this),Zn(this);break t}}if(this.P){p=!0;let He;for(;!this.J&&this.C<tt.length;)if(He=Kl(this,tt),He==Fr){De==4&&(this.s=4,le(14),p=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(He==co){this.s=4,le(15),ss(this.i,this.l,tt,"[Invalid Chunk]"),p=!1;break}else ss(this.i,this.l,He,null),ir(this,He);if(Yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||tt.length!=0||this.h.h||(this.s=1,le(16),p=!1),this.o=this.o&&p,!p)ss(this.i,this.l,tt,"[Invalid Chunked Response]"),qe(this),Zn(this);else if(0<tt.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),mr(Ue),Ue.M=!0,le(11))}}else ss(this.i,this.l,tt,null),ir(this,tt);De==4&&qe(this),this.o&&!this.J&&(De==4?ru(this.j,this):(this.o=!1,nr(this)))}else Eh(this.g),p==400&&0<tt.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),qe(this),Zn(this)}}}catch{}finally{}};function Yl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kl(u,m){var p=u.C,T=m.indexOf(`
`,p);return T==-1?Fr:(p=Number(m.substring(p,T)),isNaN(p)?co:(T+=1,T+p>m.length?Fr:(m=m.slice(T,T+p),u.C=T+p,m)))}sn.prototype.cancel=function(){this.J=!0,qe(this)};function nr(u){u.S=Date.now()+u.I,Xl(u,u.I)}function Xl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Se(D(u.ba,u),m)}function as(u){u.B&&(g.clearTimeout(u.B),u.B=null)}sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ql(this.i,this.A),this.L!=2&&(is(),le(17)),qe(this),this.s=2,Zn(this)):Xl(this,this.S-u)};function Zn(u){u.j.G==0||u.J||ru(u.j,u)}function qe(u){as(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ws(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ir(u,m){try{var p=u.j;if(p.G!=0&&(p.g==u||ho(p.h,u))){if(!u.K&&ho(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ia(p),ea(p);else break t;So(p),le(18)}}else p.za=P[1],0<p.za-p.T&&37500>P[2]&&p.F&&p.v==0&&!p.C&&(p.C=Se(D(p.Za,p),6e3));if(1>=Yr(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Oi(p,11)}else if((u.K||p.g==u)&&ia(p),!mt(m))for(P=p.Da.g.parse(m),m=0;m<P.length;m++){let qt=P[m];if(p.T=qt[0],qt=qt[1],p.G==2)if(qt[0]=="c"){p.K=qt[1],p.ia=qt[2];const Ue=qt[3];Ue!=null&&(p.la=Ue,p.j.info("VER="+p.la));const De=qt[4];De!=null&&(p.Aa=De,p.j.info("SVER="+p.Aa));const Mi=qt[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(T=1.5*Mi,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const He=u.g;if(He){const si=He.g?He.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var q=T.h;q.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Kr(q,q.h),q.h=null))}if(T.D){const bo=He.g?He.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(T.ya=bo,te(T.I,T.D,bo))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var tt=u;if(T.qa=ou(T,T.J?T.ia:null,T.W),tt.K){rn(T.h,tt);var Bt=tt,Ne=T.L;Ne&&(Bt.I=Ne),Bt.B&&(as(Bt),nr(Bt)),T.g=tt}else iu(T);0<p.i.length&&na(p)}else qt[0]!="stop"&&qt[0]!="close"||Oi(p,7);else p.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?Oi(p,7):Eo(p):qt[0]!="noop"&&p.l&&p.l.ta(qt),p.v=0)}}is(4)}catch{}}var $l=class{constructor(u,m){this.g=u,this.map=m}};function Ri(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Yr(u){return u.h?1:u.g?u.g.size:0}function ho(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Kr(u,m){u.g?u.g.add(m):u.h=m}function rn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ri.prototype.cancel=function(){if(this.i=fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function fo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const p of u.g.values())m=m.concat(p.D);return m}return et(u.i)}function ph(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],p=u.length,T=0;T<p;T++)m.push(u[T]);return m}m=[],p=0;for(T in u)m[p++]=u[T];return m}function Xr(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var p=0;p<u;p++)m.push(p);return m}m=[],p=0;for(const T in u)m[p++]=T;return m}}}function mo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var p=Xr(u),T=ph(u),P=T.length,q=0;q<P;q++)m.call(void 0,T[q],p&&p[q],u)}var sr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yh(u,m){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),P=null;if(0<=T){var q=u[p].substring(0,T);P=u[p].substring(T+1)}else q=u[p];m(q,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Ae(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ae){this.h=u.h,rr(this,u.j),this.o=u.o,this.g=u.g,os(this,u.s),this.l=u.l;var m=u.i,p=new Ci;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),Ii(this,p),this.m=u.m}else u&&(m=String(u).match(sr))?(this.h=!1,rr(this,m[1]||"",!0),this.o=An(m[2]||""),this.g=An(m[3]||"",!0),os(this,m[4]),this.l=An(m[5]||"",!0),Ii(this,m[6]||"",!0),this.m=An(m[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Ae.prototype.toString=function(){var u=[],m=this.j;m&&u.push(or(m,go,!0),":");var p=this.g;return(p||m=="file")&&(u.push("//"),(m=this.o)&&u.push(or(m,go,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(or(p,p.charAt(0)=="/"?_h:po,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",or(p,$r)),u.join("")};function mn(u){return new Ae(u)}function rr(u,m,p){u.j=p?An(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function os(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ii(u,m,p){m instanceof Ci?(u.i=m,Jl(u.i,u.h)):(p||(m=or(m,vh)),u.i=new Ci(m,u.h))}function te(u,m,p){u.i.set(m,p)}function ar(u){return te(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function An(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function or(u,m,p){return typeof u=="string"?(u=encodeURI(u).replace(m,Zl),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var go=/[#\/\?@]/g,po=/[#\?:]/g,_h=/[#\?]/g,vh=/[#\?@]/g,$r=/#/g;function Ci(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function bn(u){u.g||(u.g=new Map,u.h=0,u.i&&yh(u.i,function(m,p){u.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}s=Ci.prototype,s.add=function(u,m){bn(this),this.i=null,u=Jn(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(m),this.h+=1,this};function Ni(u,m){bn(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Di(u,m){return bn(u),m=Jn(u,m),u.g.has(m)}s.forEach=function(u,m){bn(this),this.g.forEach(function(p,T){p.forEach(function(P){u.call(m,P,T,this)},this)},this)},s.na=function(){bn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let T=0;T<m.length;T++){const P=u[T];for(let q=0;q<P.length;q++)p.push(m[T])}return p},s.V=function(u){bn(this);let m=[];if(typeof u=="string")Di(this,u)&&(m=m.concat(this.g.get(Jn(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)m=m.concat(u[p])}return m},s.set=function(u,m){return bn(this),this.i=null,u=Jn(this,u),Di(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function yo(u,m,p){Ni(u,m),0<p.length&&(u.i=null,u.g.set(Jn(u,m),et(p)),u.h+=p.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var T=m[p];const q=encodeURIComponent(String(T)),tt=this.V(T);for(T=0;T<tt.length;T++){var P=q;tt[T]!==""&&(P+="="+encodeURIComponent(String(tt[T]))),u.push(P)}}return this.i=u.join("&")};function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Jl(u,m){m&&!u.j&&(bn(u),u.i=null,u.g.forEach(function(p,T){var P=T.toLowerCase();T!=P&&(Ni(this,T),yo(this,P,p))},u)),u.j=m}function lr(u,m){const p=new Sn;if(g.Image){const T=new Image;T.onload=G(wn,p,"TestLoadImage: loaded",!0,m,T),T.onerror=G(wn,p,"TestLoadImage: error",!1,m,T),T.onabort=G(wn,p,"TestLoadImage: abort",!1,m,T),T.ontimeout=G(wn,p,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function jn(u,m){const p=new Sn,T=new AbortController,P=setTimeout(()=>{T.abort(),wn(p,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(P),q.ok?wn(p,"TestPingServer: ok",!0,m):wn(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),wn(p,"TestPingServer: error",!1,m)})}function wn(u,m,p,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(p)}catch{}}function ur(){this.g=new tr}function Wn(u,m,p){const T=p||"";try{mo(u,function(P,q){let tt=P;_(P)&&(tt=Ln(P)),m.push(T+q+"="+encodeURIComponent(tt))})}catch(P){throw m.push(T+"type="+encodeURIComponent("_badmap")),P}}function ls(u){this.l=u.Ub||null,this.j=u.eb||!1}X(ls,so),ls.prototype.g=function(){return new xi(this.l,this.j)},ls.prototype.i=function(u){return function(){return u}}({});function xi(u,m){de.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(xi,de),s=xi.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ei(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_o(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function _o(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ti(this):ei(this),this.readyState==3&&_o(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,ti(this))},s.Qa=function(u){this.g&&(this.response=u,ti(this))},s.ga=function(){this.g&&ti(this)};function ti(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ei(u)}s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=m.next();return u.join(`\r
`)};function ei(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vo(u){let m="";return Ct(u,function(p,T){m+=T,m+=":",m+=p,m+=`\r
`}),m}function Pe(u,m,p){t:{for(T in p){var T=!1;break t}T=!0}T||(p=vo(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):te(u,m,p))}function Kt(u){de.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(Kt,de);var Zr=/^https?$/i,cr=["POST","PUT"];s=Kt.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,m,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?ro(this.o):ro(Xn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Wl(this,q);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)p.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())p.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(q=>q.toLowerCase()=="content-type"),P=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(cr,m,void 0))||T||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,tt]of p)this.g.setRequestHeader(q,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hr(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Wl(this,q)}};function Wl(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Jr(u),ni(u)}function Jr(u){u.A||(u.A=!0,Zt(u,"complete"),Zt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Zt(this,"complete"),Zt(this,"abort"),ni(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),Kt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Wr(this):this.bb())},s.bb=function(){Wr(this)};function Wr(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Rn(u)!=4||u.Z()!=2)){if(u.u&&Rn(u)==4)$e(u.Ea,0,u);else if(Zt(u,"readystatechange"),Rn(u)==4){u.h=!1;try{const tt=u.Z();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var p;if(!(p=m)){var T;if(T=tt===0){var P=String(u.D).match(sr)[1]||null;!P&&g.self&&g.self.location&&(P=g.self.location.protocol.slice(0,-1)),T=!Zr.test(P?P.toLowerCase():"")}p=T}if(p)Zt(u,"complete"),Zt(u,"success");else{u.m=6;try{var q=2<Rn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Jr(u)}}finally{ni(u)}}}}function ni(u,m){if(u.g){hr(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Zt(u,"ready");try{p.onreadystatechange=T}catch{}}}function hr(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Rn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Hr(m)}};function tu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Eh(u){const m={};u=(u.g&&2<=Rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(mt(u[T]))continue;var p=O(u[T]);const P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const q=m[P]||[];m[P]=q,q.push(p)}M(m,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(u,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||m}function ta(u){this.Aa=0,this.i=[],this.j=new Sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fr("baseRetryDelayMs",5e3,u),this.cb=fr("retryDelaySeedMs",1e4,u),this.Wa=fr("forwardChannelMaxRetries",2,u),this.wa=fr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(u&&u.concurrentRequestLimit),this.Da=new ur,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ta.prototype,s.la=8,s.G=1,s.connect=function(u,m,p,T){le(0),this.W=u,this.H=m||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=ou(this,null,this.W),na(this)};function Eo(u){if(eu(u),u.G==3){var m=u.U++,p=mn(u.I);if(te(p,"SID",u.K),te(p,"RID",m),te(p,"TYPE","terminate"),dr(u,p),m=new sn(u,u.j,m),m.L=2,m.v=ar(mn(p)),p=!1,g.navigator&&g.navigator.sendBeacon)try{p=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&g.Image&&(new Image().src=m.v,p=!0),p||(m.g=lu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),nr(m)}au(u)}function ea(u){u.g&&(mr(u),u.g.cancel(),u.g=null)}function eu(u){ea(u),u.u&&(g.clearTimeout(u.u),u.u=null),ia(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function na(u){if(!Qr(u.h)&&!u.s){u.s=!0;var m=u.Ga;nt||C(),ot||(nt(),ot=!0),jt.add(m,u),u.B=0}}function Th(u,m){return Yr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Se(D(u.Ga,u,m),Ao(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new sn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=A(q),N(q,this.S)):q=this.S),this.m!==null||this.O||(P.H=q,q=null),this.P)t:{for(var m=0,p=0;p<this.i.length;p++){e:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=p;break t}if(m===4096||p===this.i.length-1){m=p+1;break t}}m=1e3}else m=1e3;m=nu(this,P,m),p=mn(this.I),te(p,"RID",u),te(p,"CVER",22),this.D&&te(p,"X-HTTP-Session-Id",this.D),dr(this,p),q&&(this.O?m="headers="+encodeURIComponent(String(vo(q)))+"&"+m:this.m&&Pe(p,this.m,q)),Kr(this.h,P),this.Ua&&te(p,"TYPE","init"),this.P?(te(p,"$req",m),te(p,"SID","null"),P.T=!0,zn(P,p,null)):zn(P,p,m),this.G=2}}else this.G==3&&(u?To(this,u):this.i.length==0||Qr(this.h)||To(this))};function To(u,m){var p;m?p=m.l:p=u.U++;const T=mn(u.I);te(T,"SID",u.K),te(T,"RID",p),te(T,"AID",u.T),dr(u,T),u.m&&u.o&&Pe(T,u.m,u.o),p=new sn(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),m&&(u.i=m.D.concat(u.i)),m=nu(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Kr(u.h,p),zn(p,T,m)}function dr(u,m){u.H&&Ct(u.H,function(p,T){te(m,T,p)}),u.l&&mo({},function(p,T){te(m,T,p)})}function nu(u,m,p){p=Math.min(u.i.length,p);var T=u.l?D(u.l.Na,u.l,u):null;t:{var P=u.i;let q=-1;for(;;){const tt=["count="+p];q==-1?0<p?(q=P[0].g,tt.push("ofs="+q)):q=0:tt.push("ofs="+q);let Bt=!0;for(let Ne=0;Ne<p;Ne++){let qt=P[Ne].g;const Ue=P[Ne].map;if(qt-=q,0>qt)q=Math.max(0,P[Ne].g-100),Bt=!1;else try{Wn(Ue,tt,"req"+qt+"_")}catch{T&&T(Ue)}}if(Bt){T=tt.join("&");break t}}}return u=u.i.splice(0,p),m.D=u,T}function iu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;nt||C(),ot||(nt(),ot=!0),jt.add(m,u),u.v=0}}function So(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Se(D(u.Fa,u),Ao(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Se(D(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),ea(this),su(this))};function mr(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function su(u){u.g=new sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=mn(u.qa);te(m,"RID","rpc"),te(m,"SID",u.K),te(m,"AID",u.T),te(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&te(m,"TO",u.ja),te(m,"TYPE","xmlhttp"),dr(u,m),u.m&&u.o&&Pe(m,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=ar(mn(m)),p.m=null,p.P=!0,wi(p,u)}s.Za=function(){this.C!=null&&(this.C=null,ea(this),So(this),le(19))};function ia(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function ru(u,m){var p=null;if(u.g==m){ia(u),mr(u),u.g=null;var T=2}else if(ho(u.h,m))p=m.D,rn(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var P=u.B;T=ns(),Zt(T,new Ce(T,p)),na(u)}else iu(u);else if(P=m.s,P==3||P==0&&0<m.X||!(T==1&&Th(u,m)||T==2&&So(u)))switch(p&&0<p.length&&(m=u.h,m.i=m.i.concat(p)),P){case 1:Oi(u,5);break;case 4:Oi(u,10);break;case 3:Oi(u,6);break;default:Oi(u,2)}}}function Ao(u,m){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*m}function Oi(u,m){if(u.j.info("Error code "+m),m==2){var p=D(u.fb,u),T=u.Xa;const P=!T;T=new Ae(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||rr(T,"https"),ar(T),P?lr(T.toString(),p):jn(T.toString(),p)}else le(2);u.G=0,u.l&&u.l.sa(m),au(u),eu(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function au(u){if(u.G=0,u.ka=[],u.l){const m=fo(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ka,m),J(u.ka,u.i),u.h.i.length=0,et(u.i),u.i.length=0),u.l.ra()}}function ou(u,m,p){var T=p instanceof Ae?mn(p):new Ae(p);if(T.g!="")m&&(T.g=m+"."+T.g),os(T,T.s);else{var P=g.location;T=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var q=new Ae(null);T&&rr(q,T),m&&(q.g=m),P&&os(q,P),p&&(q.l=p),T=q}return p=u.D,m=u.ya,p&&m&&te(T,p,m),te(T,"VER",u.la),dr(u,T),T}function lu(u,m,p){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Kt(new ls({eb:p})):new Kt(u.pa),m.Ha(u.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}s=uu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function sa(){}sa.prototype.g=function(u,m){return new an(u,m)};function an(u,m){de.call(this),this.g=new ta(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!mt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!mt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ii(this)}X(an,de),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Eo(this.g)},an.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Ln(u),u=p);m.i.push(new $l(m.Ya++,u)),m.G==3&&na(m)},an.prototype.N=function(){this.g.l=null,delete this.j,Eo(this.g),delete this.g,an.aa.N.call(this)};function cu(u){Ai.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const p in m){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}X(cu,Ai);function hu(){oo.call(this),this.status=1}X(hu,oo);function ii(u){this.g=u}X(ii,uu),ii.prototype.ua=function(){Zt(this.g,"a")},ii.prototype.ta=function(u){Zt(this.g,new cu(u))},ii.prototype.sa=function(u){Zt(this.g,new hu)},ii.prototype.ra=function(){Zt(this.g,"b")},sa.prototype.createWebChannel=sa.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,V0=function(){return new sa},M0=function(){return ns()},O0=Kn,zd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rs.NO_ERROR=0,rs.TIMEOUT=8,rs.HTTP_ERROR=6,Ac=rs,bi.COMPLETE="complete",x0=bi,ao.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",de.prototype.listen=de.prototype.K,fl=ao,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,D0=Kt}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const z_="@firebase/firestore",j_="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new nm("@firebase/firestore");function Ma(){return Pr.logLevel}function rt(s,...t){if(Pr.logLevel<=kt.DEBUG){const i=t.map(fm);Pr.debug(`Firestore (${Wa}): ${s}`,...i)}}function Ji(s,...t){if(Pr.logLevel<=kt.ERROR){const i=t.map(fm);Pr.error(`Firestore (${Wa}): ${s}`,...i)}}function Ha(s,...t){if(Pr.logLevel<=kt.WARN){const i=t.map(fm);Pr.warn(`Firestore (${Wa}): ${s}`,...i)}}function fm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(s,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,k0(s,r,i)}function k0(s,t,i){let r=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw Ji(r),new Error(r)}function Xt(s,t,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||k0(t,l,r)}function Rt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends ts{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ww{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(tn.UNAUTHENTICATED))}shutdown(){}}class Rw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Iw{constructor(t){this.t=t,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Xt(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let h=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Bs,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const y=h;t.enqueueRetryable(async()=>{await y.promise,await l(this.currentUser)})},g=y=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Bs)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xt(typeof r.accessToken=="string",31837,{l:r}),new P0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Xt(t===null||typeof t=="string",2055,{h:t}),new tn(t)}}class Cw{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Nw{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new Cw(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dw{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Xt(this.o===void 0,3512);const r=h=>{h.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,rt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable(()=>r(h))};const l=h=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new B_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Xt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new B_(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=xw(40);for(let h=0;h<l.length;++h)r.length<20&&l[h]<i&&(r+=t.charAt(l[h]%62))}return r}}function Pt(s,t){return s<t?-1:s>t?1:0}function jd(s,t){const i=Math.min(s.length,t.length);for(let r=0;r<i;r++){const l=s.charAt(r),h=t.charAt(r);if(l!==h)return Rd(l)===Rd(h)?Pt(l,h):Rd(l)?1:-1}return Pt(s.length,t.length)}const Ow=55296,Mw=57343;function Rd(s){const t=s.charCodeAt(0);return t>=Ow&&t<=Mw}function Ga(s,t,i){return s.length===t.length&&s.every((r,l)=>i(r,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="__name__";class ci{constructor(t,i,r){i===void 0?i=0:i>t.length&&_t(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&_t(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return ci.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof ci?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let l=0;l<r;l++){const h=ci.compareSegments(t.get(l),i.get(l));if(h!==0)return h}return Pt(t.length,i.length)}static compareSegments(t,i){const r=ci.isNumericId(t),l=ci.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?ci.extractNumericId(t).compare(ci.extractNumericId(i)):jd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return js.fromString(t.substring(4,t.length-2))}}class ae extends ci{construct(t,i,r){return new ae(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new lt(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(l=>l.length>0))}return new ae(i)}static emptyPath(){return new ae([])}}const Vw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends ci{construct(t,i,r){return new Ke(t,i,r)}static isValidIdentifier(t){return Vw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===q_}static keyField(){return new Ke([q_])}static fromServerFormat(t){const i=[];let r="",l=0;const h=()=>{if(r.length===0)throw new lt(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new lt(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new lt(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(r+=g,l++):(h(),l++)}if(h(),d)throw new lt(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ke(i)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(ae.fromString(t))}static fromName(t){return new dt(ae.fromString(t).popFirst(5))}static empty(){return new dt(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ae.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new ae(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(s,t,i){if(!i)throw new lt(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function kw(s,t,i,r){if(t===!0&&r===!0)throw new lt(Z.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function H_(s){if(!dt.isDocumentKey(s))throw new lt(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function G_(s){if(dt.isDocumentKey(s))throw new lt(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function L0(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function mm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":_t(12329,{type:typeof s})}function Fa(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new lt(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=mm(s);throw new lt(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(s,t){const i={typeString:s};return t&&(i.value=t),i}function Ll(s,t){if(!L0(s))throw new lt(Z.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const l=t[r].typeString,h="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${r}' field to equal '${h.value}'`;break}}if(i)throw new lt(Z.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=-62135596800,Q_=1e6;class oe{static now(){return oe.fromMillis(Date.now())}static fromDate(t){return oe.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*Q_);return new oe(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new lt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new lt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<F_)throw new lt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q_}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ll(t,oe._jsonSchema))return new oe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-F_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}oe._jsonSchemaVersion="firestore/timestamp/1.0",oe._jsonSchema={type:Ie("string",oe._jsonSchemaVersion),seconds:Ie("number"),nanoseconds:Ie("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new oe(0,0))}static max(){return new wt(new oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=-1;function Pw(s,t){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=wt.fromTimestamp(r===1e9?new oe(i+1,0):new oe(i,r));return new Gs(l,dt.empty(),t)}function Uw(s){return new Gs(s.readTime,s.key,Rl)}class Gs{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new Gs(wt.min(),dt.empty(),Rl)}static max(){return new Gs(wt.max(),dt.empty(),Rl)}}function Lw(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=dt.comparator(s.documentKey,t.documentKey),i!==0?i:Pt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==zw)throw s;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new K((r,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(r,l)},this.catchCallback=h=>{this.wrapFailure(i,h).next(r,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof K?i:K.resolve(i)}catch(i){return K.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):K.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):K.reject(i)}static resolve(t){return new K((i,r)=>{i(t)})}static reject(t){return new K((i,r)=>{r(t)})}static waitFor(t){return new K((i,r)=>{let l=0,h=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++h,d&&h===l&&i()},y=>r(y))}),d=!0,h===l&&i()})}static or(t){let i=K.resolve(!1);for(const r of t)i=i.next(l=>l?K.resolve(l):r());return i}static forEach(t,i){const r=[];return t.forEach((l,h)=>{r.push(i.call(this,l,h))}),this.waitFor(r)}static mapArray(t,i){return new K((r,l)=>{const h=t.length,d=new Array(h);let g=0;for(let y=0;y<h;y++){const _=y;i(t[_]).next(S=>{d[_]=S,++g,g===h&&r(d)},S=>l(S))}})}static doWhile(t,i){return new K((r,l)=>{const h=()=>{t()===!0?i().next(()=>{h()},l):r()};h()})}}function Bw(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function eo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Wc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-1;function th(s){return s==null}function Uc(s){return s===0&&1/s==-1/0}function qw(s){return typeof s=="number"&&Number.isInteger(s)&&!Uc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="";function Hw(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=Y_(t)),t=Gw(s.get(i),t);return Y_(t)}function Gw(s,t){let i=t;const r=s.length;for(let l=0;l<r;l++){const h=s.charAt(l);switch(h){case"\0":i+="";break;case z0:i+="";break;default:i+=h}}return i}function Y_(s){return s+z0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function Lr(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function j0(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,i){this.comparator=t,this.root=i||Ye.EMPTY}insert(t,i){return new fe(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mc(this.root,t,this.comparator,!1)}getReverseIterator(){return new mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mc(this.root,t,this.comparator,!0)}}class mc{constructor(t,i,r,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=i?r(t.key,i):1,i&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ye{constructor(t,i,r,l,h){this.key=t,this.value=i,this.color=r??Ye.RED,this.left=l??Ye.EMPTY,this.right=h??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,l,h){return new Ye(t??this.key,i??this.value,r??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const h=r(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,i,r),null):h===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Ye.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,i,r,l,h){return this}insert(t,i,r){return new Ye(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(t){return new X_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof ke)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=r.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new ke(this.comparator);return i.data=t,i}}class X_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this.fields=t,t.sort(Ke.comparator)}static empty(){return new Qn([])}unionWith(t){let i=new ke(Ke.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Qn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ga(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new B0("Invalid base64 string: "+h):h}}(t);return new Xe(i)}static fromUint8Array(t){const i=function(l){let h="";for(let d=0;d<l.length;++d)h+=String.fromCharCode(l[d]);return h}(t);return new Xe(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const Fw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(s){if(Xt(!!s,39018),typeof s=="string"){let t=0;const i=Fw.exec(s);if(Xt(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ee(s.seconds),nanos:Ee(s.nanos)}}function Ee(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Qs(s){return typeof s=="string"?Xe.fromBase64String(s):Xe.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="server_timestamp",H0="__type__",G0="__previous_value__",F0="__local_write_time__";function pm(s){return(s?.mapValue?.fields||{})[H0]?.stringValue===q0}function eh(s){const t=s.mapValue.fields[G0];return pm(t)?eh(t):t}function Il(s){const t=Fs(s.mapValue.fields[F0].timestampValue);return new oe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t,i,r,l,h,d,g,y,_,S){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=S}}const Lc="(default)";class Cl{constructor(t,i){this.projectId=t,this.database=i||Lc}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===Lc}isEqual(t){return t instanceof Cl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="__type__",Yw="__max__",gc={mapValue:{}},Y0="__vector__",zc="value";function Ys(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?pm(s)?4:Xw(s)?9007199254740991:Kw(s)?10:11:_t(28295,{value:s})}function _i(s,t){if(s===t)return!0;const i=Ys(s);if(i!==Ys(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Il(s).isEqual(Il(t));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const d=Fs(l.timestampValue),g=Fs(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(l,h){return Qs(l.bytesValue).isEqual(Qs(h.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(l,h){return Ee(l.geoPointValue.latitude)===Ee(h.geoPointValue.latitude)&&Ee(l.geoPointValue.longitude)===Ee(h.geoPointValue.longitude)}(s,t);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return Ee(l.integerValue)===Ee(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const d=Ee(l.doubleValue),g=Ee(h.doubleValue);return d===g?Uc(d)===Uc(g):isNaN(d)&&isNaN(g)}return!1}(s,t);case 9:return Ga(s.arrayValue.values||[],t.arrayValue.values||[],_i);case 10:case 11:return function(l,h){const d=l.mapValue.fields||{},g=h.mapValue.fields||{};if(K_(d)!==K_(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!_i(d[y],g[y])))return!1;return!0}(s,t);default:return _t(52216,{left:s})}}function Nl(s,t){return(s.values||[]).find(i=>_i(i,t))!==void 0}function Qa(s,t){if(s===t)return 0;const i=Ys(s),r=Ys(t);if(i!==r)return Pt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Pt(s.booleanValue,t.booleanValue);case 2:return function(h,d){const g=Ee(h.integerValue||h.doubleValue),y=Ee(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(s,t);case 3:return $_(s.timestampValue,t.timestampValue);case 4:return $_(Il(s),Il(t));case 5:return jd(s.stringValue,t.stringValue);case 6:return function(h,d){const g=Qs(h),y=Qs(d);return g.compareTo(y)}(s.bytesValue,t.bytesValue);case 7:return function(h,d){const g=h.split("/"),y=d.split("/");for(let _=0;_<g.length&&_<y.length;_++){const S=Pt(g[_],y[_]);if(S!==0)return S}return Pt(g.length,y.length)}(s.referenceValue,t.referenceValue);case 8:return function(h,d){const g=Pt(Ee(h.latitude),Ee(d.latitude));return g!==0?g:Pt(Ee(h.longitude),Ee(d.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return Z_(s.arrayValue,t.arrayValue);case 10:return function(h,d){const g=h.fields||{},y=d.fields||{},_=g[zc]?.arrayValue,S=y[zc]?.arrayValue,I=Pt(_?.values?.length||0,S?.values?.length||0);return I!==0?I:Z_(_,S)}(s.mapValue,t.mapValue);case 11:return function(h,d){if(h===gc.mapValue&&d===gc.mapValue)return 0;if(h===gc.mapValue)return 1;if(d===gc.mapValue)return-1;const g=h.fields||{},y=Object.keys(g),_=d.fields||{},S=Object.keys(_);y.sort(),S.sort();for(let I=0;I<y.length&&I<S.length;++I){const D=jd(y[I],S[I]);if(D!==0)return D;const G=Qa(g[y[I]],_[S[I]]);if(G!==0)return G}return Pt(y.length,S.length)}(s.mapValue,t.mapValue);default:throw _t(23264,{he:i})}}function $_(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Pt(s,t);const i=Fs(s),r=Fs(t),l=Pt(i.seconds,r.seconds);return l!==0?l:Pt(i.nanos,r.nanos)}function Z_(s,t){const i=s.values||[],r=t.values||[];for(let l=0;l<i.length&&l<r.length;++l){const h=Qa(i[l],r[l]);if(h)return h}return Pt(i.length,r.length)}function Ya(s){return Bd(s)}function Bd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(i){const r=Fs(i);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(i){return Qs(i).toBase64()}(s.bytesValue):"referenceValue"in s?function(i){return dt.fromName(i).toString()}(s.referenceValue):"geoPointValue"in s?function(i){return`geo(${i.latitude},${i.longitude})`}(s.geoPointValue):"arrayValue"in s?function(i){let r="[",l=!0;for(const h of i.values||[])l?l=!1:r+=",",r+=Bd(h);return r+"]"}(s.arrayValue):"mapValue"in s?function(i){const r=Object.keys(i.fields||{}).sort();let l="{",h=!0;for(const d of r)h?h=!1:l+=",",l+=`${d}:${Bd(i.fields[d])}`;return l+"}"}(s.mapValue):_t(61005,{value:s})}function bc(s){switch(Ys(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=eh(s);return t?16+bc(t):16;case 5:return 2*s.stringValue.length;case 6:return Qs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((l,h)=>l+bc(h),0)}(s.arrayValue);case 10:case 11:return function(r){let l=0;return Lr(r.fields,(h,d)=>{l+=h.length+bc(d)}),l}(s.mapValue);default:throw _t(13486,{value:s})}}function qd(s){return!!s&&"integerValue"in s}function ym(s){return!!s&&"arrayValue"in s}function J_(s){return!!s&&"nullValue"in s}function W_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function wc(s){return!!s&&"mapValue"in s}function Kw(s){return(s?.mapValue?.fields||{})[Q0]?.stringValue===Y0}function _l(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Lr(s.mapValue.fields,(i,r)=>t.mapValue.fields[i]=_l(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=_l(s.arrayValue.values[i]);return t}return{...s}}function Xw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Yw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.value=t}static empty(){return new Vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!wc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=_l(i)}setAll(t){let i=Ke.emptyPath(),r={},l=[];t.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=g.popLast()}d?r[g.lastSegment()]=_l(d):l.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,r,l)}delete(t){const i=this.field(t.popLast());wc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return _i(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=i.mapValue.fields[t.get(r)];wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,r){Lr(i,(l,h)=>t[l]=h);for(const l of r)delete t[l]}clone(){return new Vn(_l(this.value))}}function K0(s){const t=[];return Lr(s.fields,(i,r)=>{const l=new Ke([i]);if(wc(r)){const h=K0(r.mapValue).fields;if(h.length===0)t.push(l);else for(const d of h)t.push(l.child(d))}else t.push(l)}),new Qn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t,i,r,l,h,d,g){this.key=t,this.documentType=i,this.version=r,this.readTime=l,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(t){return new en(t,0,wt.min(),wt.min(),wt.min(),Vn.empty(),0)}static newFoundDocument(t,i,r,l){return new en(t,1,i,wt.min(),r,l,0)}static newNoDocument(t,i){return new en(t,2,i,wt.min(),wt.min(),Vn.empty(),0)}static newUnknownDocument(t,i){return new en(t,3,i,wt.min(),wt.min(),Vn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof en&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,i){this.position=t,this.inclusive=i}}function tv(s,t,i){let r=0;for(let l=0;l<s.position.length;l++){const h=t[l],d=s.position[l];if(h.field.isKeyField()?r=dt.comparator(dt.fromName(d.referenceValue),i.key):r=Qa(d,i.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function ev(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!_i(s.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,i="asc"){this.field=t,this.dir=i}}function $w(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{}class Me extends X0{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new Jw(t,i,r):i==="array-contains"?new eR(t,r):i==="in"?new nR(t,r):i==="not-in"?new iR(t,r):i==="array-contains-any"?new sR(t,r):new Me(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new Ww(t,r):new tR(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Qa(i,this.value)):i!==null&&Ys(this.value)===Ys(i)&&this.matchesComparison(Qa(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends X0{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new vi(t,i)}matches(t){return $0(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $0(s){return s.op==="and"}function Z0(s){return Zw(s)&&$0(s)}function Zw(s){for(const t of s.filters)if(t instanceof vi)return!1;return!0}function Hd(s){if(s instanceof Me)return s.field.canonicalString()+s.op.toString()+Ya(s.value);if(Z0(s))return s.filters.map(t=>Hd(t)).join(",");{const t=s.filters.map(i=>Hd(i)).join(",");return`${s.op}(${t})`}}function J0(s,t){return s instanceof Me?function(r,l){return l instanceof Me&&r.op===l.op&&r.field.isEqual(l.field)&&_i(r.value,l.value)}(s,t):s instanceof vi?function(r,l){return l instanceof vi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce((h,d,g)=>h&&J0(d,l.filters[g]),!0):!1}(s,t):void _t(19439)}function W0(s){return s instanceof Me?function(i){return`${i.field.canonicalString()} ${i.op} ${Ya(i.value)}`}(s):s instanceof vi?function(i){return i.op.toString()+" {"+i.getFilters().map(W0).join(" ,")+"}"}(s):"Filter"}class Jw extends Me{constructor(t,i,r){super(t,i,r),this.key=dt.fromName(r.referenceValue)}matches(t){const i=dt.comparator(t.key,this.key);return this.matchesComparison(i)}}class Ww extends Me{constructor(t,i){super(t,"in",i),this.keys=tE("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class tR extends Me{constructor(t,i){super(t,"not-in",i),this.keys=tE("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function tE(s,t){return(t.arrayValue?.values||[]).map(i=>dt.fromName(i.referenceValue))}class eR extends Me{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return ym(i)&&Nl(i.arrayValue,this.value)}}class nR extends Me{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Nl(this.value.arrayValue,i)}}class iR extends Me{constructor(t,i){super(t,"not-in",i)}matches(t){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Nl(this.value.arrayValue,i)}}class sR extends Me{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!ym(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(t,i=null,r=[],l=[],h=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=h,this.startAt=d,this.endAt=g,this.Te=null}}function nv(s,t=null,i=[],r=[],l=null,h=null,d=null){return new rR(s,t,i,r,l,h,d)}function _m(s){const t=Rt(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>Hd(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(h){return h.field.canonicalString()+h.dir}(r)).join(","),th(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Ya(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Ya(r)).join(",")),t.Te=i}return t.Te}function vm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!$w(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!J0(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!ev(s.startAt,t.startAt)&&ev(s.endAt,t.endAt)}function Gd(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,i=null,r=[],l=[],h=null,d="F",g=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aR(s,t,i,r,l,h,d,g){return new nh(s,t,i,r,l,h,d,g)}function Em(s){return new nh(s)}function iv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function oR(s){return s.collectionGroup!==null}function vl(s){const t=Rt(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),i.add(h.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new ke(Ke.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(_=>{_.isInequality()&&(g=g.add(_.field))})}),g})(t).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new Bc(h,r))}),i.has(Ke.keyField().canonicalString())||t.Ie.push(new Bc(Ke.keyField(),r))}return t.Ie}function di(s){const t=Rt(s);return t.Ee||(t.Ee=lR(t,vl(s))),t.Ee}function lR(s,t){if(s.limitType==="F")return nv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new Bc(l.field,h)});const i=s.endAt?new jc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new jc(s.startAt.position,s.startAt.inclusive):null;return nv(s.path,s.collectionGroup,t,s.filters,s.limit,i,r)}}function Fd(s,t,i){return new nh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function ih(s,t){return vm(di(s),di(t))&&s.limitType===t.limitType}function eE(s){return`${_m(di(s))}|lt:${s.limitType}`}function Va(s){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(l=>W0(l)).join(", ")}]`),th(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(l=>Ya(l)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(l=>Ya(l)).join(",")),`Target(${r})`}(di(s))}; limitType=${s.limitType})`}function sh(s,t){return t.isFoundDocument()&&function(r,l){const h=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):dt.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,t)&&function(r,l){for(const h of vl(r))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(s,t)&&function(r,l){for(const h of r.filters)if(!h.matches(l))return!1;return!0}(s,t)&&function(r,l){return!(r.startAt&&!function(d,g,y){const _=tv(d,g,y);return d.inclusive?_<=0:_<0}(r.startAt,vl(r),l)||r.endAt&&!function(d,g,y){const _=tv(d,g,y);return d.inclusive?_>=0:_>0}(r.endAt,vl(r),l))}(s,t)}function uR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function nE(s){return(t,i)=>{let r=!1;for(const l of vl(s)){const h=cR(l,t,i);if(h!==0)return h;r=r||l.field.isKeyField()}return 0}}function cR(s,t,i){const r=s.field.isKeyField()?dt.comparator(t.key,i.key):function(h,d,g){const y=d.data.field(h),_=g.data.field(h);return y!==null&&_!==null?Qa(y,_):_t(42886)}(s.field,t,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _t(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[l,h]of r)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Lr(this.inner,(i,r)=>{for(const[l,h]of r)t(l,h)})}isEmpty(){return j0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new fe(dt.comparator);function Wi(){return hR}const iE=new fe(dt.comparator);function dl(...s){let t=iE;for(const i of s)t=t.insert(i.key,i);return t}function sE(s){let t=iE;return s.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function xr(){return El()}function rE(){return El()}function El(){return new zr(s=>s.toString(),(s,t)=>s.isEqual(t))}const fR=new fe(dt.comparator),dR=new ke(dt.comparator);function Ut(...s){let t=dR;for(const i of s)t=t.add(i);return t}const mR=new ke(Pt);function gR(){return mR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(t)?"-0":t}}function aE(s){return{integerValue:""+s}}function pR(s,t){return qw(t)?aE(t):Tm(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function yR(s,t,i){return s instanceof Dl?function(l,h){const d={fields:{[H0]:{stringValue:q0},[F0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&pm(h)&&(h=eh(h)),h&&(d.fields[G0]=h),{mapValue:d}}(i,t):s instanceof xl?lE(s,t):s instanceof Ol?uE(s,t):function(l,h){const d=oE(l,h),g=sv(d)+sv(l.Ae);return qd(d)&&qd(l.Ae)?aE(g):Tm(l.serializer,g)}(s,t)}function _R(s,t,i){return s instanceof xl?lE(s,t):s instanceof Ol?uE(s,t):i}function oE(s,t){return s instanceof qc?function(r){return qd(r)||function(h){return!!h&&"doubleValue"in h}(r)}(t)?t:{integerValue:0}:null}class Dl extends rh{}class xl extends rh{constructor(t){super(),this.elements=t}}function lE(s,t){const i=cE(t);for(const r of s.elements)i.some(l=>_i(l,r))||i.push(r);return{arrayValue:{values:i}}}class Ol extends rh{constructor(t){super(),this.elements=t}}function uE(s,t){let i=cE(t);for(const r of s.elements)i=i.filter(l=>!_i(l,r));return{arrayValue:{values:i}}}class qc extends rh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function sv(s){return Ee(s.integerValue||s.doubleValue)}function cE(s){return ym(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,i){this.field=t,this.transform=i}}function ER(s,t){return s.field.isEqual(t.field)&&function(r,l){return r instanceof xl&&l instanceof xl||r instanceof Ol&&l instanceof Ol?Ga(r.elements,l.elements,_i):r instanceof qc&&l instanceof qc?_i(r.Ae,l.Ae):r instanceof Dl&&l instanceof Dl}(s.transform,t.transform)}class TR{constructor(t,i){this.version=t,this.transformResults=i}}class mi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new mi}static exists(t){return new mi(void 0,t)}static updateTime(t){return new mi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Rc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class ah{}function hE(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new dE(s.key,mi.none()):new zl(s.key,s.data,mi.none());{const i=s.data,r=Vn.empty();let l=new ke(Ke.comparator);for(let h of t.fields)if(!l.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?r.delete(h):r.set(h,d),l=l.add(h)}return new jr(s.key,r,new Qn(l.toArray()),mi.none())}}function SR(s,t,i){s instanceof zl?function(l,h,d){const g=l.value.clone(),y=av(l.fieldTransforms,h,d.transformResults);g.setAll(y),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,t,i):s instanceof jr?function(l,h,d){if(!Rc(l.precondition,h))return void h.convertToUnknownDocument(d.version);const g=av(l.fieldTransforms,h,d.transformResults),y=h.data;y.setAll(fE(l)),y.setAll(g),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(s,t,i):function(l,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function Tl(s,t,i,r){return s instanceof zl?function(h,d,g,y){if(!Rc(h.precondition,d))return g;const _=h.value.clone(),S=ov(h.fieldTransforms,y,d);return _.setAll(S),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(s,t,i,r):s instanceof jr?function(h,d,g,y){if(!Rc(h.precondition,d))return g;const _=ov(h.fieldTransforms,y,d),S=d.data;return S.setAll(fE(h)),S.setAll(_),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(I=>I.field))}(s,t,i,r):function(h,d,g){return Rc(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(s,t,i)}function AR(s,t){let i=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),h=oE(r.transform,l||null);h!=null&&(i===null&&(i=Vn.empty()),i.set(r.field,h))}return i||null}function rv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Ga(r,l,(h,d)=>ER(h,d))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class zl extends ah{constructor(t,i,r,l=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class jr extends ah{constructor(t,i,r,l,h=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function fE(s){const t=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=s.data.field(i);t.set(i,r)}}),t}function av(s,t,i){const r=new Map;Xt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const h=s[l],d=h.transform,g=t.data.field(h.field);r.set(h.field,_R(d,g,i[l]))}return r}function ov(s,t,i){const r=new Map;for(const l of s){const h=l.transform,d=i.data.field(l.field);r.set(l.field,yR(h,d,t))}return r}class dE extends ah{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bR extends ah{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,i,r,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&SR(h,t,r[l])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Tl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Tl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=rE();return this.mutations.forEach(l=>{const h=t.get(l.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(l.key)?null:g;const y=hE(d,g);y!==null&&r.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Ga(this.mutations,t.mutations,(i,r)=>rv(i,r))&&Ga(this.baseMutations,t.baseMutations,(i,r)=>rv(i,r))}}class Sm{constructor(t,i,r,l){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(t,i,r){Xt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=function(){return fR}();const h=t.mutations;for(let d=0;d<h.length;d++)l=l.insert(h[d].key,r[d].version);return new Sm(t,i,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,Gt;function CR(s){switch(s){case Z.OK:return _t(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return _t(15467,{code:s})}}function mE(s){if(s===void 0)return Ji("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Re.OK:return Z.OK;case Re.CANCELLED:return Z.CANCELLED;case Re.UNKNOWN:return Z.UNKNOWN;case Re.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Re.INTERNAL:return Z.INTERNAL;case Re.UNAVAILABLE:return Z.UNAVAILABLE;case Re.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Re.NOT_FOUND:return Z.NOT_FOUND;case Re.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Re.ABORTED:return Z.ABORTED;case Re.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Re.DATA_LOSS:return Z.DATA_LOSS;default:return _t(39323,{code:s})}}(Gt=Re||(Re={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new js([4294967295,4294967295],0);function lv(s){const t=NR().encode(s),i=new N0;return i.update(t),new Uint8Array(i.digest())}function uv(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new js([i,r],0),new js([l,h],0)]}class Am{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new ml(`Invalid padding: ${i}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new ml(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=js.fromNumber(this.ge)}ye(t,i,r){let l=t.add(i.multiply(js.fromNumber(r)));return l.compare(DR)===1&&(l=new js([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=lv(t),[r,l]=uv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(r,l,h);if(!this.we(d))return!1}return!0}static create(t,i,r){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),d=new Am(h,l,i);return r.forEach(g=>d.insert(g)),d}insert(t){if(this.ge===0)return;const i=lv(t),[r,l]=uv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(r,l,h);this.Se(d)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,i,r,l,h){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const l=new Map;return l.set(t,jl.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new oh(wt.min(),l,new fe(Pt),Wi(),Ut())}}class jl{constructor(t,i,r,l,h){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new jl(r,i,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,i,r,l){this.be=t,this.removedTargetIds=i,this.key=r,this.De=l}}class gE{constructor(t,i){this.targetId=t,this.Ce=i}}class pE{constructor(t,i,r=Xe.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=l}}class cv{constructor(){this.ve=0,this.Fe=hv(),this.Me=Xe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ut(),i=Ut(),r=Ut();return this.Fe.forEach((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:_t(38017,{changeType:h})}}),new jl(this.Me,this.xe,t,i,r)}qe(){this.Oe=!1,this.Fe=hv()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xR{constructor(t){this.Ge=t,this.ze=new Map,this.je=Wi(),this.Je=pc(),this.He=pc(),this.Ye=new fe(Pt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,i=>{const r=this.nt(i);switch(t.state){case 0:this.rt(i)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach((r,l)=>{this.rt(l)&&i(l)})}st(t){const i=t.targetId,r=t.Ce.count,l=this.ot(i);if(l){const h=l.target;if(Gd(h))if(r===0){const d=new dt(h.path);this.et(i,d,en.newNoDocument(d,wt.min()))}else Xt(r===1,20013,{expectedCount:r});else{const d=this._t(i);if(d!==r){const g=this.ut(t),y=g?this.ct(g,t,d):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:h=0}=i;let d,g;try{d=Qs(r).toUint8Array()}catch(y){if(y instanceof B0)return Ha("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Am(d,l,h)}catch(y){return Ha(y instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(t,i,r){return i.Ce.count===r-this.Pt(t,i.targetId)?0:2}Pt(t,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach(h=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;t.mightContain(g)||(this.et(i,h,null),l++)}),l}Tt(t){const i=new Map;this.ze.forEach((h,d)=>{const g=this.ot(d);if(g){if(h.current&&Gd(g.target)){const y=new dt(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,en.newNoDocument(y,t))}h.Be&&(i.set(d,h.ke()),h.qe())}});let r=Ut();this.He.forEach((h,d)=>{let g=!0;d.forEachWhile(y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(r=r.add(h))}),this.je.forEach((h,d)=>d.setReadTime(t));const l=new oh(t,i,this.Ye,this.je,r);return this.je=Wi(),this.Je=pc(),this.He=pc(),this.Ye=new fe(Pt),l}Xe(t,i){if(!this.rt(t))return;const r=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),r&&(this.je=this.je.insert(i,r))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new cv,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new ke(Pt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new ke(Pt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||rt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new cv),this.Ge.getRemoteKeysForTarget(t).forEach(i=>{this.et(t,i,null)})}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function pc(){return new fe(dt.comparator)}function hv(){return new fe(dt.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VR={and:"AND",or:"OR"};class kR{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Qd(s,t){return s.useProto3Json||th(t)?t:{value:t}}function Hc(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yE(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function PR(s,t){return Hc(s,t.toTimestamp())}function gi(s){return Xt(!!s,49232),wt.fromTimestamp(function(i){const r=Fs(i);return new oe(r.seconds,r.nanos)}(s))}function bm(s,t){return Yd(s,t).canonicalString()}function Yd(s,t){const i=function(l){return new ae(["projects",l.projectId,"databases",l.database])}(s).child("documents");return t===void 0?i:i.child(t)}function _E(s){const t=ae.fromString(s);return Xt(AE(t),10190,{key:t.toString()}),t}function Kd(s,t){return bm(s.databaseId,t.path)}function Id(s,t){const i=_E(t);if(i.get(1)!==s.databaseId.projectId)throw new lt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new lt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new dt(EE(i))}function vE(s,t){return bm(s.databaseId,t)}function UR(s){const t=_E(s);return t.length===4?ae.emptyPath():EE(t)}function Xd(s){return new ae(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function EE(s){return Xt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function fv(s,t,i){return{name:Kd(s,t),fields:i.value.mapValue.fields}}function LR(s,t){let i;if("targetChange"in t){t.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:_t(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=function(_,S){return _.useProto3Json?(Xt(S===void 0||typeof S=="string",58123),Xe.fromBase64String(S||"")):(Xt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Xe.fromUint8Array(S||new Uint8Array))}(s,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(_){const S=_.code===void 0?Z.UNKNOWN:mE(_.code);return new lt(S,_.message||"")}(d);i=new pE(r,l,h,g||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=Id(s,r.document.name),h=gi(r.document.updateTime),d=r.document.createTime?gi(r.document.createTime):wt.min(),g=new Vn({mapValue:{fields:r.document.fields}}),y=en.newFoundDocument(l,h,d,g),_=r.targetIds||[],S=r.removedTargetIds||[];i=new Ic(_,S,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=Id(s,r.document),h=r.readTime?gi(r.readTime):wt.min(),d=en.newNoDocument(l,h),g=r.removedTargetIds||[];i=new Ic([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=Id(s,r.document),h=r.removedTargetIds||[];i=new Ic([],h,l,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:h}=r,d=new IR(l,h),g=r.targetId;i=new gE(g,d)}}return i}function zR(s,t){let i;if(t instanceof zl)i={update:fv(s,t.key,t.value)};else if(t instanceof dE)i={delete:Kd(s,t.key)};else if(t instanceof jr)i={update:fv(s,t.key,t.data),updateMask:KR(t.fieldMask)};else{if(!(t instanceof bR))return _t(16599,{Vt:t.type});i={verify:Kd(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(h,d){const g=d.transform;if(g instanceof Dl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof xl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ol)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof qc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw _t(20930,{transform:d.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:PR(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:_t(27497)}(s,t.precondition)),i}function jR(s,t){return s&&s.length>0?(Xt(t!==void 0,14353),s.map(i=>function(l,h){let d=l.updateTime?gi(l.updateTime):gi(h);return d.isEqual(wt.min())&&(d=gi(h)),new TR(d,l.transformResults||[])}(i,t))):[]}function BR(s,t){return{documents:[vE(s,t.path)]}}function qR(s,t){const i={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=vE(s,l);const h=function(_){if(_.length!==0)return SE(vi.create(_,"and"))}(t.filters);h&&(i.structuredQuery.where=h);const d=function(_){if(_.length!==0)return _.map(S=>function(D){return{field:ka(D.field),direction:FR(D.dir)}}(S))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=Qd(s,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:i,parent:l}}function HR(s){let t=UR(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Xt(r===1,65062);const S=i.from[0];S.allDescendants?l=S.collectionId:t=t.child(S.collectionId)}let h=[];i.where&&(h=function(I){const D=TE(I);return D instanceof vi&&Z0(D)?D.getFilters():[D]}(i.where));let d=[];i.orderBy&&(d=function(I){return I.map(D=>function(X){return new Bc(Pa(X.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(D))}(i.orderBy));let g=null;i.limit&&(g=function(I){let D;return D=typeof I=="object"?I.value:I,th(D)?null:D}(i.limit));let y=null;i.startAt&&(y=function(I){const D=!!I.before,G=I.values||[];return new jc(G,D)}(i.startAt));let _=null;return i.endAt&&(_=function(I){const D=!I.before,G=I.values||[];return new jc(G,D)}(i.endAt)),aR(t,l,d,h,g,"F",y,_)}function GR(s,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:l})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function TE(s){return s.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Pa(i.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Pa(i.unaryFilter.field);return Me.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Pa(i.unaryFilter.field);return Me.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Pa(i.unaryFilter.field);return Me.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(s):s.fieldFilter!==void 0?function(i){return Me.create(Pa(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(i){return vi.create(i.compositeFilter.filters.map(r=>TE(r)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(i.compositeFilter.op))}(s):_t(30097,{filter:s})}function FR(s){return OR[s]}function QR(s){return MR[s]}function YR(s){return VR[s]}function ka(s){return{fieldPath:s.canonicalString()}}function Pa(s){return Ke.fromServerFormat(s.fieldPath)}function SE(s){return s instanceof Me?function(i){if(i.op==="=="){if(W_(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NAN"}};if(J_(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(W_(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NOT_NAN"}};if(J_(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(i.field),op:QR(i.op),value:i.value}}}(s):s instanceof vi?function(i){const r=i.getFilters().map(l=>SE(l));return r.length===1?r[0]:{compositeFilter:{op:YR(i.op),filters:r}}}(s):_t(54877,{filter:s})}function KR(s){const t=[];return s.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function AE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,i,r,l,h=wt.min(),d=wt.min(),g=Xe.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(t){return new ks(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t){this.yt=t}}function $R(s){const t=HR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Fd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.Cn=new JR}addToCollectionParentIndex(t,i){return this.Cn.add(i),K.resolve()}getCollectionParents(t,i){return K.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return K.resolve()}deleteFieldIndex(t,i){return K.resolve()}deleteAllFieldIndexes(t){return K.resolve()}createTargetIndexes(t,i){return K.resolve()}getDocumentsMatchingTarget(t,i){return K.resolve(null)}getIndexType(t,i){return K.resolve(0)}getFieldIndexes(t,i){return K.resolve([])}getNextCollectionGroupToUpdate(t){return K.resolve(null)}getMinOffset(t,i){return K.resolve(Gs.min())}getMinOffsetFromCollectionGroup(t,i){return K.resolve(Gs.min())}updateCollectionGroup(t,i,r){return K.resolve()}updateIndexEntries(t,i){return K.resolve()}}class JR{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i]||new ke(ae.comparator),h=!l.has(r);return this.index[i]=l.add(r),h}has(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(t){return(this.index[t]||new ke(ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bE=41943040;class fn{static withCacheSize(t){return new fn(t,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(bE,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ka(0)}static cr(){return new Ka(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="LruGarbageCollector",WR=1048576;function gv([s,t],[i,r]){const l=Pt(s,i);return l===0?Pt(t,r):l}class tI{constructor(t){this.Ir=t,this.buffer=new ke(gv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();gv(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class eI{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(mv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){eo(i)?rt(mv,"Ignoring IndexedDB error during garbage collection: ",i):await to(i)}await this.Vr(3e5)})}}class nI{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return K.resolve(Wc.ce);const r=new tI(i);return this.mr.forEachTarget(t,l=>r.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>r.Ar(l))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.mr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(dv)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dv):this.yr(t,i))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let r,l,h,d,g,y,_;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,d=Date.now(),this.nthSequenceNumber(t,l))).next(I=>(r=I,g=Date.now(),this.removeTargets(t,r,i))).next(I=>(h=I,y=Date.now(),this.removeOrphanedDocuments(t,r))).next(I=>(_=Date.now(),Ma()<=kt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${h} targets in `+(y-g)+`ms
	Removed ${I} documents in `+(_-y)+`ms
Total Duration: ${_-S}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:I})))}}function iI(s,t){return new nI(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.changes=new zr(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,en.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?K.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,i,r,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(r=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(r!==null&&Tl(r.mutation,l,Qn.empty(),oe.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Ut()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Ut()){const l=xr();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,r).next(h=>{let d=dl();return h.forEach((g,y)=>{d=d.insert(g,y.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const r=xr();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Ut()))}populateOverlays(t,i,r){const l=[];return r.forEach(h=>{i.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(t,l).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(t,i,r,l){let h=Wi();const d=El(),g=function(){return El()}();return i.forEach((y,_)=>{const S=r.get(_.key);l.has(_.key)&&(S===void 0||S.mutation instanceof jr)?h=h.insert(_.key,_):S!==void 0?(d.set(_.key,S.mutation.getFieldMask()),Tl(S.mutation,_,S.mutation.getFieldMask(),oe.now())):d.set(_.key,Qn.empty())}),this.recalculateAndSaveOverlays(t,h).next(y=>(y.forEach((_,S)=>d.set(_,S)),i.forEach((_,S)=>g.set(_,new rI(S,d.get(_)??null))),g))}recalculateAndSaveOverlays(t,i){const r=El();let l=new fe((d,g)=>d-g),h=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const g of d)g.keys().forEach(y=>{const _=i.get(y);if(_===null)return;let S=r.get(y)||Qn.empty();S=g.applyToLocalView(_,S),r.set(y,S);const I=(l.get(g.batchId)||Ut()).add(y);l=l.insert(g.batchId,I)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,S=y.value,I=rE();S.forEach(D=>{if(!h.has(D)){const G=hE(i.get(D),r.get(D));G!==null&&I.set(D,G),h=h.add(D)}}),d.push(this.documentOverlayCache.saveOverlays(t,_,I))}return K.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,l){return function(d){return dt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):oR(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,l):this.getDocumentsMatchingCollectionQuery(t,i,r,l)}getNextDocuments(t,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,l).next(h=>{const d=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,l-h.size):K.resolve(xr());let g=Rl,y=h;return d.next(_=>K.forEach(_,(S,I)=>(g<I.largestBatchId&&(g=I.largestBatchId),h.get(S)?K.resolve():this.remoteDocumentCache.getEntry(t,S).next(D=>{y=y.insert(S,D)}))).next(()=>this.populateOverlays(t,_,h)).next(()=>this.computeViews(t,y,_,Ut())).next(S=>({batchId:g,changes:sE(S)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new dt(i)).next(r=>{let l=dl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,r,l){const h=i.collectionGroup;let d=dl();return this.indexManager.getCollectionParents(t,h).next(g=>K.forEach(g,y=>{const _=function(I,D){return new nh(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(i,y.child(h));return this.getDocumentsMatchingCollectionQuery(t,_,r,l).next(S=>{S.forEach((I,D)=>{d=d.insert(I,D)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,r,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,h,l))).next(d=>{h.forEach((y,_)=>{const S=_.getKey();d.get(S)===null&&(d=d.insert(S,en.newInvalidDocument(S)))});let g=dl();return d.forEach((y,_)=>{const S=h.get(y);S!==void 0&&Tl(S.mutation,_,Qn.empty(),oe.now()),sh(i,_)&&(g=g.insert(y,_))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return K.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:gi(l.createTime)}}(i)),K.resolve()}getNamedQuery(t,i){return K.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,function(l){return{name:l.name,query:$R(l.bundledQuery),readTime:gi(l.readTime)}}(i)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.overlays=new fe(dt.comparator),this.qr=new Map}getOverlay(t,i){return K.resolve(this.overlays.get(i))}getOverlays(t,i){const r=xr();return K.forEach(i,l=>this.getOverlay(t,l).next(h=>{h!==null&&r.set(l,h)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((l,h)=>{this.St(t,i,h)}),K.resolve()}removeOverlaysForBatchId(t,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(t,i,r){const l=xr(),h=i.length+1,d=new dt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===h&&y.largestBatchId>r&&l.set(y.getKey(),y)}return K.resolve(l)}getOverlaysForCollectionGroup(t,i,r,l){let h=new fe((_,S)=>_-S);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>r){let S=h.get(_.largestBatchId);S===null&&(S=xr(),h=h.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=xr(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((_,S)=>g.set(_,S)),!(g.size()>=l)););return K.resolve(g)}St(t,i,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new RR(i,r));let h=this.qr.get(i);h===void 0&&(h=Ut(),this.qr.set(i,h)),this.qr.set(i,h.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(t){return K.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.Qr=new ke(Be.$r),this.Ur=new ke(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const r=new Be(t,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.Gr(new Be(t,i))}zr(t,i){t.forEach(r=>this.removeReference(r,i))}jr(t){const i=new dt(new ae([])),r=new Be(i,t),l=new Be(i,t+1),h=[];return this.Ur.forEachInRange([r,l],d=>{this.Gr(d),h.push(d.key)}),h}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new dt(new ae([])),r=new Be(i,t),l=new Be(i,t+1);let h=Ut();return this.Ur.forEachInRange([r,l],d=>{h=h.add(d.key)}),h}containsKey(t){const i=new Be(t,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Be{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return dt.comparator(t.key,i.key)||Pt(t.Yr,i.Yr)}static Kr(t,i){return Pt(t.Yr,i.Yr)||dt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new ke(Be.$r)}checkEmpty(t){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new wR(h,i,r,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Be(g.key,h)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return K.resolve(d)}lookupMutationBatch(t,i){return K.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,l=this.ei(r),h=l<0?0:l;return K.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?gm:this.tr-1)}getAllMutationBatches(t){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Be(i,0),l=new Be(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([r,l],d=>{const g=this.Xr(d.Yr);h.push(g)}),K.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new ke(Pt);return i.forEach(l=>{const h=new Be(l,0),d=new Be(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],g=>{r=r.add(g.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,l=r.length+1;let h=r;dt.isDocumentKey(h)||(h=h.child(""));const d=new Be(new dt(h),0);let g=new ke(Pt);return this.Zr.forEachWhile(y=>{const _=y.key.path;return!!r.isPrefixOf(_)&&(_.length===l&&(g=g.add(y.Yr)),!0)},d),K.resolve(this.ti(g))}ti(t){const i=[];return t.forEach(r=>{const l=this.Xr(r);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){Xt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(i.mutations,l=>{const h=new Be(l.key,i.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,i){const r=new Be(i,0),l=this.Zr.firstAfterOrEqual(r);return K.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,K.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t){this.ri=t,this.docs=function(){return new fe(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,l=this.docs.get(r),h=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return K.resolve(r?r.document.mutableCopy():en.newInvalidDocument(i))}getEntries(t,i){let r=Wi();return i.forEach(l=>{const h=this.docs.get(l);r=r.insert(l,h?h.document.mutableCopy():en.newInvalidDocument(l))}),K.resolve(r)}getDocumentsMatchingQuery(t,i,r,l){let h=Wi();const d=i.path,g=new dt(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:S}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||Lw(Uw(S),r)<=0||(l.has(S.key)||sh(i,S))&&(h=h.insert(S.key,S.mutableCopy()))}return K.resolve(h)}getAllFromCollectionGroup(t,i,r,l){_t(9500)}ii(t,i){return K.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new fI(this)}getSize(t){return K.resolve(this.size)}}class fI extends sI{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)}),K.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t){this.persistence=t,this.si=new zr(i=>_m(i),vm),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new wm,this.targetCount=0,this.ai=Ka.ur()}forEachTarget(t,i){return this.si.forEach((r,l)=>i(l)),K.resolve()}getLastRemoteSnapshotVersion(t){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return K.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),K.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new Ka(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,K.resolve()}updateTargetData(t,i){return this.Pr(i),K.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,K.resolve()}removeTargets(t,i,r){let l=0;const h=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=i&&r.get(g.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),K.waitFor(h).next(()=>l)}getTargetCount(t){return K.resolve(this.targetCount)}getTargetData(t,i){const r=this.si.get(i)||null;return K.resolve(r)}addMatchingKeys(t,i,r){return this._i.Wr(i,r),K.resolve()}removeMatchingKeys(t,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,h=[];return l&&i.forEach(d=>{h.push(l.markPotentiallyOrphaned(t,d))}),K.waitFor(h)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),K.resolve()}getMatchingKeysForTargetId(t,i){const r=this._i.Hr(i);return K.resolve(r)}containsKey(t,i){return K.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(t,i){this.ui={},this.overlays={},this.ci=new Wc(0),this.li=!1,this.li=!0,this.hi=new uI,this.referenceDelegate=t(this),this.Pi=new dI(this),this.indexManager=new ZR,this.remoteDocumentCache=function(l){return new hI(l)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new XR(i),this.Ii=new oI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new lI,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ui[t.toKey()];return r||(r=new cI(i,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,r){rt("MemoryPersistence","Starting transaction:",t);const l=new mI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next(h=>this.referenceDelegate.di(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ai(t,i){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,i)))}}class mI extends jw{constructor(t){super(),this.currentSequenceNumber=t}}class Rm{constructor(t){this.persistence=t,this.Ri=new wm,this.Vi=null}static mi(t){return new Rm(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),K.resolve()}removeReference(t,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),K.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach(l=>this.fi.add(l.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(h=>this.fi.add(h.toString()))}).next(()=>r.removeTargetData(t,i))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const l=dt.fromPath(r);return this.gi(t,l).next(h=>{h||i.removeEntry(l,wt.min())})}).next(()=>(this.Vi=null,i.apply(t)))}updateLimboDocument(t,i){return this.gi(t,i).next(r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())})}Ti(t){return 0}gi(t,i){return K.or([()=>K.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class Gc{constructor(t,i){this.persistence=t,this.pi=new zr(r=>Hw(r.path),(r,l)=>r.isEqual(l)),this.garbageCollector=iI(this,i)}static mi(t,i){return new Gc(t,i)}Ei(){}di(t){return K.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(l=>r+l))}wr(t){let i=0;return this.pr(t,r=>{i++}).next(()=>i)}pr(t,i){return K.forEach(this.pi,(r,l)=>this.br(t,r,l).next(h=>h?K.resolve():i(l)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,d=>this.br(t,d,i).next(g=>{g||(r++,h.removeEntry(d,wt.min()))})).next(()=>h.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),K.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),K.resolve()}removeReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),K.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),K.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=bc(t.data.value)),i}br(t,i,r){return K.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return K.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,i,r,l){this.targetId=t,this.fromCache=i,this.Es=r,this.ds=l}static As(t,i){let r=Ut(),l=Ut();for(const h of i.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Im(t,i.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rA()?8:Bw(nn())>0?6:4}()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,r,l){const h={result:null};return this.ys(t,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.ws(t,i,l,r).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new gI;return this.Ss(t,i,d).next(g=>{if(h.result=g,this.Vs)return this.bs(t,i,d,g.size)})}).next(()=>h.result)}bs(t,i,r,l){return r.documentReadCount<this.fs?(Ma()<=kt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Va(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Ma()<=kt.DEBUG&&rt("QueryEngine","Query:",Va(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Ma()<=kt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Va(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,di(i))):K.resolve())}ys(t,i){if(iv(i))return K.resolve(null);let r=di(i);return this.indexManager.getIndexType(t,r).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=Fd(i,null,"F"),r=di(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(h=>{const d=Ut(...h);return this.ps.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,r).next(y=>{const _=this.Ds(i,g);return this.Cs(i,_,d,y.readTime)?this.ys(t,Fd(i,null,"F")):this.vs(t,_,i,y)}))})))}ws(t,i,r,l){return iv(i)||l.isEqual(wt.min())?K.resolve(null):this.ps.getDocuments(t,r).next(h=>{const d=this.Ds(i,h);return this.Cs(i,d,r,l)?K.resolve(null):(Ma()<=kt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Va(i)),this.vs(t,d,i,Pw(l,Rl)).next(g=>g))})}Ds(t,i){let r=new ke(nE(t));return i.forEach((l,h)=>{sh(t,h)&&(r=r.add(h))}),r}Cs(t,i,r,l){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const h=t.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,i,r){return Ma()<=kt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Va(i)),this.ps.getDocumentsMatchingQuery(t,i,Gs.min(),r)}vs(t,i,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="LocalStore",yI=3e8;class _I{constructor(t,i,r,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new fe(Pt),this.xs=new zr(h=>_m(h),vm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new aI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ms))}}function vI(s,t,i,r){return new _I(s,t,i,r)}async function RE(s,t){const i=Rt(s);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next(h=>(l=h,i.Bs(t),i.mutationQueue.getAllMutationBatches(r))).next(h=>{const d=[],g=[];let y=Ut();for(const _ of l){d.push(_.batchId);for(const S of _.mutations)y=y.add(S.key)}for(const _ of h){g.push(_.batchId);for(const S of _.mutations)y=y.add(S.key)}return i.localDocuments.getDocuments(r,y).next(_=>({Ls:_,removedBatchIds:d,addedBatchIds:g}))})})}function EI(s,t){const i=Rt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const l=t.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return function(g,y,_,S){const I=_.batch,D=I.keys();let G=K.resolve();return D.forEach(X=>{G=G.next(()=>S.getEntry(y,X)).next(et=>{const J=_.docVersions.get(X);Xt(J!==null,48541),et.version.compareTo(J)<0&&(I.applyToRemoteDocument(et,_),et.isValidDocument()&&(et.setReadTime(_.commitVersion),S.addEntry(et)))})}),G.next(()=>g.mutationQueue.removeMutationBatch(y,I))}(i,r,t,h).next(()=>h.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let y=Ut();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y}(t))).next(()=>i.localDocuments.getDocuments(r,l))})}function IE(s){const t=Rt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Pi.getLastRemoteSnapshotVersion(i))}function TI(s,t){const i=Rt(s),r=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach((S,I)=>{const D=l.get(I);if(!D)return;g.push(i.Pi.removeMatchingKeys(h,S.removedDocuments,I).next(()=>i.Pi.addMatchingKeys(h,S.addedDocuments,I)));let G=D.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(I)!==null?G=G.withResumeToken(Xe.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):S.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(S.resumeToken,r)),l=l.insert(I,G),function(et,J,St){return et.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-et.snapshotVersion.toMicroseconds()>=yI?!0:St.addedDocuments.size+St.modifiedDocuments.size+St.removedDocuments.size>0}(D,G,S)&&g.push(i.Pi.updateTargetData(h,G))});let y=Wi(),_=Ut();if(t.documentUpdates.forEach(S=>{t.resolvedLimboDocuments.has(S)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,S))}),g.push(SI(h,d,t.documentUpdates).next(S=>{y=S.ks,_=S.qs})),!r.isEqual(wt.min())){const S=i.Pi.getLastRemoteSnapshotVersion(h).next(I=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,r));g.push(S)}return K.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,y,_)).next(()=>y)}).then(h=>(i.Ms=l,h))}function SI(s,t,i){let r=Ut(),l=Ut();return i.forEach(h=>r=r.add(h)),t.getEntries(s,r).next(h=>{let d=Wi();return i.forEach((g,y)=>{const _=h.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(wt.min())?(t.removeEntry(g,y.readTime),d=d.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),d=d.insert(g,y)):rt(Cm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)}),{ks:d,qs:l}})}function AI(s,t){const i=Rt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=gm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function bI(s,t){const i=Rt(s);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let l;return i.Pi.getTargetData(r,t).next(h=>h?(l=h,K.resolve(l)):i.Pi.allocateTargetId(r).next(d=>(l=new ks(t,d,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next(()=>l))))}).then(r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(t,r.targetId)),r})}async function $d(s,t,i){const r=Rt(s),l=r.Ms.get(t),h=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",h,d=>r.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!eo(d))throw d;rt(Cm,`Failed to update sequence numbers for target ${t}: ${d}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function pv(s,t,i){const r=Rt(s);let l=wt.min(),h=Ut();return r.persistence.runTransaction("Execute query","readwrite",d=>function(y,_,S){const I=Rt(y),D=I.xs.get(S);return D!==void 0?K.resolve(I.Ms.get(D)):I.Pi.getTargetData(_,S)}(r,d,di(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,g.targetId).next(y=>{h=y})}).next(()=>r.Fs.getDocumentsMatchingQuery(d,t,i?l:wt.min(),i?h:Ut())).next(g=>(wI(r,uR(t),g),{documents:g,Qs:h})))}function wI(s,t,i){let r=s.Os.get(t)||wt.min();i.forEach((l,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)}),s.Os.set(t,r)}class yv{constructor(){this.activeTargetIds=gR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RI{constructor(){this.Mo=new yv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,r){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new yv,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="ConnectivityMonitor";class vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(_v,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(_v,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function Zd(){return yc===null?yc=function(){return 268435456+Math.round(2147483648*Math.random())}():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="RestConnection",CI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===Lc?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,i,r,l,h){const d=Zd(),g=this.zo(t,i.toUriEncodedString());rt(Cd,`Sending RPC '${t}' ${d}:`,g,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,h);const{host:_}=new URL(g),S=$a(_);return this.Jo(t,g,y,r,S).then(I=>(rt(Cd,`Received RPC '${t}' ${d}: `,I),I),I=>{throw Ha(Cd,`RPC '${t}' ${d} failed with error: `,I,"url: ",g,"request:",r),I})}Ho(t,i,r,l,h,d){return this.Go(t,i,r,l,h)}jo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),r&&r.headers.forEach((l,h)=>t[h]=l)}zo(t,i){const r=CI[t];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="WebChannelConnection";class xI extends NI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,l,h){const d=Zd();return new Promise((g,y)=>{const _=new D0;_.setWithCredentials(!0),_.listenOnce(x0.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Ac.NO_ERROR:const I=_.getResponseJson();rt(We,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(I)),g(I);break;case Ac.TIMEOUT:rt(We,`RPC '${t}' ${d} timed out`),y(new lt(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:const D=_.getStatus();if(rt(We,`RPC '${t}' ${d} failed with status:`,D,"response text:",_.getResponseText()),D>0){let G=_.getResponseJson();Array.isArray(G)&&(G=G[0]);const X=G?.error;if(X&&X.status&&X.message){const et=function(St){const mt=St.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(mt)>=0?mt:Z.UNKNOWN}(X.status);y(new lt(et,X.message))}else y(new lt(Z.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new lt(Z.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{rt(We,`RPC '${t}' ${d} completed.`)}});const S=JSON.stringify(l);rt(We,`RPC '${t}' ${d} sending request:`,l),_.send(i,"POST",S,r,15)})}T_(t,i,r){const l=Zd(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=V0(),g=M0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const S=h.join("");rt(We,`Creating RPC '${t}' stream ${l}: ${S}`,y);const I=d.createWebChannel(S,y);this.I_(I);let D=!1,G=!1;const X=new DI({Yo:J=>{G?rt(We,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(D||(rt(We,`Opening RPC '${t}' stream ${l} transport.`),I.open(),D=!0),rt(We,`RPC '${t}' stream ${l} sending:`,J),I.send(J))},Zo:()=>I.close()}),et=(J,St,mt)=>{J.listen(St,ct=>{try{mt(ct)}catch(Lt){setTimeout(()=>{throw Lt},0)}})};return et(I,fl.EventType.OPEN,()=>{G||(rt(We,`RPC '${t}' stream ${l} transport opened.`),X.o_())}),et(I,fl.EventType.CLOSE,()=>{G||(G=!0,rt(We,`RPC '${t}' stream ${l} transport closed`),X.a_(),this.E_(I))}),et(I,fl.EventType.ERROR,J=>{G||(G=!0,Ha(We,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),X.a_(new lt(Z.UNAVAILABLE,"The operation could not be completed")))}),et(I,fl.EventType.MESSAGE,J=>{if(!G){const St=J.data[0];Xt(!!St,16349);const mt=St,ct=mt?.error||mt[0]?.error;if(ct){rt(We,`RPC '${t}' stream ${l} received error:`,ct);const Lt=ct.status;let yt=function(A){const b=Re[A];if(b!==void 0)return mE(b)}(Lt),Ct=ct.message;yt===void 0&&(yt=Z.INTERNAL,Ct="Unknown error status: "+Lt+" with message "+ct.message),G=!0,X.a_(new lt(yt,Ct)),I.close()}else rt(We,`RPC '${t}' stream ${l} received:`,St),X.u_(St)}}),et(g,O0.STAT_EVENT,J=>{J.stat===zd.PROXY?rt(We,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===zd.NOPROXY&&rt(We,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{X.__()},0),X}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(i=>i===t)}}function Nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(s){return new kR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,i,r=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=i,this.d_=r,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&rt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="PersistentStream";class NE{constructor(t,i,r,l,h,d,g,y){this.Mi=t,this.S_=r,this.b_=l,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CE(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Z.RESOURCE_EXHAUSTED?(Ji(i.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,l])=>{this.D_===i&&this.G_(r,l)},r=>{t(()=>{const l=new lt(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)})})}G_(t,i){const r=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{r(()=>this.z_(l))}),this.stream.onMessage(l=>{r(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return rt(Ev,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget(()=>this.D_===t?i():(rt(Ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OI extends NE{constructor(t,i,r,l,h,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,d),this.serializer=h}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=LR(this.serializer,t),r=function(h){if(!("targetChange"in h))return wt.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?wt.min():d.readTime?gi(d.readTime):wt.min()}(t);return this.listener.H_(i,r)}Y_(t){const i={};i.database=Xd(this.serializer),i.addTarget=function(h,d){let g;const y=d.target;if(g=Gd(y)?{documents:BR(h,y)}:{query:qR(h,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=yE(h,d.resumeToken);const _=Qd(h,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(wt.min())>0){g.readTime=Hc(h,d.snapshotVersion.toTimestamp());const _=Qd(h,d.expectedCount);_!==null&&(g.expectedCount=_)}return g}(this.serializer,t);const r=GR(this.serializer,t);r&&(i.labels=r),this.q_(i)}Z_(t){const i={};i.database=Xd(this.serializer),i.removeTarget=t,this.q_(i)}}class MI extends NE{constructor(t,i,r,l,h,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Xt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Xt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Xt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=jR(t.writeResults,t.commitTime),r=gi(t.commitTime);return this.listener.na(r,i)}ra(){const t={};t.database=Xd(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>zR(this.serializer,r))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{}class kI extends VI{constructor(t,i,r,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new lt(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Go(t,Yd(i,r),l,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new lt(Z.UNKNOWN,h.toString())})}Ho(t,i,r,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(t,Yd(i,r),l,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new lt(Z.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class PI{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ji(i),this.aa=!1):rt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="RemoteStore";class UI{constructor(t,i,r,l,h){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo(d=>{r.enqueueAndForget(async()=>{Br(this)&&(rt(Ur,"Restarting streams for network reachability change."),await async function(y){const _=Rt(y);_.Ea.add(4),await Bl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await uh(_)}(this))})}),this.Ra=new PI(r,l)}}async function uh(s){if(Br(s))for(const t of s.da)await t(!0)}async function Bl(s){for(const t of s.da)await t(!1)}function DE(s,t){const i=Rt(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Om(i)?xm(i):no(i).O_()&&Dm(i,t))}function Nm(s,t){const i=Rt(s),r=no(i);i.Ia.delete(t),r.O_()&&xE(i,t),i.Ia.size===0&&(r.O_()?r.L_():Br(i)&&i.Ra.set("Unknown"))}function Dm(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}no(s).Y_(t)}function xE(s,t){s.Va.Ue(t),no(s).Z_(t)}function xm(s){s.Va=new xR({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),no(s).start(),s.Ra.ua()}function Om(s){return Br(s)&&!no(s).x_()&&s.Ia.size>0}function Br(s){return Rt(s).Ea.size===0}function OE(s){s.Va=void 0}async function LI(s){s.Ra.set("Online")}async function zI(s){s.Ia.forEach((t,i)=>{Dm(s,t)})}async function jI(s,t){OE(s),Om(s)?(s.Ra.ha(t),xm(s)):s.Ra.set("Unknown")}async function BI(s,t,i){if(s.Ra.set("Online"),t instanceof pE&&t.state===2&&t.cause)try{await async function(l,h){const d=h.cause;for(const g of h.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))}(s,t)}catch(r){rt(Ur,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Fc(s,r)}else if(t instanceof Ic?s.Va.Ze(t):t instanceof gE?s.Va.st(t):s.Va.tt(t),!i.isEqual(wt.min()))try{const r=await IE(s.localStore);i.compareTo(r)>=0&&await function(h,d){const g=h.Va.Tt(d);return g.targetChanges.forEach((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const S=h.Ia.get(_);S&&h.Ia.set(_,S.withResumeToken(y.resumeToken,d))}}),g.targetMismatches.forEach((y,_)=>{const S=h.Ia.get(y);if(!S)return;h.Ia.set(y,S.withResumeToken(Xe.EMPTY_BYTE_STRING,S.snapshotVersion)),xE(h,y);const I=new ks(S.target,y,_,S.sequenceNumber);Dm(h,I)}),h.remoteSyncer.applyRemoteEvent(g)}(s,i)}catch(r){rt(Ur,"Failed to raise snapshot:",r),await Fc(s,r)}}async function Fc(s,t,i){if(!eo(t))throw t;s.Ea.add(1),await Bl(s),s.Ra.set("Offline"),i||(i=()=>IE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{rt(Ur,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await uh(s)})}function ME(s,t){return t().catch(i=>Fc(s,i,t))}async function ch(s){const t=Rt(s),i=Ks(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:gm;for(;qI(t);)try{const l=await AI(t.localStore,r);if(l===null){t.Ta.length===0&&i.L_();break}r=l.batchId,HI(t,l)}catch(l){await Fc(t,l)}VE(t)&&kE(t)}function qI(s){return Br(s)&&s.Ta.length<10}function HI(s,t){s.Ta.push(t);const i=Ks(s);i.O_()&&i.X_&&i.ea(t.mutations)}function VE(s){return Br(s)&&!Ks(s).x_()&&s.Ta.length>0}function kE(s){Ks(s).start()}async function GI(s){Ks(s).ra()}async function FI(s){const t=Ks(s);for(const i of s.Ta)t.ea(i.mutations)}async function QI(s,t,i){const r=s.Ta.shift(),l=Sm.from(r,t,i);await ME(s,()=>s.remoteSyncer.applySuccessfulWrite(l)),await ch(s)}async function YI(s,t){t&&Ks(s).X_&&await async function(r,l){if(function(d){return CR(d)&&d!==Z.ABORTED}(l.code)){const h=r.Ta.shift();Ks(r).B_(),await ME(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,l)),await ch(r)}}(s,t),VE(s)&&kE(s)}async function Tv(s,t){const i=Rt(s);i.asyncQueue.verifyOperationInProgress(),rt(Ur,"RemoteStore received new credentials");const r=Br(i);i.Ea.add(3),await Bl(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await uh(i)}async function KI(s,t){const i=Rt(s);t?(i.Ea.delete(2),await uh(i)):t||(i.Ea.add(2),await Bl(i),i.Ra.set("Unknown"))}function no(s){return s.ma||(s.ma=function(i,r,l){const h=Rt(i);return h.sa(),new OI(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(s.datastore,s.asyncQueue,{Xo:LI.bind(null,s),t_:zI.bind(null,s),r_:jI.bind(null,s),H_:BI.bind(null,s)}),s.da.push(async t=>{t?(s.ma.B_(),Om(s)?xm(s):s.Ra.set("Unknown")):(await s.ma.stop(),OE(s))})),s.ma}function Ks(s){return s.fa||(s.fa=function(i,r,l){const h=Rt(i);return h.sa(),new MI(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:GI.bind(null,s),r_:YI.bind(null,s),ta:FI.bind(null,s),na:QI.bind(null,s)}),s.da.push(async t=>{t?(s.fa.B_(),await ch(s)):(await s.fa.stop(),s.Ta.length>0&&(rt(Ur,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,i,r,l,h){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=h,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,l,h){const d=Date.now()+r,g=new Mm(t,i,d,l,h);return g.start(r),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(s,t){if(Ji("AsyncQueue",`${t}: ${s}`),eo(s))return new lt(Z.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{static emptySet(t){return new Ba(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||dt.comparator(i.key,r.key):(i,r)=>dt.comparator(i.key,r.key),this.keyedMap=dl(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Ba)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=r.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new Ba;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.ga=new fe(dt.comparator)}track(t){const i=t.doc.key,r=this.ga.get(i);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(i,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(i):t.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal((i,r)=>{t.push(r)}),t}}class Xa{constructor(t,i,r,l,h,d,g,y,_){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,i,r,l,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Xa(t,i,Ba.emptySet(i),d,r,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ih(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class $I{constructor(){this.queries=Av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Rt(i),h=l.queries;l.queries=Av(),h.forEach((d,g)=>{for(const y of g.Sa)y.onError(r)})})(this,new lt(Z.ABORTED,"Firestore shutting down"))}}function Av(){return new zr(s=>eE(s),ih)}async function ZI(s,t){const i=Rt(s);let r=3;const l=t.query;let h=i.queries.get(l);h?!h.ba()&&t.Da()&&(r=2):(h=new XI,r=t.Da()?0:1);try{switch(r){case 0:h.wa=await i.onListen(l,!0);break;case 1:h.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=Vm(d,`Initialization of query '${Va(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,h),h.Sa.push(t),t.va(i.onlineState),h.wa&&t.Fa(h.wa)&&km(i)}async function JI(s,t){const i=Rt(s),r=t.query;let l=3;const h=i.queries.get(r);if(h){const d=h.Sa.indexOf(t);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function WI(s,t){const i=Rt(s);let r=!1;for(const l of t){const h=l.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Fa(l)&&(r=!0);d.wa=l}}r&&km(i)}function t2(s,t,i){const r=Rt(s),l=r.queries.get(t);if(l)for(const h of l.Sa)h.onError(i);r.queries.delete(t)}function km(s){s.Ca.forEach(t=>{t.next()})}var Jd,bv;(bv=Jd||(Jd={})).Ma="default",bv.Cache="cache";class e2{constructor(t,i,r){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new Xa(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Xa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Jd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(t){this.key=t}}class UE{constructor(t){this.key=t}}class n2{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ut(),this.mutatedKeys=Ut(),this.eu=nE(t),this.tu=new Ba(this.eu)}get nu(){return this.Ya}ru(t,i){const r=i?i.iu:new Sv,l=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((S,I)=>{const D=l.get(S),G=sh(this.query,I)?I:null,X=!!D&&this.mutatedKeys.has(D.key),et=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let J=!1;D&&G?D.data.isEqual(G.data)?X!==et&&(r.track({type:3,doc:G}),J=!0):this.su(D,G)||(r.track({type:2,doc:G}),J=!0,(y&&this.eu(G,y)>0||_&&this.eu(G,_)<0)&&(g=!0)):!D&&G?(r.track({type:0,doc:G}),J=!0):D&&!G&&(r.track({type:1,doc:D}),J=!0,(y||_)&&(g=!0)),J&&(G?(d=d.add(G),h=et?h.add(S):h.delete(S)):(d=d.delete(S),h=h.delete(S)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),h=h.delete(S.key),r.track({type:1,doc:S})}return{tu:d,iu:r,Cs:g,mutatedKeys:h}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort((S,I)=>function(G,X){const et=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:J})}};return et(G)-et(X)}(S.type,I.type)||this.eu(S.doc,I.doc)),this.ou(r),l=l??!1;const g=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new Xa(this.query,t.tu,h,d,t.mutatedKeys,y===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(i=>this.Ya=this.Ya.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ya=this.Ya.delete(i)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ut(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const i=[];return t.forEach(r=>{this.Xa.has(r)||i.push(new UE(r))}),this.Xa.forEach(r=>{t.has(r)||i.push(new PE(r))}),i}cu(t){this.Ya=t.Qs,this.Xa=Ut();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Xa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pm="SyncEngine";class i2{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class s2{constructor(t){this.key=t,this.hu=!1}}class r2{constructor(t,i,r,l,h,d){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new zr(g=>eE(g),ih),this.Iu=new Map,this.Eu=new Set,this.du=new fe(dt.comparator),this.Au=new Map,this.Ru=new wm,this.Vu={},this.mu=new Map,this.fu=Ka.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a2(s,t,i=!0){const r=HE(s);let l;const h=r.Tu.get(t);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await LE(r,t,i,!0),l}async function o2(s,t){const i=HE(s);await LE(i,t,!0,!1)}async function LE(s,t,i,r){const l=await bI(s.localStore,di(t)),h=l.targetId,d=s.sharedClientState.addLocalQueryTarget(h,i);let g;return r&&(g=await l2(s,t,h,d==="current",l.resumeToken)),s.isPrimaryClient&&i&&DE(s.remoteStore,l),g}async function l2(s,t,i,r,l){s.pu=(I,D,G)=>async function(et,J,St,mt){let ct=J.view.ru(St);ct.Cs&&(ct=await pv(et.localStore,J.query,!1).then(({documents:M})=>J.view.ru(M,ct)));const Lt=mt&&mt.targetChanges.get(J.targetId),yt=mt&&mt.targetMismatches.get(J.targetId)!=null,Ct=J.view.applyChanges(ct,et.isPrimaryClient,Lt,yt);return Rv(et,J.targetId,Ct.au),Ct.snapshot}(s,I,D,G);const h=await pv(s.localStore,t,!0),d=new n2(t,h.Qs),g=d.ru(h.documents),y=jl.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),_=d.applyChanges(g,s.isPrimaryClient,y);Rv(s,i,_.au);const S=new i2(t,i,d);return s.Tu.set(t,S),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),_.snapshot}async function u2(s,t,i){const r=Rt(s),l=r.Tu.get(t),h=r.Iu.get(l.targetId);if(h.length>1)return r.Iu.set(l.targetId,h.filter(d=>!ih(d,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await $d(r.localStore,l.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(l.targetId),i&&Nm(r.remoteStore,l.targetId),Wd(r,l.targetId)}).catch(to)):(Wd(r,l.targetId),await $d(r.localStore,l.targetId,!0))}async function c2(s,t){const i=Rt(s),r=i.Tu.get(t),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),Nm(i.remoteStore,r.targetId))}async function h2(s,t,i){const r=_2(s);try{const l=await function(d,g){const y=Rt(d),_=oe.now(),S=g.reduce((G,X)=>G.add(X.key),Ut());let I,D;return y.persistence.runTransaction("Locally write mutations","readwrite",G=>{let X=Wi(),et=Ut();return y.Ns.getEntries(G,S).next(J=>{X=J,X.forEach((St,mt)=>{mt.isValidDocument()||(et=et.add(St))})}).next(()=>y.localDocuments.getOverlayedDocuments(G,X)).next(J=>{I=J;const St=[];for(const mt of g){const ct=AR(mt,I.get(mt.key).overlayedDocument);ct!=null&&St.push(new jr(mt.key,ct,K0(ct.value.mapValue),mi.exists(!0)))}return y.mutationQueue.addMutationBatch(G,_,St,g)}).next(J=>{D=J;const St=J.applyToLocalDocumentSet(I,et);return y.documentOverlayCache.saveOverlays(G,J.batchId,St)})}).then(()=>({batchId:D.batchId,changes:sE(I)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),function(d,g,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new fe(Pt)),_=_.insert(g,y),d.Vu[d.currentUser.toKey()]=_}(r,l.batchId,i),await ql(r,l.changes),await ch(r.remoteStore)}catch(l){const h=Vm(l,"Failed to persist write");i.reject(h)}}async function zE(s,t){const i=Rt(s);try{const r=await TI(i.localStore,t);t.targetChanges.forEach((l,h)=>{const d=i.Au.get(h);d&&(Xt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Xt(d.hu,14607):l.removedDocuments.size>0&&(Xt(d.hu,42227),d.hu=!1))}),await ql(i,r,t)}catch(r){await to(r)}}function wv(s,t,i){const r=Rt(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach((h,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const y=Rt(d);y.onlineState=g;let _=!1;y.queries.forEach((S,I)=>{for(const D of I.Sa)D.va(g)&&(_=!0)}),_&&km(y)}(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function f2(s,t,i){const r=Rt(s);r.sharedClientState.updateQueryState(t,"rejected",i);const l=r.Au.get(t),h=l&&l.key;if(h){let d=new fe(dt.comparator);d=d.insert(h,en.newNoDocument(h,wt.min()));const g=Ut().add(h),y=new oh(wt.min(),new Map,new fe(Pt),d,g);await zE(r,y),r.du=r.du.remove(h),r.Au.delete(t),Um(r)}else await $d(r.localStore,t,!1).then(()=>Wd(r,t,i)).catch(to)}async function d2(s,t){const i=Rt(s),r=t.batch.batchId;try{const l=await EI(i.localStore,t);BE(i,r,null),jE(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await ql(i,l)}catch(l){await to(l)}}async function m2(s,t,i){const r=Rt(s);try{const l=await function(d,g){const y=Rt(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let S;return y.mutationQueue.lookupMutationBatch(_,g).next(I=>(Xt(I!==null,37113),S=I.keys(),y.mutationQueue.removeMutationBatch(_,I))).next(()=>y.mutationQueue.performConsistencyCheck(_)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(_,S,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S)).next(()=>y.localDocuments.getDocuments(_,S))})}(r.localStore,t);BE(r,t,i),jE(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await ql(r,l)}catch(l){await to(l)}}function jE(s,t){(s.mu.get(t)||[]).forEach(i=>{i.resolve()}),s.mu.delete(t)}function BE(s,t,i){const r=Rt(s);let l=r.Vu[r.currentUser.toKey()];if(l){const h=l.get(t);h&&(i?h.reject(i):h.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function Wd(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach(r=>{s.Ru.containsKey(r)||qE(s,r)})}function qE(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(Nm(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),Um(s))}function Rv(s,t,i){for(const r of i)r instanceof PE?(s.Ru.addReference(r.key,t),g2(s,r)):r instanceof UE?(rt(Pm,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||qE(s,r.key)):_t(19791,{wu:r})}function g2(s,t){const i=t.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(rt(Pm,"New document in limbo: "+i),s.Eu.add(r),Um(s))}function Um(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new dt(ae.fromString(t)),r=s.fu.next();s.Au.set(r,new s2(i)),s.du=s.du.insert(i,r),DE(s.remoteStore,new ks(di(Em(i.path)),r,"TargetPurposeLimboResolution",Wc.ce))}}async function ql(s,t,i){const r=Rt(s),l=[],h=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach((g,y)=>{d.push(r.pu(y,t,i).then(_=>{if((_||i)&&r.isPrimaryClient){const S=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(_){l.push(_);const S=Im.As(y.targetId,_);h.push(S)}}))}),await Promise.all(d),r.Pu.H_(l),await async function(y,_){const S=Rt(y);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>K.forEach(_,D=>K.forEach(D.Es,G=>S.persistence.referenceDelegate.addReference(I,D.targetId,G)).next(()=>K.forEach(D.ds,G=>S.persistence.referenceDelegate.removeReference(I,D.targetId,G)))))}catch(I){if(!eo(I))throw I;rt(Cm,"Failed to update sequence numbers: "+I)}for(const I of _){const D=I.targetId;if(!I.fromCache){const G=S.Ms.get(D),X=G.snapshotVersion,et=G.withLastLimboFreeSnapshotVersion(X);S.Ms=S.Ms.insert(D,et)}}}(r.localStore,h))}async function p2(s,t){const i=Rt(s);if(!i.currentUser.isEqual(t)){rt(Pm,"User change. New user:",t.toKey());const r=await RE(i.localStore,t);i.currentUser=t,function(h,d){h.mu.forEach(g=>{g.forEach(y=>{y.reject(new lt(Z.CANCELLED,d))})}),h.mu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ql(i,r.Ls)}}function y2(s,t){const i=Rt(s),r=i.Au.get(t);if(r&&r.hu)return Ut().add(r.key);{let l=Ut();const h=i.Iu.get(t);if(!h)return l;for(const d of h){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function HE(s){const t=Rt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=zE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=y2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=f2.bind(null,t),t.Pu.H_=WI.bind(null,t.eventManager),t.Pu.yu=t2.bind(null,t.eventManager),t}function _2(s){const t=Rt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=d2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=m2.bind(null,t),t}class Qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=lh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return vI(this.persistence,new pI,t.initialUser,this.serializer)}Cu(t){return new wE(Rm.mi,this.serializer)}Du(t){return new RI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qc.provider={build:()=>new Qc};class v2 extends Qc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Xt(this.persistence.referenceDelegate instanceof Gc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new eI(r,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new wE(r=>Gc.mi(r,i),this.serializer)}}class tm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=p2.bind(null,this.syncEngine),await KI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $I}()}createDatastore(t){const i=lh(t.databaseInfo.databaseId),r=function(h){return new xI(h)}(t.databaseInfo);return function(h,d,g,y){return new kI(h,d,g,y)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,l,h,d,g){return new UI(r,l,h,d,g)}(this.localStore,this.datastore,t.asyncQueue,i=>wv(this.syncEngine,i,0),function(){return vv.v()?new vv:new II}())}createSyncEngine(t,i){return function(l,h,d,g,y,_,S){const I=new r2(l,h,d,g,y,_);return S&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await async function(i){const r=Rt(i);rt(Ur,"RemoteStore shutting down."),r.Ea.add(5),await Bl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tm.provider={build:()=>new tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ji("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="FirestoreClient";class T2{constructor(t,i,r,l,h){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=tn.UNAUTHENTICATED,this.clientId=dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,async d=>{rt(Xs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(rt(Xs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Vm(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Dd(s,t){s.asyncQueue.verifyOperationInProgress(),rt(Xs,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let r=i.initialUser;s.setCredentialChangeListener(async l=>{r.isEqual(l)||(await RE(t.localStore,l),r=l)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function Iv(s,t){s.asyncQueue.verifyOperationInProgress();const i=await S2(s);rt(Xs,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener(r=>Tv(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,l)=>Tv(t.remoteStore,l)),s._onlineComponents=t}async function S2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt(Xs,"Using user provided OfflineComponentProvider");try{await Dd(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Ha("Error using user provided cache. Falling back to memory cache: "+i),await Dd(s,new Qc)}}else rt(Xs,"Using default OfflineComponentProvider"),await Dd(s,new v2(void 0));return s._offlineComponents}async function GE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt(Xs,"Using user provided OnlineComponentProvider"),await Iv(s,s._uninitializedComponentsProvider._online)):(rt(Xs,"Using default OnlineComponentProvider"),await Iv(s,new tm))),s._onlineComponents}function A2(s){return GE(s).then(t=>t.syncEngine)}async function b2(s){const t=await GE(s),i=t.eventManager;return i.onListen=a2.bind(null,t.syncEngine),i.onUnlisten=u2.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=o2.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=c2.bind(null,t.syncEngine),i}function w2(s,t,i={}){const r=new Bs;return s.asyncQueue.enqueueAndForget(async()=>function(h,d,g,y,_){const S=new E2({next:D=>{S.Nu(),d.enqueueAndForget(()=>JI(h,I));const G=D.docs.has(g);!G&&D.fromCache?_.reject(new lt(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&D.fromCache&&y&&y.source==="server"?_.reject(new lt(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),I=new e2(Em(g.path),S,{includeMetadataChanges:!0,qa:!0});return ZI(h,I)}(await b2(s),s.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firestore.googleapis.com",Nv=!0;class Dv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new lt(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QE,this.ssl=Nv}else this.host=t.host,this.ssl=t.ssl??Nv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=bE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<WR)throw new lt(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FE(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,l){return r.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hh{constructor(t,i,r,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ww;switch(r.type){case"firstParty":return new Nw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new lt(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=Cv.get(i);r&&(rt("ComponentProvider","Removing Datastore"),Cv.delete(i),r.terminate())}(this),Promise.resolve()}}function R2(s,t,i,r={}){s=Fa(s,hh);const l=$a(t),h=s._getSettings(),d={...h,emulatorOptions:s._getEmulatorOptions()},g=`${t}:${i}`;l&&(Hv(`https://${g}`),Gv("Firestore",!0)),h.host!==QE&&h.host!==g&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...h,host:g,ssl:l,emulatorOptions:r};if(!Mr(y,d)&&(s._setSettings(y),r.mockUserToken)){let _,S;if(typeof r.mockUserToken=="string")_=r.mockUserToken,S=tn.MOCK_USER;else{_=$S(r.mockUserToken,s._app?.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new lt(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new tn(I)}s._authCredentials=new Rw(new P0(_,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Lm(this.firestore,t,this._query)}}class Ve{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ve(this.firestore,t,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(Ll(i,Ve._jsonSchema))return new Ve(t,r||null,new dt(ae.fromString(i.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Ie("string",Ve._jsonSchemaVersion),referencePath:Ie("string")};class qs extends Lm{constructor(t,i,r){super(t,i,Em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ve(this.firestore,null,new dt(t))}withConverter(t){return new qs(this.firestore,t,this._path)}}function I2(s,t,...i){if(s=Pn(s),U0("collection","path",t),s instanceof hh){const r=ae.fromString(t,...i);return G_(r),new qs(s,null,r)}{if(!(s instanceof Ve||s instanceof qs))throw new lt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ae.fromString(t,...i));return G_(r),new qs(s.firestore,null,r)}}function zm(s,t,...i){if(s=Pn(s),arguments.length===1&&(t=dm.newId()),U0("doc","path",t),s instanceof hh){const r=ae.fromString(t,...i);return H_(r),new Ve(s,null,new dt(r))}{if(!(s instanceof Ve||s instanceof qs))throw new lt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ae.fromString(t,...i));return H_(r),new Ve(s.firestore,s instanceof qs?s.converter:null,new dt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="AsyncQueue";class Ov{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CE(this,"async_queue_retry"),this._c=()=>{const r=Nd();r&&rt(xv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const i=Nd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Nd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const i=new Bs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!eo(t))throw t;rt(xv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const i=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,Ji("INTERNAL UNHANDLED ERROR: ",Mv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=i,i}enqueueAfterDelay(t,i,r){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Mm.createAndSchedule(this,t,i,r,h=>this.hc(h));return this.tc.push(l),l}uc(){this.nc&&_t(47125,{Pc:Mv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function Mv(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class fh extends hh{constructor(t,i,r,l){super(t,i,r,l),this.type="firestore",this._queue=new Ov,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ov(t),this._firestoreClient=void 0,await t}}}function C2(s,t){const i=typeof s=="object"?s:Kv(),r=typeof s=="string"?s:Lc,l=sm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const h=KS("firestore");h&&R2(l,...h)}return l}function YE(s){if(s._terminated)throw new lt(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||N2(s),s._firestoreClient}function N2(s){const t=s._freezeSettings(),i=function(l,h,d,g){return new Qw(l,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,FE(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new T2(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new kn(Xe.fromBase64String(t))}catch(i){throw new lt(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new kn(Xe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ll(t,kn._jsonSchema))return kn.fromBase64String(t.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:Ie("string",kn._jsonSchemaVersion),bytes:Ie("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new lt(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new lt(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new lt(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(t){if(Ll(t,pi._jsonSchema))return new pi(t.latitude,t.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:Ie("string",pi._jsonSchemaVersion),latitude:Ie("number"),longitude:Ie("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,l){if(r.length!==l.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==l[h])return!1;return!0}(this._values,t._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ll(t,yi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new yi(t.vectorValues);throw new lt(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Ie("string",yi._jsonSchemaVersion),vectorValues:Ie("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/^__.*__$/;class x2{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new jr(t,this.data,this.fieldMask,i,this.fieldTransforms):new zl(t,this.data,i,this.fieldTransforms)}}function KE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:s})}}class qm{constructor(t,i,r,l,h,d){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new qm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.gc(t),r}yc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Yc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(KE(this.Ac)&&D2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class O2{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||lh(t)}Cc(t,i,r,l=!1){return new qm({Ac:t,methodName:i,Dc:r,path:Ke.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XE(s){const t=s._freezeSettings(),i=lh(s._databaseId);return new O2(s._databaseId,!!t.ignoreUndefinedProperties,i)}function $E(s,t,i,r,l,h={}){const d=s.Cc(h.merge||h.mergeFields?2:0,t,i,l);tT("Data must be an object, but it was:",d,r);const g=JE(r,d);let y,_;if(h.merge)y=new Qn(d.fieldMask),_=d.fieldTransforms;else if(h.mergeFields){const S=[];for(const I of h.mergeFields){const D=M2(t,I,i);if(!d.contains(D))throw new lt(Z.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);k2(S,D)||S.push(D)}y=new Qn(S),_=d.fieldTransforms.filter(I=>y.covers(I.field))}else y=null,_=d.fieldTransforms;return new x2(new Vn(g),y,_)}class Hm extends Bm{_toFieldTransform(t){return new vR(t.path,new Dl)}isEqual(t){return t instanceof Hm}}function ZE(s,t){if(WE(s=Pn(s)))return tT("Unsupported field value:",t,s),JE(s,t);if(s instanceof Bm)return function(r,l){if(!KE(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,l){const h=[];let d=0;for(const g of r){let y=ZE(g,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),d++}return{arrayValue:{values:h}}}(s,t)}return function(r,l){if((r=Pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pR(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=oe.fromDate(r);return{timestampValue:Hc(l.serializer,h)}}if(r instanceof oe){const h=new oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hc(l.serializer,h)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kn)return{bytesValue:yE(l.serializer,r._byteString)};if(r instanceof Ve){const h=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(h))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:bm(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof yi)return function(d,g){return{mapValue:{fields:{[Q0]:{stringValue:Y0},[zc]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return Tm(g.serializer,_)})}}}}}}(r,l);throw l.Sc(`Unsupported field value: ${mm(r)}`)}(s,t)}function JE(s,t){const i={};return j0(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lr(s,(r,l)=>{const h=ZE(l,t.mc(r));h!=null&&(i[r]=h)}),{mapValue:{fields:i}}}function WE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof oe||s instanceof pi||s instanceof kn||s instanceof Ve||s instanceof Bm||s instanceof yi)}function tT(s,t,i){if(!WE(i)||!L0(i)){const r=mm(i);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function M2(s,t,i){if((t=Pn(t))instanceof jm)return t._internalPath;if(typeof t=="string")return eT(s,t);throw Yc("Field path arguments must be of type string or ",s,!1,void 0,i)}const V2=new RegExp("[~\\*/\\[\\]]");function eT(s,t,i){if(t.search(V2)>=0)throw Yc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new jm(...t.split("."))._internalPath}catch{throw Yc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Yc(s,t,i,r,l){const h=r&&!r.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(h||d)&&(y+=" (found",h&&(y+=` in field ${r}`),d&&(y+=` in document ${l}`),y+=")"),new lt(Z.INVALID_ARGUMENT,g+s+y)}function k2(s,t){return s.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t,i,r,l,h){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new P2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(iT("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class P2 extends nT{data(){return super.data()}}function iT(s,t){return typeof t=="string"?eT(s,t):t instanceof jm?t._internalPath:t._delegate._internalPath}class U2{convertValue(t,i="none"){switch(Ys(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Qs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return Lr(t,(l,h)=>{r[l]=this.convertValue(h,i)}),r}convertVectorValue(t){const i=t.fields?.[zc].arrayValue?.values?.map(r=>Ee(r.doubleValue));return new yi(i)}convertGeoPoint(t){return new pi(Ee(t.latitude),Ee(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=eh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Il(t));default:return null}}convertTimestamp(t){const i=Fs(t);return new oe(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=ae.fromString(t);Xt(AE(r),9688,{name:t});const l=new Cl(r.get(1),r.get(3)),h=new dt(r.popFirst(5));return l.isEqual(i)||Ji(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(s,t,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,r}class gl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Or extends nT{constructor(t,i,r,l,h,d){super(t,i,r,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(iT("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Or._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:Ie("string",Or._jsonSchemaVersion),bundleSource:Ie("string","DocumentSnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class Cc extends Or{data(t={}){return super.data(t)}}class Sl{constructor(t,i,r,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new gl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new Cc(this._firestore,this._userDataWriter,r.key,r,new gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new lt(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const y=new Cc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new gl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const y=new Cc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new gl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,S=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),S=d.indexOf(g.doc.key)),{type:L2(g.type),doc:y,oldIndex:_,newIndex:S}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Sl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach(h=>{h._document!==null&&(i.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function L2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(s){s=Fa(s,Ve);const t=Fa(s.firestore,fh);return w2(YE(t),s._key).then(i=>H2(t,s,i))}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:Ie("string",Sl._jsonSchemaVersion),bundleSource:Ie("string","QuerySnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class j2 extends U2{constructor(t){super(),this.firestore=t}convertBytes(t){return new kn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ve(this.firestore,null,i)}}function B2(s,t,i){s=Fa(s,Ve);const r=Fa(s.firestore,fh),l=sT(s.converter,t,i);return rT(r,[$E(XE(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,mi.none())])}function q2(s,t){const i=Fa(s.firestore,fh),r=zm(s),l=sT(s.converter,t);return rT(i,[$E(XE(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,mi.exists(!1))]).then(()=>r)}function rT(s,t){return function(r,l){const h=new Bs;return r.asyncQueue.enqueueAndForget(async()=>h2(await A2(r),l,h)),h.promise}(YE(s),t)}function H2(s,t,i){const r=i.docs.get(t._key),l=new j2(s);return new Or(s,l,t._key,r,new gl(i.hasPendingWrites,i.fromCache),t.converter)}function G2(){return new Hm("serverTimestamp")}(function(t,i=!0){(function(l){Wa=l})(Za),qa(new Vr("firestore",(r,{instanceIdentifier:l,options:h})=>{const d=r.getProvider("app").getImmediate(),g=new fh(new Iw(r.getProvider("auth-internal")),new Dw(d,r.getProvider("app-check-internal")),function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new lt(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(_.options.projectId,S)}(d,l),d);return h={useFetchStreams:i,...h},g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),Ls(z_,j_,t),Ls(z_,j_,"esm2020")})();const F2="AIzaSyBsinouJnEwskZjSDOOY3H0XbchmjxMV8k",Vv={apiKey:"AIzaSyAfmOAI5Skp5WB1Fvm31aqxJRnMJMEvn9Y",authDomain:"augmented-writing.firebaseapp.com",projectId:"augmented-writing",storageBucket:"augmented-writing.firebasestorage.app",messagingSenderId:"609730383522",appId:"1:609730383522:web:bc54e53f972cfb1f4051fb",measurementId:"G-N0WYEGNCEF"},Q2={metadata:'Based on the following initial paper idea, extract a working title, a target conference/venue, and 5-7 relevant keywords. INITIAL IDEA: "{idea}" Output ONLY a valid JSON object with the keys "working_title", "target_venue", and "keywords".',objective:'Based on the following user description for a paper section, generate a concise one-sentence objective and a bulleted list of key points. USER DESCRIPTION: "{description}" Output ONLY a valid JSON object with two keys: "objective" (a string), and "key_points" (an array of strings).',content_judge:`You are a Content Goal Alignment Critic for scientific writing.
Judge ONLY the alignment between the user's goal (KP) and the current text.
Output JSON with: score (1-5), statement (one sentence), reason (one-two sentences), evidence (array of short quotes from the text that support your judgement).
If you cannot find evidence, include an empty array for evidence.
Example: {"score":3,"statement":"...","reason":"...","evidence":[{"quote":"..."}]}
[GOAL]: "{key_point}"
[TEXT]: "{current_text}"`,review_judge:`You are a Reviewer-Style Feedback Critic (peer-review simulation).
For the given text and key point context, give a 1-5 score and an explanation.
Focus on originality, soundness, meaningful comparison, replicability, and substance AS RELEVANT to the current text.
Output JSON with: score (1-5), statement (one sentence), reason (one-two sentences), evidence (array of short quotes).
Do NOT provide suggestions here.
Example: {"score":4,"statement":"...","reason":"...","evidence":[{"quote":"..."}]}
[KEY POINT CONTEXT]: "{key_point}"
[TEXT TO REVIEW]: "{current_text}"`,summary:`You are a research writing assistant. Analyze the user's text to see if it achieves the stated goal. Be concise and encouraging. Explain how it achieves the goal, or what is missing if it does not. [GOAL]: "{key_point}" [USER TEXT]: "{current_text}" Your response MUST be ONLY a valid JSON object with a single key "summary_text".`,suggestion:'You are an expert writing coach. You are given: [GOAL]: "{key_point}", [TEXT]: "{current_text}", [PROBLEM]: "{problem_description}". Generate a "state_description" (why the text is failing) and a "suggestion" (an actionable piece of advice). Your response MUST be ONLY a valid JSON object with two keys: "state_description" and "suggestion".'};async function Y2(s){const t=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${F2}`,i={contents:[{role:"user",parts:[{text:s}]}],generationConfig:{responseMimeType:"application/json"}};let r=3,l=1e3;for(;r>0;)try{const h=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(h.status===429){console.warn(`Rate limit hit. Retrying in ${l/1e3}s...`),await new Promise(g=>setTimeout(g,l)),l*=2,r--;continue}if(!h.ok){const g=await h.json();throw console.error("Gemini API error:",g),new Error(`API responded with status ${h.status}`)}return(await h.json())?.candidates?.[0]?.content?.parts?.[0]?.text??JSON.stringify({error:"No content returned from API."})}catch(h){if(console.error("Error calling Google API:",h),r--,r<=0)return JSON.stringify({error:`LLM call failed: ${h.message}`});await new Promise(d=>setTimeout(d,l)),l*=2}return JSON.stringify({error:"LLM call failed after multiple retries."})}async function Al(s,t={}){const i=Q2[s];if(!i)return console.error("Invalid prompt type requested:",s),{};let r=i;for(const l in t)r=r.replace(new RegExp(`{${l}}`,"g"),String(t[l]));try{const l=await Y2(r);return JSON.parse(l)}catch(l){return console.error(`Failed to parse JSON for prompt type ${s}:`,l),{error:"JSON parsing failed."}}}const kv=(s,t)=>{let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>s(...r),t)}},K2=({role:s,text:t})=>B.jsx("div",{className:`max-w-[80%] p-3 rounded-lg break-words ${s==="user"?"bg-blue-600 text-white self-end rounded-br-none":"bg-slate-200 text-slate-800 self-start rounded-bl-none"}`,children:t}),X2=({structure:s})=>B.jsxs("div",{className:"p-4 space-y-4 text-sm text-slate-600",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-slate-900",children:"Metadata"}),B.jsxs("p",{children:[B.jsx("strong",{children:"Title:"})," ",s?.metadata?.working_title||"..."]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Venue:"})," ",s?.metadata?.target_venue||"..."]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Keywords:"})," ",(s?.metadata?.keywords||[]).join(", ")||"..."]})]}),B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-slate-900 mt-4",children:"Paper Outline"}),(s?.paper_outline||[]).map((t,i)=>B.jsxs("div",{className:"mt-2 p-3 bg-slate-100 rounded-lg",children:[B.jsx("p",{className:"font-semibold text-slate-800",children:t?.section_name||`Section ${i+1}`}),B.jsx("p",{className:"text-xs italic text-slate-500",children:t?.objective||"..."}),B.jsx("ul",{className:"list-disc list-inside pl-2 mt-1 text-slate-600",children:(t?.key_points||[]).map((r,l)=>B.jsx("li",{children:typeof r=="string"?r:r.text},l))})]},i))]})]}),_c=({path:s,text:t,onUpdate:i,extraClasses:r=""})=>{const[l,h]=ft.useState(!1),[d,g]=ft.useState(t),y=ft.useRef(null);ft.useEffect(()=>{g(t)},[t]),ft.useEffect(()=>{l&&(y.current?.focus(),y.current?.select())},[l]);const _=()=>{h(!1),i(s,d)};return l?B.jsx("input",{ref:y,value:d,onChange:S=>g(S.target.value),onBlur:_,onKeyDown:S=>S.key==="Enter"&&_(),className:`w-full bg-slate-200 text-slate-800 rounded-md p-2 ${r}`}):B.jsx("div",{onDoubleClick:()=>h(!0),className:`goal-bubble-light ${r}`,children:t})},$2=({editorRef:s})=>{const t=(r,l="")=>{const h=s.current;if(!h)return;const{selectionStart:d,selectionEnd:g,value:y}=h,_=y.substring(d,g);d===g?(h.setRangeText(r+l,d,g,"end"),l&&(h.selectionStart=h.selectionEnd=d+r.length)):h.setRangeText(r+_+l,d,g,"select"),h.focus()},i="p-2 rounded-md text-slate-600 hover:bg-slate-200 w-9 h-9 flex items-center justify-center";return B.jsxs("div",{className:"flex items-center p-2 border-b border-slate-200 bg-slate-100 gap-x-1 flex-wrap",children:[B.jsx("button",{onClick:()=>t("**","**"),className:i,title:"Bold",children:B.jsx("strong",{className:"text-base",children:"B"})}),B.jsx("button",{onClick:()=>t("*","*"),className:i,title:"Italic",children:B.jsx("em",{className:"text-base",children:"I"})}),B.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),B.jsx("button",{onClick:()=>t("[","](https://)"),className:i,title:"Link",children:B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),B.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]})}),B.jsx("button",{onClick:()=>t("![Alt Text](","https://)"),className:i,title:"Image",children:B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),B.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),B.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),B.jsx("button",{onClick:()=>t("\n```\n","\n```\n"),className:i,title:"Code",children:"</>"})]})};function Z2(s){return s?s.replace(/\n+/g," ").split(new RegExp("(?<=[.!?])\\s+")).map(t=>t.trim()).filter(Boolean).map((t,i)=>({id:i,text:t})):[]}const J2=({visible:s,anchorRect:t,title:i,sentences:r=[],llm:l=null,onClose:h})=>{if(!s||!t)return null;const g=Math.max(8,t.left-300-16),y=Math.min(window.innerHeight-220,Math.max(8,t.top));return B.jsxs("div",{className:"fixed z-[60] w-[300px] max-h-[220px] overflow-y-auto rounded-xl border border-slate-200 bg-white shadow-2xl p-3 text-slate-800",style:{left:g,top:y},onMouseLeave:h,children:[B.jsx("div",{className:"text-xs uppercase tracking-wide text-sky-600 font-semibold mb-1",children:i}),l&&B.jsxs("div",{className:"mb-2 space-y-1 text-xs",children:[l.statement&&B.jsx("p",{className:"text-slate-900 font-semibold",children:l.statement}),l.reason&&B.jsx("p",{className:"text-slate-600",children:l.reason}),Array.isArray(l.evidence)&&l.evidence.length>0&&B.jsxs("div",{className:"mt-1 p-2 rounded-md bg-slate-100 border border-slate-200",children:[B.jsx("div",{className:"text-[10px] text-slate-500 mb-1",children:"Evidence"}),B.jsx("ul",{className:"space-y-1 list-disc list-inside",children:l.evidence.slice(0,3).map((_,S)=>B.jsxs("li",{className:"text-slate-700 text-xs",children:["“",_.quote,"”"]},S))})]})]}),B.jsx("div",{className:"text-[10px] text-slate-500 mb-1",children:"Sentences mentioning this goal"}),r.length===0?B.jsx("div",{className:"text-xs text-slate-500",children:"No direct mentions detected."}):B.jsx("ul",{className:"space-y-1",children:r.map(_=>B.jsxs("li",{className:"text-xs text-slate-700",children:["• ",_.text.length>160?_.text.slice(0,160)+"…":_.text]},_.id))})]})},Pv=({show:s,onClose:t,title:i,children:r})=>{const[l,h]=ft.useState({x:window.innerWidth/2-224,y:100}),[d,g]=ft.useState(!1),[y,_]=ft.useState(null),S=ft.useRef(null),I=X=>{if(X.button!==0||!S.current.contains(X.target)||X.target.tagName==="BUTTON"||!X.currentTarget.classList.contains("modal-header"))return;g(!0);const J=S.current;_({x:X.pageX-J.offsetLeft,y:X.pageY-J.offsetTop}),X.stopPropagation(),X.preventDefault()},D=ft.useCallback(()=>{g(!1)},[]),G=ft.useCallback(X=>{!d||!y||h({x:X.pageX-y.x,y:X.pageY-y.y})},[d,y]);return ft.useEffect(()=>(d&&(document.addEventListener("mousemove",G),document.addEventListener("mouseup",D)),()=>{document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",D)}),[d,G,D]),s?B.jsxs("div",{ref:S,style:{left:`${l.x}px`,top:`${l.y}px`},className:"fixed bg-white border border-slate-200 rounded-lg shadow-xl p-4 w-full max-w-md z-50 text-slate-800",children:[B.jsxs("div",{onMouseDown:I,className:"modal-header flex justify-between items-center mb-4 pb-2 border-b border-slate-200 cursor-move",children:[B.jsx("h3",{className:"text-lg font-bold text-slate-900",children:i}),B.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-900",children:"×"})]}),B.jsx("div",{children:r})]}):null},W2=({goalStructure:s,setGoalStructure:t,onConfirm:i})=>{const[r,l]=ft.useState([{role:"assistant",text:"Hello! I'm your Writing Assistant. To begin, please tell me your initial paper idea."}]),[h,d]=ft.useState(""),[g,y]=ft.useState(!1),[_,S]=ft.useState("awaiting_initial_idea"),[I,D]=ft.useState(0),[G,X]=ft.useState(0),[et,J]=ft.useState(!1),[St,mt]=ft.useState(JSON.stringify(s,null,2)),[ct,Lt]=ft.useState(!0),yt=ft.useRef(null);ft.useEffect(()=>{yt.current?.scrollIntoView({behavior:"smooth"})},[r]),ft.useEffect(()=>{et||mt(JSON.stringify(s,null,2))},[s,et]);const Ct=(b,N)=>l(O=>[...O,{role:b,text:N}]),M=b=>{const N=b.target.value;mt(N);try{t(JSON.parse(N)),Lt(!0)}catch{Lt(!1)}},A=async()=>{if(!h.trim()||g)return;const b=h;if(Ct("user",b),d(""),y(!0),_==="awaiting_initial_idea"){const N=await Al("metadata",{idea:b});t(O=>({...O,metadata:N})),S("awaiting_section_count"),Ct("assistant","Thanks! I've populated the metadata. Now, how many main sections will your paper have?")}else if(_==="awaiting_section_count"){const N=parseInt(b,10)||0;N>0&&N<15?(D(N),X(0),S("awaiting_section_name"),Ct("assistant","Great. What is the title of **Section 1**?")):Ct("assistant","Please enter a valid number (e.g., between 1 and 15).")}else if(_==="awaiting_section_name")t(N=>{const O=[...N.paper_outline||[]];return O[G]={section_name:b,objective:"",key_points:[]},{...N,paper_outline:O}}),S("awaiting_section_objective_description"),Ct("assistant",`Got it. Now, please briefly describe the main goal of the **${b}** section.`);else if(_==="awaiting_section_objective_description"){const N=await Al("objective",{description:b});t(V=>{const R=[...V.paper_outline];return R[G]={...R[G],objective:N.objective||"",key_points:N.key_points||[]},{...V,paper_outline:R}});const O=G+1;O<I?(X(O),S("awaiting_section_name"),Ct("assistant",`Excellent. What is the title of **Section ${O+1}**?`)):(S("finalizing"),Ct("assistant",'Great! The initial plan is complete. Please review it, then click "Confirm & Start Writing".'))}y(!1)};return B.jsxs("div",{className:"flex h-screen w-full bg-slate-100 text-slate-800",children:[B.jsxs("div",{className:"flex flex-col w-full md:w-1/2 h-full bg-slate-50",children:[B.jsx("header",{className:"p-4 border-b border-slate-200",children:B.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Phase 1: Goal Setting"})}),B.jsxs("main",{className:"flex-1 p-4 overflow-y-auto space-y-4 flex flex-col",children:[r.map((b,N)=>B.jsx(K2,{role:b.role,text:b.text},N)),g&&B.jsx("div",{className:"text-sm text-slate-500 self-start",children:"Writing Assistant is thinking..."}),B.jsx("div",{ref:yt})]}),B.jsx("footer",{className:"p-4 border-t border-slate-200 bg-slate-100",children:B.jsxs("div",{className:"flex items-start space-x-2",children:[B.jsx("textarea",{value:h,onChange:b=>d(b.target.value),onKeyDown:b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),A())},className:"flex-1 p-3 bg-white border border-slate-300 rounded-lg text-slate-800 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter your response...",rows:"1"}),B.jsx("button",{onClick:A,disabled:g,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-500 disabled:bg-blue-400",children:"Send"})]})})]}),B.jsxs("div",{className:"flex flex-col w-full md:w-1/2 h-full bg-white",children:[B.jsxs("header",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[B.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Goal Structure"}),B.jsx("button",{onClick:()=>J(!et),className:"px-3 py-1.5 text-sm bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:et?"Interactive View":"Raw JSON View"})]}),B.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:et?B.jsx("textarea",{value:St,onChange:M,className:`w-full h-full p-4 text-sm font-mono bg-transparent outline-none resize-none ${ct?"":"text-red-500"}`}):B.jsx(X2,{structure:s})}),B.jsx("footer",{className:"p-4 border-t border-slate-200 text-right",children:B.jsx("button",{onClick:i,className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-500 disabled:bg-green-400 disabled:cursor-not-allowed",disabled:_!=="finalizing"||!ct,children:"Confirm & Start Writing"})})]})]})},tC=({firebase:s,initialData:t,logEvent:i})=>{const[r,l]=ft.useState(t.goalStructure),[h,d]=ft.useState(t.editorText),g=ft.useMemo(()=>Z2(h),[h]),[y,_]=ft.useState({contentScores:[],reviewScores:[],contentLLM:[],reviewLLM:[]}),[S,I]=ft.useState({show:!1,stage:"",title:"",content:{}}),[D,G]=ft.useState(null),[X,et]=ft.useState(null),[J,St]=ft.useState("Content"),[mt,ct]=ft.useState([]),Lt=ft.useRef(null),[yt,Ct]=ft.useState(1),[M,A]=ft.useState(!1),[b,N]=ft.useState("Standard"),O=ft.useRef(0),V=ft.useRef(null),R={Standard:{count:3,delay:300},Weak:{count:7,delay:500},None:{count:1/0,delay:1/0}},Te=ft.useMemo(()=>kv(async st=>{if(s.db&&s.userId){const bt=zm(s.db,`artifacts/${appId}/users/${s.userId}/data/main_document`);await B2(bt,st,{merge:!0})}},2e3),[s.db,s.userId]);ft.useEffect(()=>{Te({goalStructure:r,editorText:h})},[r,h,Te]);const zt=ft.useMemo(()=>{const st=[];return(r.paper_outline||[]).forEach((bt,Et)=>{(bt.key_points||[]).forEach((Ot,$t)=>{const Ft=`paper_outline.${Et}.key_points.${$t}`;st.push({text:typeof Ot=="string"?Ot:Ot.text,path:Ft,type:"main",sectionIdx:Et}),typeof Ot=="object"&&Ot.sub_goals&&Ot.sub_goals.forEach((ce,Un)=>st.push({text:ce,path:`${Ft}.sub_goals.${Un}`,type:"sub",sectionIdx:Et}))})}),st},[r]),H=zt.length,nt=(st,bt,Et)=>{const Ot=JSON.parse(JSON.stringify(st));let $t=Ot;const Ft=bt.split(".");for(let ce=0;ce<Ft.length-1;ce++)$t=$t[Ft[ce]];return Et($t,Ft[Ft.length-1]),Ot},ot=(st,bt)=>{const Et=nt(r,st,(Ot,$t)=>{const Ft=Ot[$t];typeof Ft=="object"&&Ft&&Object.prototype.hasOwnProperty.call(Ft,"text")?Ft.text=bt:Ot[$t]=bt});l(Et)},jt=ft.useCallback(async st=>{if(st.trim()===""||zt.length===0){_({contentScores:[],reviewScores:[],contentLLM:[],reviewLLM:[]});return}try{const bt=Array(H).fill(0),Et=Array(H).fill(0),Ot=Array(H).fill(null),$t=Array(H).fill(null),Ft=4;for(let ce=0;ce<H;ce+=Ft){const Un=zt.slice(ce,ce+Ft);await Promise.all(Un.map(async(Ei,ln)=>{const es=ce+ln,[Ti,Yn]=await Promise.all([Al("content_judge",{key_point:Ei.text,current_text:st}),Al("review_judge",{key_point:Ei.text,current_text:st})]);bt[es]=Ti?.score?(Ti.score-1)/4:0,Et[es]=Yn?.score?(Yn.score-1)/4:0,Ot[es]=Ti||null,$t[es]=Yn||null}))}_({contentScores:bt,reviewScores:Et,contentLLM:Ot,reviewLLM:$t})}catch(bt){console.error("analyzeText error:",bt),_({contentScores:Array(H).fill(0),reviewScores:Array(H).fill(0),contentLLM:[],reviewLLM:[]})}},[zt,H]),C=ft.useMemo(()=>kv(st=>jt(st),500),[jt]);ft.useEffect(()=>{C(h)},[h,C]);const $=ft.useCallback(()=>{const st=y.contentScores.findIndex((bt,Et)=>bt<.5||y.reviewScores[Et]<.5);if(st!==-1){const bt=y.contentScores[st]<.5?"Content":"Review",Et=zt[st].text,Ot={show:!0,stage:"deviation_analysis",title:`Action for: "${Et}"`,content:{keyPointText:Et,type:bt}};I(Ot),ht(Ot),i("advice_triggered_auto")}A(!1),O.current=0},[y,zt,i]),it=st=>{const bt=st.target.value;if(d(bt),b==="None")return;O.current++,clearTimeout(V.current);const{count:Et,delay:Ot}=R[b];V.current=setTimeout(()=>{O.current>=Et&&y.contentScores.some((Ft,ce)=>Ft<.5||y.reviewScores[ce]<.5)&&A(!0),O.current=0},Ot)},W=(st,bt)=>{const Et=zt[st];I({show:!0,stage:"deviation_analysis",title:`Action for: "${Et.text}"`,content:{keyPointText:Et.text,type:bt}}),i("advice_triggered_manual",{goal:Et.text,type:bt})},ht=async(st=S)=>{const{keyPointText:bt,type:Et}=st.content;I(Ft=>({...Ft,stage:"seeking_advice",title:"Seeking Advice..."}));const $t=await Al("suggestion",{current_text:h,key_point:bt,problem_description:Et==="Content"?"The text is not well-aligned with its goal.":"The text has issues based on peer-review standards."});I(Ft=>({...Ft,stage:"advice_displayed",title:"Suggestions",content:{...Ft.content,...$t}}))},Nt=()=>{const st=S.content.suggestion;i("advice_accepted",{suggestion:st}),I({show:!1})},vt=(st,bt,Et)=>{G(bt),St(Et),et(st.currentTarget.getBoundingClientRect());const Ot=zt[bt]?.text||"";ct(g.filter($t=>Ot&&$t.text.toLowerCase().includes(Ot.toLowerCase())))},pe=()=>{G(null)};return B.jsxs(B.Fragment,{children:[B.jsx("style",{children:".slider-thumb::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:16px; height:16px; background:#3b82f6; border-radius:9999px; cursor:pointer; } .slider-thumb::-moz-range-thumb{ width:16px; height:16px; background:#3b82f6; border-radius:9999px; cursor:pointer; }"}),B.jsx(Pv,{show:S.show,onClose:()=>I({show:!1}),title:S.title,children:(()=>{const{stage:st,content:bt}=S;switch(st){case"seeking_advice":return B.jsx("p",{children:"Getting advice from AI..."});case"advice_displayed":return B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{className:"p-3 bg-yellow-100 border border-yellow-200 rounded-lg",children:[B.jsx("p",{className:"font-semibold text-sm text-yellow-800",children:B.jsx("strong",{children:"Diagnosis:"})}),B.jsx("p",{className:"text-sm text-yellow-900",children:bt.state_description})]}),B.jsxs("div",{className:"p-3 bg-green-100 border border-green-200 rounded-lg",children:[B.jsx("p",{className:"font-semibold text-sm text-green-800",children:B.jsx("strong",{children:"Suggestion:"})}),B.jsx("p",{className:"text-sm text-green-900",children:bt.suggestion})]}),B.jsxs("div",{className:"flex justify-end items-center pt-4 mt-2 border-t border-slate-200 gap-x-2",children:[B.jsx("button",{onClick:()=>{I({show:!1}),i("advice_rejected")},className:"px-4 py-2 bg-slate-200 text-slate-800 text-sm font-semibold rounded-lg hover:bg-slate-300",children:"Reject"}),B.jsx("button",{onClick:Nt,className:"px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg hover:bg-blue-500",children:"Accept"})]})]});default:return B.jsx("p",{children:"Loading..."})}})()}),B.jsx(Pv,{show:M,onClose:()=>A(!1),title:"Writing Suggestion",children:B.jsxs("div",{className:"space-y-4",children:[B.jsx("p",{children:"It looks like some of your writing may not be strongly aligned with its goals. Would you like some automated advice?"}),B.jsxs("div",{className:"flex justify-end items-center pt-4 mt-4 border-t border-slate-200 gap-x-2",children:[B.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-semibold rounded-lg hover:bg-slate-500",children:"Dismiss"}),B.jsx("button",{onClick:$,className:"px-4 py-2 bg-green-600 text-white text-sm font-semibold rounded-lg hover:bg-green-500",children:"Get Advice"})]})]})}),B.jsx(J2,{visible:D!==null,anchorRect:X,title:`${J} • ${zt[D||0]?.text||""}`,sentences:mt,llm:D!==null?J==="Content"?y.contentLLM[D]:y.reviewLLM[D]:null,onClose:pe}),B.jsxs("div",{className:"flex h-screen w-full bg-white text-slate-700",children:[B.jsxs("div",{className:"w-[25%] h-full flex flex-col bg-slate-50 border-r border-slate-200",children:[B.jsx("header",{className:"p-4 border-b border-slate-200",children:B.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Goal Blueprint"})}),B.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:B.jsxs("div",{className:"space-y-8",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-3 border-b border-slate-200 pb-2",children:"Metadata"}),B.jsxs("div",{className:"space-y-3",children:[B.jsx(_c,{path:"metadata.working_title",text:r.metadata.working_title,onUpdate:ot,extraClasses:"font-bold text-lg text-slate-900"}),B.jsx(_c,{path:"metadata.target_venue",text:r.metadata.target_venue,onUpdate:ot,extraClasses:"text-base text-slate-700"})]})]}),(r.paper_outline||[]).map((st,bt)=>B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-3 border-b border-slate-200 pb-2 mt-6",children:st.section_name}),B.jsx(_c,{path:`paper_outline.${bt}.objective`,text:st.objective,onUpdate:ot,extraClasses:"text-base font-semibold block w-full mb-4 !text-blue-800 !bg-blue-100"}),B.jsx("div",{className:"space-y-2",children:zt.map((Et,Ot)=>{if(Et.sectionIdx!==bt)return null;const $t=h.toLowerCase().includes(Et.text.toLowerCase());return B.jsxs("div",{className:`flex items-center group transition-all duration-200 rounded-md p-1 ${Et.type==="sub"?"ml-6":""} ${$t?"opacity-100 bg-slate-200/60":"opacity-60"}`,children:[B.jsx("button",{onClick:()=>W(Ot,"Content"),className:"mr-2 text-slate-400 group-hover:text-blue-500",title:"Analyze Goal Achievement",children:"●"}),B.jsx("div",{className:"flex-1",children:B.jsx(_c,{path:Et.path,text:Et.text,onUpdate:ot,extraClasses:`!bg-transparent ${Et.type==="sub"?"text-sm text-slate-600":"text-base text-slate-800"}`})})]},Et.path)})})]},bt))]})})]}),B.jsxs("div",{className:"w-[50%] h-full flex flex-col bg-white",children:[B.jsx($2,{editorRef:Lt}),B.jsx("textarea",{ref:Lt,value:h,onChange:it,className:"flex-1 p-8 text-base bg-white text-slate-800 leading-7 focus:outline-none resize-none placeholder-slate-400",placeholder:"Start writing your paper here..."})]}),B.jsxs("div",{className:"w-[25%] h-full bg-slate-50 flex flex-col items-center justify-start p-4 border-l border-slate-200",children:[B.jsxs("div",{className:"w-full max-w-xs space-y-6 my-6",children:[B.jsxs("div",{className:"text-center",children:[B.jsx("label",{className:"text-xs font-semibold text-slate-500 block mb-2",children:"Reviewer Sternness"}),B.jsx("input",{type:"range",min:"0",max:"2",step:"1",value:yt,onChange:st=>Ct(Number(st.target.value)),className:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer slider-thumb"}),B.jsx("span",{className:"text-xs text-slate-500",children:["Gentle","Standard","Harsh"][yt]})]}),B.jsxs("div",{className:"text-center",children:[B.jsx("label",{className:"text-xs font-semibold text-slate-500 block mb-2",children:"Auto-Popup Trigger"}),B.jsx("div",{className:"flex justify-center gap-x-2",children:Object.keys(R).map(st=>B.jsx("button",{onClick:()=>N(st),className:`px-3 py-1 text-xs rounded-md ${b===st?"bg-blue-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:st},st))}),B.jsx("span",{className:"text-xs text-slate-500 mt-1 block",children:b!=="None"?`${R[b].count} mods + ${R[b].delay}ms pause`:"Keyboard trigger disabled"})]})]}),B.jsx("div",{className:"flex-1 flex items-center justify-center",children:B.jsx("div",{className:"flex gap-x-8",children:["Content","Review"].map(st=>B.jsxs("div",{className:"text-center select-none",children:[B.jsx("div",{className:"mb-2",children:B.jsx("p",{className:"text-sm font-semibold text-slate-500",children:st})}),B.jsx("div",{className:"flex flex-col items-center gap-y-1.5 relative",children:Array.from({length:H}).map((bt,Et)=>{const $t=(st==="Content"?y.contentScores:y.reviewScores)[Et]||0,Ft=st==="Content"?0:210,ce=60-$t*25,Un={backgroundColor:$t>0?`hsl(${Ft}, 70%, ${ce}%)`:"#e2e8f0"};return B.jsx("div",{className:"w-5 h-5 rounded-md cursor-pointer transition-all",style:Un,onMouseEnter:Ei=>vt(Ei,Et,st),onMouseLeave:pe,onClick:()=>W(Et,st),title:`${st} • ${zt[Et]?.text||""}`},`${st}-${Et}`)})})]},st))})})]})]})]})};function eC(){const[s,t]=ft.useState({app:null,auth:null,db:null,userId:null}),[i,r]=ft.useState(!0),[l,h]=ft.useState("goalSetting"),[d,g]=ft.useState({goalStructure:{metadata:{target_venue:"",working_title:"",keywords:[]},paper_outline:[]},editorText:""}),y=ft.useCallback(async(S,I={})=>{if(!(!s.db||!s.userId))try{const D={eventName:S,timestamp:G2(),...I};await q2(I2(s.db,`artifacts/${appId}/users/${s.userId}/logs`),D)}catch(D){console.error("Error logging event:",D)}},[s.db,s.userId]);ft.useEffect(()=>{if(!Vv){console.error("Firebase config is missing."),r(!1);return}const S=Yv(Vv),I=Aw(S),D=C2(S);f1(I,async G=>{if(G){t({app:S,auth:I,db:D,userId:G.uid});const X=zm(D,`artifacts/${appId}/users/${G.uid}/data/main_document`),et=await z2(X);if(et.exists()){const J=et.data();g({goalStructure:J.goalStructure||d.goalStructure,editorText:J.editorText||""}),h("writing")}await y("user_session_started"),r(!1)}else a1(I)})},[]);const _=()=>{y("goal_setting_confirmed"),h("writing")};return i?B.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-100 text-slate-700",children:"Loading..."}):B.jsx("div",{className:"bg-slate-100 overflow-hidden",children:l==="goalSetting"?B.jsx(W2,{goalStructure:d.goalStructure,setGoalStructure:S=>g(I=>({...I,goalStructure:S})),onConfirm:_}):B.jsx(tC,{firebase:s,initialData:d,logEvent:y})})}zS.createRoot(document.getElementById("root")).render(B.jsx(ft.StrictMode,{children:B.jsx(eC,{})}));
