(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();var dd={exports:{}},cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function DS(){if(e_)return cl;e_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var g in l)g!=="key"&&(h[g]=l[g])}else h=l;return l=h.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:h}}return cl.Fragment=t,cl.jsx=i,cl.jsxs=i,cl}var n_;function xS(){return n_||(n_=1,dd.exports=DS()),dd.exports}var B=xS(),md={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function OS(){if(i_)return Ct;i_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function D(N){return N===null||typeof N!="object"?null:(N=I&&N[I]||N["@@iterator"],typeof N=="function"?N:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,nt={};function J(N,$,it){this.props=N,this.context=$,this.refs=nt,this.updater=it||H}J.prototype.isReactComponent={},J.prototype.setState=function(N,$){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,$,"setState")},J.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function gt(){}gt.prototype=J.prototype;function mt(N,$,it){this.props=N,this.context=$,this.refs=nt,this.updater=it||H}var ct=mt.prototype=new gt;ct.constructor=mt,K(ct,J.prototype),ct.isPureReactComponent=!0;var zt=Array.isArray,_t={H:null,A:null,T:null,S:null,V:null},It=Object.prototype.hasOwnProperty;function M(N,$,it,W,ht,Nt){return it=Nt.ref,{$$typeof:s,type:N,key:$,ref:it!==void 0?it:null,props:Nt}}function A(N,$){return M(N.type,$,void 0,void 0,void 0,N.props)}function b(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function C(N){var $={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(it){return $[it]})}var O=/\/+/g;function V(N,$){return typeof N=="object"&&N!==null&&N.key!=null?C(""+N.key):$.toString(36)}function R(){}function de(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(R,R):(N.status="pending",N.then(function($){N.status==="pending"&&(N.status="fulfilled",N.value=$)},function($){N.status==="pending"&&(N.status="rejected",N.reason=$)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ae(N,$,it,W,ht){var Nt=typeof N;(Nt==="undefined"||Nt==="boolean")&&(N=null);var Tt=!1;if(N===null)Tt=!0;else switch(Nt){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(N.$$typeof){case s:case t:Tt=!0;break;case S:return Tt=N._init,ae(Tt(N._payload),$,it,W,ht)}}if(Tt)return ht=ht(N),Tt=W===""?"."+V(N,0):W,zt(ht)?(it="",Tt!=null&&(it=Tt.replace(O,"$&/")+"/"),ae(ht,$,it,"",function(at){return at})):ht!=null&&(b(ht)&&(ht=A(ht,it+(ht.key==null||N&&N.key===ht.key?"":(""+ht.key).replace(O,"$&/")+"/")+Tt)),$.push(ht)),1;Tt=0;var Se=W===""?".":W+":";if(zt(N))for(var Xt=0;Xt<N.length;Xt++)W=N[Xt],Nt=Se+V(W,Xt),Tt+=ae(W,$,it,Nt,ht);else if(Xt=D(N),typeof Xt=="function")for(N=Xt.call(N),Xt=0;!(W=N.next()).done;)W=W.value,Nt=Se+V(W,Xt++),Tt+=ae(W,$,it,Nt,ht);else if(Nt==="object"){if(typeof N.then=="function")return ae(de(N),$,it,W,ht);throw $=String(N),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function G(N,$,it){if(N==null)return N;var W=[],ht=0;return ae(N,W,"","",function(Nt){return $.call(it,Nt,ht++)}),W}function tt(N){if(N._status===-1){var $=N._result;$=$(),$.then(function(it){(N._status===0||N._status===-1)&&(N._status=1,N._result=it)},function(it){(N._status===0||N._status===-1)&&(N._status=2,N._result=it)}),N._status===-1&&(N._status=0,N._result=$)}if(N._status===1)return N._result.default;throw N._result}var lt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Vt(){}return Ct.Children={map:G,forEach:function(N,$,it){G(N,function(){$.apply(this,arguments)},it)},count:function(N){var $=0;return G(N,function(){$++}),$},toArray:function(N){return G(N,function($){return $})||[]},only:function(N){if(!b(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ct.Component=J,Ct.Fragment=i,Ct.Profiler=l,Ct.PureComponent=mt,Ct.StrictMode=r,Ct.Suspense=_,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_t,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(N){return _t.H.useMemoCache(N)}},Ct.cache=function(N){return function(){return N.apply(null,arguments)}},Ct.cloneElement=function(N,$,it){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var W=K({},N.props),ht=N.key,Nt=void 0;if($!=null)for(Tt in $.ref!==void 0&&(Nt=void 0),$.key!==void 0&&(ht=""+$.key),$)!It.call($,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&$.ref===void 0||(W[Tt]=$[Tt]);var Tt=arguments.length-2;if(Tt===1)W.children=it;else if(1<Tt){for(var Se=Array(Tt),Xt=0;Xt<Tt;Xt++)Se[Xt]=arguments[Xt+2];W.children=Se}return M(N.type,ht,void 0,void 0,Nt,W)},Ct.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:h,_context:N},N},Ct.createElement=function(N,$,it){var W,ht={},Nt=null;if($!=null)for(W in $.key!==void 0&&(Nt=""+$.key),$)It.call($,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ht[W]=$[W]);var Tt=arguments.length-2;if(Tt===1)ht.children=it;else if(1<Tt){for(var Se=Array(Tt),Xt=0;Xt<Tt;Xt++)Se[Xt]=arguments[Xt+2];ht.children=Se}if(N&&N.defaultProps)for(W in Tt=N.defaultProps,Tt)ht[W]===void 0&&(ht[W]=Tt[W]);return M(N,Nt,void 0,void 0,null,ht)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(N){return{$$typeof:g,render:N}},Ct.isValidElement=b,Ct.lazy=function(N){return{$$typeof:S,_payload:{_status:-1,_result:N},_init:tt}},Ct.memo=function(N,$){return{$$typeof:p,type:N,compare:$===void 0?null:$}},Ct.startTransition=function(N){var $=_t.T,it={};_t.T=it;try{var W=N(),ht=_t.S;ht!==null&&ht(it,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Vt,lt)}catch(Nt){lt(Nt)}finally{_t.T=$}},Ct.unstable_useCacheRefresh=function(){return _t.H.useCacheRefresh()},Ct.use=function(N){return _t.H.use(N)},Ct.useActionState=function(N,$,it){return _t.H.useActionState(N,$,it)},Ct.useCallback=function(N,$){return _t.H.useCallback(N,$)},Ct.useContext=function(N){return _t.H.useContext(N)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(N,$){return _t.H.useDeferredValue(N,$)},Ct.useEffect=function(N,$,it){var W=_t.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(N,$)},Ct.useId=function(){return _t.H.useId()},Ct.useImperativeHandle=function(N,$,it){return _t.H.useImperativeHandle(N,$,it)},Ct.useInsertionEffect=function(N,$){return _t.H.useInsertionEffect(N,$)},Ct.useLayoutEffect=function(N,$){return _t.H.useLayoutEffect(N,$)},Ct.useMemo=function(N,$){return _t.H.useMemo(N,$)},Ct.useOptimistic=function(N,$){return _t.H.useOptimistic(N,$)},Ct.useReducer=function(N,$,it){return _t.H.useReducer(N,$,it)},Ct.useRef=function(N){return _t.H.useRef(N)},Ct.useState=function(N){return _t.H.useState(N)},Ct.useSyncExternalStore=function(N,$,it){return _t.H.useSyncExternalStore(N,$,it)},Ct.useTransition=function(){return _t.H.useTransition()},Ct.version="19.1.0",Ct}var s_;function nm(){return s_||(s_=1,md.exports=OS()),md.exports}var ft=nm(),gd={exports:{}},hl={},pd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function MS(){return r_||(r_=1,function(s){function t(G,tt){var lt=G.length;G.push(tt);t:for(;0<lt;){var Vt=lt-1>>>1,N=G[Vt];if(0<l(N,tt))G[Vt]=tt,G[lt]=N,lt=Vt;else break t}}function i(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var tt=G[0],lt=G.pop();if(lt!==tt){G[0]=lt;t:for(var Vt=0,N=G.length,$=N>>>1;Vt<$;){var it=2*(Vt+1)-1,W=G[it],ht=it+1,Nt=G[ht];if(0>l(W,lt))ht<N&&0>l(Nt,W)?(G[Vt]=Nt,G[ht]=lt,Vt=ht):(G[Vt]=W,G[it]=lt,Vt=it);else if(ht<N&&0>l(Nt,lt))G[Vt]=Nt,G[ht]=lt,Vt=ht;else break t}}return tt}function l(G,tt){var lt=G.sortIndex-tt.sortIndex;return lt!==0?lt:G.id-tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var _=[],p=[],S=1,I=null,D=3,H=!1,K=!1,nt=!1,J=!1,gt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;function zt(G){for(var tt=i(p);tt!==null;){if(tt.callback===null)r(p);else if(tt.startTime<=G)r(p),tt.sortIndex=tt.expirationTime,t(_,tt);else break;tt=i(p)}}function _t(G){if(nt=!1,zt(G),!K)if(i(_)!==null)K=!0,It||(It=!0,V());else{var tt=i(p);tt!==null&&ae(_t,tt.startTime-G)}}var It=!1,M=-1,A=5,b=-1;function C(){return J?!0:!(s.unstable_now()-b<A)}function O(){if(J=!1,It){var G=s.unstable_now();b=G;var tt=!0;try{t:{K=!1,nt&&(nt=!1,mt(M),M=-1),H=!0;var lt=D;try{e:{for(zt(G),I=i(_);I!==null&&!(I.expirationTime>G&&C());){var Vt=I.callback;if(typeof Vt=="function"){I.callback=null,D=I.priorityLevel;var N=Vt(I.expirationTime<=G);if(G=s.unstable_now(),typeof N=="function"){I.callback=N,zt(G),tt=!0;break e}I===i(_)&&r(_),zt(G)}else r(_);I=i(_)}if(I!==null)tt=!0;else{var $=i(p);$!==null&&ae(_t,$.startTime-G),tt=!1}}break t}finally{I=null,D=lt,H=!1}tt=void 0}}finally{tt?V():It=!1}}}var V;if(typeof ct=="function")V=function(){ct(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,de=R.port2;R.port1.onmessage=O,V=function(){de.postMessage(null)}}else V=function(){gt(O,0)};function ae(G,tt){M=gt(function(){G(s.unstable_now())},tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(G){switch(D){case 1:case 2:case 3:var tt=3;break;default:tt=D}var lt=D;D=tt;try{return G()}finally{D=lt}},s.unstable_requestPaint=function(){J=!0},s.unstable_runWithPriority=function(G,tt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var lt=D;D=G;try{return tt()}finally{D=lt}},s.unstable_scheduleCallback=function(G,tt,lt){var Vt=s.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?Vt+lt:Vt):lt=Vt,G){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=lt+N,G={id:S++,callback:tt,priorityLevel:G,startTime:lt,expirationTime:N,sortIndex:-1},lt>Vt?(G.sortIndex=lt,t(p,G),i(_)===null&&G===i(p)&&(nt?(mt(M),M=-1):nt=!0,ae(_t,lt-Vt))):(G.sortIndex=N,t(_,G),K||H||(K=!0,It||(It=!0,V()))),G},s.unstable_shouldYield=C,s.unstable_wrapCallback=function(G){var tt=D;return function(){var lt=D;D=tt;try{return G.apply(this,arguments)}finally{D=lt}}}}(yd)),yd}var a_;function VS(){return a_||(a_=1,pd.exports=MS()),pd.exports}var _d={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function kS(){if(o_)return tn;o_=1;var s=nm();function t(_){var p="https://react.dev/errors/"+_;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+_+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(_,p,S){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:_,containerInfo:p,implementation:S}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,p){if(_==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(_,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return h(_,p,null,S)},tn.flushSync=function(_){var p=d.T,S=r.p;try{if(d.T=null,r.p=2,_)return _()}finally{d.T=p,r.p=S,r.d.f()}},tn.preconnect=function(_,p){typeof _=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(_,p))},tn.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},tn.preinit=function(_,p){if(typeof _=="string"&&p&&typeof p.as=="string"){var S=p.as,I=g(S,p.crossOrigin),D=typeof p.integrity=="string"?p.integrity:void 0,H=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?r.d.S(_,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:I,integrity:D,fetchPriority:H}):S==="script"&&r.d.X(_,{crossOrigin:I,integrity:D,fetchPriority:H,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(_,p){if(typeof _=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=g(p.as,p.crossOrigin);r.d.M(_,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(_)},tn.preload=function(_,p){if(typeof _=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,I=g(S,p.crossOrigin);r.d.L(_,S,{crossOrigin:I,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(_,p){if(typeof _=="string")if(p){var S=g(p.as,p.crossOrigin);r.d.m(_,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(_)},tn.requestFormReset=function(_){r.d.r(_)},tn.unstable_batchedUpdates=function(_,p){return _(p)},tn.useFormState=function(_,p,S){return d.H.useFormState(_,p,S)},tn.useFormStatus=function(){return d.H.useHostTransitionStatus()},tn.version="19.1.0",tn}var l_;function PS(){if(l_)return _d.exports;l_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),_d.exports=kS(),_d.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function US(){if(u_)return hl;u_=1;var s=VS(),t=nm(),i=PS();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(h(e)!==e)throw Error(r(188))}function _(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(o=c.return,o!==null){a=o;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return g(c),e;if(f===o)return g(c),n;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=c,o=f;else{for(var v=!1,E=c.child;E;){if(E===a){v=!0,a=c,o=f;break}if(E===o){v=!0,o=c,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=c;break}if(E===o){v=!0,o=f,a=c;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),gt=Symbol.for("react.provider"),mt=Symbol.for("react.consumer"),ct=Symbol.for("react.context"),zt=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),It=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function de(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case K:return"Fragment";case J:return"Profiler";case nt:return"StrictMode";case _t:return"Suspense";case It:return"SuspenseList";case b:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case ct:return(e.displayName||"Context")+".Provider";case mt:return(e._context.displayName||"Context")+".Consumer";case zt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:de(e.type)||"Memo";case A:n=e._payload,e=e._init;try{return de(e(n))}catch{}}return null}var ae=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},Vt=[],N=-1;function $(e){return{current:e}}function it(e){0>N||(e.current=Vt[N],Vt[N]=null,N--)}function W(e,n){N++,Vt[N]=e.current,e.current=n}var ht=$(null),Nt=$(null),Tt=$(null),Se=$(null);function Xt(e,n){switch(W(Tt,n),W(Nt,e),W(ht,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ny(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ny(n),e=Dy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ht),W(ht,e)}function at(){it(ht),it(Nt),it(Tt)}function wt(e){e.memoizedState!==null&&W(Se,e);var n=ht.current,a=Dy(n,e.type);n!==a&&(W(Nt,e),W(ht,a))}function vt(e){Nt.current===e&&(it(ht),it(Nt)),Se.current===e&&(it(Se),rl._currentValue=lt)}var Lt=Object.prototype.hasOwnProperty,$t=s.unstable_scheduleCallback,Gt=s.unstable_cancelCallback,ye=s.unstable_shouldYield,Kn=s.unstable_requestPaint,He=s.unstable_now,no=s.unstable_getCurrentPriorityLevel,Xn=s.unstable_ImmediatePriority,$n=s.unstable_UserBlockingPriority,Ln=s.unstable_NormalPriority,dh=s.unstable_LowPriority,Br=s.unstable_IdlePriority,io=s.log,Hl=s.unstable_setDisableYieldValue,me=null,Zt=null;function mn(e){if(typeof io=="function"&&Hl(e),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(me,e)}catch{}}var Je=Math.clz32?Math.clz32:$s,Gl=Math.log,mh=Math.LN2;function $s(e){return e>>>=0,e===0?32:31-(Gl(e)/mh|0)|0}var Zs=256,Js=4194304;function zn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qr(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?c=zn(o):(v&=E,v!==0?c=zn(v):a||(a=E&~e,a!==0&&(c=zn(a))))):(E=o&~f,E!==0?c=zn(E):v!==0?c=zn(v):a||(a=o&~e,a!==0&&(c=zn(a)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:c}function Ws(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function so(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ro(){var e=Zs;return Zs<<=1,(Zs&4194048)===0&&(Zs=256),e}function ao(){var e=Js;return Js<<=1,(Js&62914560)===0&&(Js=4194304),e}function Ai(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function bi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function oo(e,n,a,o,c,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,w=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var F=31-Je(a),Y=1<<F;E[F]=0,w[F]=-1;var z=L[F];if(z!==null)for(L[F]=null,F=0;F<z.length;F++){var j=z[F];j!==null&&(j.lane&=-536870913)}a&=~Y}o!==0&&Zn(e,o,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~n))}function Zn(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Je(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function lo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Je(a),c=1<<o;c&n|e[o]&n&&(e[o]|=n),a&=~c}}function ns(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function is(){var e=tt.p;return e!==0?e:(e=window.event,e===void 0?32:Xy(e.type))}function Fl(e,n){var a=tt.p;try{return tt.p=e,n()}finally{tt.p=a}}var ue=Math.random().toString(36).slice(2),Ne="__reactFiber$"+ue,Ae="__reactProps$"+ue,An="__reactContainer$"+ue,uo="__reactEvents$"+ue,gh="__reactListeners$"+ue,ss="__reactHandles$"+ue,Ql="__reactResources$"+ue,tr="__reactMarker$"+ue;function rs(e){delete e[Ne],delete e[Ae],delete e[uo],delete e[gh],delete e[ss]}function wi(e){var n=e[Ne];if(n)return n;for(var a=e.parentNode;a;){if(n=a[An]||a[Ne]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Vy(e);e!==null;){if(a=e[Ne])return a;e=Vy(e)}return n}e=a,a=e.parentNode}return null}function Jn(e){if(e=e[Ne]||e[An]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Wn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function an(e){var n=e[Ql];return n||(n=e[Ql]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function _e(e){e[tr]=!0}var co=new Set,Gr={};function jn(e,n){Ri(e,n),Ri(e+"Capture",n)}function Ri(e,n){for(Gr[e]=n,e=0;e<n.length;e++)co.add(n[e])}var Yl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kl={},er={};function Xl(e){return Lt.call(er,e)?!0:Lt.call(Kl,e)?!1:Yl.test(e)?er[e]=!0:(Kl[e]=!0,!1)}function as(e,n,a){if(Xl(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function ti(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Ge(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}var nr,$l;function Ii(e){if(nr===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);nr=n&&n[1]||"",$l=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nr+e+$l}var Fr=!1;function Qr(e,n){if(!e||Fr)return"";Fr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(j){var z=j}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(j){z=j}e.call(Y.prototype)}}else{try{throw Error()}catch(j){z=j}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(j){if(j&&z&&typeof j.stack=="string")return[j.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var w=v.split(`
`),L=E.split(`
`);for(c=o=0;o<w.length&&!w[o].includes("DetermineComponentFrameRoot");)o++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(o===w.length||c===L.length)for(o=w.length-1,c=L.length-1;1<=o&&0<=c&&w[o]!==L[c];)c--;for(;1<=o&&0<=c;o--,c--)if(w[o]!==L[c]){if(o!==1||c!==1)do if(o--,c--,0>c||w[o]!==L[c]){var F=`
`+w[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=c);break}}}finally{Fr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ii(a):""}function ho(e){switch(e.tag){case 26:case 27:case 5:return Ii(e.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return Qr(e.type,!1);case 11:return Qr(e.type.render,!1);case 1:return Qr(e.type,!0);case 31:return Ii("Activity");default:return""}}function Yr(e){try{var n="";do n+=ho(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fo(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ph(e){var n=fo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Kr(e){e._valueTracker||(e._valueTracker=ph(e))}function mo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=fo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function ir(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yh=/[\n"\\]/g;function be(e){return e.replace(yh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function gn(e,n,a,o,c,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+on(n)):e.value!==""+on(n)&&(e.value=""+on(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?os(e,v,on(n)):a!=null?os(e,v,on(a)):o!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+on(E):e.removeAttribute("name")}function sr(e,n,a,o,c,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+on(a):"",n=n!=null?""+on(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function os(e,n,a){n==="number"&&ir(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ci(e,n,a,o){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&o&&(e[a].defaultSelected=!0)}else{for(a=""+on(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function te(e,n,a){if(n!=null&&(n=""+on(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+on(a):""}function rr(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(ae(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=on(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function bn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var ar=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||ar.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function go(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&a[c]!==o&&Zl(e,c,o)}else for(var f in n)n.hasOwnProperty(f)&&Zl(e,f,n[f])}function po(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xr(e){return vh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ni=null;function wn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,xi=null;function yo(e){var n=Jn(e);if(n&&(e=n.stateNode)){var a=e[Ae]||null;t:switch(e=n.stateNode,n.type){case"input":if(gn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+be(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var c=o[Ae]||null;if(!c)throw Error(r(90));gn(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&mo(o)}break t;case"textarea":te(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ci(e,!!a.multiple,n,!1)}}}var ei=!1;function Jl(e,n,a){if(ei)return e(n,a);ei=!0;try{var o=e(n);return o}finally{if(ei=!1,(Di!==null||xi!==null)&&(Fu(),Di&&(n=Di,e=xi,xi=Di=null,yo(n),e)))for(n=0;n<e.length;n++)yo(e[n])}}function or(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Ae]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(Bn)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Rn=!1}var ni=null,ls=null,Oi=null;function _o(){if(Oi)return Oi;var e,n=ls,a=n.length,o,c="value"in ni?ni.value:ni.textContent,f=c.length;for(e=0;e<a&&n[e]===c[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===c[f-o];o++);return Oi=c.slice(e,1<o?1-o:void 0)}function ii(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function si(){return!0}function vo(){return!1}function Ue(e){function n(a,o,c,f,v){this._reactName=a,this._targetInst=c,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?si:vo,this.isPropagationStopped=vo,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),n}var Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$r=Ue(Yt),ur=S({},Yt,{view:0,detail:0}),Wl=Ue(ur),Zr,Jr,ri,cr=S({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ri&&(ri&&e.type==="mousemove"?(Zr=e.screenX-ri.screenX,Jr=e.screenY-ri.screenY):Jr=Zr=0,ri=e),Zr)},movementY:function(e){return"movementY"in e?e.movementY:Jr}}),In=Ue(cr),tu=S({},cr,{dataTransfer:0}),Eh=Ue(tu),hr=S({},ur,{relatedTarget:0}),Wr=Ue(hr),Eo=S({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0}),ta=Ue(Eo),eu=S({},Yt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ea=Ue(eu),Th=S({},Yt,{data:0}),To=Ue(Th),fr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function So(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=iu[e])?!!n[e]:!1}function dr(){return So}var su=S({},ur,{key:function(e){if(e.key){var n=fr[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dr,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),na=Ue(su),ru=S({},cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ao=Ue(ru),Mi=S({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dr}),au=Ue(Mi),ou=S({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0}),lu=Ue(ou),uu=S({},cr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ia=Ue(uu),ln=S({},Yt,{newState:0,oldState:0}),cu=Ue(ln),hu=[9,13,27,32],ai=Bn&&"CompositionEvent"in window,u=null;Bn&&"documentMode"in document&&(u=document.documentMode);var m=Bn&&"TextEvent"in window&&!u,y=Bn&&(!ai||u&&8<u&&11>=u),T=" ",P=!1;function q(e,n){switch(e){case"keyup":return hu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jt=!1;function De(e,n){switch(e){case"compositionend":return et(n);case"keypress":return n.which!==32?null:(P=!0,T);case"textInput":return e=n.data,e===T&&P?null:e;default:return null}}function Bt(e,n){if(jt)return e==="compositionend"||!ai&&q(e,n)?(e=_o(),Oi=ls=ni=null,jt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return y&&n.locale!=="ko"?null:n.data;default:return null}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Le[e.type]:n==="textarea"}function Vi(e,n,a,o){Di?xi?xi.push(o):xi=[o]:Di=o,n=Zu(n,"onChange"),0<n.length&&(a=new $r("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Fe=null,oi=null;function bo(e){by(e,0)}function fu(e){var n=Wn(e);if(mo(n))return e}function Fm(e,n){if(e==="change")return n}var Qm=!1;if(Bn){var Sh;if(Bn){var Ah="oninput"in document;if(!Ah){var Ym=document.createElement("div");Ym.setAttribute("oninput","return;"),Ah=typeof Ym.oninput=="function"}Sh=Ah}else Sh=!1;Qm=Sh&&(!document.documentMode||9<document.documentMode)}function Km(){Fe&&(Fe.detachEvent("onpropertychange",Xm),oi=Fe=null)}function Xm(e){if(e.propertyName==="value"&&fu(oi)){var n=[];Vi(n,oi,e,wn(e)),Jl(bo,n)}}function aT(e,n,a){e==="focusin"?(Km(),Fe=n,oi=a,Fe.attachEvent("onpropertychange",Xm)):e==="focusout"&&Km()}function oT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fu(oi)}function lT(e,n){if(e==="click")return fu(n)}function uT(e,n){if(e==="input"||e==="change")return fu(n)}function cT(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var pn=typeof Object.is=="function"?Object.is:cT;function wo(e,n){if(pn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var c=a[o];if(!Lt.call(n,c)||!pn(e[c],n[c]))return!1}return!0}function $m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zm(e,n){var a=$m(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=$m(a)}}function Jm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Jm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Wm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ir(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ir(e.document)}return n}function bh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var hT=Bn&&"documentMode"in document&&11>=document.documentMode,sa=null,wh=null,Ro=null,Rh=!1;function tg(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rh||sa==null||sa!==ir(o)||(o=sa,"selectionStart"in o&&bh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ro&&wo(Ro,o)||(Ro=o,o=Zu(wh,"onSelect"),0<o.length&&(n=new $r("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=sa)))}function mr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var ra={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionrun:mr("Transition","TransitionRun"),transitionstart:mr("Transition","TransitionStart"),transitioncancel:mr("Transition","TransitionCancel"),transitionend:mr("Transition","TransitionEnd")},Ih={},eg={};Bn&&(eg=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function gr(e){if(Ih[e])return Ih[e];if(!ra[e])return e;var n=ra[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in eg)return Ih[e]=n[a];return e}var ng=gr("animationend"),ig=gr("animationiteration"),sg=gr("animationstart"),fT=gr("transitionrun"),dT=gr("transitionstart"),mT=gr("transitioncancel"),rg=gr("transitionend"),ag=new Map,Ch="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ch.push("scrollEnd");function qn(e,n){ag.set(e,n),jn(n,[e])}var og=new WeakMap;function Cn(e,n){if(typeof e=="object"&&e!==null){var a=og.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Yr(n)},og.set(e,n),n)}return{value:e,source:n,stack:Yr(n)}}var Nn=[],aa=0,Nh=0;function du(){for(var e=aa,n=Nh=aa=0;n<e;){var a=Nn[n];Nn[n++]=null;var o=Nn[n];Nn[n++]=null;var c=Nn[n];Nn[n++]=null;var f=Nn[n];if(Nn[n++]=null,o!==null&&c!==null){var v=o.pending;v===null?c.next=c:(c.next=v.next,v.next=c),o.pending=c}f!==0&&lg(a,c,f)}}function mu(e,n,a,o){Nn[aa++]=e,Nn[aa++]=n,Nn[aa++]=a,Nn[aa++]=o,Nh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Dh(e,n,a,o){return mu(e,n,a,o),gu(e)}function oa(e,n){return mu(e,null,null,n),gu(e)}function lg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&n!==null&&(c=31-Je(a),e=f.hiddenUpdates,o=e[c],o===null?e[c]=[n]:o.push(n),n.lane=a|536870912),f):null}function gu(e){if(50<Zo)throw Zo=0,Uf=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var la={};function gT(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,n,a,o){return new gT(e,n,a,o)}function xh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ki(e,n){var a=e.alternate;return a===null?(a=yn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ug(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function pu(e,n,a,o,c,f){var v=0;if(o=e,typeof e=="function")xh(e)&&(v=1);else if(typeof e=="string")v=yS(e,a,ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case b:return e=yn(31,a,n,c),e.elementType=b,e.lanes=f,e;case K:return pr(a.children,c,f,n);case nt:v=8,c|=24;break;case J:return e=yn(12,a,n,c|2),e.elementType=J,e.lanes=f,e;case _t:return e=yn(13,a,n,c),e.elementType=_t,e.lanes=f,e;case It:return e=yn(19,a,n,c),e.elementType=It,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gt:case ct:v=10;break t;case mt:v=9;break t;case zt:v=11;break t;case M:v=14;break t;case A:v=16,o=null;break t}v=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=yn(v,a,n,c),n.elementType=e,n.type=o,n.lanes=f,n}function pr(e,n,a,o){return e=yn(7,e,o,n),e.lanes=a,e}function Oh(e,n,a){return e=yn(6,e,null,n),e.lanes=a,e}function Mh(e,n,a){return n=yn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ua=[],ca=0,yu=null,_u=0,Dn=[],xn=0,yr=null,Pi=1,Ui="";function _r(e,n){ua[ca++]=_u,ua[ca++]=yu,yu=e,_u=n}function cg(e,n,a){Dn[xn++]=Pi,Dn[xn++]=Ui,Dn[xn++]=yr,yr=e;var o=Pi;e=Ui;var c=32-Je(o)-1;o&=~(1<<c),a+=1;var f=32-Je(n)+c;if(30<f){var v=c-c%5;f=(o&(1<<v)-1).toString(32),o>>=v,c-=v,Pi=1<<32-Je(n)+c|a<<c|o,Ui=f+e}else Pi=1<<f|a<<c|o,Ui=e}function Vh(e){e.return!==null&&(_r(e,1),cg(e,1,0))}function kh(e){for(;e===yu;)yu=ua[--ca],ua[ca]=null,_u=ua[--ca],ua[ca]=null;for(;e===yr;)yr=Dn[--xn],Dn[xn]=null,Ui=Dn[--xn],Dn[xn]=null,Pi=Dn[--xn],Dn[xn]=null}var un=null,ge=null,Qt=!1,vr=null,li=!1,Ph=Error(r(519));function Er(e){var n=Error(r(418,""));throw No(Cn(n,e)),Ph}function hg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Ne]=e,n[Ae]=o,a){case"dialog":Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":case"embed":Mt("load",n);break;case"video":case"audio":for(a=0;a<Wo.length;a++)Mt(Wo[a],n);break;case"source":Mt("error",n);break;case"img":case"image":case"link":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"input":Mt("invalid",n),sr(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Kr(n);break;case"select":Mt("invalid",n);break;case"textarea":Mt("invalid",n),rr(n,o.value,o.defaultValue,o.children),Kr(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Cy(n.textContent,a)?(o.popover!=null&&(Mt("beforetoggle",n),Mt("toggle",n)),o.onScroll!=null&&Mt("scroll",n),o.onScrollEnd!=null&&Mt("scrollend",n),o.onClick!=null&&(n.onclick=Ju),n=!0):n=!1,n||Er(e)}function fg(e){for(un=e.return;un;)switch(un.tag){case 5:case 13:li=!1;return;case 27:case 3:li=!0;return;default:un=un.return}}function Io(e){if(e!==un)return!1;if(!Qt)return fg(e),Qt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Wf(e.type,e.memoizedProps)),a=!a),a&&ge&&Er(e),fg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){ge=Gn(e.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}ge=null}}else n===27?(n=ge,bs(e.type)?(e=id,id=null,ge=e):ge=n):ge=un?Gn(e.stateNode.nextSibling):null;return!0}function Co(){ge=un=null,Qt=!1}function dg(){var e=vr;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),vr=null),e}function No(e){vr===null?vr=[e]:vr.push(e)}var Uh=$(null),Tr=null,Li=null;function us(e,n,a){W(Uh,n._currentValue),n._currentValue=a}function zi(e){e._currentValue=Uh.current,it(Uh)}function Lh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function zh(e,n,a,o){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var w=0;w<n.length;w++)if(E.context===n[w]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Lh(f.return,a,e),o||(v=null);break t}f=E.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(r(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Lh(v,a,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Do(e,n,a,o){e=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=c.type;pn(c.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(c===Se.current){if(v=c.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(rl):e=[rl])}c=c.return}e!==null&&zh(n,e,a,o),n.flags|=262144}function vu(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Sr(e){Tr=e,Li=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return mg(Tr,e)}function Eu(e,n){return Tr===null&&Sr(e),mg(e,n)}function mg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Li===null){if(e===null)throw Error(r(308));Li=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Li=Li.next=n;return a}var pT=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},yT=s.unstable_scheduleCallback,_T=s.unstable_NormalPriority,Oe={$$typeof:ct,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new pT,data:new Map,refCount:0}}function xo(e){e.refCount--,e.refCount===0&&yT(_T,function(){e.controller.abort()})}var Oo=null,Bh=0,ha=0,fa=null;function vT(e,n){if(Oo===null){var a=Oo=[];Bh=0,ha=Gf(),fa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Bh++,n.then(gg,gg),n}function gg(){if(--Bh===0&&Oo!==null){fa!==null&&(fa.status="fulfilled");var e=Oo;Oo=null,ha=0,fa=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ET(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),o}var pg=G.S;G.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&vT(e,n),pg!==null&&pg(e,n)};var Ar=$(null);function qh(){var e=Ar.current;return e!==null?e:re.pooledCache}function Tu(e,n){n===null?W(Ar,Ar.current):W(Ar,n.pool)}function yg(){var e=qh();return e===null?null:{parent:Oe._currentValue,pool:e}}var Mo=Error(r(460)),_g=Error(r(474)),Su=Error(r(542)),Hh={then:function(){}};function vg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Au(){}function Eg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Au,Au),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Sg(e),e;default:if(typeof n.status=="string")n.then(Au,Au);else{if(e=re,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Sg(e),e}throw Vo=n,Mo}}var Vo=null;function Tg(){if(Vo===null)throw Error(r(459));var e=Vo;return Vo=null,e}function Sg(e){if(e===Mo||e===Su)throw Error(r(483))}var cs=!1;function Gh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function hs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function fs(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Jt&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=gu(e),lg(e,null,a),n}return mu(e,o,n,a),gu(e)}function ko(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,lo(e,a)}}function Qh(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?c=f=n:f=f.next=n}else c=f=n;a={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Yh=!1;function Po(){if(Yh){var e=fa;if(e!==null)throw e}}function Uo(e,n,a,o){Yh=!1;var c=e.updateQueue;cs=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var w=E,L=w.next;w.next=null,v===null?f=L:v.next=L,v=w;var F=e.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=L:E.next=L,F.lastBaseUpdate=w))}if(f!==null){var Y=c.baseState;v=0,F=L=w=null,E=f;do{var z=E.lane&-536870913,j=z!==E.lane;if(j?(qt&z)===z:(o&z)===z){z!==0&&z===ha&&(Yh=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var St=e,pt=E;z=n;var ie=a;switch(pt.tag){case 1:if(St=pt.payload,typeof St=="function"){Y=St.call(ie,Y,z);break t}Y=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=pt.payload,z=typeof St=="function"?St.call(ie,Y,z):St,z==null)break t;Y=S({},Y,z);break t;case 2:cs=!0}}z=E.callback,z!==null&&(e.flags|=64,j&&(e.flags|=8192),j=c.callbacks,j===null?c.callbacks=[z]:j.push(z))}else j={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(L=F=j,w=Y):F=F.next=j,v|=z;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;j=E,E=j.next,j.next=null,c.lastBaseUpdate=j,c.shared.pending=null}}while(!0);F===null&&(w=Y),c.baseState=w,c.firstBaseUpdate=L,c.lastBaseUpdate=F,f===null&&(c.shared.lanes=0),Es|=v,e.lanes=v,e.memoizedState=Y}}function Ag(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function bg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ag(a[e],n)}var da=$(null),bu=$(0);function wg(e,n){e=Qi,W(bu,e),W(da,n),Qi=e|n.baseLanes}function Kh(){W(bu,Qi),W(da,da.current)}function Xh(){Qi=bu.current,it(da),it(bu)}var ds=0,Dt=null,ee=null,we=null,wu=!1,ma=!1,br=!1,Ru=0,Lo=0,ga=null,TT=0;function ve(){throw Error(r(321))}function $h(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!pn(e[a],n[a]))return!1;return!0}function Zh(e,n,a,o,c,f){return ds=f,Dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=e===null||e.memoizedState===null?lp:up,br=!1,f=a(o,c),br=!1,ma&&(f=Ig(n,a,o,c)),Rg(e),f}function Rg(e){G.H=Ou;var n=ee!==null&&ee.next!==null;if(ds=0,we=ee=Dt=null,wu=!1,Lo=0,ga=null,n)throw Error(r(300));e===null||ze||(e=e.dependencies,e!==null&&vu(e)&&(ze=!0))}function Ig(e,n,a,o){Dt=e;var c=0;do{if(ma&&(ga=null),Lo=0,ma=!1,25<=c)throw Error(r(301));if(c+=1,we=ee=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=CT,f=n(a,o)}while(ma);return f}function ST(){var e=G.H,n=e.useState()[0];return n=typeof n.then=="function"?zo(n):n,e=e.useState()[0],(ee!==null?ee.memoizedState:null)!==e&&(Dt.flags|=1024),n}function Jh(){var e=Ru!==0;return Ru=0,e}function Wh(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function tf(e){if(wu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}wu=!1}ds=0,we=ee=Dt=null,ma=!1,Lo=Ru=0,ga=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?Dt.memoizedState=we=e:we=we.next=e,we}function Re(){if(ee===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=ee.next;var n=we===null?Dt.memoizedState:we.next;if(n!==null)we=n,ee=e;else{if(e===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));ee=e,e={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},we===null?Dt.memoizedState=we=e:we=we.next=e}return we}function ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zo(e){var n=Lo;return Lo+=1,ga===null&&(ga=[]),e=Eg(ga,e,n),n=Dt,(we===null?n.memoizedState:we.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?lp:up),e}function Iu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zo(e);if(e.$$typeof===ct)return We(e)}throw Error(r(438,String(e)))}function nf(e){var n=null,a=Dt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Dt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ef(),Dt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=C;return n.index++,a}function ji(e,n){return typeof n=="function"?n(e):n}function Cu(e){var n=Re();return sf(n,ee,e)}function sf(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var c=e.baseQueue,f=o.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}n.baseQueue=c=f,o.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{n=c.next;var E=v=null,w=null,L=n,F=!1;do{var Y=L.lane&-536870913;if(Y!==L.lane?(qt&Y)===Y:(ds&Y)===Y){var z=L.revertLane;if(z===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Y===ha&&(F=!0);else if((ds&z)===z){L=L.next,z===ha&&(F=!0);continue}else Y={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},w===null?(E=w=Y,v=f):w=w.next=Y,Dt.lanes|=z,Es|=z;Y=L.action,br&&a(f,Y),f=L.hasEagerState?L.eagerState:a(f,Y)}else z={lane:Y,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},w===null?(E=w=z,v=f):w=w.next=z,Dt.lanes|=Y,Es|=Y;L=L.next}while(L!==null&&L!==n);if(w===null?v=f:w.next=E,!pn(f,e.memoizedState)&&(ze=!0,F&&(a=fa,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=w,o.lastRenderedState=f}return c===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function rf(e){var n=Re(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,c=a.pending,f=n.memoizedState;if(c!==null){a.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);pn(f,n.memoizedState)||(ze=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function Cg(e,n,a){var o=Dt,c=Re(),f=Qt;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!pn((ee||c).memoizedState,a);v&&(c.memoizedState=a,ze=!0),c=c.queue;var E=xg.bind(null,o,c,e);if(jo(2048,8,E,[e]),c.getSnapshot!==n||v||we!==null&&we.memoizedState.tag&1){if(o.flags|=2048,pa(9,Nu(),Dg.bind(null,o,c,a,n),null),re===null)throw Error(r(349));f||(ds&124)!==0||Ng(o,n,a)}return a}function Ng(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Dt.updateQueue,n===null?(n=ef(),Dt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Dg(e,n,a,o){n.value=a,n.getSnapshot=o,Og(n)&&Mg(e)}function xg(e,n,a){return a(function(){Og(n)&&Mg(e)})}function Og(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!pn(e,a)}catch{return!0}}function Mg(e){var n=oa(e,2);n!==null&&Sn(n,e,2)}function af(e){var n=cn();if(typeof e=="function"){var a=e;if(e=a(),br){mn(!0);try{a()}finally{mn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},n}function Vg(e,n,a,o){return e.baseState=a,sf(e,ee,typeof o=="function"?o:ji)}function AT(e,n,a,o,c){if(xu(e))throw Error(r(485));if(e=n.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};G.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,kg(n,f)):(f.next=a.next,n.pending=a.next=f)}}function kg(e,n){var a=n.action,o=n.payload,c=e.state;if(n.isTransition){var f=G.T,v={};G.T=v;try{var E=a(c,o),w=G.S;w!==null&&w(v,E),Pg(e,n,E)}catch(L){of(e,n,L)}finally{G.T=f}}else try{f=a(c,o),Pg(e,n,f)}catch(L){of(e,n,L)}}function Pg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ug(e,n,o)},function(o){return of(e,n,o)}):Ug(e,n,a)}function Ug(e,n,a){n.status="fulfilled",n.value=a,Lg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,kg(e,a)))}function of(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Lg(n),n=n.next;while(n!==o)}e.action=null}function Lg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function zg(e,n){return n}function jg(e,n){if(Qt){var a=re.formState;if(a!==null){t:{var o=Dt;if(Qt){if(ge){e:{for(var c=ge,f=li;c.nodeType!==8;){if(!f){c=null;break e}if(c=Gn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){ge=Gn(c.nextSibling),o=c.data==="F!";break t}}Er(o)}o=!1}o&&(n=a[0])}}return a=cn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:n},a.queue=o,a=rp.bind(null,Dt,o),o.dispatch=a,o=af(!1),f=ff.bind(null,Dt,!1,o.queue),o=cn(),c={state:n,dispatch:null,action:e,pending:null},o.queue=c,a=AT.bind(null,Dt,c,f,a),c.dispatch=a,o.memoizedState=e,[n,a,!1]}function Bg(e){var n=Re();return qg(n,ee,e)}function qg(e,n,a){if(n=sf(e,n,zg)[0],e=Cu(ji)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=zo(n)}catch(v){throw v===Mo?Su:v}else o=n;n=Re();var c=n.queue,f=c.dispatch;return a!==n.memoizedState&&(Dt.flags|=2048,pa(9,Nu(),bT.bind(null,c,a),null)),[o,f,e]}function bT(e,n){e.action=n}function Hg(e){var n=Re(),a=ee;if(a!==null)return qg(n,a,e);Re(),n=n.memoizedState,a=Re();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function pa(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Dt.updateQueue,n===null&&(n=ef(),Dt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Nu(){return{destroy:void 0,resource:void 0}}function Gg(){return Re().memoizedState}function Du(e,n,a,o){var c=cn();o=o===void 0?null:o,Dt.flags|=e,c.memoizedState=pa(1|n,Nu(),a,o)}function jo(e,n,a,o){var c=Re();o=o===void 0?null:o;var f=c.memoizedState.inst;ee!==null&&o!==null&&$h(o,ee.memoizedState.deps)?c.memoizedState=pa(n,f,a,o):(Dt.flags|=e,c.memoizedState=pa(1|n,f,a,o))}function Fg(e,n){Du(8390656,8,e,n)}function Qg(e,n){jo(2048,8,e,n)}function Yg(e,n){return jo(4,2,e,n)}function Kg(e,n){return jo(4,4,e,n)}function Xg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function $g(e,n,a){a=a!=null?a.concat([e]):null,jo(4,4,Xg.bind(null,n,e),a)}function lf(){}function Zg(e,n){var a=Re();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&$h(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Jg(e,n){var a=Re();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&$h(n,o[1]))return o[0];if(o=e(),br){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[o,n],o}function uf(e,n,a){return a===void 0||(ds&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=ey(),Dt.lanes|=e,Es|=e,a)}function Wg(e,n,a,o){return pn(a,n)?a:da.current!==null?(e=uf(e,a,o),pn(e,n)||(ze=!0),e):(ds&42)===0?(ze=!0,e.memoizedState=a):(e=ey(),Dt.lanes|=e,Es|=e,n)}function tp(e,n,a,o,c){var f=tt.p;tt.p=f!==0&&8>f?f:8;var v=G.T,E={};G.T=E,ff(e,!1,n,a);try{var w=c(),L=G.S;if(L!==null&&L(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=ET(w,o);Bo(e,n,F,Tn(e))}else Bo(e,n,o,Tn(e))}catch(Y){Bo(e,n,{then:function(){},status:"rejected",reason:Y},Tn())}finally{tt.p=f,G.T=v}}function wT(){}function cf(e,n,a,o){if(e.tag!==5)throw Error(r(476));var c=ep(e).queue;tp(e,c,n,lt,a===null?wT:function(){return np(e),a(o)})}function ep(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:lt},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function np(e){var n=ep(e).next.queue;Bo(e,n,{},Tn())}function hf(){return We(rl)}function ip(){return Re().memoizedState}function sp(){return Re().memoizedState}function RT(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Tn();e=hs(a);var o=fs(n,e,a);o!==null&&(Sn(o,n,a),ko(o,n,a)),n={cache:jh()},e.payload=n;return}n=n.return}}function IT(e,n,a){var o=Tn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xu(e)?ap(n,a):(a=Dh(e,n,a,o),a!==null&&(Sn(a,e,o),op(a,n,o)))}function rp(e,n,a){var o=Tn();Bo(e,n,a,o)}function Bo(e,n,a,o){var c={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xu(e))ap(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(c.hasEagerState=!0,c.eagerState=E,pn(E,v))return mu(e,n,c,0),re===null&&du(),!1}catch{}finally{}if(a=Dh(e,n,c,o),a!==null)return Sn(a,e,o),op(a,n,o),!0}return!1}function ff(e,n,a,o){if(o={lane:2,revertLane:Gf(),action:o,hasEagerState:!1,eagerState:null,next:null},xu(e)){if(n)throw Error(r(479))}else n=Dh(e,a,o,2),n!==null&&Sn(n,e,2)}function xu(e){var n=e.alternate;return e===Dt||n!==null&&n===Dt}function ap(e,n){ma=wu=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function op(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,lo(e,a)}}var Ou={readContext:We,use:Iu,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve},lp={readContext:We,use:Iu,useCallback:function(e,n){return cn().memoizedState=[e,n===void 0?null:n],e},useContext:We,useEffect:Fg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Du(4194308,4,Xg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Du(4194308,4,e,n)},useInsertionEffect:function(e,n){Du(4,2,e,n)},useMemo:function(e,n){var a=cn();n=n===void 0?null:n;var o=e();if(br){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=cn();if(a!==void 0){var c=a(n);if(br){mn(!0);try{a(n)}finally{mn(!1)}}}else c=n;return o.memoizedState=o.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},o.queue=e,e=e.dispatch=IT.bind(null,Dt,e),[o.memoizedState,e]},useRef:function(e){var n=cn();return e={current:e},n.memoizedState=e},useState:function(e){e=af(e);var n=e.queue,a=rp.bind(null,Dt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:lf,useDeferredValue:function(e,n){var a=cn();return uf(a,e,n)},useTransition:function(){var e=af(!1);return e=tp.bind(null,Dt,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Dt,c=cn();if(Qt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),re===null)throw Error(r(349));(qt&124)!==0||Ng(o,n,a)}c.memoizedState=a;var f={value:a,getSnapshot:n};return c.queue=f,Fg(xg.bind(null,o,f,e),[e]),o.flags|=2048,pa(9,Nu(),Dg.bind(null,o,f,a,n),null),a},useId:function(){var e=cn(),n=re.identifierPrefix;if(Qt){var a=Ui,o=Pi;a=(o&~(1<<32-Je(o)-1)).toString(32)+a,n=""+n+"R"+a,a=Ru++,0<a&&(n+="H"+a.toString(32)),n+=""}else a=TT++,n=""+n+"r"+a.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:hf,useFormState:jg,useActionState:jg,useOptimistic:function(e){var n=cn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=ff.bind(null,Dt,!0,a),a.dispatch=n,[e,n]},useMemoCache:nf,useCacheRefresh:function(){return cn().memoizedState=RT.bind(null,Dt)}},up={readContext:We,use:Iu,useCallback:Zg,useContext:We,useEffect:Qg,useImperativeHandle:$g,useInsertionEffect:Yg,useLayoutEffect:Kg,useMemo:Jg,useReducer:Cu,useRef:Gg,useState:function(){return Cu(ji)},useDebugValue:lf,useDeferredValue:function(e,n){var a=Re();return Wg(a,ee.memoizedState,e,n)},useTransition:function(){var e=Cu(ji)[0],n=Re().memoizedState;return[typeof e=="boolean"?e:zo(e),n]},useSyncExternalStore:Cg,useId:ip,useHostTransitionStatus:hf,useFormState:Bg,useActionState:Bg,useOptimistic:function(e,n){var a=Re();return Vg(a,ee,e,n)},useMemoCache:nf,useCacheRefresh:sp},CT={readContext:We,use:Iu,useCallback:Zg,useContext:We,useEffect:Qg,useImperativeHandle:$g,useInsertionEffect:Yg,useLayoutEffect:Kg,useMemo:Jg,useReducer:rf,useRef:Gg,useState:function(){return rf(ji)},useDebugValue:lf,useDeferredValue:function(e,n){var a=Re();return ee===null?uf(a,e,n):Wg(a,ee.memoizedState,e,n)},useTransition:function(){var e=rf(ji)[0],n=Re().memoizedState;return[typeof e=="boolean"?e:zo(e),n]},useSyncExternalStore:Cg,useId:ip,useHostTransitionStatus:hf,useFormState:Hg,useActionState:Hg,useOptimistic:function(e,n){var a=Re();return ee!==null?Vg(a,ee,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:nf,useCacheRefresh:sp},ya=null,qo=0;function Mu(e){var n=qo;return qo+=1,ya===null&&(ya=[]),Eg(ya,e,n)}function Ho(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Vu(e,n){throw n.$$typeof===I?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function cp(e){var n=e._init;return n(e._payload)}function hp(e){function n(k,x){if(e){var U=k.deletions;U===null?(k.deletions=[x],k.flags|=16):U.push(x)}}function a(k,x){if(!e)return null;for(;x!==null;)n(k,x),x=x.sibling;return null}function o(k){for(var x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function c(k,x){return k=ki(k,x),k.index=0,k.sibling=null,k}function f(k,x,U){return k.index=U,e?(U=k.alternate,U!==null?(U=U.index,U<x?(k.flags|=67108866,x):U):(k.flags|=67108866,x)):(k.flags|=1048576,x)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,x,U,Q){return x===null||x.tag!==6?(x=Oh(U,k.mode,Q),x.return=k,x):(x=c(x,U),x.return=k,x)}function w(k,x,U,Q){var rt=U.type;return rt===K?F(k,x,U.props.children,Q,U.key):x!==null&&(x.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===A&&cp(rt)===x.type)?(x=c(x,U.props),Ho(x,U),x.return=k,x):(x=pu(U.type,U.key,U.props,null,k.mode,Q),Ho(x,U),x.return=k,x)}function L(k,x,U,Q){return x===null||x.tag!==4||x.stateNode.containerInfo!==U.containerInfo||x.stateNode.implementation!==U.implementation?(x=Mh(U,k.mode,Q),x.return=k,x):(x=c(x,U.children||[]),x.return=k,x)}function F(k,x,U,Q,rt){return x===null||x.tag!==7?(x=pr(U,k.mode,Q,rt),x.return=k,x):(x=c(x,U),x.return=k,x)}function Y(k,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Oh(""+x,k.mode,U),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case D:return U=pu(x.type,x.key,x.props,null,k.mode,U),Ho(U,x),U.return=k,U;case H:return x=Mh(x,k.mode,U),x.return=k,x;case A:var Q=x._init;return x=Q(x._payload),Y(k,x,U)}if(ae(x)||V(x))return x=pr(x,k.mode,U,null),x.return=k,x;if(typeof x.then=="function")return Y(k,Mu(x),U);if(x.$$typeof===ct)return Y(k,Eu(k,x),U);Vu(k,x)}return null}function z(k,x,U,Q){var rt=x!==null?x.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return rt!==null?null:E(k,x,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===rt?w(k,x,U,Q):null;case H:return U.key===rt?L(k,x,U,Q):null;case A:return rt=U._init,U=rt(U._payload),z(k,x,U,Q)}if(ae(U)||V(U))return rt!==null?null:F(k,x,U,Q,null);if(typeof U.then=="function")return z(k,x,Mu(U),Q);if(U.$$typeof===ct)return z(k,x,Eu(k,U),Q);Vu(k,U)}return null}function j(k,x,U,Q,rt){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(U)||null,E(x,k,""+Q,rt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return k=k.get(Q.key===null?U:Q.key)||null,w(x,k,Q,rt);case H:return k=k.get(Q.key===null?U:Q.key)||null,L(x,k,Q,rt);case A:var xt=Q._init;return Q=xt(Q._payload),j(k,x,U,Q,rt)}if(ae(Q)||V(Q))return k=k.get(U)||null,F(x,k,Q,rt,null);if(typeof Q.then=="function")return j(k,x,U,Mu(Q),rt);if(Q.$$typeof===ct)return j(k,x,U,Eu(x,Q),rt);Vu(x,Q)}return null}function St(k,x,U,Q){for(var rt=null,xt=null,ut=x,yt=x=0,Be=null;ut!==null&&yt<U.length;yt++){ut.index>yt?(Be=ut,ut=null):Be=ut.sibling;var Ft=z(k,ut,U[yt],Q);if(Ft===null){ut===null&&(ut=Be);break}e&&ut&&Ft.alternate===null&&n(k,ut),x=f(Ft,x,yt),xt===null?rt=Ft:xt.sibling=Ft,xt=Ft,ut=Be}if(yt===U.length)return a(k,ut),Qt&&_r(k,yt),rt;if(ut===null){for(;yt<U.length;yt++)ut=Y(k,U[yt],Q),ut!==null&&(x=f(ut,x,yt),xt===null?rt=ut:xt.sibling=ut,xt=ut);return Qt&&_r(k,yt),rt}for(ut=o(ut);yt<U.length;yt++)Be=j(ut,k,yt,U[yt],Q),Be!==null&&(e&&Be.alternate!==null&&ut.delete(Be.key===null?yt:Be.key),x=f(Be,x,yt),xt===null?rt=Be:xt.sibling=Be,xt=Be);return e&&ut.forEach(function(Ns){return n(k,Ns)}),Qt&&_r(k,yt),rt}function pt(k,x,U,Q){if(U==null)throw Error(r(151));for(var rt=null,xt=null,ut=x,yt=x=0,Be=null,Ft=U.next();ut!==null&&!Ft.done;yt++,Ft=U.next()){ut.index>yt?(Be=ut,ut=null):Be=ut.sibling;var Ns=z(k,ut,Ft.value,Q);if(Ns===null){ut===null&&(ut=Be);break}e&&ut&&Ns.alternate===null&&n(k,ut),x=f(Ns,x,yt),xt===null?rt=Ns:xt.sibling=Ns,xt=Ns,ut=Be}if(Ft.done)return a(k,ut),Qt&&_r(k,yt),rt;if(ut===null){for(;!Ft.done;yt++,Ft=U.next())Ft=Y(k,Ft.value,Q),Ft!==null&&(x=f(Ft,x,yt),xt===null?rt=Ft:xt.sibling=Ft,xt=Ft);return Qt&&_r(k,yt),rt}for(ut=o(ut);!Ft.done;yt++,Ft=U.next())Ft=j(ut,k,yt,Ft.value,Q),Ft!==null&&(e&&Ft.alternate!==null&&ut.delete(Ft.key===null?yt:Ft.key),x=f(Ft,x,yt),xt===null?rt=Ft:xt.sibling=Ft,xt=Ft);return e&&ut.forEach(function(NS){return n(k,NS)}),Qt&&_r(k,yt),rt}function ie(k,x,U,Q){if(typeof U=="object"&&U!==null&&U.type===K&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:t:{for(var rt=U.key;x!==null;){if(x.key===rt){if(rt=U.type,rt===K){if(x.tag===7){a(k,x.sibling),Q=c(x,U.props.children),Q.return=k,k=Q;break t}}else if(x.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===A&&cp(rt)===x.type){a(k,x.sibling),Q=c(x,U.props),Ho(Q,U),Q.return=k,k=Q;break t}a(k,x);break}else n(k,x);x=x.sibling}U.type===K?(Q=pr(U.props.children,k.mode,Q,U.key),Q.return=k,k=Q):(Q=pu(U.type,U.key,U.props,null,k.mode,Q),Ho(Q,U),Q.return=k,k=Q)}return v(k);case H:t:{for(rt=U.key;x!==null;){if(x.key===rt)if(x.tag===4&&x.stateNode.containerInfo===U.containerInfo&&x.stateNode.implementation===U.implementation){a(k,x.sibling),Q=c(x,U.children||[]),Q.return=k,k=Q;break t}else{a(k,x);break}else n(k,x);x=x.sibling}Q=Mh(U,k.mode,Q),Q.return=k,k=Q}return v(k);case A:return rt=U._init,U=rt(U._payload),ie(k,x,U,Q)}if(ae(U))return St(k,x,U,Q);if(V(U)){if(rt=V(U),typeof rt!="function")throw Error(r(150));return U=rt.call(U),pt(k,x,U,Q)}if(typeof U.then=="function")return ie(k,x,Mu(U),Q);if(U.$$typeof===ct)return ie(k,x,Eu(k,U),Q);Vu(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,x!==null&&x.tag===6?(a(k,x.sibling),Q=c(x,U),Q.return=k,k=Q):(a(k,x),Q=Oh(U,k.mode,Q),Q.return=k,k=Q),v(k)):a(k,x)}return function(k,x,U,Q){try{qo=0;var rt=ie(k,x,U,Q);return ya=null,rt}catch(ut){if(ut===Mo||ut===Su)throw ut;var xt=yn(29,ut,null,k.mode);return xt.lanes=Q,xt.return=k,xt}finally{}}}var _a=hp(!0),fp=hp(!1),On=$(null),ui=null;function ms(e){var n=e.alternate;W(Me,Me.current&1),W(On,e),ui===null&&(n===null||da.current!==null||n.memoizedState!==null)&&(ui=e)}function dp(e){if(e.tag===22){if(W(Me,Me.current),W(On,e),ui===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ui=e)}}else gs()}function gs(){W(Me,Me.current),W(On,On.current)}function Bi(e){it(On),ui===e&&(ui=null),it(Me)}var Me=$(0);function ku(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||nd(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function df(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:S({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var mf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Tn(),c=hs(o);c.payload=n,a!=null&&(c.callback=a),n=fs(e,c,o),n!==null&&(Sn(n,e,o),ko(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Tn(),c=hs(o);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=fs(e,c,o),n!==null&&(Sn(n,e,o),ko(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Tn(),o=hs(a);o.tag=2,n!=null&&(o.callback=n),n=fs(e,o,a),n!==null&&(Sn(n,e,a),ko(n,e,a))}};function mp(e,n,a,o,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!wo(a,o)||!wo(c,f):!0}function gp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&mf.enqueueReplaceState(n,n.state,null)}function wr(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=S({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Pu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function pp(e){Pu(e)}function yp(e){console.error(e)}function _p(e){Pu(e)}function Uu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function vp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function gf(e,n,a){return a=hs(a),a.tag=3,a.payload={element:null},a.callback=function(){Uu(e,n)},a}function Ep(e){return e=hs(e),e.tag=3,e}function Tp(e,n,a,o){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=o.value;e.payload=function(){return c(f)},e.callback=function(){vp(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){vp(n,a,o),typeof c!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function NT(e,n,a,o,c){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Do(n,a,c,!0),a=On.current,a!==null){switch(a.tag){case 13:return ui===null?zf():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=c,o===Hh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Bf(e,o,c)),!1;case 22:return a.flags|=65536,o===Hh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Bf(e,o,c)),!1}throw Error(r(435,a.tag))}return Bf(e,o,c),zf(),!1}if(Qt)return n=On.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==Ph&&(e=Error(r(422),{cause:o}),No(Cn(e,a)))):(o!==Ph&&(n=Error(r(423),{cause:o}),No(Cn(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,o=Cn(o,a),c=gf(e.stateNode,o,c),Qh(e,c),pe!==4&&(pe=2)),!1;var f=Error(r(520),{cause:o});if(f=Cn(f,a),$o===null?$o=[f]:$o.push(f),pe!==4&&(pe=2),n===null)return!0;o=Cn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=gf(a.stateNode,o,e),Qh(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ts===null||!Ts.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Ep(c),Tp(c,e,a,o),Qh(a,c),!1}a=a.return}while(a!==null);return!1}var Sp=Error(r(461)),ze=!1;function Qe(e,n,a,o){n.child=e===null?fp(n,null,a,o):_a(n,e.child,a,o)}function Ap(e,n,a,o,c){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Sr(n),o=Zh(e,n,a,v,f,c),E=Jh(),e!==null&&!ze?(Wh(e,n,c),qi(e,n,c)):(Qt&&E&&Vh(n),n.flags|=1,Qe(e,n,o,c),n.child)}function bp(e,n,a,o,c){if(e===null){var f=a.type;return typeof f=="function"&&!xh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,wp(e,n,f,o,c)):(e=pu(a.type,null,o,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Af(e,c)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:wo,a(v,o)&&e.ref===n.ref)return qi(e,n,c)}return n.flags|=1,e=ki(f,o),e.ref=n.ref,e.return=n,n.child=e}function wp(e,n,a,o,c){if(e!==null){var f=e.memoizedProps;if(wo(f,o)&&e.ref===n.ref)if(ze=!1,n.pendingProps=o=f,Af(e,c))(e.flags&131072)!==0&&(ze=!0);else return n.lanes=e.lanes,qi(e,n,c)}return pf(e,n,a,o,c)}function Rp(e,n,a){var o=n.pendingProps,c=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Ip(e,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Tu(n,f!==null?f.cachePool:null),f!==null?wg(n,f):Kh(),dp(n);else return n.lanes=n.childLanes=536870912,Ip(e,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(Tu(n,f.cachePool),wg(n,f),gs(),n.memoizedState=null):(e!==null&&Tu(n,null),Kh(),gs());return Qe(e,n,c,a),n.child}function Ip(e,n,a,o){var c=qh();return c=c===null?null:{parent:Oe._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},e!==null&&Tu(n,null),Kh(),dp(n),e!==null&&Do(e,n,o,!0),null}function Lu(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function pf(e,n,a,o,c){return Sr(n),a=Zh(e,n,a,o,void 0,c),o=Jh(),e!==null&&!ze?(Wh(e,n,c),qi(e,n,c)):(Qt&&o&&Vh(n),n.flags|=1,Qe(e,n,a,c),n.child)}function Cp(e,n,a,o,c,f){return Sr(n),n.updateQueue=null,a=Ig(n,o,a,c),Rg(e),o=Jh(),e!==null&&!ze?(Wh(e,n,f),qi(e,n,f)):(Qt&&o&&Vh(n),n.flags|=1,Qe(e,n,a,f),n.child)}function Np(e,n,a,o,c){if(Sr(n),n.stateNode===null){var f=la,v=a.contextType;typeof v=="object"&&v!==null&&(f=We(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=mf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Gh(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?We(v):la,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(df(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&mf.enqueueReplaceState(f,f.state,null),Uo(n,o,f,c),Po(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,w=wr(a,E);f.props=w;var L=f.context,F=a.contextType;v=la,typeof F=="object"&&F!==null&&(v=We(F));var Y=a.getDerivedStateFromProps;F=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&gp(n,f,o,v),cs=!1;var z=n.memoizedState;f.state=z,Uo(n,o,f,c),Po(),L=n.memoizedState,E||z!==L||cs?(typeof Y=="function"&&(df(n,a,Y,o),L=n.memoizedState),(w=cs||mp(n,a,w,o,z,L,v))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=w):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Fh(e,n),v=n.memoizedProps,F=wr(a,v),f.props=F,Y=n.pendingProps,z=f.context,L=a.contextType,w=la,typeof L=="object"&&L!==null&&(w=We(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Y||z!==w)&&gp(n,f,o,w),cs=!1,z=n.memoizedState,f.state=z,Uo(n,o,f,c),Po();var j=n.memoizedState;v!==Y||z!==j||cs||e!==null&&e.dependencies!==null&&vu(e.dependencies)?(typeof E=="function"&&(df(n,a,E,o),j=n.memoizedState),(F=cs||mp(n,a,F,o,z,j,w)||e!==null&&e.dependencies!==null&&vu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,j,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,j,w)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=j),f.props=o,f.state=j,f.context=w,o=F):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Lu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=_a(n,e.child,null,c),n.child=_a(n,null,a,c)):Qe(e,n,a,c),n.memoizedState=f.state,e=n.child):e=qi(e,n,c),e}function Dp(e,n,a,o){return Co(),n.flags|=256,Qe(e,n,a,o),n.child}var yf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(e){return{baseLanes:e,cachePool:yg()}}function vf(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Mn),e}function xp(e,n,a){var o=n.pendingProps,c=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Me.current&2)!==0),v&&(c=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Qt){if(c?ms(n):gs(),Qt){var E=ge,w;if(w=E){t:{for(w=E,E=li;w.nodeType!==8;){if(!E){E=null;break t}if(w=Gn(w.nextSibling),w===null){E=null;break t}}E=w}E!==null?(n.memoizedState={dehydrated:E,treeContext:yr!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},w=yn(18,null,null,0),w.stateNode=E,w.return=n,n.child=w,un=n,ge=null,w=!0):w=!1}w||Er(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return nd(E)?n.lanes=32:n.lanes=536870912,null;Bi(n)}return E=o.children,o=o.fallback,c?(gs(),c=n.mode,E=zu({mode:"hidden",children:E},c),o=pr(o,c,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,c=n.child,c.memoizedState=_f(a),c.childLanes=vf(e,v,a),n.memoizedState=yf,o):(ms(n),Ef(n,E))}if(w=e.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(f)n.flags&256?(ms(n),n.flags&=-257,n=Tf(e,n,a)):n.memoizedState!==null?(gs(),n.child=e.child,n.flags|=128,n=null):(gs(),c=o.fallback,E=n.mode,o=zu({mode:"visible",children:o.children},E),c=pr(c,E,a,null),c.flags|=2,o.return=n,c.return=n,o.sibling=c,n.child=o,_a(n,e.child,null,a),o=n.child,o.memoizedState=_f(a),o.childLanes=vf(e,v,a),n.memoizedState=yf,n=c);else if(ms(n),nd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(r(419)),o.stack="",o.digest=v,No({value:o,source:null,stack:null}),n=Tf(e,n,a)}else if(ze||Do(e,n,a,!1),v=(a&e.childLanes)!==0,ze||v){if(v=re,v!==null&&(o=a&-a,o=(o&42)!==0?1:ns(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==w.retryLane))throw w.retryLane=o,oa(e,o),Sn(v,e,o),Sp;E.data==="$?"||zf(),n=Tf(e,n,a)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=w.treeContext,ge=Gn(E.nextSibling),un=n,Qt=!0,vr=null,li=!1,e!==null&&(Dn[xn++]=Pi,Dn[xn++]=Ui,Dn[xn++]=yr,Pi=e.id,Ui=e.overflow,yr=n),n=Ef(n,o.children),n.flags|=4096);return n}return c?(gs(),c=o.fallback,E=n.mode,w=e.child,L=w.sibling,o=ki(w,{mode:"hidden",children:o.children}),o.subtreeFlags=w.subtreeFlags&65011712,L!==null?c=ki(L,c):(c=pr(c,E,a,null),c.flags|=2),c.return=n,o.return=n,o.sibling=c,n.child=o,o=c,c=n.child,E=e.child.memoizedState,E===null?E=_f(a):(w=E.cachePool,w!==null?(L=Oe._currentValue,w=w.parent!==L?{parent:L,pool:L}:w):w=yg(),E={baseLanes:E.baseLanes|a,cachePool:w}),c.memoizedState=E,c.childLanes=vf(e,v,a),n.memoizedState=yf,o):(ms(n),a=e.child,e=a.sibling,a=ki(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Ef(e,n){return n=zu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function zu(e,n){return e=yn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Tf(e,n,a){return _a(n,e.child,null,a),e=Ef(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Op(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Lh(e.return,n,a)}function Sf(e,n,a,o,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=c)}function Mp(e,n,a){var o=n.pendingProps,c=o.revealOrder,f=o.tail;if(Qe(e,n,o.children,a),o=Me.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Op(e,a,n);else if(e.tag===19)Op(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(W(Me,o),c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&ku(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),Sf(n,!1,c,a,f);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&ku(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Sf(n,!0,a,null,f);break;case"together":Sf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function qi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Es|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Do(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=ki(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=ki(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Af(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&vu(e)))}function DT(e,n,a){switch(n.tag){case 3:Xt(n,n.stateNode.containerInfo),us(n,Oe,e.memoizedState.cache),Co();break;case 27:case 5:wt(n);break;case 4:Xt(n,n.stateNode.containerInfo);break;case 10:us(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(ms(n),n.flags|=128,null):(a&n.child.childLanes)!==0?xp(e,n,a):(ms(n),e=qi(e,n,a),e!==null?e.sibling:null);ms(n);break;case 19:var c=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Do(e,n,a,!1),o=(a&n.childLanes)!==0),c){if(o)return Mp(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(Me,Me.current),o)break;return null;case 22:case 23:return n.lanes=0,Rp(e,n,a);case 24:us(n,Oe,e.memoizedState.cache)}return qi(e,n,a)}function Vp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)ze=!0;else{if(!Af(e,a)&&(n.flags&128)===0)return ze=!1,DT(e,n,a);ze=(e.flags&131072)!==0}else ze=!1,Qt&&(n.flags&1048576)!==0&&cg(n,_u,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,c=o._init;if(o=c(o._payload),n.type=o,typeof o=="function")xh(o)?(e=wr(o,e),n.tag=1,n=Np(null,n,o,e,a)):(n.tag=0,n=pf(null,n,o,e,a));else{if(o!=null){if(c=o.$$typeof,c===zt){n.tag=11,n=Ap(null,n,o,e,a);break t}else if(c===M){n.tag=14,n=bp(null,n,o,e,a);break t}}throw n=de(o)||o,Error(r(306,n,""))}}return n;case 0:return pf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,c=wr(o,n.pendingProps),Np(e,n,o,c,a);case 3:t:{if(Xt(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var f=n.memoizedState;c=f.element,Fh(e,n),Uo(n,o,null,a);var v=n.memoizedState;if(o=v.cache,us(n,Oe,o),o!==f.cache&&zh(n,[Oe],a,!0),Po(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Dp(e,n,o,a);break t}else if(o!==c){c=Cn(Error(r(424)),n),No(c),n=Dp(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ge=Gn(e.firstChild),un=n,Qt=!0,vr=null,li=!0,a=fp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Co(),o===c){n=qi(e,n,a);break t}Qe(e,n,o,a)}n=n.child}return n;case 26:return Lu(e,n),e===null?(a=Ly(n.type,null,n.pendingProps,null))?n.memoizedState=a:Qt||(a=n.type,e=n.pendingProps,o=Wu(Tt.current).createElement(a),o[Ne]=n,o[Ae]=e,Ke(o,a,e),_e(o),n.stateNode=o):n.memoizedState=Ly(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return wt(n),e===null&&Qt&&(o=n.stateNode=ky(n.type,n.pendingProps,Tt.current),un=n,li=!0,c=ge,bs(n.type)?(id=c,ge=Gn(o.firstChild)):ge=c),Qe(e,n,n.pendingProps.children,a),Lu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Qt&&((c=o=ge)&&(o=sS(o,n.type,n.pendingProps,li),o!==null?(n.stateNode=o,un=n,ge=Gn(o.firstChild),li=!1,c=!0):c=!1),c||Er(n)),wt(n),c=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,Wf(c,f)?o=null:v!==null&&Wf(c,v)&&(n.flags|=32),n.memoizedState!==null&&(c=Zh(e,n,ST,null,null,a),rl._currentValue=c),Lu(e,n),Qe(e,n,o,a),n.child;case 6:return e===null&&Qt&&((e=a=ge)&&(a=rS(a,n.pendingProps,li),a!==null?(n.stateNode=a,un=n,ge=null,e=!0):e=!1),e||Er(n)),null;case 13:return xp(e,n,a);case 4:return Xt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=_a(n,null,o,a):Qe(e,n,o,a),n.child;case 11:return Ap(e,n,n.type,n.pendingProps,a);case 7:return Qe(e,n,n.pendingProps,a),n.child;case 8:return Qe(e,n,n.pendingProps.children,a),n.child;case 12:return Qe(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,us(n,n.type,o.value),Qe(e,n,o.children,a),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,Sr(n),c=We(c),o=o(c),n.flags|=1,Qe(e,n,o,a),n.child;case 14:return bp(e,n,n.type,n.pendingProps,a);case 15:return wp(e,n,n.type,n.pendingProps,a);case 19:return Mp(e,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},e===null?(a=zu(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=ki(e.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Rp(e,n,a);case 24:return Sr(n),o=We(Oe),e===null?(c=qh(),c===null&&(c=re,f=jh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),n.memoizedState={parent:o,cache:c},Gh(n),us(n,Oe,c)):((e.lanes&a)!==0&&(Fh(e,n),Uo(n,null,null,a),Po()),c=e.memoizedState,f=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),us(n,Oe,o)):(o=f.cache,us(n,Oe,o),o!==c.cache&&zh(n,[Oe],a,!0))),Qe(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Hi(e){e.flags|=4}function kp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Hy(n)){if(n=On.current,n!==null&&((qt&4194048)===qt?ui!==null:(qt&62914560)!==qt&&(qt&536870912)===0||n!==ui))throw Vo=Hh,_g;e.flags|=8192}}function ju(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ao():536870912,e.lanes|=n,Sa|=n)}function Go(e,n){if(!Qt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function he(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function xT(e,n,a){var o=n.pendingProps;switch(kh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(n),null;case 1:return he(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),zi(Oe),at(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Io(n)?Hi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dg())),he(n),null;case 26:return a=n.memoizedState,e===null?(Hi(n),a!==null?(he(n),kp(n,a)):(he(n),n.flags&=-16777217)):a?a!==e.memoizedState?(Hi(n),he(n),kp(n,a)):(he(n),n.flags&=-16777217):(e.memoizedProps!==o&&Hi(n),he(n),n.flags&=-16777217),null;case 27:vt(n),a=Tt.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Hi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return he(n),null}e=ht.current,Io(n)?hg(n):(e=ky(c,o,a),n.stateNode=e,Hi(n))}return he(n),null;case 5:if(vt(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Hi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return he(n),null}if(e=ht.current,Io(n))hg(n);else{switch(c=Wu(Tt.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?c.createElement("select",{is:o.is}):c.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?c.createElement(a,{is:o.is}):c.createElement(a)}}e[Ne]=n,e[Ae]=o;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;t:switch(Ke(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Hi(n)}}return he(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Hi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=Tt.current,Io(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,c=un,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}e[Ne]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Cy(e.nodeValue,a)),e||Er(n)}else e=Wu(e).createTextNode(o),e[Ne]=n,n.stateNode=e}return he(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Io(n),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(r(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[Ne]=n}else Co(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;he(n),c=!1}else c=dg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Bi(n),n):(Bi(n),null)}if(Bi(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),ju(n,n.updateQueue),he(n),null;case 4:return at(),e===null&&Kf(n.stateNode.containerInfo),he(n),null;case 10:return zi(n.type),he(n),null;case 19:if(it(Me),c=n.memoizedState,c===null)return he(n),null;if(o=(n.flags&128)!==0,f=c.rendering,f===null)if(o)Go(c,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=ku(e),f!==null){for(n.flags|=128,Go(c,!1),e=f.updateQueue,n.updateQueue=e,ju(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)ug(a,e),a=a.sibling;return W(Me,Me.current&1|2),n.child}e=e.sibling}c.tail!==null&&He()>Hu&&(n.flags|=128,o=!0,Go(c,!1),n.lanes=4194304)}else{if(!o)if(e=ku(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,ju(n,e),Go(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Qt)return he(n),null}else 2*He()-c.renderingStartTime>Hu&&a!==536870912&&(n.flags|=128,o=!0,Go(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(e=c.last,e!==null?e.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=He(),n.sibling=null,e=Me.current,W(Me,o?e&1|2:e&1),n):(he(n),null);case 22:case 23:return Bi(n),Xh(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(he(n),n.subtreeFlags&6&&(n.flags|=8192)):he(n),a=n.updateQueue,a!==null&&ju(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&it(Ar),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),zi(Oe),he(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function OT(e,n){switch(kh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return zi(Oe),at(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return vt(n),null;case 13:if(Bi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Co()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return it(Me),null;case 4:return at(),null;case 10:return zi(n.type),null;case 22:case 23:return Bi(n),Xh(),e!==null&&it(Ar),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return zi(Oe),null;case 25:return null;default:return null}}function Pp(e,n){switch(kh(n),n.tag){case 3:zi(Oe),at();break;case 26:case 27:case 5:vt(n);break;case 4:at();break;case 13:Bi(n);break;case 19:it(Me);break;case 10:zi(n.type);break;case 22:case 23:Bi(n),Xh(),e!==null&&it(Ar);break;case 24:zi(Oe)}}function Fo(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var c=o.next;a=c;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==c)}}catch(E){se(n,n.return,E)}}function ps(e,n,a){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,c=n;var w=a,L=E;try{L()}catch(F){se(c,w,F)}}}o=o.next}while(o!==f)}}catch(F){se(n,n.return,F)}}function Up(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{bg(n,a)}catch(o){se(e,e.return,o)}}}function Lp(e,n,a){a.props=wr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){se(e,n,o)}}function Qo(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(c){se(e,n,c)}}function ci(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(c){se(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){se(e,n,c)}else a.current=null}function zp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(c){se(e,e.return,c)}}function bf(e,n,a){try{var o=e.stateNode;WT(o,e.type,a,n),o[Ae]=n}catch(c){se(e,e.return,c)}}function jp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bs(e.type)||e.tag===4}function wf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||jp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ju));else if(o!==4&&(o===27&&bs(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Rf(e,n,a),e=e.sibling;e!==null;)Rf(e,n,a),e=e.sibling}function Bu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&bs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Bu(e,n,a),e=e.sibling;e!==null;)Bu(e,n,a),e=e.sibling}function Bp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Ke(n,o,a),n[Ne]=e,n[Ae]=a}catch(f){se(e,e.return,f)}}var Gi=!1,Ee=!1,If=!1,qp=typeof WeakSet=="function"?WeakSet:Set,je=null;function MT(e,n){if(e=e.containerInfo,Zf=rc,e=Wm(e),bh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var c=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,w=-1,L=0,F=0,Y=e,z=null;e:for(;;){for(var j;Y!==a||c!==0&&Y.nodeType!==3||(E=v+c),Y!==f||o!==0&&Y.nodeType!==3||(w=v+o),Y.nodeType===3&&(v+=Y.nodeValue.length),(j=Y.firstChild)!==null;)z=Y,Y=j;for(;;){if(Y===e)break e;if(z===a&&++L===c&&(E=v),z===f&&++F===o&&(w=v),(j=Y.nextSibling)!==null)break;Y=z,z=Y.parentNode}Y=j}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jf={focusedElem:e,selectionRange:a},rc=!1,je=n;je!==null;)if(n=je,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,je=e;else for(;je!==null;){switch(n=je,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,c=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var St=wr(a.type,c,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(St,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){se(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)ed(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,je=e;break}je=n.return}}function Hp(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ys(e,a),o&4&&Fo(5,a);break;case 1:if(ys(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){se(a,a.return,v)}else{var c=wr(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){se(a,a.return,v)}}o&64&&Up(a),o&512&&Qo(a,a.return);break;case 3:if(ys(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{bg(e,n)}catch(v){se(a,a.return,v)}}break;case 27:n===null&&o&4&&Bp(a);case 26:case 5:ys(e,a),n===null&&o&4&&zp(a),o&512&&Qo(a,a.return);break;case 12:ys(e,a);break;case 13:ys(e,a),o&4&&Qp(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=qT.bind(null,a),aS(e,a))));break;case 22:if(o=a.memoizedState!==null||Gi,!o){n=n!==null&&n.memoizedState!==null||Ee,c=Gi;var f=Ee;Gi=o,(Ee=n)&&!f?_s(e,a,(a.subtreeFlags&8772)!==0):ys(e,a),Gi=c,Ee=f}break;case 30:break;default:ys(e,a)}}function Gp(e){var n=e.alternate;n!==null&&(e.alternate=null,Gp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&rs(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ce=null,hn=!1;function Fi(e,n,a){for(a=a.child;a!==null;)Fp(e,n,a),a=a.sibling}function Fp(e,n,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(me,a)}catch{}switch(a.tag){case 26:Ee||ci(a,n),Fi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ee||ci(a,n);var o=ce,c=hn;bs(a.type)&&(ce=a.stateNode,hn=!1),Fi(e,n,a),el(a.stateNode),ce=o,hn=c;break;case 5:Ee||ci(a,n);case 6:if(o=ce,c=hn,ce=null,Fi(e,n,a),ce=o,hn=c,ce!==null)if(hn)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(a.stateNode)}catch(f){se(a,n,f)}else try{ce.removeChild(a.stateNode)}catch(f){se(a,n,f)}break;case 18:ce!==null&&(hn?(e=ce,My(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ul(e)):My(ce,a.stateNode));break;case 4:o=ce,c=hn,ce=a.stateNode.containerInfo,hn=!0,Fi(e,n,a),ce=o,hn=c;break;case 0:case 11:case 14:case 15:Ee||ps(2,a,n),Ee||ps(4,a,n),Fi(e,n,a);break;case 1:Ee||(ci(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Lp(a,n,o)),Fi(e,n,a);break;case 21:Fi(e,n,a);break;case 22:Ee=(o=Ee)||a.memoizedState!==null,Fi(e,n,a),Ee=o;break;default:Fi(e,n,a)}}function Qp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ul(e)}catch(a){se(n,n.return,a)}}function VT(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new qp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new qp),n;default:throw Error(r(435,e.tag))}}function Cf(e,n){var a=VT(e);n.forEach(function(o){var c=HT.bind(null,e,o);a.has(o)||(a.add(o),o.then(c,c))})}function _n(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var c=a[o],f=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(bs(E.type)){ce=E.stateNode,hn=!1;break t}break;case 5:ce=E.stateNode,hn=!1;break t;case 3:case 4:ce=E.stateNode.containerInfo,hn=!0;break t}E=E.return}if(ce===null)throw Error(r(160));Fp(f,v,c),ce=null,hn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Yp(n,e),n=n.sibling}var Hn=null;function Yp(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_n(n,e),vn(e),o&4&&(ps(3,e,e.return),Fo(3,e),ps(5,e,e.return));break;case 1:_n(n,e),vn(e),o&512&&(Ee||a===null||ci(a,a.return)),o&64&&Gi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var c=Hn;if(_n(n,e),vn(e),o&512&&(Ee||a===null||ci(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,c=c.ownerDocument||c;e:switch(o){case"title":f=c.getElementsByTagName("title")[0],(!f||f[tr]||f[Ne]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(o),c.head.insertBefore(f,c.querySelector("head > title"))),Ke(f,o,a),f[Ne]=e,_e(f),o=f;break t;case"link":var v=By("link","href",c).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=c.createElement(o),Ke(f,o,a),c.head.appendChild(f);break;case"meta":if(v=By("meta","content",c).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=c.createElement(o),Ke(f,o,a),c.head.appendChild(f);break;default:throw Error(r(468,o))}f[Ne]=e,_e(f),o=f}e.stateNode=o}else qy(c,e.type,e.stateNode);else e.stateNode=jy(c,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?qy(c,e.type,e.stateNode):jy(c,o,e.memoizedProps)):o===null&&e.stateNode!==null&&bf(e,e.memoizedProps,a.memoizedProps)}break;case 27:_n(n,e),vn(e),o&512&&(Ee||a===null||ci(a,a.return)),a!==null&&o&4&&bf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_n(n,e),vn(e),o&512&&(Ee||a===null||ci(a,a.return)),e.flags&32){c=e.stateNode;try{bn(c,"")}catch(j){se(e,e.return,j)}}o&4&&e.stateNode!=null&&(c=e.memoizedProps,bf(e,c,a!==null?a.memoizedProps:c)),o&1024&&(If=!0);break;case 6:if(_n(n,e),vn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(j){se(e,e.return,j)}}break;case 3:if(nc=null,c=Hn,Hn=tc(n.containerInfo),_n(n,e),Hn=c,vn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{ul(n.containerInfo)}catch(j){se(e,e.return,j)}If&&(If=!1,Kp(e));break;case 4:o=Hn,Hn=tc(e.stateNode.containerInfo),_n(n,e),vn(e),Hn=o;break;case 12:_n(n,e),vn(e);break;case 13:_n(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vf=He()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Cf(e,o)));break;case 22:c=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,L=Gi,F=Ee;if(Gi=L||c,Ee=F||w,_n(n,e),Ee=F,Gi=L,vn(e),o&8192)t:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||w||Gi||Ee||Rr(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){w=a=n;try{if(f=w.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var Y=w.memoizedProps.style,z=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(j){se(w,w.return,j)}}}else if(n.tag===6){if(a===null){w=n;try{w.stateNode.nodeValue=c?"":w.memoizedProps}catch(j){se(w,w.return,j)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Cf(e,a))));break;case 19:_n(n,e),vn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Cf(e,o)));break;case 30:break;case 21:break;default:_n(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(jp(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var c=a.stateNode,f=wf(e);Bu(e,f,c);break;case 5:var v=a.stateNode;a.flags&32&&(bn(v,""),a.flags&=-33);var E=wf(e);Bu(e,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,L=wf(e);Rf(e,L,w);break;default:throw Error(r(161))}}catch(F){se(e,e.return,F)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Kp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Kp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ys(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Hp(e,n.alternate,n),n=n.sibling}function Rr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ps(4,n,n.return),Rr(n);break;case 1:ci(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Lp(n,n.return,a),Rr(n);break;case 27:el(n.stateNode);case 26:case 5:ci(n,n.return),Rr(n);break;case 22:n.memoizedState===null&&Rr(n);break;case 30:Rr(n);break;default:Rr(n)}e=e.sibling}}function _s(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=e,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:_s(c,f,a),Fo(4,f);break;case 1:if(_s(c,f,a),o=f,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){se(o,o.return,L)}if(o=f,c=o.updateQueue,c!==null){var E=o.stateNode;try{var w=c.shared.hiddenCallbacks;if(w!==null)for(c.shared.hiddenCallbacks=null,c=0;c<w.length;c++)Ag(w[c],E)}catch(L){se(o,o.return,L)}}a&&v&64&&Up(f),Qo(f,f.return);break;case 27:Bp(f);case 26:case 5:_s(c,f,a),a&&o===null&&v&4&&zp(f),Qo(f,f.return);break;case 12:_s(c,f,a);break;case 13:_s(c,f,a),a&&v&4&&Qp(c,f);break;case 22:f.memoizedState===null&&_s(c,f,a),Qo(f,f.return);break;case 30:break;default:_s(c,f,a)}n=n.sibling}}function Nf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&xo(a))}function Df(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xo(e))}function hi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Xp(e,n,a,o),n=n.sibling}function Xp(e,n,a,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:hi(e,n,a,o),c&2048&&Fo(9,n);break;case 1:hi(e,n,a,o);break;case 3:hi(e,n,a,o),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xo(e)));break;case 12:if(c&2048){hi(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){se(n,n.return,w)}}else hi(e,n,a,o);break;case 13:hi(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?hi(e,n,a,o):Yo(e,n):f._visibility&2?hi(e,n,a,o):(f._visibility|=2,va(e,n,a,o,(n.subtreeFlags&10256)!==0)),c&2048&&Nf(v,n);break;case 24:hi(e,n,a,o),c&2048&&Df(n.alternate,n);break;default:hi(e,n,a,o)}}function va(e,n,a,o,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,v=n,E=a,w=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:va(f,v,E,w,c),Fo(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?va(f,v,E,w,c):Yo(f,v):(F._visibility|=2,va(f,v,E,w,c)),c&&L&2048&&Nf(v.alternate,v);break;case 24:va(f,v,E,w,c),c&&L&2048&&Df(v.alternate,v);break;default:va(f,v,E,w,c)}n=n.sibling}}function Yo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,c=o.flags;switch(o.tag){case 22:Yo(a,o),c&2048&&Nf(o.alternate,o);break;case 24:Yo(a,o),c&2048&&Df(o.alternate,o);break;default:Yo(a,o)}n=n.sibling}}var Ko=8192;function Ea(e){if(e.subtreeFlags&Ko)for(e=e.child;e!==null;)$p(e),e=e.sibling}function $p(e){switch(e.tag){case 26:Ea(e),e.flags&Ko&&e.memoizedState!==null&&vS(Hn,e.memoizedState,e.memoizedProps);break;case 5:Ea(e);break;case 3:case 4:var n=Hn;Hn=tc(e.stateNode.containerInfo),Ea(e),Hn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ko,Ko=16777216,Ea(e),Ko=n):Ea(e));break;default:Ea(e)}}function Zp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Xo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];je=o,Wp(o,e)}Zp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jp(e),e=e.sibling}function Jp(e){switch(e.tag){case 0:case 11:case 15:Xo(e),e.flags&2048&&ps(9,e,e.return);break;case 3:Xo(e);break;case 12:Xo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,qu(e)):Xo(e);break;default:Xo(e)}}function qu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];je=o,Wp(o,e)}Zp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ps(8,n,n.return),qu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,qu(n));break;default:qu(n)}e=e.sibling}}function Wp(e,n){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:ps(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:xo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,je=o;else t:for(a=e;je!==null;){o=je;var c=o.sibling,f=o.return;if(Gp(o),o===a){je=null;break t}if(c!==null){c.return=f,je=c;break t}je=f}}}var kT={getCacheForType:function(e){var n=We(Oe),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},PT=typeof WeakMap=="function"?WeakMap:Map,Jt=0,re=null,Ot=null,qt=0,Wt=0,En=null,vs=!1,Ta=!1,xf=!1,Qi=0,pe=0,Es=0,Ir=0,Of=0,Mn=0,Sa=0,$o=null,fn=null,Mf=!1,Vf=0,Hu=1/0,Gu=null,Ts=null,Ye=0,Ss=null,Aa=null,ba=0,kf=0,Pf=null,ty=null,Zo=0,Uf=null;function Tn(){if((Jt&2)!==0&&qt!==0)return qt&-qt;if(G.T!==null){var e=ha;return e!==0?e:Gf()}return is()}function ey(){Mn===0&&(Mn=(qt&536870912)===0||Qt?ro():536870912);var e=On.current;return e!==null&&(e.flags|=32),Mn}function Sn(e,n,a){(e===re&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)&&(wa(e,0),As(e,qt,Mn,!1)),bi(e,a),((Jt&2)===0||e!==re)&&(e===re&&((Jt&2)===0&&(Ir|=a),pe===4&&As(e,qt,Mn,!1)),fi(e))}function ny(e,n,a){if((Jt&6)!==0)throw Error(r(327));var o=!a&&(n&124)===0&&(n&e.expiredLanes)===0||Ws(e,n),c=o?zT(e,n):jf(e,n,!0),f=o;do{if(c===0){Ta&&!o&&As(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!UT(a)){c=jf(e,n,!1),f=!1;continue}if(c===2){if(f=n,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;c=$o;var w=E.current.memoizedState.isDehydrated;if(w&&(wa(E,v).flags|=256),v=jf(E,v,!1),v!==2){if(xf&&!w){E.errorRecoveryDisabledLanes|=f,Ir|=f,c=4;break t}f=fn,fn=c,f!==null&&(fn===null?fn=f:fn.push.apply(fn,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){wa(e,0),As(e,n,0,!0);break}t:{switch(o=e,f=c,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:As(o,n,Mn,!vs);break t;case 2:fn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(c=Vf+300-He(),10<c)){if(As(o,n,Mn,!vs),qr(o,0,!0)!==0)break t;o.timeoutHandle=xy(iy.bind(null,o,a,fn,Gu,Mf,n,Mn,Ir,Sa,vs,f,2,-0,0),c);break t}iy(o,a,fn,Gu,Mf,n,Mn,Ir,Sa,vs,f,0,-0,0)}}break}while(!0);fi(e)}function iy(e,n,a,o,c,f,v,E,w,L,F,Y,z,j){if(e.timeoutHandle=-1,Y=n.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(sl={stylesheets:null,count:0,unsuspend:_S},$p(n),Y=ES(),Y!==null)){e.cancelPendingCommit=Y(cy.bind(null,e,n,f,a,o,c,v,E,w,F,1,z,j)),As(e,f,v,!L);return}cy(e,n,f,a,o,c,v,E,w)}function UT(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var c=a[o],f=c.getSnapshot;c=c.value;try{if(!pn(f(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function As(e,n,a,o){n&=~Of,n&=~Ir,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var c=n;0<c;){var f=31-Je(c),v=1<<f;o[f]=-1,c&=~v}a!==0&&Zn(e,a,n)}function Fu(){return(Jt&6)===0?(Jo(0),!1):!0}function Lf(){if(Ot!==null){if(Wt===0)var e=Ot.return;else e=Ot,Li=Tr=null,tf(e),ya=null,qo=0,e=Ot;for(;e!==null;)Pp(e.alternate,e),e=e.return;Ot=null}}function wa(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,eS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Lf(),re=e,Ot=a=ki(e.current,null),qt=n,Wt=0,En=null,vs=!1,Ta=Ws(e,n),xf=!1,Sa=Mn=Of=Ir=Es=pe=0,fn=$o=null,Mf=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var c=31-Je(o),f=1<<c;n|=e[c],o&=~f}return Qi=n,du(),a}function sy(e,n){Dt=null,G.H=Ou,n===Mo||n===Su?(n=Tg(),Wt=3):n===_g?(n=Tg(),Wt=4):Wt=n===Sp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,En=n,Ot===null&&(pe=1,Uu(e,Cn(n,e.current)))}function ry(){var e=G.H;return G.H=Ou,e===null?Ou:e}function ay(){var e=G.A;return G.A=kT,e}function zf(){pe=4,vs||(qt&4194048)!==qt&&On.current!==null||(Ta=!0),(Es&134217727)===0&&(Ir&134217727)===0||re===null||As(re,qt,Mn,!1)}function jf(e,n,a){var o=Jt;Jt|=2;var c=ry(),f=ay();(re!==e||qt!==n)&&(Gu=null,wa(e,n)),n=!1;var v=pe;t:do try{if(Wt!==0&&Ot!==null){var E=Ot,w=En;switch(Wt){case 8:Lf(),v=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(n=!0);var L=Wt;if(Wt=0,En=null,Ra(e,E,w,L),a&&Ta){v=0;break t}break;default:L=Wt,Wt=0,En=null,Ra(e,E,w,L)}}LT(),v=pe;break}catch(F){sy(e,F)}while(!0);return n&&e.shellSuspendCounter++,Li=Tr=null,Jt=o,G.H=c,G.A=f,Ot===null&&(re=null,qt=0,du()),v}function LT(){for(;Ot!==null;)oy(Ot)}function zT(e,n){var a=Jt;Jt|=2;var o=ry(),c=ay();re!==e||qt!==n?(Gu=null,Hu=He()+500,wa(e,n)):Ta=Ws(e,n);t:do try{if(Wt!==0&&Ot!==null){n=Ot;var f=En;e:switch(Wt){case 1:Wt=0,En=null,Ra(e,n,f,1);break;case 2:case 9:if(vg(f)){Wt=0,En=null,ly(n);break}n=function(){Wt!==2&&Wt!==9||re!==e||(Wt=7),fi(e)},f.then(n,n);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:vg(f)?(Wt=0,En=null,ly(n)):(Wt=0,En=null,Ra(e,n,f,7));break;case 5:var v=null;switch(Ot.tag){case 26:v=Ot.memoizedState;case 5:case 27:var E=Ot;if(!v||Hy(v)){Wt=0,En=null;var w=E.sibling;if(w!==null)Ot=w;else{var L=E.return;L!==null?(Ot=L,Qu(L)):Ot=null}break e}}Wt=0,En=null,Ra(e,n,f,5);break;case 6:Wt=0,En=null,Ra(e,n,f,6);break;case 8:Lf(),pe=6;break t;default:throw Error(r(462))}}jT();break}catch(F){sy(e,F)}while(!0);return Li=Tr=null,G.H=o,G.A=c,Jt=a,Ot!==null?0:(re=null,qt=0,du(),pe)}function jT(){for(;Ot!==null&&!ye();)oy(Ot)}function oy(e){var n=Vp(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,n===null?Qu(e):Ot=n}function ly(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Cp(a,n,n.pendingProps,n.type,void 0,qt);break;case 11:n=Cp(a,n,n.pendingProps,n.type.render,n.ref,qt);break;case 5:tf(n);default:Pp(a,n),n=Ot=ug(n,Qi),n=Vp(a,n,Qi)}e.memoizedProps=e.pendingProps,n===null?Qu(e):Ot=n}function Ra(e,n,a,o){Li=Tr=null,tf(n),ya=null,qo=0;var c=n.return;try{if(NT(e,c,n,a,qt)){pe=1,Uu(e,Cn(a,e.current)),Ot=null;return}}catch(f){if(c!==null)throw Ot=c,f;pe=1,Uu(e,Cn(a,e.current)),Ot=null;return}n.flags&32768?(Qt||o===1?e=!0:Ta||(qt&536870912)!==0?e=!1:(vs=e=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),uy(n,e)):Qu(n)}function Qu(e){var n=e;do{if((n.flags&32768)!==0){uy(n,vs);return}e=n.return;var a=xT(n.alternate,n,Qi);if(a!==null){Ot=a;return}if(n=n.sibling,n!==null){Ot=n;return}Ot=n=e}while(n!==null);pe===0&&(pe=5)}function uy(e,n){do{var a=OT(e.alternate,e);if(a!==null){a.flags&=32767,Ot=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Ot=e;return}Ot=e=a}while(e!==null);pe=6,Ot=null}function cy(e,n,a,o,c,f,v,E,w){e.cancelPendingCommit=null;do Yu();while(Ye!==0);if((Jt&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Nh,oo(e,a,f,v,E,w),e===re&&(Ot=re=null,qt=0),Aa=n,Ss=e,ba=a,kf=f,Pf=c,ty=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,GT(Ln,function(){return gy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,c=tt.p,tt.p=2,v=Jt,Jt|=4;try{MT(e,n,a)}finally{Jt=v,tt.p=c,G.T=o}}Ye=1,hy(),fy(),dy()}}function hy(){if(Ye===1){Ye=0;var e=Ss,n=Aa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=tt.p;tt.p=2;var c=Jt;Jt|=4;try{Yp(n,e);var f=Jf,v=Wm(e.containerInfo),E=f.focusedElem,w=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Jm(E.ownerDocument.documentElement,E)){if(w!==null&&bh(E)){var L=w.start,F=w.end;if(F===void 0&&(F=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(F,E.value.length);else{var Y=E.ownerDocument||document,z=Y&&Y.defaultView||window;if(z.getSelection){var j=z.getSelection(),St=E.textContent.length,pt=Math.min(w.start,St),ie=w.end===void 0?pt:Math.min(w.end,St);!j.extend&&pt>ie&&(v=ie,ie=pt,pt=v);var k=Zm(E,pt),x=Zm(E,ie);if(k&&x&&(j.rangeCount!==1||j.anchorNode!==k.node||j.anchorOffset!==k.offset||j.focusNode!==x.node||j.focusOffset!==x.offset)){var U=Y.createRange();U.setStart(k.node,k.offset),j.removeAllRanges(),pt>ie?(j.addRange(U),j.extend(x.node,x.offset)):(U.setEnd(x.node,x.offset),j.addRange(U))}}}}for(Y=[],j=E;j=j.parentNode;)j.nodeType===1&&Y.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var Q=Y[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}rc=!!Zf,Jf=Zf=null}finally{Jt=c,tt.p=o,G.T=a}}e.current=n,Ye=2}}function fy(){if(Ye===2){Ye=0;var e=Ss,n=Aa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=tt.p;tt.p=2;var c=Jt;Jt|=4;try{Hp(e,n.alternate,n)}finally{Jt=c,tt.p=o,G.T=a}}Ye=3}}function dy(){if(Ye===4||Ye===3){Ye=0,Kn();var e=Ss,n=Aa,a=ba,o=ty;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ye=5:(Ye=0,Aa=Ss=null,my(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ts=null),Hr(a),n=n.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(me,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=G.T,c=tt.p,tt.p=2,G.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{G.T=n,tt.p=c}}(ba&3)!==0&&Yu(),fi(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===Uf?Zo++:(Zo=0,Uf=e):Zo=0,Jo(0)}}function my(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,xo(n)))}function Yu(e){return hy(),fy(),dy(),gy()}function gy(){if(Ye!==5)return!1;var e=Ss,n=kf;kf=0;var a=Hr(ba),o=G.T,c=tt.p;try{tt.p=32>a?32:a,G.T=null,a=Pf,Pf=null;var f=Ss,v=ba;if(Ye=0,Aa=Ss=null,ba=0,(Jt&6)!==0)throw Error(r(331));var E=Jt;if(Jt|=4,Jp(f.current),Xp(f,f.current,v,a),Jt=E,Jo(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(me,f)}catch{}return!0}finally{tt.p=c,G.T=o,my(e,n)}}function py(e,n,a){n=Cn(a,n),n=gf(e.stateNode,n,2),e=fs(e,n,2),e!==null&&(bi(e,2),fi(e))}function se(e,n,a){if(e.tag===3)py(e,e,a);else for(;n!==null;){if(n.tag===3){py(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ts===null||!Ts.has(o))){e=Cn(a,e),a=Ep(2),o=fs(n,a,2),o!==null&&(Tp(a,o,n,e),bi(o,2),fi(o));break}}n=n.return}}function Bf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new PT;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(a)||(xf=!0,c.add(a),e=BT.bind(null,e,n,a),n.then(e,e))}function BT(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,re===e&&(qt&a)===a&&(pe===4||pe===3&&(qt&62914560)===qt&&300>He()-Vf?(Jt&2)===0&&wa(e,0):Of|=a,Sa===qt&&(Sa=0)),fi(e)}function yy(e,n){n===0&&(n=ao()),e=oa(e,n),e!==null&&(bi(e,n),fi(e))}function qT(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),yy(e,a)}function HT(e,n){var a=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),yy(e,a)}function GT(e,n){return $t(e,n)}var Ku=null,Ia=null,qf=!1,Xu=!1,Hf=!1,Cr=0;function fi(e){e!==Ia&&e.next===null&&(Ia===null?Ku=Ia=e:Ia=Ia.next=e),Xu=!0,qf||(qf=!0,QT())}function Jo(e,n){if(!Hf&&Xu){Hf=!0;do for(var a=!1,o=Ku;o!==null;){if(e!==0){var c=o.pendingLanes;if(c===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Je(42|e)+1)-1,f&=c&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ty(o,f))}else f=qt,f=qr(o,o===re?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Ws(o,f)||(a=!0,Ty(o,f));o=o.next}while(a);Hf=!1}}function FT(){_y()}function _y(){Xu=qf=!1;var e=0;Cr!==0&&(tS()&&(e=Cr),Cr=0);for(var n=He(),a=null,o=Ku;o!==null;){var c=o.next,f=vy(o,n);f===0?(o.next=null,a===null?Ku=c:a.next=c,c===null&&(Ia=a)):(a=o,(e!==0||(f&3)!==0)&&(Xu=!0)),o=c}Jo(e)}function vy(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Je(f),E=1<<v,w=c[v];w===-1?((E&a)===0||(E&o)!==0)&&(c[v]=so(E,n)):w<=n&&(e.expiredLanes|=E),f&=~E}if(n=re,a=qt,a=qr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Gt(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ws(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Gt(o),Hr(a)){case 2:case 8:a=$n;break;case 32:a=Ln;break;case 268435456:a=Br;break;default:a=Ln}return o=Ey.bind(null,e),a=$t(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Gt(o),e.callbackPriority=2,e.callbackNode=null,2}function Ey(e,n){if(Ye!==0&&Ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Yu()&&e.callbackNode!==a)return null;var o=qt;return o=qr(e,e===re?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(ny(e,o,n),vy(e,He()),e.callbackNode!=null&&e.callbackNode===a?Ey.bind(null,e):null)}function Ty(e,n){if(Yu())return null;ny(e,n,!0)}function QT(){nS(function(){(Jt&6)!==0?$t(Xn,FT):_y()})}function Gf(){return Cr===0&&(Cr=ro()),Cr}function Sy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xr(""+e)}function Ay(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function YT(e,n,a,o,c){if(n==="submit"&&a&&a.stateNode===c){var f=Sy((c[Ae]||null).action),v=o.submitter;v&&(n=(n=v[Ae]||null)?Sy(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new $r("action","action",null,o,c);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Cr!==0){var w=v?Ay(c,v):new FormData(c);cf(a,{pending:!0,data:w,method:c.method,action:f},null,w)}}else typeof f=="function"&&(E.preventDefault(),w=v?Ay(c,v):new FormData(c),cf(a,{pending:!0,data:w,method:c.method,action:f},f,w))},currentTarget:c}]})}}for(var Ff=0;Ff<Ch.length;Ff++){var Qf=Ch[Ff],KT=Qf.toLowerCase(),XT=Qf[0].toUpperCase()+Qf.slice(1);qn(KT,"on"+XT)}qn(ng,"onAnimationEnd"),qn(ig,"onAnimationIteration"),qn(sg,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(fT,"onTransitionRun"),qn(dT,"onTransitionStart"),qn(mT,"onTransitionCancel"),qn(rg,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function by(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],c=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],w=E.instance,L=E.currentTarget;if(E=E.listener,w!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(F){Pu(F)}c.currentTarget=null,f=w}else for(v=0;v<o.length;v++){if(E=o[v],w=E.instance,L=E.currentTarget,E=E.listener,w!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(F){Pu(F)}c.currentTarget=null,f=w}}}}function Mt(e,n){var a=n[uo];a===void 0&&(a=n[uo]=new Set);var o=e+"__bubble";a.has(o)||(wy(n,e,2,!1),a.add(o))}function Yf(e,n,a){var o=0;n&&(o|=4),wy(a,e,o,n)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Kf(e){if(!e[$u]){e[$u]=!0,co.forEach(function(a){a!=="selectionchange"&&($T.has(a)||Yf(a,!1,e),Yf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[$u]||(n[$u]=!0,Yf("selectionchange",!1,n))}}function wy(e,n,a,o){switch(Xy(n)){case 2:var c=AS;break;case 8:c=bS;break;default:c=ld}a=c.bind(null,n,a,e),c=void 0,!Rn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function Xf(e,n,a,o,c){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===c)break;if(v===4)for(v=o.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;E!==null;){if(v=wi(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){o=f=v;continue t}E=E.parentNode}}o=o.return}Jl(function(){var L=f,F=wn(a),Y=[];t:{var z=ag.get(e);if(z!==void 0){var j=$r,St=e;switch(e){case"keypress":if(ii(a)===0)break t;case"keydown":case"keyup":j=na;break;case"focusin":St="focus",j=Wr;break;case"focusout":St="blur",j=Wr;break;case"beforeblur":case"afterblur":j=Wr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=In;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=au;break;case ng:case ig:case sg:j=ta;break;case rg:j=lu;break;case"scroll":case"scrollend":j=Wl;break;case"wheel":j=ia;break;case"copy":case"cut":case"paste":j=ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Ao;break;case"toggle":case"beforetoggle":j=cu}var pt=(n&4)!==0,ie=!pt&&(e==="scroll"||e==="scrollend"),k=pt?z!==null?z+"Capture":null:z;pt=[];for(var x=L,U;x!==null;){var Q=x;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||k===null||(Q=or(x,k),Q!=null&&pt.push(tl(x,Q,U))),ie)break;x=x.return}0<pt.length&&(z=new j(z,St,null,a,F),Y.push({event:z,listeners:pt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",z&&a!==Ni&&(St=a.relatedTarget||a.fromElement)&&(wi(St)||St[An]))break t;if((j||z)&&(z=F.window===F?F:(z=F.ownerDocument)?z.defaultView||z.parentWindow:window,j?(St=a.relatedTarget||a.toElement,j=L,St=St?wi(St):null,St!==null&&(ie=h(St),pt=St.tag,St!==ie||pt!==5&&pt!==27&&pt!==6)&&(St=null)):(j=null,St=L),j!==St)){if(pt=In,Q="onMouseLeave",k="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Ao,Q="onPointerLeave",k="onPointerEnter",x="pointer"),ie=j==null?z:Wn(j),U=St==null?z:Wn(St),z=new pt(Q,x+"leave",j,a,F),z.target=ie,z.relatedTarget=U,Q=null,wi(F)===L&&(pt=new pt(k,x+"enter",St,a,F),pt.target=U,pt.relatedTarget=ie,Q=pt),ie=Q,j&&St)e:{for(pt=j,k=St,x=0,U=pt;U;U=Ca(U))x++;for(U=0,Q=k;Q;Q=Ca(Q))U++;for(;0<x-U;)pt=Ca(pt),x--;for(;0<U-x;)k=Ca(k),U--;for(;x--;){if(pt===k||k!==null&&pt===k.alternate)break e;pt=Ca(pt),k=Ca(k)}pt=null}else pt=null;j!==null&&Ry(Y,z,j,pt,!1),St!==null&&ie!==null&&Ry(Y,ie,St,pt,!0)}}t:{if(z=L?Wn(L):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var rt=Fm;else if(xe(z))if(Qm)rt=uT;else{rt=oT;var xt=aT}else j=z.nodeName,!j||j.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&po(L.elementType)&&(rt=Fm):rt=lT;if(rt&&(rt=rt(e,L))){Vi(Y,rt,a,F);break t}xt&&xt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&os(z,"number",z.value)}switch(xt=L?Wn(L):window,e){case"focusin":(xe(xt)||xt.contentEditable==="true")&&(sa=xt,wh=L,Ro=null);break;case"focusout":Ro=wh=sa=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,tg(Y,a,F);break;case"selectionchange":if(hT)break;case"keydown":case"keyup":tg(Y,a,F)}var ut;if(ai)t:{switch(e){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else jt?q(e,a)&&(yt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(yt="onCompositionStart");yt&&(y&&a.locale!=="ko"&&(jt||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&jt&&(ut=_o()):(ni=F,ls="value"in ni?ni.value:ni.textContent,jt=!0)),xt=Zu(L,yt),0<xt.length&&(yt=new To(yt,e,null,a,F),Y.push({event:yt,listeners:xt}),ut?yt.data=ut:(ut=et(a),ut!==null&&(yt.data=ut)))),(ut=m?De(e,a):Bt(e,a))&&(yt=Zu(L,"onBeforeInput"),0<yt.length&&(xt=new To("onBeforeInput","beforeinput",null,a,F),Y.push({event:xt,listeners:yt}),xt.data=ut)),YT(Y,e,L,a,F)}by(Y,n)})}function tl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Zu(e,n){for(var a=n+"Capture",o=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=or(e,a),c!=null&&o.unshift(tl(e,c,f)),c=or(e,n),c!=null&&o.push(tl(e,c,f))),e.tag===3)return o;e=e.return}return[]}function Ca(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ry(e,n,a,o,c){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,w=E.alternate,L=E.stateNode;if(E=E.tag,w!==null&&w===o)break;E!==5&&E!==26&&E!==27||L===null||(w=L,c?(L=or(a,f),L!=null&&v.unshift(tl(a,L,w))):c||(L=or(a,f),L!=null&&v.push(tl(a,L,w)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var ZT=/\r\n?/g,JT=/\u0000|\uFFFD/g;function Iy(e){return(typeof e=="string"?e:""+e).replace(ZT,`
`).replace(JT,"")}function Cy(e,n){return n=Iy(n),Iy(e)===n}function Ju(){}function ne(e,n,a,o,c,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||bn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&bn(e,""+o);break;case"className":ti(e,"class",o);break;case"tabIndex":ti(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(e,a,o);break;case"style":go(e,o,f);break;case"data":if(n!=="object"){ti(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Xr(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&ne(e,n,"name",c.name,c,null),ne(e,n,"formEncType",c.formEncType,c,null),ne(e,n,"formMethod",c.formMethod,c,null),ne(e,n,"formTarget",c.formTarget,c,null)):(ne(e,n,"encType",c.encType,c,null),ne(e,n,"method",c.method,c,null),ne(e,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Xr(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Ju);break;case"onScroll":o!=null&&Mt("scroll",e);break;case"onScrollEnd":o!=null&&Mt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Xr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Mt("beforetoggle",e),Mt("toggle",e),as(e,"popover",o);break;case"xlinkActuate":Ge(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ge(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ge(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ge(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ge(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ge(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ge(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ge(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ge(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":as(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_h.get(a)||a,as(e,a,o))}}function $f(e,n,a,o,c,f){switch(a){case"style":go(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?bn(e,o):(typeof o=="number"||typeof o=="bigint")&&bn(e,""+o);break;case"onScroll":o!=null&&Mt("scroll",e);break;case"onScrollEnd":o!=null&&Mt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gr.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),f=e[Ae]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,c),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,c);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):as(e,a,o)}}}function Ke(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",e),Mt("load",e);var o=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ne(e,n,f,v,a,null)}}c&&ne(e,n,"srcSet",a.srcSet,a,null),o&&ne(e,n,"src",a.src,a,null);return;case"input":Mt("invalid",e);var E=f=v=c=null,w=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":c=F;break;case"type":v=F;break;case"checked":w=F;break;case"defaultChecked":L=F;break;case"value":f=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:ne(e,n,o,F,a,null)}}sr(e,f,E,w,L,v,c,!1),Kr(e);return;case"select":Mt("invalid",e),o=v=f=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:ne(e,n,c,E,a,null)}n=f,a=v,e.multiple=!!o,n!=null?Ci(e,!!o,n,!1):a!=null&&Ci(e,!!o,a,!0);return;case"textarea":Mt("invalid",e),f=c=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:ne(e,n,v,E,a,null)}rr(e,o,c,f),Kr(e);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(o=a[w],o!=null))switch(w){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ne(e,n,w,o,a,null)}return;case"dialog":Mt("beforetoggle",e),Mt("toggle",e),Mt("cancel",e),Mt("close",e);break;case"iframe":case"object":Mt("load",e);break;case"video":case"audio":for(o=0;o<Wo.length;o++)Mt(Wo[o],e);break;case"image":Mt("error",e),Mt("load",e);break;case"details":Mt("toggle",e);break;case"embed":case"source":case"link":Mt("error",e),Mt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ne(e,n,L,o,a,null)}return;default:if(po(n)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&$f(e,n,F,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&ne(e,n,E,o,a,null))}function WT(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,E=null,w=null,L=null,F=null;for(j in a){var Y=a[j];if(a.hasOwnProperty(j)&&Y!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":w=Y;default:o.hasOwnProperty(j)||ne(e,n,j,null,o,Y)}}for(var z in o){var j=o[z];if(Y=a[z],o.hasOwnProperty(z)&&(j!=null||Y!=null))switch(z){case"type":f=j;break;case"name":c=j;break;case"checked":L=j;break;case"defaultChecked":F=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,n));break;default:j!==Y&&ne(e,n,z,j,o,Y)}}gn(e,v,E,w,L,F,f,c);return;case"select":j=v=E=z=null;for(f in a)if(w=a[f],a.hasOwnProperty(f)&&w!=null)switch(f){case"value":break;case"multiple":j=w;default:o.hasOwnProperty(f)||ne(e,n,f,null,o,w)}for(c in o)if(f=o[c],w=a[c],o.hasOwnProperty(c)&&(f!=null||w!=null))switch(c){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==w&&ne(e,n,c,f,o,w)}n=E,a=v,o=j,z!=null?Ci(e,!!a,z,!1):!!o!=!!a&&(n!=null?Ci(e,!!a,n,!0):Ci(e,!!a,a?[]:"",!1));return;case"textarea":j=z=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ne(e,n,E,null,o,c)}for(v in o)if(c=o[v],f=a[v],o.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":z=c;break;case"defaultValue":j=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==f&&ne(e,n,v,c,o,f)}te(e,z,j);return;case"option":for(var St in a)if(z=a[St],a.hasOwnProperty(St)&&z!=null&&!o.hasOwnProperty(St))switch(St){case"selected":e.selected=!1;break;default:ne(e,n,St,null,o,z)}for(w in o)if(z=o[w],j=a[w],o.hasOwnProperty(w)&&z!==j&&(z!=null||j!=null))switch(w){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:ne(e,n,w,z,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)z=a[pt],a.hasOwnProperty(pt)&&z!=null&&!o.hasOwnProperty(pt)&&ne(e,n,pt,null,o,z);for(L in o)if(z=o[L],j=a[L],o.hasOwnProperty(L)&&z!==j&&(z!=null||j!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,n));break;default:ne(e,n,L,z,o,j)}return;default:if(po(n)){for(var ie in a)z=a[ie],a.hasOwnProperty(ie)&&z!==void 0&&!o.hasOwnProperty(ie)&&$f(e,n,ie,void 0,o,z);for(F in o)z=o[F],j=a[F],!o.hasOwnProperty(F)||z===j||z===void 0&&j===void 0||$f(e,n,F,z,o,j);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&ne(e,n,k,null,o,z);for(Y in o)z=o[Y],j=a[Y],!o.hasOwnProperty(Y)||z===j||z==null&&j==null||ne(e,n,Y,z,o,j)}var Zf=null,Jf=null;function Wu(e){return e.nodeType===9?e:e.ownerDocument}function Ny(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Wf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var td=null;function tS(){var e=window.event;return e&&e.type==="popstate"?e===td?!1:(td=e,!0):(td=null,!1)}var xy=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,nS=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(e){return Oy.resolve(null).then(e).catch(iS)}:xy;function iS(e){setTimeout(function(){throw e})}function bs(e){return e==="head"}function My(e,n){var a=n,o=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&el(v.documentElement),a&2&&el(v.body),a&4)for(a=v.head,el(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[tr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(c===0){e.removeChild(f),ul(n);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);ul(n)}function ed(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ed(a),rs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function sS(e,n,a,o){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[tr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Gn(e.nextSibling),e===null)break}return null}function rS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gn(e.nextSibling),e===null))return null;return e}function nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function aS(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Gn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var id=null;function Vy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function ky(e,n,a){switch(n=Wu(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function el(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);rs(e)}var Vn=new Map,Py=new Set;function tc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Yi=tt.d;tt.d={f:oS,r:lS,D:uS,C:cS,L:hS,m:fS,X:mS,S:dS,M:gS};function oS(){var e=Yi.f(),n=Fu();return e||n}function lS(e){var n=Jn(e);n!==null&&n.tag===5&&n.type==="form"?np(n):Yi.r(e)}var Na=typeof document>"u"?null:document;function Uy(e,n,a){var o=Na;if(o&&typeof n=="string"&&n){var c=be(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Py.has(c)||(Py.add(c),e={rel:e,crossOrigin:a,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),Ke(n,"link",e),_e(n),o.head.appendChild(n)))}}function uS(e){Yi.D(e),Uy("dns-prefetch",e,null)}function cS(e,n){Yi.C(e,n),Uy("preconnect",e,n)}function hS(e,n,a){Yi.L(e,n,a);var o=Na;if(o&&e&&n){var c='link[rel="preload"][as="'+be(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+be(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+be(a.imageSizes)+'"]')):c+='[href="'+be(e)+'"]';var f=c;switch(n){case"style":f=Da(e);break;case"script":f=xa(e)}Vn.has(f)||(e=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Vn.set(f,e),o.querySelector(c)!==null||n==="style"&&o.querySelector(nl(f))||n==="script"&&o.querySelector(il(f))||(n=o.createElement("link"),Ke(n,"link",e),_e(n),o.head.appendChild(n)))}}function fS(e,n){Yi.m(e,n);var a=Na;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+be(o)+'"][href="'+be(e)+'"]',f=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xa(e)}if(!Vn.has(f)&&(e=S({rel:"modulepreload",href:e},n),Vn.set(f,e),a.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(il(f)))return}o=a.createElement("link"),Ke(o,"link",e),_e(o),a.head.appendChild(o)}}}function dS(e,n,a){Yi.S(e,n,a);var o=Na;if(o&&e){var c=an(o).hoistableStyles,f=Da(e);n=n||"default";var v=c.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(nl(f)))E.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Vn.get(f))&&sd(e,a);var w=v=o.createElement("link");_e(w),Ke(w,"link",e),w._p=new Promise(function(L,F){w.onload=L,w.onerror=F}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ec(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},c.set(f,v)}}}function mS(e,n){Yi.X(e,n);var a=Na;if(a&&e){var o=an(a).hoistableScripts,c=xa(e),f=o.get(c);f||(f=a.querySelector(il(c)),f||(e=S({src:e,async:!0},n),(n=Vn.get(c))&&rd(e,n),f=a.createElement("script"),_e(f),Ke(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function gS(e,n){Yi.M(e,n);var a=Na;if(a&&e){var o=an(a).hoistableScripts,c=xa(e),f=o.get(c);f||(f=a.querySelector(il(c)),f||(e=S({src:e,async:!0,type:"module"},n),(n=Vn.get(c))&&rd(e,n),f=a.createElement("script"),_e(f),Ke(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function Ly(e,n,a,o){var c=(c=Tt.current)?tc(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Da(a.href),a=an(c).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Da(a.href);var f=an(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(nl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Vn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Vn.set(e,a),f||pS(c,e,a,v.state))),n&&o===null)throw Error(r(528,""));return v}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xa(a),a=an(c).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Da(e){return'href="'+be(e)+'"'}function nl(e){return'link[rel="stylesheet"]['+e+"]"}function zy(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function pS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ke(n,"link",a),_e(n),e.head.appendChild(n))}function xa(e){return'[src="'+be(e)+'"]'}function il(e){return"script[async]"+e}function jy(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+be(a.href)+'"]');if(o)return n.instance=o,_e(o),o;var c=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),_e(o),Ke(o,"style",c),ec(o,a.precedence,e),n.instance=o;case"stylesheet":c=Da(a.href);var f=e.querySelector(nl(c));if(f)return n.state.loading|=4,n.instance=f,_e(f),f;o=zy(a),(c=Vn.get(c))&&sd(o,c),f=(e.ownerDocument||e).createElement("link"),_e(f);var v=f;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Ke(f,"link",o),n.state.loading|=4,ec(f,a.precedence,e),n.instance=f;case"script":return f=xa(a.src),(c=e.querySelector(il(f)))?(n.instance=c,_e(c),c):(o=a,(c=Vn.get(f))&&(o=S({},a),rd(o,c)),e=e.ownerDocument||e,c=e.createElement("script"),_e(c),Ke(c,"link",o),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,ec(o,a.precedence,e));return n.instance}function ec(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,f=c,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function sd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function rd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var nc=null;function By(e,n,a){if(nc===null){var o=new Map,c=nc=new Map;c.set(a,o)}else c=nc,o=c.get(a),o||(o=new Map,c.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[tr]||f[Ne]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function qy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function yS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Hy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var sl=null;function _S(){}function vS(e,n,a){if(sl===null)throw Error(r(475));var o=sl;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Da(a.href),f=e.querySelector(nl(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=ic.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,_e(f);return}f=e.ownerDocument||e,a=zy(a),(c=Vn.get(c))&&sd(a,c),f=f.createElement("link"),_e(f);var v=f;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Ke(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=ic.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function ES(){if(sl===null)throw Error(r(475));var e=sl;return e.stylesheets&&e.count===0&&ad(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&ad(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function ic(){if(this.count--,this.count===0){if(this.stylesheets)ad(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var sc=null;function ad(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,sc=new Map,n.forEach(TS,e),sc=null,ic.call(e))}function TS(e,n){if(!(n.state.loading&4)){var a=sc.get(e);if(a)var o=a.get(null);else{a=new Map,sc.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}c=n.instance,v=c.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,c),a.set(v,c),this.count++,o=ic.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var rl={$$typeof:ct,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function SS(e,n,a,o,c,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Gy(e,n,a,o,c,f,v,E,w,L,F,Y){return e=new SS(e,n,a,v,E,w,L,Y),n=1,f===!0&&(n|=24),f=yn(3,null,null,n),e.current=f,f.stateNode=e,n=jh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},Gh(f),e}function Fy(e){return e?(e=la,e):la}function Qy(e,n,a,o,c,f){c=Fy(c),o.context===null?o.context=c:o.pendingContext=c,o=hs(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=fs(e,o,n),a!==null&&(Sn(a,e,n),ko(a,e,n))}function Yy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function od(e,n){Yy(e,n),(e=e.alternate)&&Yy(e,n)}function Ky(e){if(e.tag===13){var n=oa(e,67108864);n!==null&&Sn(n,e,67108864),od(e,67108864)}}var rc=!0;function AS(e,n,a,o){var c=G.T;G.T=null;var f=tt.p;try{tt.p=2,ld(e,n,a,o)}finally{tt.p=f,G.T=c}}function bS(e,n,a,o){var c=G.T;G.T=null;var f=tt.p;try{tt.p=8,ld(e,n,a,o)}finally{tt.p=f,G.T=c}}function ld(e,n,a,o){if(rc){var c=ud(o);if(c===null)Xf(e,n,o,ac,a),$y(e,o);else if(RS(c,e,n,a,o))o.stopPropagation();else if($y(e,o),n&4&&-1<wS.indexOf(e)){for(;c!==null;){var f=Jn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=zn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-Je(v);E.entanglements[1]|=w,v&=~w}fi(f),(Jt&6)===0&&(Hu=He()+500,Jo(0))}}break;case 13:E=oa(f,2),E!==null&&Sn(E,f,2),Fu(),od(f,2)}if(f=ud(o),f===null&&Xf(e,n,o,ac,a),f===c)break;c=f}c!==null&&o.stopPropagation()}else Xf(e,n,o,null,a)}}function ud(e){return e=wn(e),cd(e)}var ac=null;function cd(e){if(ac=null,e=wi(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ac=e,null}function Xy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(no()){case Xn:return 2;case $n:return 8;case Ln:case dh:return 32;case Br:return 268435456;default:return 32}default:return 32}}var hd=!1,ws=null,Rs=null,Is=null,al=new Map,ol=new Map,Cs=[],wS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $y(e,n){switch(e){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":al.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(n.pointerId)}}function ll(e,n,a,o,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Jn(n),n!==null&&Ky(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function RS(e,n,a,o,c){switch(n){case"focusin":return ws=ll(ws,e,n,a,o,c),!0;case"dragenter":return Rs=ll(Rs,e,n,a,o,c),!0;case"mouseover":return Is=ll(Is,e,n,a,o,c),!0;case"pointerover":var f=c.pointerId;return al.set(f,ll(al.get(f)||null,e,n,a,o,c)),!0;case"gotpointercapture":return f=c.pointerId,ol.set(f,ll(ol.get(f)||null,e,n,a,o,c)),!0}return!1}function Zy(e){var n=wi(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,Fl(e.priority,function(){if(a.tag===13){var o=Tn();o=ns(o);var c=oa(a,o);c!==null&&Sn(c,a,o),od(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=ud(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ni=o,a.target.dispatchEvent(o),Ni=null}else return n=Jn(a),n!==null&&Ky(n),e.blockedOn=a,!1;n.shift()}return!0}function Jy(e,n,a){oc(e)&&a.delete(n)}function IS(){hd=!1,ws!==null&&oc(ws)&&(ws=null),Rs!==null&&oc(Rs)&&(Rs=null),Is!==null&&oc(Is)&&(Is=null),al.forEach(Jy),ol.forEach(Jy)}function lc(e,n){e.blockedOn===n&&(e.blockedOn=null,hd||(hd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,IS)))}var uc=null;function Wy(e){uc!==e&&(uc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){uc===e&&(uc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],c=e[n+2];if(typeof o!="function"){if(cd(o||a)===null)continue;break}var f=Jn(a);f!==null&&(e.splice(n,3),n-=3,cf(f,{pending:!0,data:c,method:a.method,action:o},o,c))}}))}function ul(e){function n(w){return lc(w,e)}ws!==null&&lc(ws,e),Rs!==null&&lc(Rs,e),Is!==null&&lc(Is,e),al.forEach(n),ol.forEach(n);for(var a=0;a<Cs.length;a++){var o=Cs[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Cs.length&&(a=Cs[0],a.blockedOn===null);)Zy(a),a.blockedOn===null&&Cs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],v=c[Ae]||null;if(typeof f=="function")v||Wy(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[Ae]||null)E=v.formAction;else if(cd(c)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),Wy(a)}}}function fd(e){this._internalRoot=e}cc.prototype.render=fd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=Tn();Qy(a,o,e,n,null,null)},cc.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Qy(e.current,2,null,e,null,null),Fu(),n[An]=null}};function cc(e){this._internalRoot=e}cc.prototype.unstable_scheduleHydration=function(e){if(e){var n=is();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Cs.length&&n!==0&&n<Cs[a].priority;a++);Cs.splice(a,0,e),a===0&&Zy(e)}};var t_=t.version;if(t_!=="19.1.0")throw Error(r(527,t_,"19.1.0"));tt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=_(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var CS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{me=hc.inject(CS),Zt=hc}catch{}}return hl.createRoot=function(e,n){if(!l(e))throw Error(r(299));var a=!1,o="",c=pp,f=yp,v=_p,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Gy(e,1,!1,null,null,a,o,c,f,v,E,null),e[An]=n.current,Kf(e),new fd(n)},hl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(r(299));var o=!1,c="",f=pp,v=yp,E=_p,w=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=Gy(e,1,!0,n,a??null,o,c,f,v,E,w,L),n.context=Fy(null),a=n.current,o=Tn(),o=ns(o),c=hs(o),c.callback=null,fs(a,c,o),a=o,n.current.lanes=a,bi(n,a),fi(n),e[An]=n.current,Kf(e),new cc(n)},hl.version="19.1.0",hl}var c_;function LS(){if(c_)return gd.exports;c_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),gd.exports=US(),gd.exports}var zS=LS();const jS=()=>{};var h_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},BS=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const h=s[i++];t[r++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=s[i++],d=s[i++],g=s[i++],_=((l&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;t[r++]=String.fromCharCode(55296+(_>>10)),t[r++]=String.fromCharCode(56320+(_&1023))}else{const h=s[i++],d=s[i++];t[r++]=String.fromCharCode((l&15)<<12|(h&63)<<6|d&63)}}return t.join("")},Lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const h=s[l],d=l+1<s.length,g=d?s[l+1]:0,_=l+2<s.length,p=_?s[l+2]:0,S=h>>2,I=(h&3)<<4|g>>4;let D=(g&15)<<2|p>>6,H=p&63;_||(H=64,d||(D=64)),r.push(i[S],i[I],i[D],i[H])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Uv(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):BS(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const h=i[s.charAt(l++)],g=l<s.length?i[s.charAt(l)]:0;++l;const p=l<s.length?i[s.charAt(l)]:64;++l;const I=l<s.length?i[s.charAt(l)]:64;if(++l,h==null||g==null||p==null||I==null)throw new qS;const D=h<<2|g>>4;if(r.push(D),p!==64){const H=g<<4&240|p>>2;if(r.push(H),I!==64){const K=p<<6&192|I;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(s){const t=Uv(s);return Lv.encodeByteArray(t,!0)},Nc=function(s){return HS(s).replace(/\./g,"")},zv=function(s){try{return Lv.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=()=>GS().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof h_>"u")return;const s=h_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},YS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&zv(s[1]);return t&&JSON.parse(t)},Kc=()=>{try{return jS()||FS()||QS()||YS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},jv=s=>Kc()?.emulatorHosts?.[s],KS=s=>{const t=jv(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Bv=()=>Kc()?.config,qv=s=>Kc()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hv(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,h=s.sub||s.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Nc(JSON.stringify(i)),Nc(JSON.stringify(d)),""].join(".")}const pl={};function ZS(){const s={prod:[],emulator:[]};for(const t of Object.keys(pl))pl[t]?s.emulator.push(t):s.prod.push(t);return s}function JS(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let f_=!1;function Gv(s,t){if(typeof window>"u"||typeof document>"u"||!Xa(window.location.host)||pl[s]===t||pl[s]||f_)return;pl[s]=t;function i(D){return`__firebase__banner__${D}`}const r="__firebase__banner",h=ZS().prod.length>0;function d(){const D=document.getElementById(r);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function _(D,H){D.setAttribute("width","24"),D.setAttribute("id",H),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function p(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{f_=!0,d()},D}function S(D,H){D.setAttribute("id",H),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function I(){const D=JS(r),H=i("text"),K=document.getElementById(H)||document.createElement("span"),nt=i("learnmore"),J=document.getElementById(nt)||document.createElement("a"),gt=i("preprendIcon"),mt=document.getElementById(gt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ct=D.element;g(ct),S(J,nt);const zt=p();_(mt,gt),ct.append(mt,K,J,zt),document.body.appendChild(ct)}h?(K.innerText="Preview backend disconnected.",mt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function tA(){const s=Kc()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function iA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sA(){const s=rn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function rA(){return!tA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aA(){try{return typeof indexedDB=="object"}catch{return!1}}function oA(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="FirebaseError";class es extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=lA,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},l=`${this.service}/${t}`,h=this.errors[t],d=h?uA(h,r):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new es(l,g,r)}}function uA(s,t){return s.replace(cA,(i,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const cA=/\{\$([^}]+)}/g;function hA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Or(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const l of i){if(!r.includes(l))return!1;const h=s[l],d=t[l];if(d_(h)&&d_(d)){if(!Or(h,d))return!1}else if(h!==d)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function d_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function fA(s,t){const i=new dA(s,t);return i.subscribe.bind(i)}class dA{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let l;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");mA(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:r},l.next===void 0&&(l.next=vd),l.error===void 0&&(l.error=vd),l.complete===void 0&&(l.complete=vd);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mA(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(s){return s&&s._delegate?s._delegate:s}class Mr{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new XS;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yA(t))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:l});r.resolve(h)}catch{}}}}clearInstance(t=Nr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Nr){return this.instances.has(t)}getOptions(t=Nr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);r===g&&d.resolve(l)}return l}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const h=this.instances.get(r);return h&&t(h,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pA(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Nr){return this.component?this.component.multipleInstances?t:Nr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pA(s){return s===Nr?void 0:s}function yA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new gA(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(kt||(kt={}));const vA={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},EA=kt.INFO,TA={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},SA=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=TA[t];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class im{constructor(t){this.name=t,this._logLevel=EA,this._logHandler=SA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}const AA=(s,t)=>t.some(i=>s instanceof i);let m_,g_;function bA(){return m_||(m_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wA(){return g_||(g_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fv=new WeakMap,Od=new WeakMap,Qv=new WeakMap,Ed=new WeakMap,sm=new WeakMap;function RA(s){const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",h),s.removeEventListener("error",d)},h=()=>{i(Ps(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",h),s.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&Fv.set(i,s)}).catch(()=>{}),sm.set(t,s),t}function IA(s){if(Od.has(s))return;const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",h),s.removeEventListener("error",d),s.removeEventListener("abort",d)},h=()=>{i(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",h),s.addEventListener("error",d),s.addEventListener("abort",d)});Od.set(s,t)}let Md={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return Od.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Qv.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ps(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function CA(s){Md=s(Md)}function NA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(Td(this),t,...i);return Qv.set(r,t.sort?t.sort():[t]),Ps(r)}:wA().includes(s)?function(...t){return s.apply(Td(this),t),Ps(Fv.get(this))}:function(...t){return Ps(s.apply(Td(this),t))}}function DA(s){return typeof s=="function"?NA(s):(s instanceof IDBTransaction&&IA(s),AA(s,bA())?new Proxy(s,Md):s)}function Ps(s){if(s instanceof IDBRequest)return RA(s);if(Ed.has(s))return Ed.get(s);const t=DA(s);return t!==s&&(Ed.set(s,t),sm.set(t,s)),t}const Td=s=>sm.get(s);function xA(s,t,{blocked:i,upgrade:r,blocking:l,terminated:h}={}){const d=indexedDB.open(s,t),g=Ps(d);return r&&d.addEventListener("upgradeneeded",_=>{r(Ps(d.result),_.oldVersion,_.newVersion,Ps(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),g.then(_=>{h&&_.addEventListener("close",()=>h()),l&&_.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const OA=["get","getKey","getAll","getAllKeys","count"],MA=["put","add","delete","clear"],Sd=new Map;function p_(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Sd.get(t))return Sd.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,l=MA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||OA.includes(i)))return;const h=async function(d,...g){const _=this.transaction(d,l?"readwrite":"readonly");let p=_.store;return r&&(p=p.index(g.shift())),(await Promise.all([p[i](...g),l&&_.done]))[0]};return Sd.set(t,h),h}CA(s=>({...s,get:(t,i,r)=>p_(t,i)||s.get(t,i,r),has:(t,i)=>!!p_(t,i)||s.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(kA(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function kA(s){return s.getComponent()?.type==="VERSION"}const Vd="@firebase/app",y_="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new im("@firebase/app"),PA="@firebase/app-compat",UA="@firebase/analytics-compat",LA="@firebase/analytics",zA="@firebase/app-check-compat",jA="@firebase/app-check",BA="@firebase/auth",qA="@firebase/auth-compat",HA="@firebase/database",GA="@firebase/data-connect",FA="@firebase/database-compat",QA="@firebase/functions",YA="@firebase/functions-compat",KA="@firebase/installations",XA="@firebase/installations-compat",$A="@firebase/messaging",ZA="@firebase/messaging-compat",JA="@firebase/performance",WA="@firebase/performance-compat",tb="@firebase/remote-config",eb="@firebase/remote-config-compat",nb="@firebase/storage",ib="@firebase/storage-compat",sb="@firebase/firestore",rb="@firebase/ai",ab="@firebase/firestore-compat",ob="firebase",lb="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="[DEFAULT]",ub={[Vd]:"fire-core",[PA]:"fire-core-compat",[LA]:"fire-analytics",[UA]:"fire-analytics-compat",[jA]:"fire-app-check",[zA]:"fire-app-check-compat",[BA]:"fire-auth",[qA]:"fire-auth-compat",[HA]:"fire-rtdb",[GA]:"fire-data-connect",[FA]:"fire-rtdb-compat",[QA]:"fire-fn",[YA]:"fire-fn-compat",[KA]:"fire-iid",[XA]:"fire-iid-compat",[$A]:"fire-fcm",[ZA]:"fire-fcm-compat",[JA]:"fire-perf",[WA]:"fire-perf-compat",[tb]:"fire-rc",[eb]:"fire-rc-compat",[nb]:"fire-gcs",[ib]:"fire-gcs-compat",[sb]:"fire-fst",[ab]:"fire-fst-compat",[rb]:"fire-vertex","fire-js":"fire-js",[ob]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,cb=new Map,Pd=new Map;function __(s,t){try{s.container.addComponent(t)}catch(i){$i.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function Ba(s){const t=s.name;if(Pd.has(t))return $i.debug(`There were multiple attempts to register component ${t}.`),!1;Pd.set(t,s);for(const i of Dc.values())__(i,s);for(const i of cb.values())__(i,s);return!0}function rm(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function Fn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new Ml("app","Firebase",hb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=lb;function Yv(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:kd,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw Us.create("bad-app-name",{appName:String(l)});if(i||(i=Bv()),!i)throw Us.create("no-options");const h=Dc.get(l);if(h){if(Or(i,h.options)&&Or(r,h.config))return h;throw Us.create("duplicate-app",{appName:l})}const d=new _A(l);for(const _ of Pd.values())d.addComponent(_);const g=new fb(i,r,d);return Dc.set(l,g),g}function Kv(s=kd){const t=Dc.get(s);if(!t&&s===kd&&Bv())return Yv();if(!t)throw Us.create("no-app",{appName:s});return t}function Ls(s,t,i){let r=ub[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const d=[`Unable to register library "${r}" with version "${t}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$i.warn(d.join(" "));return}Ba(new Mr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebase-heartbeat-database",mb=1,bl="firebase-heartbeat-store";let Ad=null;function Xv(){return Ad||(Ad=xA(db,mb,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(bl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Us.create("idb-open",{originalErrorMessage:s.message})})),Ad}async function gb(s){try{const i=(await Xv()).transaction(bl),r=await i.objectStore(bl).get($v(s));return await i.done,r}catch(t){if(t instanceof es)$i.warn(t.message);else{const i=Us.create("idb-get",{originalErrorMessage:t?.message});$i.warn(i.message)}}}async function v_(s,t){try{const r=(await Xv()).transaction(bl,"readwrite");await r.objectStore(bl).put(t,$v(s)),await r.done}catch(i){if(i instanceof es)$i.warn(i.message);else{const r=Us.create("idb-set",{originalErrorMessage:i?.message});$i.warn(r.message)}}}function $v(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=1024,yb=30;class _b{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Eb(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=E_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>yb){const l=Tb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){$i.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=E_(),{heartbeatsToSend:i,unsentEntries:r}=vb(this._heartbeatsCache.heartbeats),l=Nc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return $i.warn(t),""}}}function E_(){return new Date().toISOString().substring(0,10)}function vb(s,t=pb){const i=[];let r=s.slice();for(const l of s){const h=i.find(d=>d.agent===l.agent);if(h){if(h.dates.push(l.date),T_(i)>t){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),T_(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class Eb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aA()?oA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await gb(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return v_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return v_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function T_(s){return Nc(JSON.stringify({version:2,heartbeats:s})).length}function Tb(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(s){Ba(new Mr("platform-logger",t=>new VA(t),"PRIVATE")),Ba(new Mr("heartbeat",t=>new _b(t),"PRIVATE")),Ls(Vd,y_,s),Ls(Vd,y_,"esm2020"),Ls("fire-js","")}Sb("");var Ab="firebase",bb="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(Ab,bb,"app");function Zv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wb=Zv,Jv=new Ml("auth","Firebase",Zv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new im("@firebase/auth");function Rb(s,...t){xc.logLevel<=kt.WARN&&xc.warn(`Auth (${$a}): ${s}`,...t)}function vc(s,...t){xc.logLevel<=kt.ERROR&&xc.error(`Auth (${$a}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(s,...t){throw am(s,...t)}function mi(s,...t){return am(s,...t)}function Wv(s,t,i){const r={...wb(),[t]:i};return new Ml("auth","Firebase",r).create(t,{appName:s.name})}function zs(s){return Wv(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function am(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return Jv.create(s,...t)}function At(s,t,...i){if(!s)throw am(t,...i)}function Ki(s){const t="INTERNAL ASSERTION FAILED: "+s;throw vc(t),new Error(t)}function Ji(s,t){s||Ki(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){return typeof self<"u"&&self.location?.href||""}function Ib(){return S_()==="http:"||S_()==="https:"}function S_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ib()||nA()||"connection"in navigator)?navigator.onLine:!0}function Nb(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,i){this.shortDelay=t,this.longDelay=i,Ji(i>t,"Short delay should be less than long delay!"),this.isMobile=WS()||iA()}get(){return Cb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(s,t){Ji(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ob=new kl(3e4,6e4);function Xc(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Za(s,t,i,r,l={}){return e0(s,l,async()=>{let h={},d={};r&&(t==="GET"?d=r:h={body:JSON.stringify(r)});const g=Vl({key:s.config.apiKey,...d}).slice(1),_=await s._getAdditionalHeaders();_["Content-Type"]="application/json",s.languageCode&&(_["X-Firebase-Locale"]=s.languageCode);const p={method:t,headers:_,...h};return eA()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Xa(s.emulatorConfig.host)&&(p.credentials="include"),t0.fetch()(await i0(s,s.config.apiHost,i,g),p)})}async function e0(s,t,i){s._canInitEmulator=!1;const r={...Db,...t};try{const l=new Mb(s),h=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await h.json();if("needConfirmation"in d)throw fc(s,"account-exists-with-different-credential",d);if(h.ok&&!("errorMessage"in d))return d;{const g=h.ok?d.errorMessage:d.error.message,[_,p]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(s,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw fc(s,"email-already-in-use",d);if(_==="USER_DISABLED")throw fc(s,"user-disabled",d);const S=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Wv(s,S,p);Zi(s,S)}}catch(l){if(l instanceof es)throw l;Zi(s,"network-request-failed",{message:String(l)})}}async function n0(s,t,i,r,l={}){const h=await Za(s,t,i,r,l);return"mfaPendingCredential"in h&&Zi(s,"multi-factor-auth-required",{_serverResponse:h}),h}async function i0(s,t,i,r){const l=`${t}${i}?${r}`,h=s,d=h.config.emulator?om(s.config,l):`${s.config.apiScheme}://${l}`;return xb.includes(i)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(d).toString():d}class Mb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(mi(this.auth,"network-request-failed")),Ob.get())})}}function fc(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=mi(s,t,r);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(s,t){return Za(s,"POST","/v1/accounts:delete",t)}async function Oc(s,t){return Za(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function kb(s,t=!1){const i=Un(s),r=await i.getIdToken(t),l=lm(r);At(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,d=h?.sign_in_provider;return{claims:l,token:r,authTime:yl(bd(l.auth_time)),issuedAtTime:yl(bd(l.iat)),expirationTime:yl(bd(l.exp)),signInProvider:d||null,signInSecondFactor:h?.sign_in_second_factor||null}}function bd(s){return Number(s)*1e3}function lm(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return vc("JWT malformed, contained fewer than 3 sections"),null;try{const l=zv(i);return l?JSON.parse(l):(vc("Failed to decode base64 JWT payload"),null)}catch(l){return vc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function A_(s){const t=lm(s);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof es&&Pb(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Pb({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(s){const t=s.auth,i=await s.getIdToken(),r=await wl(s,Oc(t,{idToken:i}));At(r?.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const h=l.providerUserInfo?.length?s0(l.providerUserInfo):[],d=zb(s.providerData,h),g=s.isAnonymous,_=!(s.email&&l.passwordHash)&&!d?.length,p=g?_:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ld(l.createdAt,l.lastLoginAt),isAnonymous:p};Object.assign(s,S)}async function Lb(s){const t=Un(s);await Mc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function zb(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function s0(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(s,t){const i=await e0(s,{},async()=>{const r=Vl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=s.config,d=await i0(s,l,"/v1/token",`key=${h}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:r};return s.emulatorConfig&&Xa(s.emulatorConfig.host)&&(_.credentials="include"),t0.fetch()(d,_)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Bb(s,t){return Za(s,"POST","/v2/accounts:revokeToken",Xc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):A_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){At(t.length!==0,"internal-error");const i=A_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:l,expiresIn:h}=await jb(t,i);this.updateTokensAndExpiration(r,l,Number(h))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:l,expirationTime:h}=i,d=new Ua;return r&&(At(typeof r=="string","internal-error",{appName:t}),d.refreshToken=r),l&&(At(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),h&&(At(typeof h=="number","internal-error",{appName:t}),d.expirationTime=h),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(s,t){At(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Qn{constructor({uid:t,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new Ub(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ld(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await wl(this,this.stsTokenManager.getToken(this.auth,t));return At(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return kb(this,t)}reload(){return Lb(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Qn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await Mc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(zs(this.auth));const t=await this.getIdToken();return await wl(this,Vb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,l=i.email??void 0,h=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,_=i._redirectEventId??void 0,p=i.createdAt??void 0,S=i.lastLoginAt??void 0,{uid:I,emailVerified:D,isAnonymous:H,providerData:K,stsTokenManager:nt}=i;At(I&&nt,t,"internal-error");const J=Ua.fromJSON(this.name,nt);At(typeof I=="string",t,"internal-error"),Ds(r,t.name),Ds(l,t.name),At(typeof D=="boolean",t,"internal-error"),At(typeof H=="boolean",t,"internal-error"),Ds(h,t.name),Ds(d,t.name),Ds(g,t.name),Ds(_,t.name),Ds(p,t.name),Ds(S,t.name);const gt=new Qn({uid:I,auth:t,email:l,emailVerified:D,displayName:r,isAnonymous:H,photoURL:d,phoneNumber:h,tenantId:g,stsTokenManager:J,createdAt:p,lastLoginAt:S});return K&&Array.isArray(K)&&(gt.providerData=K.map(mt=>({...mt}))),_&&(gt._redirectEventId=_),gt}static async _fromIdTokenResponse(t,i,r=!1){const l=new Ua;l.updateFromServerResponse(i);const h=new Qn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await Mc(h),h}static async _fromGetAccountInfoResponse(t,i,r){const l=i.users[0];At(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?s0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!h?.length,g=new Ua;g.updateFromIdToken(r);const _=new Qn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),p={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Ld(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(_,p),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;function Xi(s){Ji(s instanceof Function,"Expected a class definition");let t=b_.get(s);return t?(Ji(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,b_.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}r0.type="NONE";const w_=r0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(s,t,i){return`firebase:${s}:${t}:${i}`}class La{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:l,name:h}=this.auth;this.fullUserKey=Ec(this.userKey,l.apiKey,h),this.fullPersistenceKey=Ec("persistence",l.apiKey,h),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Oc(this.auth,{idToken:t}).catch(()=>{});return i?Qn._fromGetAccountInfoResponse(this.auth,i,t):null}return Qn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new La(Xi(w_),t,r);const l=(await Promise.all(i.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let h=l[0]||Xi(w_);const d=Ec(r,t.config.apiKey,t.name);let g=null;for(const p of i)try{const S=await p._get(d);if(S){let I;if(typeof S=="string"){const D=await Oc(t,{idToken:S}).catch(()=>{});if(!D)break;I=await Qn._fromGetAccountInfoResponse(t,D,S)}else I=Qn._fromJSON(t,S);p!==h&&(g=I),h=p;break}}catch{}const _=l.filter(p=>p._shouldAllowMigration);return!h._shouldAllowMigration||!_.length?new La(h,t,r):(h=_[0],g&&await h._set(d,g.toJSON()),await Promise.all(i.map(async p=>{if(p!==h)try{await p._remove(d)}catch{}})),new La(h,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(u0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(a0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(h0(t))return"Blackberry";if(f0(t))return"Webos";if(o0(t))return"Safari";if((t.includes("chrome/")||l0(t))&&!t.includes("edge/"))return"Chrome";if(c0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function a0(s=rn()){return/firefox\//i.test(s)}function o0(s=rn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function l0(s=rn()){return/crios\//i.test(s)}function u0(s=rn()){return/iemobile/i.test(s)}function c0(s=rn()){return/android/i.test(s)}function h0(s=rn()){return/blackberry/i.test(s)}function f0(s=rn()){return/webos/i.test(s)}function um(s=rn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qb(s=rn()){return um(s)&&!!window.navigator?.standalone}function Hb(){return sA()&&document.documentMode===10}function d0(s=rn()){return um(s)||c0(s)||f0(s)||h0(s)||/windows phone/i.test(s)||u0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(s,t=[]){let i;switch(s){case"Browser":i=R_(rn());break;case"Worker":i=`${R_(rn())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${$a}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=h=>new Promise((d,g)=>{try{const _=t(h);d(_)}catch(_){g(_)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(s,t={}){return Za(s,"GET","/v2/passwordPolicy",Xc(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=6;class Yb{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??Qb,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,i,r,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I_(this),this.idTokenSubscription=new I_(this),this.beforeStateQueue=new Gb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Xi(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await La.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Oc(this,{idToken:t}),r=await Qn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Fn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,d=r?._redirectEventId,g=await this.tryRedirectSignIn(t);(!h||h===d)&&g?.user&&(r=g.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Mc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Nb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fn(this.app))return Promise.reject(zs(this));const i=t?Un(t):null;return i&&At(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fn(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Fb(this),i=new Yb(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ml("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bb(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Xi(t)||this._popupRedirectResolver;At(i,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Xi(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,l){if(this._deleted)return()=>{};const h=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(g,this,"internal-error"),g.then(()=>{d||h(this.currentUser)}),typeof i=="function"){const _=t.addObserver(i,r,l);return()=>{d=!0,_()}}else{const _=t.addObserver(i);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=m0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Rb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function $c(s){return Un(s)}class I_{constructor(t){this.auth=t,this.observer=null,this.addObserver=fA(i=>this.observer=i)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xb(s){cm=s}function $b(s){return cm.loadJS(s)}function Zb(){return cm.gapiScript}function Jb(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(s,t){const i=rm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),h=i.getOptions();if(Or(h,t??{}))return l;Zi(l,"already-initialized")}return i.initialize({options:t})}function t1(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Xi);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function e1(s,t,i){const r=$c(s);At(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,h=g0(t),{host:d,port:g}=n1(t),_=g===null?"":`:${g}`,p={url:`${h}//${d}${_}/`},S=Object.freeze({host:d,port:g,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){At(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),At(Or(p,r.config.emulator)&&Or(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,Xa(d)?(Hv(`${h}//${d}${_}`),Gv("Auth",!0)):i1()}function g0(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function n1(s){const t=g0(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const h=l[1];return{host:h,port:C_(r.substr(h.length+1))}}else{const[h,d]=r.split(":");return{host:h,port:C_(d)}}}function C_(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function i1(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Ki("not implemented")}_getIdTokenResponse(t){return Ki("not implemented")}_linkToIdToken(t,i){return Ki("not implemented")}_getReauthenticationResolver(t){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(s,t){return n0(s,"POST","/v1/accounts:signInWithIdp",Xc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="http://localhost";class Vr extends p0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Vr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Zi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...h}=i;if(!r||!l)return null;const d=new Vr(r,l);return d.idToken=h.idToken||void 0,d.accessToken=h.accessToken||void 0,d.secret=h.secret,d.nonce=h.nonce,d.pendingToken=h.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return za(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,za(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,za(t,i)}buildRequest(){const t={requestUri:s1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Vl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends y0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Pl{constructor(){super("facebook.com")}static credential(t){return Vr._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xs.credential(t.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Vr._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return Os.credential(i,r)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Pl{constructor(){super("github.com")}static credential(t){return Vr._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ms.credentialFromTaggedObject(t)}static credentialFromError(t){return Ms.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ms.credential(t.oauthAccessToken)}catch{return null}}}Ms.GITHUB_SIGN_IN_METHOD="github.com";Ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Pl{constructor(){super("twitter.com")}static credential(t,i){return Vr._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Vs.credentialFromTaggedObject(t)}static credentialFromError(t){return Vs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return Vs.credential(i,r)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(s,t){return n0(s,"POST","/v1/accounts:signUp",Xc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,l=!1){const h=await Qn._fromIdTokenResponse(t,r,l),d=N_(r);return new Hs({user:h,providerId:d,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const l=N_(r);return new Hs({user:t,providerId:l,_tokenResponse:r,operationType:i})}}function N_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(s){if(Fn(s.app))return Promise.reject(zs(s));const t=$c(s);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Hs({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await r1(t,{returnSecureToken:!0}),r=await Hs._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends es{constructor(t,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Vc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,l){return new Vc(t,i,r,l)}}function _0(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Vc._fromErrorAndOperation(s,h,t,r):h})}async function o1(s,t,i=!1){const r=await wl(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return Hs._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(s,t,i=!1){const{auth:r}=s;if(Fn(r.app))return Promise.reject(zs(r));const l="reauthenticate";try{const h=await wl(s,_0(r,l,t,s),i);At(h.idToken,r,"internal-error");const d=lm(h.idToken);At(d,r,"internal-error");const{sub:g}=d;return At(s.uid===g,r,"user-mismatch"),Hs._forOperation(s,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&Zi(r,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(s,t,i=!1){if(Fn(s.app))return Promise.reject(zs(s));const r="signIn",l=await _0(s,r,t),h=await Hs._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(h.user),h}function c1(s,t,i,r){return Un(s).onIdTokenChanged(t,i,r)}function h1(s,t,i){return Un(s).beforeAuthStateChanged(t,i)}function f1(s,t,i,r){return Un(s).onAuthStateChanged(t,i,r)}const kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(kc,"1"),this.storage.removeItem(kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1e3,m1=10;class E0 extends v0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&t(i,l,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,_)=>{this.notifyListeners(d,_)});return}const r=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!i&&this.localCache[r]===d||this.notifyListeners(r,d)},h=this.storage.getItem(r);Hb()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,m1):l()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}E0.type="LOCAL";const g1=E0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends v0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}T0.type="SESSION";const S0=T0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const r=new Zc(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:l,data:h}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const g=Array.from(d).map(async p=>p(i.origin,h)),_=await p1(g);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:_})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,d;return new Promise((g,_)=>{const p=hm("",20);l.port1.start();const S=setTimeout(()=>{_(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(I){const D=I;if(D.data.eventId===p)switch(D.data.status){case"ack":clearTimeout(S),h=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),g(D.data.response);break;default:clearTimeout(S),clearTimeout(h),_(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:p,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function _1(s){gi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function v1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E1(){return navigator?.serviceWorker?.controller||null}function T1(){return A0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="firebaseLocalStorageDb",S1=1,Pc="firebaseLocalStorage",w0="fbase_key";class Ul{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Jc(s,t){return s.transaction([Pc],t?"readwrite":"readonly").objectStore(Pc)}function A1(){const s=indexedDB.deleteDatabase(b0);return new Ul(s).toPromise()}function zd(){const s=indexedDB.open(b0,S1);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Pc,{keyPath:w0})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Pc)?t(r):(r.close(),await A1(),t(await zd()))})})}async function D_(s,t,i){const r=Jc(s,!0).put({[w0]:t,value:i});return new Ul(r).toPromise()}async function b1(s,t){const i=Jc(s,!1).get(t),r=await new Ul(i).toPromise();return r===void 0?null:r.value}function x_(s,t){const i=Jc(s,!0).delete(t);return new Ul(i).toPromise()}const w1=800,R1=3;class R0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zd(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>R1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(T1()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await v1(),!this.activeServiceWorker)return;this.sender=new y1(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||E1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await zd();return await D_(t,kc,"1"),await x_(t,kc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>D_(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>b1(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>x_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=Jc(l,!1).getAll();return new Ul(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R0.type="LOCAL";const I1=R0;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(s,t){return t?Xi(t):(At(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends p0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return za(t,this._buildIdpRequest())}_linkToIdToken(t,i){return za(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return za(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function N1(s){return u1(s.auth,new fm(s),s.bypassAuthState)}function D1(s){const{auth:t,user:i}=s;return At(i,t,"internal-error"),l1(i,new fm(s),s.bypassAuthState)}async function x1(s){const{auth:t,user:i}=s;return At(i,t,"internal-error"),o1(i,new fm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,i,r,l,h=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:l,tenantId:h,error:d,type:g}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:i,sessionId:r,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return N1;case"linkViaPopup":case"linkViaRedirect":return x1;case"reauthViaPopup":case"reauthViaRedirect":return D1;default:Zi(this.auth,"internal-error")}}resolve(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new kl(2e3,1e4);class Pa extends I0{constructor(t,i,r,l,h){super(t,i,l,h),this.provider=r,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const t=hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,O1.get())};t()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="pendingRedirect",Tc=new Map;class V1 extends I0{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=Tc.get(this.auth._key());if(!t){try{const r=await k1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}Tc.set(this.auth._key(),t)}return this.bypassAuthState||Tc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k1(s,t){const i=L1(t),r=U1(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function P1(s,t){Tc.set(s._key(),t)}function U1(s){return Xi(s._redirectPersistence)}function L1(s){return Ec(M1,s.config.apiKey,s.name)}async function z1(s,t,i=!1){if(Fn(s.app))return Promise.reject(zs(s));const r=$c(s),l=C1(r,t),d=await new V1(r,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=600*1e3;class B1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!q1(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!C0(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError(mi(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=j1&&this.cachedEventUids.clear(),this.cachedEventUids.has(O_(t))}saveEventToCache(t){this.cachedEventUids.add(O_(t)),this.lastProcessedEventTime=Date.now()}}function O_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function C0({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function q1(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(s,t={}){return Za(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F1=/^https?/;async function Q1(s){if(s.config.emulator)return;const{authorizedDomains:t}=await H1(s);for(const i of t)try{if(Y1(i))return}catch{}Zi(s,"unauthorized-domain")}function Y1(s){const t=Ud(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===r}if(!F1.test(i))return!1;if(G1.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new kl(3e4,6e4);function M_(){const s=gi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function X1(s){return new Promise((t,i)=>{function r(){M_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{M_(),i(mi(s,"network-request-failed"))},timeout:K1.get()})}if(gi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(gi().gapi?.load)r();else{const l=Jb("iframefcb");return gi()[l]=()=>{gapi.load?r():i(mi(s,"network-request-failed"))},$b(`${Zb()}?onload=${l}`).catch(h=>i(h))}}).catch(t=>{throw Sc=null,t})}let Sc=null;function $1(s){return Sc=Sc||X1(s),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new kl(5e3,15e3),J1="__/auth/iframe",W1="emulator/auth/iframe",tw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ew=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nw(s){const t=s.config;At(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?om(t,W1):`https://${s.config.authDomain}/${J1}`,r={apiKey:t.apiKey,appName:s.name,v:$a},l=ew.get(s.config.apiHost);l&&(r.eid=l);const h=s._getFrameworks();return h.length&&(r.fw=h.join(",")),`${i}?${Vl(r).slice(1)}`}async function iw(s){const t=await $1(s),i=gi().gapi;return At(i,s,"internal-error"),t.open({where:document.body,url:nw(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tw,dontclear:!0},r=>new Promise(async(l,h)=>{await r.restyle({setHideOnLeave:!1});const d=mi(s,"network-request-failed"),g=gi().setTimeout(()=>{h(d)},Z1.get());function _(){gi().clearTimeout(g),l(r)}r.ping(_).then(_,()=>{h(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rw=500,aw=600,ow="_blank",lw="http://localhost";class V_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uw(s,t,i,r=rw,l=aw){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const _={...sw,width:r.toString(),height:l.toString(),top:h,left:d},p=rn().toLowerCase();i&&(g=l0(p)?ow:i),a0(p)&&(t=t||lw,_.scrollbars="yes");const S=Object.entries(_).reduce((D,[H,K])=>`${D}${H}=${K},`,"");if(qb(p)&&g!=="_self")return cw(t||"",g),new V_(null);const I=window.open(t||"",g,S);At(I,s,"popup-blocked");try{I.focus()}catch{}return new V_(I)}function cw(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="__/auth/handler",fw="emulator/auth/handler",dw=encodeURIComponent("fac");async function k_(s,t,i,r,l,h){At(s.config.authDomain,s,"auth-domain-config-required"),At(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:$a,eventId:l};if(t instanceof y0){t.setDefaultLanguage(s.languageCode),d.providerId=t.providerId||"",hA(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[S,I]of Object.entries({}))d[S]=I}if(t instanceof Pl){const S=t.getScopes().filter(I=>I!=="");S.length>0&&(d.scopes=S.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const S of Object.keys(g))g[S]===void 0&&delete g[S];const _=await s._getAppCheckToken(),p=_?`#${dw}=${encodeURIComponent(_)}`:"";return`${mw(s)}?${Vl(g).slice(1)}${p}`}function mw({config:s}){return s.emulator?om(s,fw):`https://${s.authDomain}/${hw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class gw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S0,this._completeRedirectFn=z1,this._overrideRedirectResult=P1}async _openPopup(t,i,r,l){Ji(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await k_(t,i,r,Ud(),l);return uw(t,h,hm())}async _openRedirect(t,i,r,l){await this._originValidation(t);const h=await k_(t,i,r,Ud(),l);return _1(h),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:h}=this.eventManagers[i];return l?Promise.resolve(l):(Ji(h,"If manager is not set, promise should be"),h)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await iw(t),r=new B1(t);return i.register("authEvent",l=>(At(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(wd,{type:wd},l=>{const h=l?.[0]?.[wd];h!==void 0&&i(!!h),Zi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=Q1(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return d0()||o0()||um()}}const pw=gw;var P_="@firebase/auth",U_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vw(s){Ba(new Mr("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=r.options;At(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m0(s)},p=new Kb(r,l,h,_);return t1(p,i),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),Ba(new Mr("auth-internal",t=>{const i=$c(t.getProvider("auth").getImmediate());return(r=>new yw(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(P_,U_,_w(s)),Ls(P_,U_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=300,Tw=qv("authIdTokenMaxAge")||Ew;let L_=null;const Sw=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>Tw)return;const l=i?.token;L_!==l&&(L_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Aw(s=Kv()){const t=rm(s,"auth");if(t.isInitialized())return t.getImmediate();const i=Wb(s,{popupRedirectResolver:pw,persistence:[I1,g1,S0]}),r=qv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(r,location.origin);if(location.origin===h.origin){const d=Sw(h.toString());h1(i,d,()=>d(i.currentUser)),c1(i,g=>d(g))}}const l=jv("auth");return l&&e1(i,`http://${l}`),i}function bw(){return document.getElementsByTagName("head")?.[0]??document}Xb({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const h=mi("internal-error");h.customData=l,i(h)},r.type="text/javascript",r.charset="UTF-8",bw().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vw("Browser");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,N0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,A){function b(){}b.prototype=A.prototype,M.D=A.prototype,M.prototype=new b,M.prototype.constructor=M,M.C=function(C,O,V){for(var R=Array(arguments.length-2),de=2;de<arguments.length;de++)R[de-2]=arguments[de];return A.prototype[O].apply(C,R)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,A,b){b||(b=0);var C=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)C[O]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(O=0;16>O;++O)C[O]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=M.g[0],b=M.g[1],O=M.g[2];var V=M.g[3],R=A+(V^b&(O^V))+C[0]+3614090360&4294967295;A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+C[1]+3905402710&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+C[2]+606105819&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+C[3]+3250441966&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(V^b&(O^V))+C[4]+4118548399&4294967295,A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+C[5]+1200080426&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+C[6]+2821735955&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+C[7]+4249261313&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(V^b&(O^V))+C[8]+1770035416&4294967295,A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+C[9]+2336552879&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+C[10]+4294925233&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+C[11]+2304563134&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(V^b&(O^V))+C[12]+1804603682&4294967295,A=b+(R<<7&4294967295|R>>>25),R=V+(O^A&(b^O))+C[13]+4254626195&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(b^V&(A^b))+C[14]+2792965006&4294967295,O=V+(R<<17&4294967295|R>>>15),R=b+(A^O&(V^A))+C[15]+1236535329&4294967295,b=O+(R<<22&4294967295|R>>>10),R=A+(O^V&(b^O))+C[1]+4129170786&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+C[6]+3225465664&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+C[11]+643717713&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+C[0]+3921069994&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(b^O))+C[5]+3593408605&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+C[10]+38016083&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+C[15]+3634488961&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+C[4]+3889429448&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(b^O))+C[9]+568446438&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+C[14]+3275163606&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+C[3]+4107603335&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+C[8]+1163531501&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(b^O))+C[13]+2850285829&4294967295,A=b+(R<<5&4294967295|R>>>27),R=V+(b^O&(A^b))+C[2]+4243563512&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^b&(V^A))+C[7]+1735328473&4294967295,O=V+(R<<14&4294967295|R>>>18),R=b+(V^A&(O^V))+C[12]+2368359562&4294967295,b=O+(R<<20&4294967295|R>>>12),R=A+(b^O^V)+C[5]+4294588738&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+C[8]+2272392833&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+C[11]+1839030562&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+C[14]+4259657740&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(b^O^V)+C[1]+2763975236&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+C[4]+1272893353&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+C[7]+4139469664&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+C[10]+3200236656&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(b^O^V)+C[13]+681279174&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+C[0]+3936430074&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+C[3]+3572445317&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+C[6]+76029189&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(b^O^V)+C[9]+3654602809&4294967295,A=b+(R<<4&4294967295|R>>>28),R=V+(A^b^O)+C[12]+3873151461&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^b)+C[15]+530742520&4294967295,O=V+(R<<16&4294967295|R>>>16),R=b+(O^V^A)+C[2]+3299628645&4294967295,b=O+(R<<23&4294967295|R>>>9),R=A+(O^(b|~V))+C[0]+4096336452&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+C[7]+1126891415&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+C[14]+2878612391&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+C[5]+4237533241&4294967295,b=O+(R<<21&4294967295|R>>>11),R=A+(O^(b|~V))+C[12]+1700485571&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+C[3]+2399980690&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+C[10]+4293915773&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+C[1]+2240044497&4294967295,b=O+(R<<21&4294967295|R>>>11),R=A+(O^(b|~V))+C[8]+1873313359&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+C[15]+4264355552&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+C[6]+2734768916&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+C[13]+1309151649&4294967295,b=O+(R<<21&4294967295|R>>>11),R=A+(O^(b|~V))+C[4]+4149444226&4294967295,A=b+(R<<6&4294967295|R>>>26),R=V+(b^(A|~O))+C[11]+3174756917&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~b))+C[2]+718787259&4294967295,O=V+(R<<15&4294967295|R>>>17),R=b+(V^(O|~A))+C[9]+3951481745&4294967295,M.g[0]=M.g[0]+A&4294967295,M.g[1]=M.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+V&4294967295}r.prototype.u=function(M,A){A===void 0&&(A=M.length);for(var b=A-this.blockSize,C=this.B,O=this.h,V=0;V<A;){if(O==0)for(;V<=b;)l(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<A;)if(C[O++]=M.charCodeAt(V++),O==this.blockSize){l(this,C),O=0;break}}else for(;V<A;)if(C[O++]=M[V++],O==this.blockSize){l(this,C),O=0;break}}this.h=O,this.o+=A},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var A=1;A<M.length-8;++A)M[A]=0;var b=8*this.o;for(A=M.length-8;A<M.length;++A)M[A]=b&255,b/=256;for(this.u(M),M=Array(16),A=b=0;4>A;++A)for(var C=0;32>C;C+=8)M[b++]=this.g[A]>>>C&255;return M};function h(M,A){var b=g;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=A(M)}function d(M,A){this.h=A;for(var b=[],C=!0,O=M.length-1;0<=O;O--){var V=M[O]|0;C&&V==A||(b[O]=V,C=!1)}this.g=b}var g={};function _(M){return-128<=M&&128>M?h(M,function(A){return new d([A|0],0>A?-1:0)}):new d([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return I;if(0>M)return J(p(-M));for(var A=[],b=1,C=0;M>=b;C++)A[C]=M/b|0,b*=4294967296;return new d(A,0)}function S(M,A){if(M.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(M.charAt(0)=="-")return J(S(M.substring(1),A));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=p(Math.pow(A,8)),C=I,O=0;O<M.length;O+=8){var V=Math.min(8,M.length-O),R=parseInt(M.substring(O,O+V),A);8>V?(V=p(Math.pow(A,V)),C=C.j(V).add(p(R))):(C=C.j(b),C=C.add(p(R)))}return C}var I=_(0),D=_(1),H=_(16777216);s=d.prototype,s.m=function(){if(nt(this))return-J(this).m();for(var M=0,A=1,b=0;b<this.g.length;b++){var C=this.i(b);M+=(0<=C?C:4294967296+C)*A,A*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(K(this))return"0";if(nt(this))return"-"+J(this).toString(M);for(var A=p(Math.pow(M,6)),b=this,C="";;){var O=zt(b,A).g;b=gt(b,O.j(A));var V=((0<b.g.length?b.g[0]:b.h)>>>0).toString(M);if(b=O,K(b))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function K(M){if(M.h!=0)return!1;for(var A=0;A<M.g.length;A++)if(M.g[A]!=0)return!1;return!0}function nt(M){return M.h==-1}s.l=function(M){return M=gt(this,M),nt(M)?-1:K(M)?0:1};function J(M){for(var A=M.g.length,b=[],C=0;C<A;C++)b[C]=~M.g[C];return new d(b,~M.h).add(D)}s.abs=function(){return nt(this)?J(this):this},s.add=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],C=0,O=0;O<=A;O++){var V=C+(this.i(O)&65535)+(M.i(O)&65535),R=(V>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);C=R>>>16,V&=65535,R&=65535,b[O]=R<<16|V}return new d(b,b[b.length-1]&-2147483648?-1:0)};function gt(M,A){return M.add(J(A))}s.j=function(M){if(K(this)||K(M))return I;if(nt(this))return nt(M)?J(this).j(J(M)):J(J(this).j(M));if(nt(M))return J(this.j(J(M)));if(0>this.l(H)&&0>M.l(H))return p(this.m()*M.m());for(var A=this.g.length+M.g.length,b=[],C=0;C<2*A;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var O=0;O<M.g.length;O++){var V=this.i(C)>>>16,R=this.i(C)&65535,de=M.i(O)>>>16,ae=M.i(O)&65535;b[2*C+2*O]+=R*ae,mt(b,2*C+2*O),b[2*C+2*O+1]+=V*ae,mt(b,2*C+2*O+1),b[2*C+2*O+1]+=R*de,mt(b,2*C+2*O+1),b[2*C+2*O+2]+=V*de,mt(b,2*C+2*O+2)}for(C=0;C<A;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=A;C<2*A;C++)b[C]=0;return new d(b,0)};function mt(M,A){for(;(M[A]&65535)!=M[A];)M[A+1]+=M[A]>>>16,M[A]&=65535,A++}function ct(M,A){this.g=M,this.h=A}function zt(M,A){if(K(A))throw Error("division by zero");if(K(M))return new ct(I,I);if(nt(M))return A=zt(J(M),A),new ct(J(A.g),J(A.h));if(nt(A))return A=zt(M,J(A)),new ct(J(A.g),A.h);if(30<M.g.length){if(nt(M)||nt(A))throw Error("slowDivide_ only works with positive integers.");for(var b=D,C=A;0>=C.l(M);)b=_t(b),C=_t(C);var O=It(b,1),V=It(C,1);for(C=It(C,2),b=It(b,2);!K(C);){var R=V.add(C);0>=R.l(M)&&(O=O.add(b),V=R),C=It(C,1),b=It(b,1)}return A=gt(M,O.j(A)),new ct(O,A)}for(O=I;0<=M.l(A);){for(b=Math.max(1,Math.floor(M.m()/A.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=p(b),R=V.j(A);nt(R)||0<R.l(M);)b-=C,V=p(b),R=V.j(A);K(V)&&(V=D),O=O.add(V),M=gt(M,R)}return new ct(O,M)}s.A=function(M){return zt(this,M).h},s.and=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],C=0;C<A;C++)b[C]=this.i(C)&M.i(C);return new d(b,this.h&M.h)},s.or=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],C=0;C<A;C++)b[C]=this.i(C)|M.i(C);return new d(b,this.h|M.h)},s.xor=function(M){for(var A=Math.max(this.g.length,M.g.length),b=[],C=0;C<A;C++)b[C]=this.i(C)^M.i(C);return new d(b,this.h^M.h)};function _t(M){for(var A=M.g.length+1,b=[],C=0;C<A;C++)b[C]=M.i(C)<<1|M.i(C-1)>>>31;return new d(b,M.h)}function It(M,A){var b=A>>5;A%=32;for(var C=M.g.length-b,O=[],V=0;V<C;V++)O[V]=0<A?M.i(V+b)>>>A|M.i(V+b+1)<<32-A:M.i(V+b);return new d(O,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,N0=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=S,js=d}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D0,fl,x0,Ac,jd,O0,M0,V0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=i(this);function l(u,m){if(m)t:{var y=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var P=u[T];if(!(P in y))break t;y=y[P]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&t(y,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var y=0,T=!1,P={next:function(){if(!T&&y<u.length){var q=y++;return{value:m(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}l("Array.prototype.values",function(u){return u||function(){return h(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function _(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function S(u,m,y){return u.call.apply(u.bind,arguments)}function I(u,m,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,T),u.apply(m,P)}}return function(){return u.apply(m,arguments)}}function D(u,m,y){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:I,D.apply(null,arguments)}function H(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function K(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,P,q){for(var et=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)et[jt-2]=arguments[jt];return m.prototype[P].apply(T,et)}}function nt(u){const m=u.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function J(u,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(_(T)){const P=u.length||0,q=T.length||0;u.length=P+q;for(let et=0;et<q;et++)u[P+et]=T[et]}else u.push(T)}}class gt{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function mt(u){return/^[\s\xa0]*$/.test(u)}function ct(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function zt(u){return zt[" "](u),u}zt[" "]=function(){};var _t=ct().indexOf("Gecko")!=-1&&!(ct().toLowerCase().indexOf("webkit")!=-1&&ct().indexOf("Edge")==-1)&&!(ct().indexOf("Trident")!=-1||ct().indexOf("MSIE")!=-1)&&ct().indexOf("Edge")==-1;function It(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function M(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function A(u){const m={};for(const y in u)m[y]=u[y];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,m){let y,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(y in T)u[y]=T[y];for(let q=0;q<b.length;q++)y=b[q],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function O(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function V(u){g.setTimeout(()=>{throw u},0)}function R(){var u=Vt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class de{constructor(){this.h=this.g=null}add(m,y){const T=ae.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var ae=new gt(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,lt=!1,Vt=new de,N=()=>{const u=g.Promise.resolve(void 0);tt=()=>{u.then($)}};var $=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){V(y)}var m=ae;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}lt=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ht=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return u}();function Nt(u,m){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(_t){t:{try{zt(m.nodeName);var P=!0;break t}catch{}P=!1}P||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Tt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Nt.aa.h.call(this)}}K(Nt,W);var Tt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),Xt=0;function at(u,m,y,T,P){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=P,this.key=++Xt,this.da=this.fa=!1}function wt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vt(u){this.src=u,this.g={},this.h=0}vt.prototype.add=function(u,m,y,T,P){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var et=$t(u,m,T,P);return-1<et?(m=u[et],y||(m.fa=!1)):(m=new at(m,this.src,q,!!T,P),m.fa=y,u.push(m)),m};function Lt(u,m){var y=m.type;if(y in u.g){var T=u.g[y],P=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=P)&&Array.prototype.splice.call(T,P,1),q&&(wt(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function $t(u,m,y,T){for(var P=0;P<u.length;++P){var q=u[P];if(!q.da&&q.listener==m&&q.capture==!!y&&q.ha==T)return P}return-1}var Gt="closure_lm_"+(1e6*Math.random()|0),ye={};function Kn(u,m,y,T,P){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Kn(u,m[q],y,T,P);return null}return y=Hl(y),u&&u[Se]?u.K(m,y,p(T)?!!T.capture:!1,P):He(u,m,y,!1,T,P)}function He(u,m,y,T,P,q){if(!m)throw Error("Invalid event type");var et=p(P)?!!P.capture:!!P,jt=Br(u);if(jt||(u[Gt]=jt=new vt(u)),y=jt.add(m,y,T,et,q),y.proxy)return y;if(T=no(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)ht||(P=et),P===void 0&&(P=!1),u.addEventListener(m.toString(),T,P);else if(u.attachEvent)u.attachEvent(Ln(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function no(){function u(y){return m.call(u.src,u.listener,y)}const m=dh;return u}function Xn(u,m,y,T,P){if(Array.isArray(m))for(var q=0;q<m.length;q++)Xn(u,m[q],y,T,P);else T=p(T)?!!T.capture:!!T,y=Hl(y),u&&u[Se]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],y=$t(q,y,T,P),-1<y&&(wt(q[y]),Array.prototype.splice.call(q,y,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Br(u))&&(m=u.g[m.toString()],u=-1,m&&(u=$t(m,y,T,P)),(y=-1<u?m[u]:null)&&$n(y))}function $n(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Se])Lt(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(Ln(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=Br(m))?(Lt(y,u),y.h==0&&(y.src=null,m[Gt]=null)):wt(u)}}}function Ln(u){return u in ye?ye[u]:ye[u]="on"+u}function dh(u,m){if(u.da)u=!0;else{m=new Nt(m,this);var y=u.listener,T=u.ha||u.src;u.fa&&$n(u),u=y.call(T,m)}return u}function Br(u){return u=u[Gt],u instanceof vt?u:null}var io="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hl(u){return typeof u=="function"?u:(u[io]||(u[io]=function(m){return u.handleEvent(m)}),u[io])}function me(){it.call(this),this.i=new vt(this),this.M=this,this.F=null}K(me,it),me.prototype[Se]=!0,me.prototype.removeEventListener=function(u,m,y,T){Xn(this,u,m,y,T)};function Zt(u,m){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new W(m,u);else if(m instanceof W)m.target=m.target||u;else{var P=m;m=new W(T,u),C(m,P)}if(P=!0,y)for(var q=y.length-1;0<=q;q--){var et=m.g=y[q];P=mn(et,T,!0,m)&&P}if(et=m.g=u,P=mn(et,T,!0,m)&&P,P=mn(et,T,!1,m)&&P,y)for(q=0;q<y.length;q++)et=m.g=y[q],P=mn(et,T,!1,m)&&P}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],T=0;T<y.length;T++)wt(y[T]);delete u.g[m],u.h--}}this.F=null},me.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},me.prototype.L=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function mn(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,q=0;q<m.length;++q){var et=m[q];if(et&&!et.da&&et.capture==y){var jt=et.listener,De=et.ha||et.src;et.fa&&Lt(u.i,et),P=jt.call(De,T)!==!1&&P}}return P&&!T.defaultPrevented}function Je(u,m,y){if(typeof u=="function")y&&(u=D(u,y));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Gl(u){u.g=Je(()=>{u.g=null,u.i&&(u.i=!1,Gl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class mh extends it{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Gl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(u){it.call(this),this.h=u,this.g={}}K($s,it);var Zs=[];function Js(u){It(u.g,function(m,y){this.g.hasOwnProperty(y)&&$n(m)},u),u.g={}}$s.prototype.N=function(){$s.aa.N.call(this),Js(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=g.JSON.stringify,qr=g.JSON.parse,Ws=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function so(){}so.prototype.h=null;function ro(u){return u.h||(u.h=u.i())}function ao(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bi(){W.call(this,"d")}K(bi,W);function oo(){W.call(this,"c")}K(oo,W);var Zn={},lo=null;function ns(){return lo=lo||new me}Zn.La="serverreachability";function Hr(u){W.call(this,Zn.La,u)}K(Hr,W);function is(u){const m=ns();Zt(m,new Hr(m))}Zn.STAT_EVENT="statevent";function Fl(u,m){W.call(this,Zn.STAT_EVENT,u),this.stat=m}K(Fl,W);function ue(u){const m=ns();Zt(m,new Fl(m,u))}Zn.Ma="timingevent";function Ne(u,m){W.call(this,Zn.Ma,u),this.size=m}K(Ne,W);function Ae(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function uo(u,m,y,T,P,q){u.info(function(){if(u.g)if(q)for(var et="",jt=q.split("&"),De=0;De<jt.length;De++){var Bt=jt[De].split("=");if(1<Bt.length){var Le=Bt[0];Bt=Bt[1];var xe=Le.split("_");et=2<=xe.length&&xe[1]=="type"?et+(Le+"="+Bt+"&"):et+(Le+"=redacted&")}}else et=null;else et=q;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+m+`
`+y+`
`+et})}function gh(u,m,y,T,P,q,et){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+m+`
`+y+`
`+q+" "+et})}function ss(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+tr(u,y)+(T?" "+T:"")})}function Ql(u,m){u.info(function(){return"TIMEOUT: "+m})}An.prototype.info=function(){};function tr(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var P=T[1];if(Array.isArray(P)&&!(1>P.length)){var q=P[0];if(q!="noop"&&q!="stop"&&q!="close")for(var et=1;et<P.length;et++)P[et]=""}}}}return zn(y)}catch{return m}}var rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function Wn(){}K(Wn,so),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},Jn=new Wn;function an(u,m,y,T){this.j=u,this.i=m,this.l=y,this.R=T||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var co={},Gr={};function jn(u,m,y){u.L=1,u.v=rr(gn(m)),u.m=y,u.P=!0,Ri(u,null)}function Ri(u,m){u.F=Date.now(),er(u),u.A=gn(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),yo(y.i,"t",T),u.C=0,y=u.j.J,u.h=new _e,u.g=lu(u.j,y?m:null,!u.m),0<u.O&&(u.M=new mh(D(u.Y,u,u.g),u.O)),m=u.U,y=u.g,T=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(Zs[0]=P.toString()),P=Zs);for(var q=0;q<P.length;q++){var et=Kn(y,P[q],T||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),is(),uo(u.i,u.u,u.A,u.l,u.R,u.m)}an.prototype.ca=function(u){u=u.target;const m=this.M;m&&In(u)==3?m.j():this.Y(u)},an.prototype.Y=function(u){try{if(u==this.g)t:{const xe=In(this.g);var m=this.g.Ba();const Vi=this.g.Z();if(!(3>xe)&&(xe!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||xe!=4||m==7||(m==8||0>=Vi?is(3):is(2)),as(this);var y=this.g.Z();this.X=y;e:if(Yl(this)){var T=tu(this.g);u="";var P=T.length,q=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ge(this),ti(this);var et="";break e}this.h.i=new g.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(q&&m==P-1)});T.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=y==200,gh(this.i,this.u,this.A,this.l,this.R,xe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var jt,De=this.g;if((jt=De.g?De.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(jt)){var Bt=jt;break e}}Bt=null}if(y=Bt)ss(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nr(this,y);else{this.o=!1,this.s=3,ue(12),Ge(this),ti(this);break t}}if(this.P){y=!0;let Fe;for(;!this.J&&this.C<et.length;)if(Fe=Kl(this,et),Fe==Gr){xe==4&&(this.s=4,ue(14),y=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Fe==co){this.s=4,ue(15),ss(this.i,this.l,et,"[Invalid Chunk]"),y=!1;break}else ss(this.i,this.l,Fe,null),nr(this,Fe);if(Yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||et.length!=0||this.h.h||(this.s=1,ue(16),y=!1),this.o=this.o&&y,!y)ss(this.i,this.l,et,"[Invalid Chunked Response]"),Ge(this),ti(this);else if(0<et.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),dr(Le),Le.M=!0,ue(11))}}else ss(this.i,this.l,et,null),nr(this,et);xe==4&&Ge(this),this.o&&!this.J&&(xe==4?ru(this.j,this):(this.o=!1,er(this)))}else Eh(this.g),y==400&&0<et.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),Ge(this),ti(this)}}}catch{}finally{}};function Yl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kl(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Gr:(y=Number(m.substring(y,T)),isNaN(y)?co:(T+=1,T+y>m.length?Gr:(m=m.slice(T,T+y),u.C=T+y,m)))}an.prototype.cancel=function(){this.J=!0,Ge(this)};function er(u){u.S=Date.now()+u.I,Xl(u,u.I)}function Xl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ae(D(u.ba,u),m)}function as(u){u.B&&(g.clearTimeout(u.B),u.B=null)}an.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ql(this.i,this.A),this.L!=2&&(is(),ue(17)),Ge(this),this.s=2,ti(this)):Xl(this,this.S-u)};function ti(u){u.j.G==0||u.J||ru(u.j,u)}function Ge(u){as(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Js(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function nr(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||ho(y.h,u))){if(!u.K&&ho(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)na(y),ta(y);else break t;So(y),ue(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ae(D(y.Za,y),6e3));if(1>=Qr(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Mi(y,11)}else if((u.K||y.g==u)&&na(y),!mt(m))for(P=y.Da.g.parse(m),m=0;m<P.length;m++){let Bt=P[m];if(y.T=Bt[0],Bt=Bt[1],y.G==2)if(Bt[0]=="c"){y.K=Bt[1],y.ia=Bt[2];const Le=Bt[3];Le!=null&&(y.la=Le,y.j.info("VER="+y.la));const xe=Bt[4];xe!=null&&(y.Aa=xe,y.j.info("SVER="+y.Aa));const Vi=Bt[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(T=1.5*Vi,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Fe=u.g;if(Fe){const oi=Fe.g?Fe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var q=T.h;q.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Yr(q,q.h),q.h=null))}if(T.D){const bo=Fe.g?Fe.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(T.ya=bo,te(T.I,T.D,bo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var et=u;if(T.qa=ou(T,T.J?T.ia:null,T.W),et.K){on(T.h,et);var jt=et,De=T.L;De&&(jt.I=De),jt.B&&(as(jt),er(jt)),T.g=et}else iu(T);0<y.i.length&&ea(y)}else Bt[0]!="stop"&&Bt[0]!="close"||Mi(y,7);else y.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Mi(y,7):Eo(y):Bt[0]!="noop"&&y.l&&y.l.ta(Bt),y.v=0)}}is(4)}catch{}}var $l=class{constructor(u,m){this.g=u,this.map=m}};function Ii(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qr(u){return u.h?1:u.g?u.g.size:0}function ho(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Yr(u,m){u.g?u.g.add(m):u.h=m}function on(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ii.prototype.cancel=function(){if(this.i=fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function fo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return nt(u.i)}function ph(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(_(u)){for(var m=[],y=u.length,T=0;T<y;T++)m.push(u[T]);return m}m=[],y=0;for(T in u)m[y++]=u[T];return m}function Kr(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(_(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const T in u)m[y++]=T;return m}}}function mo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(_(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Kr(u),T=ph(u),P=T.length,q=0;q<P;q++)m.call(void 0,T[q],y&&y[q],u)}var ir=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yh(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),P=null;if(0<=T){var q=u[y].substring(0,T);P=u[y].substring(T+1)}else q=u[y];m(q,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function be(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof be){this.h=u.h,sr(this,u.j),this.o=u.o,this.g=u.g,os(this,u.s),this.l=u.l;var m=u.i,y=new Ni;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Ci(this,y),this.m=u.m}else u&&(m=String(u).match(ir))?(this.h=!1,sr(this,m[1]||"",!0),this.o=bn(m[2]||""),this.g=bn(m[3]||"",!0),os(this,m[4]),this.l=bn(m[5]||"",!0),Ci(this,m[6]||"",!0),this.m=bn(m[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}be.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ar(m,go,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ar(m,go,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(ar(y,y.charAt(0)=="/"?_h:po,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",ar(y,Xr)),u.join("")};function gn(u){return new be(u)}function sr(u,m,y){u.j=y?bn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function os(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ci(u,m,y){m instanceof Ni?(u.i=m,Jl(u.i,u.h)):(y||(m=ar(m,vh)),u.i=new Ni(m,u.h))}function te(u,m,y){u.i.set(m,y)}function rr(u){return te(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ar(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Zl),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var go=/[#\/\?@]/g,po=/[#\?:]/g,_h=/[#\?]/g,vh=/[#\?@]/g,Xr=/#/g;function Ni(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function wn(u){u.g||(u.g=new Map,u.h=0,u.i&&yh(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}s=Ni.prototype,s.add=function(u,m){wn(this),this.i=null,u=ei(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Di(u,m){wn(u),m=ei(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function xi(u,m){return wn(u),m=ei(u,m),u.g.has(m)}s.forEach=function(u,m){wn(this),this.g.forEach(function(y,T){y.forEach(function(P){u.call(m,P,T,this)},this)},this)},s.na=function(){wn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const P=u[T];for(let q=0;q<P.length;q++)y.push(m[T])}return y},s.V=function(u){wn(this);let m=[];if(typeof u=="string")xi(this,u)&&(m=m.concat(this.g.get(ei(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},s.set=function(u,m){return wn(this),this.i=null,u=ei(this,u),xi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function yo(u,m,y){Di(u,m),0<y.length&&(u.i=null,u.g.set(ei(u,m),nt(y)),u.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const q=encodeURIComponent(String(T)),et=this.V(T);for(T=0;T<et.length;T++){var P=q;et[T]!==""&&(P+="="+encodeURIComponent(String(et[T]))),u.push(P)}}return this.i=u.join("&")};function ei(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Jl(u,m){m&&!u.j&&(wn(u),u.i=null,u.g.forEach(function(y,T){var P=T.toLowerCase();T!=P&&(Di(this,T),yo(this,P,y))},u)),u.j=m}function or(u,m){const y=new An;if(g.Image){const T=new Image;T.onload=H(Rn,y,"TestLoadImage: loaded",!0,m,T),T.onerror=H(Rn,y,"TestLoadImage: error",!1,m,T),T.onabort=H(Rn,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=H(Rn,y,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Bn(u,m){const y=new An,T=new AbortController,P=setTimeout(()=>{T.abort(),Rn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(P),q.ok?Rn(y,"TestPingServer: ok",!0,m):Rn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),Rn(y,"TestPingServer: error",!1,m)})}function Rn(u,m,y,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(y)}catch{}}function lr(){this.g=new Ws}function ni(u,m,y){const T=y||"";try{mo(u,function(P,q){let et=P;p(P)&&(et=zn(P)),m.push(T+q+"="+encodeURIComponent(et))})}catch(P){throw m.push(T+"type="+encodeURIComponent("_badmap")),P}}function ls(u){this.l=u.Ub||null,this.j=u.eb||!1}K(ls,so),ls.prototype.g=function(){return new Oi(this.l,this.j)},ls.prototype.i=function(u){return function(){return u}}({});function Oi(u,m){me.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Oi,me),s=Oi.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,si(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_o(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function _o(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ii(this):si(this),this.readyState==3&&_o(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,ii(this))},s.Qa=function(u){this.g&&(this.response=u,ii(this))},s.ga=function(){this.g&&ii(this)};function ii(u){u.readyState=4,u.l=null,u.j=null,u.v=null,si(u)}s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function si(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vo(u){let m="";return It(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function Ue(u,m,y){t:{for(T in y){var T=!1;break t}T=!0}T||(y=vo(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):te(u,m,y))}function Yt(u){me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(Yt,me);var $r=/^https?$/i,ur=["POST","PUT"];s=Yt.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?ro(this.o):ro(Jn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Wl(this,q);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)y.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())y.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(q=>q.toLowerCase()=="content-type"),P=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ur,m,void 0))||T||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,et]of y)this.g.setRequestHeader(q,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cr(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Wl(this,q)}};function Wl(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Zr(u),ri(u)}function Zr(u){u.A||(u.A=!0,Zt(u,"complete"),Zt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Zt(this,"complete"),Zt(this,"abort"),ri(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),Yt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Jr(this):this.bb())},s.bb=function(){Jr(this)};function Jr(u){if(u.h&&typeof d<"u"&&(!u.v[1]||In(u)!=4||u.Z()!=2)){if(u.u&&In(u)==4)Je(u.Ea,0,u);else if(Zt(u,"readystatechange"),In(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var T;if(T=et===0){var P=String(u.D).match(ir)[1]||null;!P&&g.self&&g.self.location&&(P=g.self.location.protocol.slice(0,-1)),T=!$r.test(P?P.toLowerCase():"")}y=T}if(y)Zt(u,"complete"),Zt(u,"success");else{u.m=6;try{var q=2<In(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Zr(u)}}finally{ri(u)}}}}function ri(u,m){if(u.g){cr(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Zt(u,"ready");try{y.onreadystatechange=T}catch{}}}function cr(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function In(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),qr(m)}};function tu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Eh(u){const m={};u=(u.g&&2<=In(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(mt(u[T]))continue;var y=O(u[T]);const P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const q=m[P]||[];m[P]=q,q.push(y)}M(m,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hr(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Wr(u){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hr("baseRetryDelayMs",5e3,u),this.cb=hr("retryDelaySeedMs",1e4,u),this.Wa=hr("forwardChannelMaxRetries",2,u),this.wa=hr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(u&&u.concurrentRequestLimit),this.Da=new lr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Wr.prototype,s.la=8,s.G=1,s.connect=function(u,m,y,T){ue(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=ou(this,null,this.W),ea(this)};function Eo(u){if(eu(u),u.G==3){var m=u.U++,y=gn(u.I);if(te(y,"SID",u.K),te(y,"RID",m),te(y,"TYPE","terminate"),fr(u,y),m=new an(u,u.j,m),m.L=2,m.v=rr(gn(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=lu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),er(m)}au(u)}function ta(u){u.g&&(dr(u),u.g.cancel(),u.g=null)}function eu(u){ta(u),u.u&&(g.clearTimeout(u.u),u.u=null),na(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function ea(u){if(!Fr(u.h)&&!u.s){u.s=!0;var m=u.Ga;tt||N(),lt||(tt(),lt=!0),Vt.add(m,u),u.B=0}}function Th(u,m){return Qr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ae(D(u.Ga,u,m),Ao(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new an(this,this.j,u);let q=this.o;if(this.S&&(q?(q=A(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(P.H=q,q=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=nu(this,P,m),y=gn(this.I),te(y,"RID",u),te(y,"CVER",22),this.D&&te(y,"X-HTTP-Session-Id",this.D),fr(this,y),q&&(this.O?m="headers="+encodeURIComponent(String(vo(q)))+"&"+m:this.m&&Ue(y,this.m,q)),Yr(this.h,P),this.Ua&&te(y,"TYPE","init"),this.P?(te(y,"$req",m),te(y,"SID","null"),P.T=!0,jn(P,y,null)):jn(P,y,m),this.G=2}}else this.G==3&&(u?To(this,u):this.i.length==0||Fr(this.h)||To(this))};function To(u,m){var y;m?y=m.l:y=u.U++;const T=gn(u.I);te(T,"SID",u.K),te(T,"RID",y),te(T,"AID",u.T),fr(u,T),u.m&&u.o&&Ue(T,u.m,u.o),y=new an(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=nu(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Yr(u.h,y),jn(y,T,m)}function fr(u,m){u.H&&It(u.H,function(y,T){te(m,T,y)}),u.l&&mo({},function(y,T){te(m,T,y)})}function nu(u,m,y){y=Math.min(u.i.length,y);var T=u.l?D(u.l.Na,u.l,u):null;t:{var P=u.i;let q=-1;for(;;){const et=["count="+y];q==-1?0<y?(q=P[0].g,et.push("ofs="+q)):q=0:et.push("ofs="+q);let jt=!0;for(let De=0;De<y;De++){let Bt=P[De].g;const Le=P[De].map;if(Bt-=q,0>Bt)q=Math.max(0,P[De].g-100),jt=!1;else try{ni(Le,et,"req"+Bt+"_")}catch{T&&T(Le)}}if(jt){T=et.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,T}function iu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;tt||N(),lt||(tt(),lt=!0),Vt.add(m,u),u.v=0}}function So(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ae(D(u.Fa,u),Ao(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ae(D(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),ta(this),su(this))};function dr(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function su(u){u.g=new an(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=gn(u.qa);te(m,"RID","rpc"),te(m,"SID",u.K),te(m,"AID",u.T),te(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&te(m,"TO",u.ja),te(m,"TYPE","xmlhttp"),fr(u,m),u.m&&u.o&&Ue(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=rr(gn(m)),y.m=null,y.P=!0,Ri(y,u)}s.Za=function(){this.C!=null&&(this.C=null,ta(this),So(this),ue(19))};function na(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function ru(u,m){var y=null;if(u.g==m){na(u),dr(u),u.g=null;var T=2}else if(ho(u.h,m))y=m.D,on(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var P=u.B;T=ns(),Zt(T,new Ne(T,y)),ea(u)}else iu(u);else if(P=m.s,P==3||P==0&&0<m.X||!(T==1&&Th(u,m)||T==2&&So(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),P){case 1:Mi(u,5);break;case 4:Mi(u,10);break;case 3:Mi(u,6);break;default:Mi(u,2)}}}function Ao(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Mi(u,m){if(u.j.info("Error code "+m),m==2){var y=D(u.fb,u),T=u.Xa;const P=!T;T=new be(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||sr(T,"https"),rr(T),P?or(T.toString(),y):Bn(T.toString(),y)}else ue(2);u.G=0,u.l&&u.l.sa(m),au(u),eu(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function au(u){if(u.G=0,u.ka=[],u.l){const m=fo(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ka,m),J(u.ka,u.i),u.h.i.length=0,nt(u.i),u.i.length=0),u.l.ra()}}function ou(u,m,y){var T=y instanceof be?gn(y):new be(y);if(T.g!="")m&&(T.g=m+"."+T.g),os(T,T.s);else{var P=g.location;T=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var q=new be(null);T&&sr(q,T),m&&(q.g=m),P&&os(q,P),y&&(q.l=y),T=q}return y=u.D,m=u.ya,y&&m&&te(T,y,m),te(T,"VER",u.la),fr(u,T),T}function lu(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Yt(new ls({eb:y})):new Yt(u.pa),m.Ha(u.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}s=uu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ia(){}ia.prototype.g=function(u,m){return new ln(u,m)};function ln(u,m){me.call(this),this.g=new Wr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!mt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!mt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ai(this)}K(ln,me),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Eo(this.g)},ln.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=zn(u),u=y);m.i.push(new $l(m.Ya++,u)),m.G==3&&ea(m)},ln.prototype.N=function(){this.g.l=null,delete this.j,Eo(this.g),delete this.g,ln.aa.N.call(this)};function cu(u){bi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}K(cu,bi);function hu(){oo.call(this),this.status=1}K(hu,oo);function ai(u){this.g=u}K(ai,uu),ai.prototype.ua=function(){Zt(this.g,"a")},ai.prototype.ta=function(u){Zt(this.g,new cu(u))},ai.prototype.sa=function(u){Zt(this.g,new hu)},ai.prototype.ra=function(){Zt(this.g,"b")},ia.prototype.createWebChannel=ia.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,V0=function(){return new ia},M0=function(){return ns()},O0=Zn,jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rs.NO_ERROR=0,rs.TIMEOUT=8,rs.HTTP_ERROR=6,Ac=rs,wi.COMPLETE="complete",x0=wi,ao.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",me.prototype.listen=me.prototype.K,fl=ao,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,D0=Yt}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const j_="@firebase/firestore",B_="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new im("@firebase/firestore");function Oa(){return kr.logLevel}function st(s,...t){if(kr.logLevel<=kt.DEBUG){const i=t.map(dm);kr.debug(`Firestore (${Ja}): ${s}`,...i)}}function Wi(s,...t){if(kr.logLevel<=kt.ERROR){const i=t.map(dm);kr.error(`Firestore (${Ja}): ${s}`,...i)}}function qa(s,...t){if(kr.logLevel<=kt.WARN){const i=t.map(dm);kr.warn(`Firestore (${Ja}): ${s}`,...i)}}function dm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(s,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,k0(s,r,i)}function k0(s,t,i){let r=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw Wi(r),new Error(r)}function Kt(s,t,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||k0(t,l,r)}function Rt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends es{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ww{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(nn.UNAUTHENTICATED))}shutdown(){}}class Rw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Iw{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Kt(this.o===void 0,42304);let r=this.i;const l=_=>this.i!==r?(r=this.i,i(_)):Promise.resolve();let h=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Bs,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const _=h;t.enqueueRetryable(async()=>{await _.promise,await l(this.currentUser)})},g=_=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(_=>g(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Bs)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Kt(typeof r.accessToken=="string",31837,{l:r}),new P0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Kt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class Cw{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Nw{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new Cw(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dw{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Kt(this.o===void 0,3512);const r=h=>{h.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,st("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable(()=>r(h))};const l=h=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new q_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Kt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new q_(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=xw(40);for(let h=0;h<l.length;++h)r.length<20&&l[h]<i&&(r+=t.charAt(l[h]%62))}return r}}function Pt(s,t){return s<t?-1:s>t?1:0}function Bd(s,t){const i=Math.min(s.length,t.length);for(let r=0;r<i;r++){const l=s.charAt(r),h=t.charAt(r);if(l!==h)return Rd(l)===Rd(h)?Pt(l,h):Rd(l)?1:-1}return Pt(s.length,t.length)}const Ow=55296,Mw=57343;function Rd(s){const t=s.charCodeAt(0);return t>=Ow&&t<=Mw}function Ha(s,t,i){return s.length===t.length&&s.every((r,l)=>i(r,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="__name__";class di{constructor(t,i,r){i===void 0?i=0:i>t.length&&Et(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&Et(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return di.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof di?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let l=0;l<r;l++){const h=di.compareSegments(t.get(l),i.get(l));if(h!==0)return h}return Pt(t.length,i.length)}static compareSegments(t,i){const r=di.isNumericId(t),l=di.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?di.extractNumericId(t).compare(di.extractNumericId(i)):Bd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return js.fromString(t.substring(4,t.length-2))}}class oe extends di{construct(t,i,r){return new oe(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new ot(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(l=>l.length>0))}return new oe(i)}static emptyPath(){return new oe([])}}const Vw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends di{construct(t,i,r){return new $e(t,i,r)}static isValidIdentifier(t){return Vw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H_}static keyField(){return new $e([H_])}static fromServerFormat(t){const i=[];let r="",l=0;const h=()=>{if(r.length===0)throw new ot(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new ot(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ot(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=_,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(r+=g,l++):(h(),l++)}if(h(),d)throw new ot(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $e(i)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(oe.fromString(t))}static fromName(t){return new dt(oe.fromString(t).popFirst(5))}static empty(){return new dt(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return oe.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new oe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(s,t,i){if(!i)throw new ot(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function kw(s,t,i,r){if(t===!0&&r===!0)throw new ot(Z.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function G_(s){if(!dt.isDocumentKey(s))throw new ot(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function F_(s){if(dt.isDocumentKey(s))throw new ot(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function L0(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function gm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Et(12329,{type:typeof s})}function Ga(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ot(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=gm(s);throw new ot(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s,t){const i={typeString:s};return t&&(i.value=t),i}function Ll(s,t){if(!L0(s))throw new ot(Z.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const l=t[r].typeString,h="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${r}' field to equal '${h.value}'`;break}}if(i)throw new ot(Z.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=-62135596800,Y_=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*Y_);return new le(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ot(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ot(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Q_)throw new ot(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y_}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ll(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Q_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Ce("string",le._jsonSchemaVersion),seconds:Ce("number"),nanoseconds:Ce("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new le(0,0))}static max(){return new bt(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=-1;function Pw(s,t){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=bt.fromTimestamp(r===1e9?new le(i+1,0):new le(i,r));return new Gs(l,dt.empty(),t)}function Uw(s){return new Gs(s.readTime,s.key,Rl)}class Gs{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new Gs(bt.min(),dt.empty(),Rl)}static max(){return new Gs(bt.max(),dt.empty(),Rl)}}function Lw(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=dt.comparator(s.documentKey,t.documentKey),i!==0?i:Pt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==zw)throw s;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new X((r,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(r,l)},this.catchCallback=h=>{this.wrapFailure(i,h).next(r,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof X?i:X.resolve(i)}catch(i){return X.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):X.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):X.reject(i)}static resolve(t){return new X((i,r)=>{i(t)})}static reject(t){return new X((i,r)=>{r(t)})}static waitFor(t){return new X((i,r)=>{let l=0,h=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++h,d&&h===l&&i()},_=>r(_))}),d=!0,h===l&&i()})}static or(t){let i=X.resolve(!1);for(const r of t)i=i.next(l=>l?X.resolve(l):r());return i}static forEach(t,i){const r=[];return t.forEach((l,h)=>{r.push(i.call(this,l,h))}),this.waitFor(r)}static mapArray(t,i){return new X((r,l)=>{const h=t.length,d=new Array(h);let g=0;for(let _=0;_<h;_++){const p=_;i(t[p]).next(S=>{d[p]=S,++g,g===h&&r(d)},S=>l(S))}})}static doWhile(t,i){return new X((r,l)=>{const h=()=>{t()===!0?i().next(()=>{h()},l):r()};h()})}}function Bw(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function to(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Wc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=-1;function th(s){return s==null}function Uc(s){return s===0&&1/s==-1/0}function qw(s){return typeof s=="number"&&Number.isInteger(s)&&!Uc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="";function Hw(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=K_(t)),t=Gw(s.get(i),t);return K_(t)}function Gw(s,t){let i=t;const r=s.length;for(let l=0;l<r;l++){const h=s.charAt(l);switch(h){case"\0":i+="";break;case z0:i+="";break;default:i+=h}}return i}function K_(s){return s+z0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function Ur(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function j0(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,i){this.comparator=t,this.root=i||Xe.EMPTY}insert(t,i){return new fe(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mc(this.root,t,this.comparator,!1)}getReverseIterator(){return new mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mc(this.root,t,this.comparator,!0)}}class mc{constructor(t,i,r,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=i?r(t.key,i):1,i&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xe{constructor(t,i,r,l,h){this.key=t,this.value=i,this.color=r??Xe.RED,this.left=l??Xe.EMPTY,this.right=h??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,l,h){return new Xe(t??this.key,i??this.value,r??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const h=r(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,i,r),null):h===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Xe.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,i,r,l,h){return this}insert(t,i,r){return new Xe(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new $_(this.data.getIterator())}getIteratorFrom(t){return new $_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Pe)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=r.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Pe(this.comparator);return i.data=t,i}}class $_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this.fields=t,t.sort($e.comparator)}static empty(){return new Yn([])}unionWith(t){let i=new Pe($e.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Yn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ha(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new B0("Invalid base64 string: "+h):h}}(t);return new Ze(i)}static fromUint8Array(t){const i=function(l){let h="";for(let d=0;d<l.length;++d)h+=String.fromCharCode(l[d]);return h}(t);return new Ze(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const Fw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(s){if(Kt(!!s,39018),typeof s=="string"){let t=0;const i=Fw.exec(s);if(Kt(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Te(s.seconds),nanos:Te(s.nanos)}}function Te(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Qs(s){return typeof s=="string"?Ze.fromBase64String(s):Ze.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="server_timestamp",H0="__type__",G0="__previous_value__",F0="__local_write_time__";function ym(s){return(s?.mapValue?.fields||{})[H0]?.stringValue===q0}function eh(s){const t=s.mapValue.fields[G0];return ym(t)?eh(t):t}function Il(s){const t=Fs(s.mapValue.fields[F0].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t,i,r,l,h,d,g,_,p,S){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=p,this.isUsingEmulator=S}}const Lc="(default)";class Cl{constructor(t,i){this.projectId=t,this.database=i||Lc}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===Lc}isEqual(t){return t instanceof Cl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="__type__",Yw="__max__",gc={mapValue:{}},Y0="__vector__",zc="value";function Ys(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ym(s)?4:Xw(s)?9007199254740991:Kw(s)?10:11:Et(28295,{value:s})}function Ti(s,t){if(s===t)return!0;const i=Ys(s);if(i!==Ys(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Il(s).isEqual(Il(t));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const d=Fs(l.timestampValue),g=Fs(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(l,h){return Qs(l.bytesValue).isEqual(Qs(h.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(l,h){return Te(l.geoPointValue.latitude)===Te(h.geoPointValue.latitude)&&Te(l.geoPointValue.longitude)===Te(h.geoPointValue.longitude)}(s,t);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return Te(l.integerValue)===Te(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const d=Te(l.doubleValue),g=Te(h.doubleValue);return d===g?Uc(d)===Uc(g):isNaN(d)&&isNaN(g)}return!1}(s,t);case 9:return Ha(s.arrayValue.values||[],t.arrayValue.values||[],Ti);case 10:case 11:return function(l,h){const d=l.mapValue.fields||{},g=h.mapValue.fields||{};if(X_(d)!==X_(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!Ti(d[_],g[_])))return!1;return!0}(s,t);default:return Et(52216,{left:s})}}function Nl(s,t){return(s.values||[]).find(i=>Ti(i,t))!==void 0}function Fa(s,t){if(s===t)return 0;const i=Ys(s),r=Ys(t);if(i!==r)return Pt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Pt(s.booleanValue,t.booleanValue);case 2:return function(h,d){const g=Te(h.integerValue||h.doubleValue),_=Te(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1}(s,t);case 3:return Z_(s.timestampValue,t.timestampValue);case 4:return Z_(Il(s),Il(t));case 5:return Bd(s.stringValue,t.stringValue);case 6:return function(h,d){const g=Qs(h),_=Qs(d);return g.compareTo(_)}(s.bytesValue,t.bytesValue);case 7:return function(h,d){const g=h.split("/"),_=d.split("/");for(let p=0;p<g.length&&p<_.length;p++){const S=Pt(g[p],_[p]);if(S!==0)return S}return Pt(g.length,_.length)}(s.referenceValue,t.referenceValue);case 8:return function(h,d){const g=Pt(Te(h.latitude),Te(d.latitude));return g!==0?g:Pt(Te(h.longitude),Te(d.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return J_(s.arrayValue,t.arrayValue);case 10:return function(h,d){const g=h.fields||{},_=d.fields||{},p=g[zc]?.arrayValue,S=_[zc]?.arrayValue,I=Pt(p?.values?.length||0,S?.values?.length||0);return I!==0?I:J_(p,S)}(s.mapValue,t.mapValue);case 11:return function(h,d){if(h===gc.mapValue&&d===gc.mapValue)return 0;if(h===gc.mapValue)return 1;if(d===gc.mapValue)return-1;const g=h.fields||{},_=Object.keys(g),p=d.fields||{},S=Object.keys(p);_.sort(),S.sort();for(let I=0;I<_.length&&I<S.length;++I){const D=Bd(_[I],S[I]);if(D!==0)return D;const H=Fa(g[_[I]],p[S[I]]);if(H!==0)return H}return Pt(_.length,S.length)}(s.mapValue,t.mapValue);default:throw Et(23264,{he:i})}}function Z_(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Pt(s,t);const i=Fs(s),r=Fs(t),l=Pt(i.seconds,r.seconds);return l!==0?l:Pt(i.nanos,r.nanos)}function J_(s,t){const i=s.values||[],r=t.values||[];for(let l=0;l<i.length&&l<r.length;++l){const h=Fa(i[l],r[l]);if(h)return h}return Pt(i.length,r.length)}function Qa(s){return qd(s)}function qd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(i){const r=Fs(i);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(i){return Qs(i).toBase64()}(s.bytesValue):"referenceValue"in s?function(i){return dt.fromName(i).toString()}(s.referenceValue):"geoPointValue"in s?function(i){return`geo(${i.latitude},${i.longitude})`}(s.geoPointValue):"arrayValue"in s?function(i){let r="[",l=!0;for(const h of i.values||[])l?l=!1:r+=",",r+=qd(h);return r+"]"}(s.arrayValue):"mapValue"in s?function(i){const r=Object.keys(i.fields||{}).sort();let l="{",h=!0;for(const d of r)h?h=!1:l+=",",l+=`${d}:${qd(i.fields[d])}`;return l+"}"}(s.mapValue):Et(61005,{value:s})}function bc(s){switch(Ys(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=eh(s);return t?16+bc(t):16;case 5:return 2*s.stringValue.length;case 6:return Qs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((l,h)=>l+bc(h),0)}(s.arrayValue);case 10:case 11:return function(r){let l=0;return Ur(r.fields,(h,d)=>{l+=h.length+bc(d)}),l}(s.mapValue);default:throw Et(13486,{value:s})}}function Hd(s){return!!s&&"integerValue"in s}function _m(s){return!!s&&"arrayValue"in s}function W_(s){return!!s&&"nullValue"in s}function tv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function wc(s){return!!s&&"mapValue"in s}function Kw(s){return(s?.mapValue?.fields||{})[Q0]?.stringValue===Y0}function _l(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Ur(s.mapValue.fields,(i,r)=>t.mapValue.fields[i]=_l(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=_l(s.arrayValue.values[i]);return t}return{...s}}function Xw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Yw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.value=t}static empty(){return new kn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!wc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=_l(i)}setAll(t){let i=$e.emptyPath(),r={},l=[];t.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const _=this.getFieldsMap(i);this.applyChanges(_,r,l),r={},l=[],i=g.popLast()}d?r[g.lastSegment()]=_l(d):l.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,r,l)}delete(t){const i=this.field(t.popLast());wc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ti(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=i.mapValue.fields[t.get(r)];wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,r){Ur(i,(l,h)=>t[l]=h);for(const l of r)delete t[l]}clone(){return new kn(_l(this.value))}}function K0(s){const t=[];return Ur(s.fields,(i,r)=>{const l=new $e([i]);if(wc(r)){const h=K0(r.mapValue).fields;if(h.length===0)t.push(l);else for(const d of h)t.push(l.child(d))}else t.push(l)}),new Yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,i,r,l,h,d,g){this.key=t,this.documentType=i,this.version=r,this.readTime=l,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(t){return new sn(t,0,bt.min(),bt.min(),bt.min(),kn.empty(),0)}static newFoundDocument(t,i,r,l){return new sn(t,1,i,bt.min(),r,l,0)}static newNoDocument(t,i){return new sn(t,2,i,bt.min(),bt.min(),kn.empty(),0)}static newUnknownDocument(t,i){return new sn(t,3,i,bt.min(),bt.min(),kn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,i){this.position=t,this.inclusive=i}}function ev(s,t,i){let r=0;for(let l=0;l<s.position.length;l++){const h=t[l],d=s.position[l];if(h.field.isKeyField()?r=dt.comparator(dt.fromName(d.referenceValue),i.key):r=Fa(d,i.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function nv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Ti(s.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,i="asc"){this.field=t,this.dir=i}}function $w(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{}class Ve extends X0{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new Jw(t,i,r):i==="array-contains"?new eR(t,r):i==="in"?new nR(t,r):i==="not-in"?new iR(t,r):i==="array-contains-any"?new sR(t,r):new Ve(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new Ww(t,r):new tR(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Fa(i,this.value)):i!==null&&Ys(this.value)===Ys(i)&&this.matchesComparison(Fa(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends X0{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Si(t,i)}matches(t){return $0(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $0(s){return s.op==="and"}function Z0(s){return Zw(s)&&$0(s)}function Zw(s){for(const t of s.filters)if(t instanceof Si)return!1;return!0}function Gd(s){if(s instanceof Ve)return s.field.canonicalString()+s.op.toString()+Qa(s.value);if(Z0(s))return s.filters.map(t=>Gd(t)).join(",");{const t=s.filters.map(i=>Gd(i)).join(",");return`${s.op}(${t})`}}function J0(s,t){return s instanceof Ve?function(r,l){return l instanceof Ve&&r.op===l.op&&r.field.isEqual(l.field)&&Ti(r.value,l.value)}(s,t):s instanceof Si?function(r,l){return l instanceof Si&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce((h,d,g)=>h&&J0(d,l.filters[g]),!0):!1}(s,t):void Et(19439)}function W0(s){return s instanceof Ve?function(i){return`${i.field.canonicalString()} ${i.op} ${Qa(i.value)}`}(s):s instanceof Si?function(i){return i.op.toString()+" {"+i.getFilters().map(W0).join(" ,")+"}"}(s):"Filter"}class Jw extends Ve{constructor(t,i,r){super(t,i,r),this.key=dt.fromName(r.referenceValue)}matches(t){const i=dt.comparator(t.key,this.key);return this.matchesComparison(i)}}class Ww extends Ve{constructor(t,i){super(t,"in",i),this.keys=tE("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class tR extends Ve{constructor(t,i){super(t,"not-in",i),this.keys=tE("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function tE(s,t){return(t.arrayValue?.values||[]).map(i=>dt.fromName(i.referenceValue))}class eR extends Ve{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return _m(i)&&Nl(i.arrayValue,this.value)}}class nR extends Ve{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Nl(this.value.arrayValue,i)}}class iR extends Ve{constructor(t,i){super(t,"not-in",i)}matches(t){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Nl(this.value.arrayValue,i)}}class sR extends Ve{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!_m(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(t,i=null,r=[],l=[],h=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=h,this.startAt=d,this.endAt=g,this.Te=null}}function iv(s,t=null,i=[],r=[],l=null,h=null,d=null){return new rR(s,t,i,r,l,h,d)}function vm(s){const t=Rt(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>Gd(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(h){return h.field.canonicalString()+h.dir}(r)).join(","),th(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Qa(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Qa(r)).join(",")),t.Te=i}return t.Te}function Em(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!$w(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!J0(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!nv(s.startAt,t.startAt)&&nv(s.endAt,t.endAt)}function Fd(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,i=null,r=[],l=[],h=null,d="F",g=null,_=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aR(s,t,i,r,l,h,d,g){return new nh(s,t,i,r,l,h,d,g)}function Tm(s){return new nh(s)}function sv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function oR(s){return s.collectionGroup!==null}function vl(s){const t=Rt(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),i.add(h.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Pe($e.comparator);return d.filters.forEach(_=>{_.getFlattenedFilters().forEach(p=>{p.isInequality()&&(g=g.add(p.field))})}),g})(t).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new Bc(h,r))}),i.has($e.keyField().canonicalString())||t.Ie.push(new Bc($e.keyField(),r))}return t.Ie}function pi(s){const t=Rt(s);return t.Ee||(t.Ee=lR(t,vl(s))),t.Ee}function lR(s,t){if(s.limitType==="F")return iv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new Bc(l.field,h)});const i=s.endAt?new jc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new jc(s.startAt.position,s.startAt.inclusive):null;return iv(s.path,s.collectionGroup,t,s.filters,s.limit,i,r)}}function Qd(s,t,i){return new nh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function ih(s,t){return Em(pi(s),pi(t))&&s.limitType===t.limitType}function eE(s){return`${vm(pi(s))}|lt:${s.limitType}`}function Ma(s){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(l=>W0(l)).join(", ")}]`),th(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(l=>Qa(l)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(l=>Qa(l)).join(",")),`Target(${r})`}(pi(s))}; limitType=${s.limitType})`}function sh(s,t){return t.isFoundDocument()&&function(r,l){const h=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):dt.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,t)&&function(r,l){for(const h of vl(r))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(s,t)&&function(r,l){for(const h of r.filters)if(!h.matches(l))return!1;return!0}(s,t)&&function(r,l){return!(r.startAt&&!function(d,g,_){const p=ev(d,g,_);return d.inclusive?p<=0:p<0}(r.startAt,vl(r),l)||r.endAt&&!function(d,g,_){const p=ev(d,g,_);return d.inclusive?p>=0:p>0}(r.endAt,vl(r),l))}(s,t)}function uR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function nE(s){return(t,i)=>{let r=!1;for(const l of vl(s)){const h=cR(l,t,i);if(h!==0)return h;r=r||l.field.isKeyField()}return 0}}function cR(s,t,i){const r=s.field.isKeyField()?dt.comparator(t.key,i.key):function(h,d,g){const _=d.data.field(h),p=g.data.field(h);return _!==null&&p!==null?Fa(_,p):Et(42886)}(s.field,t,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[l,h]of r)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Ur(this.inner,(i,r)=>{for(const[l,h]of r)t(l,h)})}isEmpty(){return j0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new fe(dt.comparator);function ts(){return hR}const iE=new fe(dt.comparator);function dl(...s){let t=iE;for(const i of s)t=t.insert(i.key,i);return t}function sE(s){let t=iE;return s.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function Dr(){return El()}function rE(){return El()}function El(){return new Lr(s=>s.toString(),(s,t)=>s.isEqual(t))}const fR=new fe(dt.comparator),dR=new Pe(dt.comparator);function Ut(...s){let t=dR;for(const i of s)t=t.add(i);return t}const mR=new Pe(Pt);function gR(){return mR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(t)?"-0":t}}function aE(s){return{integerValue:""+s}}function pR(s,t){return qw(t)?aE(t):Sm(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function yR(s,t,i){return s instanceof Dl?function(l,h){const d={fields:{[H0]:{stringValue:q0},[F0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&ym(h)&&(h=eh(h)),h&&(d.fields[G0]=h),{mapValue:d}}(i,t):s instanceof xl?lE(s,t):s instanceof Ol?uE(s,t):function(l,h){const d=oE(l,h),g=rv(d)+rv(l.Ae);return Hd(d)&&Hd(l.Ae)?aE(g):Sm(l.serializer,g)}(s,t)}function _R(s,t,i){return s instanceof xl?lE(s,t):s instanceof Ol?uE(s,t):i}function oE(s,t){return s instanceof qc?function(r){return Hd(r)||function(h){return!!h&&"doubleValue"in h}(r)}(t)?t:{integerValue:0}:null}class Dl extends rh{}class xl extends rh{constructor(t){super(),this.elements=t}}function lE(s,t){const i=cE(t);for(const r of s.elements)i.some(l=>Ti(l,r))||i.push(r);return{arrayValue:{values:i}}}class Ol extends rh{constructor(t){super(),this.elements=t}}function uE(s,t){let i=cE(t);for(const r of s.elements)i=i.filter(l=>!Ti(l,r));return{arrayValue:{values:i}}}class qc extends rh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function rv(s){return Te(s.integerValue||s.doubleValue)}function cE(s){return _m(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,i){this.field=t,this.transform=i}}function ER(s,t){return s.field.isEqual(t.field)&&function(r,l){return r instanceof xl&&l instanceof xl||r instanceof Ol&&l instanceof Ol?Ha(r.elements,l.elements,Ti):r instanceof qc&&l instanceof qc?Ti(r.Ae,l.Ae):r instanceof Dl&&l instanceof Dl}(s.transform,t.transform)}class TR{constructor(t,i){this.version=t,this.transformResults=i}}class yi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new yi}static exists(t){return new yi(void 0,t)}static updateTime(t){return new yi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Rc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class ah{}function hE(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new dE(s.key,yi.none()):new zl(s.key,s.data,yi.none());{const i=s.data,r=kn.empty();let l=new Pe($e.comparator);for(let h of t.fields)if(!l.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?r.delete(h):r.set(h,d),l=l.add(h)}return new zr(s.key,r,new Yn(l.toArray()),yi.none())}}function SR(s,t,i){s instanceof zl?function(l,h,d){const g=l.value.clone(),_=ov(l.fieldTransforms,h,d.transformResults);g.setAll(_),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,t,i):s instanceof zr?function(l,h,d){if(!Rc(l.precondition,h))return void h.convertToUnknownDocument(d.version);const g=ov(l.fieldTransforms,h,d.transformResults),_=h.data;_.setAll(fE(l)),_.setAll(g),h.convertToFoundDocument(d.version,_).setHasCommittedMutations()}(s,t,i):function(l,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function Tl(s,t,i,r){return s instanceof zl?function(h,d,g,_){if(!Rc(h.precondition,d))return g;const p=h.value.clone(),S=lv(h.fieldTransforms,_,d);return p.setAll(S),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null}(s,t,i,r):s instanceof zr?function(h,d,g,_){if(!Rc(h.precondition,d))return g;const p=lv(h.fieldTransforms,_,d),S=d.data;return S.setAll(fE(h)),S.setAll(p),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(I=>I.field))}(s,t,i,r):function(h,d,g){return Rc(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(s,t,i)}function AR(s,t){let i=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),h=oE(r.transform,l||null);h!=null&&(i===null&&(i=kn.empty()),i.set(r.field,h))}return i||null}function av(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Ha(r,l,(h,d)=>ER(h,d))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class zl extends ah{constructor(t,i,r,l=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class zr extends ah{constructor(t,i,r,l,h=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function fE(s){const t=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=s.data.field(i);t.set(i,r)}}),t}function ov(s,t,i){const r=new Map;Kt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const h=s[l],d=h.transform,g=t.data.field(h.field);r.set(h.field,_R(d,g,i[l]))}return r}function lv(s,t,i){const r=new Map;for(const l of s){const h=l.transform,d=i.data.field(l.field);r.set(l.field,yR(h,d,t))}return r}class dE extends ah{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bR extends ah{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,i,r,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&SR(h,t,r[l])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Tl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Tl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=rE();return this.mutations.forEach(l=>{const h=t.get(l.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(l.key)?null:g;const _=hE(d,g);_!==null&&r.set(l.key,_),d.isValidDocument()||d.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Ha(this.mutations,t.mutations,(i,r)=>av(i,r))&&Ha(this.baseMutations,t.baseMutations,(i,r)=>av(i,r))}}class Am{constructor(t,i,r,l){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(t,i,r){Kt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=function(){return fR}();const h=t.mutations;for(let d=0;d<h.length;d++)l=l.insert(h[d].key,r[d].version);return new Am(t,i,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,Ht;function CR(s){switch(s){case Z.OK:return Et(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Et(15467,{code:s})}}function mE(s){if(s===void 0)return Wi("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Ie.OK:return Z.OK;case Ie.CANCELLED:return Z.CANCELLED;case Ie.UNKNOWN:return Z.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return Z.INTERNAL;case Ie.UNAVAILABLE:return Z.UNAVAILABLE;case Ie.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ie.NOT_FOUND:return Z.NOT_FOUND;case Ie.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ie.ABORTED:return Z.ABORTED;case Ie.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ie.DATA_LOSS:return Z.DATA_LOSS;default:return Et(39323,{code:s})}}(Ht=Ie||(Ie={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new js([4294967295,4294967295],0);function uv(s){const t=NR().encode(s),i=new N0;return i.update(t),new Uint8Array(i.digest())}function cv(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new js([i,r],0),new js([l,h],0)]}class bm{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new ml(`Invalid padding: ${i}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new ml(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=js.fromNumber(this.ge)}ye(t,i,r){let l=t.add(i.multiply(js.fromNumber(r)));return l.compare(DR)===1&&(l=new js([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=uv(t),[r,l]=cv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(r,l,h);if(!this.we(d))return!1}return!0}static create(t,i,r){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),d=new bm(h,l,i);return r.forEach(g=>d.insert(g)),d}insert(t){if(this.ge===0)return;const i=uv(t),[r,l]=cv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(r,l,h);this.Se(d)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,i,r,l,h){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const l=new Map;return l.set(t,jl.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new oh(bt.min(),l,new fe(Pt),ts(),Ut())}}class jl{constructor(t,i,r,l,h){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new jl(r,i,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,i,r,l){this.be=t,this.removedTargetIds=i,this.key=r,this.De=l}}class gE{constructor(t,i){this.targetId=t,this.Ce=i}}class pE{constructor(t,i,r=Ze.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=l}}class hv{constructor(){this.ve=0,this.Fe=fv(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ut(),i=Ut(),r=Ut();return this.Fe.forEach((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:Et(38017,{changeType:h})}}),new jl(this.Me,this.xe,t,i,r)}qe(){this.Oe=!1,this.Fe=fv()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xR{constructor(t){this.Ge=t,this.ze=new Map,this.je=ts(),this.Je=pc(),this.He=pc(),this.Ye=new fe(Pt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,i=>{const r=this.nt(i);switch(t.state){case 0:this.rt(i)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(t.resumeToken));break;default:Et(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach((r,l)=>{this.rt(l)&&i(l)})}st(t){const i=t.targetId,r=t.Ce.count,l=this.ot(i);if(l){const h=l.target;if(Fd(h))if(r===0){const d=new dt(h.path);this.et(i,d,sn.newNoDocument(d,bt.min()))}else Kt(r===1,20013,{expectedCount:r});else{const d=this._t(i);if(d!==r){const g=this.ut(t),_=g?this.ct(g,t,d):1;if(_!==0){this.it(i);const p=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,p)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:h=0}=i;let d,g;try{d=Qs(r).toUint8Array()}catch(_){if(_ instanceof B0)return qa("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new bm(d,l,h)}catch(_){return qa(_ instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(t,i,r){return i.Ce.count===r-this.Pt(t,i.targetId)?0:2}Pt(t,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach(h=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;t.mightContain(g)||(this.et(i,h,null),l++)}),l}Tt(t){const i=new Map;this.ze.forEach((h,d)=>{const g=this.ot(d);if(g){if(h.current&&Fd(g.target)){const _=new dt(g.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,sn.newNoDocument(_,t))}h.Be&&(i.set(d,h.ke()),h.qe())}});let r=Ut();this.He.forEach((h,d)=>{let g=!0;d.forEachWhile(_=>{const p=this.ot(_);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(r=r.add(h))}),this.je.forEach((h,d)=>d.setReadTime(t));const l=new oh(t,i,this.Ye,this.je,r);return this.je=ts(),this.Je=pc(),this.He=pc(),this.Ye=new fe(Pt),l}Xe(t,i){if(!this.rt(t))return;const r=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),r&&(this.je=this.je.insert(i,r))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new hv,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Pe(Pt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Pe(Pt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||st("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new hv),this.Ge.getRemoteKeysForTarget(t).forEach(i=>{this.et(t,i,null)})}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function pc(){return new fe(dt.comparator)}function fv(){return new fe(dt.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VR={and:"AND",or:"OR"};class kR{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Yd(s,t){return s.useProto3Json||th(t)?t:{value:t}}function Hc(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yE(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function PR(s,t){return Hc(s,t.toTimestamp())}function _i(s){return Kt(!!s,49232),bt.fromTimestamp(function(i){const r=Fs(i);return new le(r.seconds,r.nanos)}(s))}function wm(s,t){return Kd(s,t).canonicalString()}function Kd(s,t){const i=function(l){return new oe(["projects",l.projectId,"databases",l.database])}(s).child("documents");return t===void 0?i:i.child(t)}function _E(s){const t=oe.fromString(s);return Kt(AE(t),10190,{key:t.toString()}),t}function Xd(s,t){return wm(s.databaseId,t.path)}function Id(s,t){const i=_E(t);if(i.get(1)!==s.databaseId.projectId)throw new ot(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ot(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new dt(EE(i))}function vE(s,t){return wm(s.databaseId,t)}function UR(s){const t=_E(s);return t.length===4?oe.emptyPath():EE(t)}function $d(s){return new oe(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function EE(s){return Kt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function dv(s,t,i){return{name:Xd(s,t),fields:i.value.mapValue.fields}}function LR(s,t){let i;if("targetChange"in t){t.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Et(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=function(p,S){return p.useProto3Json?(Kt(S===void 0||typeof S=="string",58123),Ze.fromBase64String(S||"")):(Kt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Ze.fromUint8Array(S||new Uint8Array))}(s,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(p){const S=p.code===void 0?Z.UNKNOWN:mE(p.code);return new ot(S,p.message||"")}(d);i=new pE(r,l,h,g||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=Id(s,r.document.name),h=_i(r.document.updateTime),d=r.document.createTime?_i(r.document.createTime):bt.min(),g=new kn({mapValue:{fields:r.document.fields}}),_=sn.newFoundDocument(l,h,d,g),p=r.targetIds||[],S=r.removedTargetIds||[];i=new Ic(p,S,_.key,_)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=Id(s,r.document),h=r.readTime?_i(r.readTime):bt.min(),d=sn.newNoDocument(l,h),g=r.removedTargetIds||[];i=new Ic([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=Id(s,r.document),h=r.removedTargetIds||[];i=new Ic([],h,l,null)}else{if(!("filter"in t))return Et(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:h}=r,d=new IR(l,h),g=r.targetId;i=new gE(g,d)}}return i}function zR(s,t){let i;if(t instanceof zl)i={update:dv(s,t.key,t.value)};else if(t instanceof dE)i={delete:Xd(s,t.key)};else if(t instanceof zr)i={update:dv(s,t.key,t.data),updateMask:KR(t.fieldMask)};else{if(!(t instanceof bR))return Et(16599,{Vt:t.type});i={verify:Xd(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(h,d){const g=d.transform;if(g instanceof Dl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof xl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ol)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof qc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Et(20930,{transform:d.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:PR(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Et(27497)}(s,t.precondition)),i}function jR(s,t){return s&&s.length>0?(Kt(t!==void 0,14353),s.map(i=>function(l,h){let d=l.updateTime?_i(l.updateTime):_i(h);return d.isEqual(bt.min())&&(d=_i(h)),new TR(d,l.transformResults||[])}(i,t))):[]}function BR(s,t){return{documents:[vE(s,t.path)]}}function qR(s,t){const i={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=vE(s,l);const h=function(p){if(p.length!==0)return SE(Si.create(p,"and"))}(t.filters);h&&(i.structuredQuery.where=h);const d=function(p){if(p.length!==0)return p.map(S=>function(D){return{field:Va(D.field),direction:FR(D.dir)}}(S))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=Yd(s,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{ft:i,parent:l}}function HR(s){let t=UR(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Kt(r===1,65062);const S=i.from[0];S.allDescendants?l=S.collectionId:t=t.child(S.collectionId)}let h=[];i.where&&(h=function(I){const D=TE(I);return D instanceof Si&&Z0(D)?D.getFilters():[D]}(i.where));let d=[];i.orderBy&&(d=function(I){return I.map(D=>function(K){return new Bc(ka(K.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(D))}(i.orderBy));let g=null;i.limit&&(g=function(I){let D;return D=typeof I=="object"?I.value:I,th(D)?null:D}(i.limit));let _=null;i.startAt&&(_=function(I){const D=!!I.before,H=I.values||[];return new jc(H,D)}(i.startAt));let p=null;return i.endAt&&(p=function(I){const D=!I.before,H=I.values||[];return new jc(H,D)}(i.endAt)),aR(t,l,d,h,g,"F",_,p)}function GR(s,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:l})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function TE(s){return s.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=ka(i.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=ka(i.unaryFilter.field);return Ve.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=ka(i.unaryFilter.field);return Ve.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ka(i.unaryFilter.field);return Ve.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(s):s.fieldFilter!==void 0?function(i){return Ve.create(ka(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(i){return Si.create(i.compositeFilter.filters.map(r=>TE(r)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(i.compositeFilter.op))}(s):Et(30097,{filter:s})}function FR(s){return OR[s]}function QR(s){return MR[s]}function YR(s){return VR[s]}function Va(s){return{fieldPath:s.canonicalString()}}function ka(s){return $e.fromServerFormat(s.fieldPath)}function SE(s){return s instanceof Ve?function(i){if(i.op==="=="){if(tv(i.value))return{unaryFilter:{field:Va(i.field),op:"IS_NAN"}};if(W_(i.value))return{unaryFilter:{field:Va(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(tv(i.value))return{unaryFilter:{field:Va(i.field),op:"IS_NOT_NAN"}};if(W_(i.value))return{unaryFilter:{field:Va(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(i.field),op:QR(i.op),value:i.value}}}(s):s instanceof Si?function(i){const r=i.getFilters().map(l=>SE(l));return r.length===1?r[0]:{compositeFilter:{op:YR(i.op),filters:r}}}(s):Et(54877,{filter:s})}function KR(s){const t=[];return s.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function AE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,i,r,l,h=bt.min(),d=bt.min(),g=Ze.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(t){return new ks(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t){this.yt=t}}function $R(s){const t=HR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Qd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.Cn=new JR}addToCollectionParentIndex(t,i){return this.Cn.add(i),X.resolve()}getCollectionParents(t,i){return X.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return X.resolve()}deleteFieldIndex(t,i){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,i){return X.resolve()}getDocumentsMatchingTarget(t,i){return X.resolve(null)}getIndexType(t,i){return X.resolve(0)}getFieldIndexes(t,i){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,i){return X.resolve(Gs.min())}getMinOffsetFromCollectionGroup(t,i){return X.resolve(Gs.min())}updateCollectionGroup(t,i,r){return X.resolve()}updateIndexEntries(t,i){return X.resolve()}}class JR{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i]||new Pe(oe.comparator),h=!l.has(r);return this.index[i]=l.add(r),h}has(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(t){return(this.index[t]||new Pe(oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bE=41943040;class dn{static withCacheSize(t){return new dn(t,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(bE,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="LruGarbageCollector",WR=1048576;function pv([s,t],[i,r]){const l=Pt(s,i);return l===0?Pt(t,r):l}class tI{constructor(t){this.Ir=t,this.buffer=new Pe(pv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();pv(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class eI{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(gv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){to(i)?st(gv,"Ignoring IndexedDB error during garbage collection: ",i):await Wa(i)}await this.Vr(3e5)})}}class nI{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return X.resolve(Wc.ce);const r=new tI(i);return this.mr.forEachTarget(t,l=>r.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>r.Ar(l))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.mr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(mv)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mv):this.yr(t,i))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let r,l,h,d,g,_,p;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,d=Date.now(),this.nthSequenceNumber(t,l))).next(I=>(r=I,g=Date.now(),this.removeTargets(t,r,i))).next(I=>(h=I,_=Date.now(),this.removeOrphanedDocuments(t,r))).next(I=>(p=Date.now(),Oa()<=kt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${h} targets in `+(_-g)+`ms
	Removed ${I} documents in `+(p-_)+`ms
Total Duration: ${p-S}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:I})))}}function iI(s,t){return new nI(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.changes=new Lr(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,sn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?X.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,i,r,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(r=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(r!==null&&Tl(r.mutation,l,Yn.empty(),le.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Ut()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Ut()){const l=Dr();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,r).next(h=>{let d=dl();return h.forEach((g,_)=>{d=d.insert(g,_.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const r=Dr();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Ut()))}populateOverlays(t,i,r){const l=[];return r.forEach(h=>{i.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(t,l).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(t,i,r,l){let h=ts();const d=El(),g=function(){return El()}();return i.forEach((_,p)=>{const S=r.get(p.key);l.has(p.key)&&(S===void 0||S.mutation instanceof zr)?h=h.insert(p.key,p):S!==void 0?(d.set(p.key,S.mutation.getFieldMask()),Tl(S.mutation,p,S.mutation.getFieldMask(),le.now())):d.set(p.key,Yn.empty())}),this.recalculateAndSaveOverlays(t,h).next(_=>(_.forEach((p,S)=>d.set(p,S)),i.forEach((p,S)=>g.set(p,new rI(S,d.get(p)??null))),g))}recalculateAndSaveOverlays(t,i){const r=El();let l=new fe((d,g)=>d-g),h=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const g of d)g.keys().forEach(_=>{const p=i.get(_);if(p===null)return;let S=r.get(_)||Yn.empty();S=g.applyToLocalView(p,S),r.set(_,S);const I=(l.get(g.batchId)||Ut()).add(_);l=l.insert(g.batchId,I)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),p=_.key,S=_.value,I=rE();S.forEach(D=>{if(!h.has(D)){const H=hE(i.get(D),r.get(D));H!==null&&I.set(D,H),h=h.add(D)}}),d.push(this.documentOverlayCache.saveOverlays(t,p,I))}return X.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,l){return function(d){return dt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):oR(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,l):this.getDocumentsMatchingCollectionQuery(t,i,r,l)}getNextDocuments(t,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,l).next(h=>{const d=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,l-h.size):X.resolve(Dr());let g=Rl,_=h;return d.next(p=>X.forEach(p,(S,I)=>(g<I.largestBatchId&&(g=I.largestBatchId),h.get(S)?X.resolve():this.remoteDocumentCache.getEntry(t,S).next(D=>{_=_.insert(S,D)}))).next(()=>this.populateOverlays(t,p,h)).next(()=>this.computeViews(t,_,p,Ut())).next(S=>({batchId:g,changes:sE(S)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new dt(i)).next(r=>{let l=dl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,r,l){const h=i.collectionGroup;let d=dl();return this.indexManager.getCollectionParents(t,h).next(g=>X.forEach(g,_=>{const p=function(I,D){return new nh(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(i,_.child(h));return this.getDocumentsMatchingCollectionQuery(t,p,r,l).next(S=>{S.forEach((I,D)=>{d=d.insert(I,D)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,r,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,h,l))).next(d=>{h.forEach((_,p)=>{const S=p.getKey();d.get(S)===null&&(d=d.insert(S,sn.newInvalidDocument(S)))});let g=dl();return d.forEach((_,p)=>{const S=h.get(_);S!==void 0&&Tl(S.mutation,p,Yn.empty(),le.now()),sh(i,p)&&(g=g.insert(_,p))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return X.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:_i(l.createTime)}}(i)),X.resolve()}getNamedQuery(t,i){return X.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,function(l){return{name:l.name,query:$R(l.bundledQuery),readTime:_i(l.readTime)}}(i)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.overlays=new fe(dt.comparator),this.qr=new Map}getOverlay(t,i){return X.resolve(this.overlays.get(i))}getOverlays(t,i){const r=Dr();return X.forEach(i,l=>this.getOverlay(t,l).next(h=>{h!==null&&r.set(l,h)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((l,h)=>{this.St(t,i,h)}),X.resolve()}removeOverlaysForBatchId(t,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(t,i,r){const l=Dr(),h=i.length+1,d=new dt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,p=_.getKey();if(!i.isPrefixOf(p.path))break;p.path.length===h&&_.largestBatchId>r&&l.set(_.getKey(),_)}return X.resolve(l)}getOverlaysForCollectionGroup(t,i,r,l){let h=new fe((p,S)=>p-S);const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===i&&p.largestBatchId>r){let S=h.get(p.largestBatchId);S===null&&(S=Dr(),h=h.insert(p.largestBatchId,S)),S.set(p.getKey(),p)}}const g=Dr(),_=h.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((p,S)=>g.set(p,S)),!(g.size()>=l)););return X.resolve(g)}St(t,i,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new RR(i,r));let h=this.qr.get(i);h===void 0&&(h=Ut(),this.qr.set(i,h)),this.qr.set(i,h.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.Qr=new Pe(qe.$r),this.Ur=new Pe(qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const r=new qe(t,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.Gr(new qe(t,i))}zr(t,i){t.forEach(r=>this.removeReference(r,i))}jr(t){const i=new dt(new oe([])),r=new qe(i,t),l=new qe(i,t+1),h=[];return this.Ur.forEachInRange([r,l],d=>{this.Gr(d),h.push(d.key)}),h}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new dt(new oe([])),r=new qe(i,t),l=new qe(i,t+1);let h=Ut();return this.Ur.forEachInRange([r,l],d=>{h=h.add(d.key)}),h}containsKey(t){const i=new qe(t,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class qe{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return dt.comparator(t.key,i.key)||Pt(t.Yr,i.Yr)}static Kr(t,i){return Pt(t.Yr,i.Yr)||dt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Pe(qe.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new wR(h,i,r,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new qe(g.key,h)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,i){return X.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,l=this.ei(r),h=l<0?0:l;return X.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?pm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new qe(i,0),l=new qe(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([r,l],d=>{const g=this.Xr(d.Yr);h.push(g)}),X.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Pe(Pt);return i.forEach(l=>{const h=new qe(l,0),d=new qe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],g=>{r=r.add(g.Yr)})}),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,l=r.length+1;let h=r;dt.isDocumentKey(h)||(h=h.child(""));const d=new qe(new dt(h),0);let g=new Pe(Pt);return this.Zr.forEachWhile(_=>{const p=_.key.path;return!!r.isPrefixOf(p)&&(p.length===l&&(g=g.add(_.Yr)),!0)},d),X.resolve(this.ti(g))}ti(t){const i=[];return t.forEach(r=>{const l=this.Xr(r);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){Kt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(i.mutations,l=>{const h=new qe(l.key,i.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,i){const r=new qe(i,0),l=this.Zr.firstAfterOrEqual(r);return X.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t){this.ri=t,this.docs=function(){return new fe(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,l=this.docs.get(r),h=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return X.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(i))}getEntries(t,i){let r=ts();return i.forEach(l=>{const h=this.docs.get(l);r=r.insert(l,h?h.document.mutableCopy():sn.newInvalidDocument(l))}),X.resolve(r)}getDocumentsMatchingQuery(t,i,r,l){let h=ts();const d=i.path,g=new dt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:p,value:{document:S}}=_.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||Lw(Uw(S),r)<=0||(l.has(S.key)||sh(i,S))&&(h=h.insert(S.key,S.mutableCopy()))}return X.resolve(h)}getAllFromCollectionGroup(t,i,r,l){Et(9500)}ii(t,i){return X.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new fI(this)}getSize(t){return X.resolve(this.size)}}class fI extends sI{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)}),X.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t){this.persistence=t,this.si=new Lr(i=>vm(i),Em),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.oi=0,this._i=new Rm,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(t,i){return this.si.forEach((r,l)=>i(l)),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),X.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new Ya(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,X.resolve()}updateTargetData(t,i){return this.Pr(i),X.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,i,r){let l=0;const h=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=i&&r.get(g.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),X.waitFor(h).next(()=>l)}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,i){const r=this.si.get(i)||null;return X.resolve(r)}addMatchingKeys(t,i,r){return this._i.Wr(i,r),X.resolve()}removeMatchingKeys(t,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,h=[];return l&&i.forEach(d=>{h.push(l.markPotentiallyOrphaned(t,d))}),X.waitFor(h)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),X.resolve()}getMatchingKeysForTargetId(t,i){const r=this._i.Hr(i);return X.resolve(r)}containsKey(t,i){return X.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(t,i){this.ui={},this.overlays={},this.ci=new Wc(0),this.li=!1,this.li=!0,this.hi=new uI,this.referenceDelegate=t(this),this.Pi=new dI(this),this.indexManager=new ZR,this.remoteDocumentCache=function(l){return new hI(l)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new XR(i),this.Ii=new oI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new lI,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ui[t.toKey()];return r||(r=new cI(i,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,r){st("MemoryPersistence","Starting transaction:",t);const l=new mI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next(h=>this.referenceDelegate.di(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ai(t,i){return X.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,i)))}}class mI extends jw{constructor(t){super(),this.currentSequenceNumber=t}}class Im{constructor(t){this.persistence=t,this.Ri=new Rm,this.Vi=null}static mi(t){return new Im(t)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(t,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),X.resolve()}removeReference(t,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),X.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach(l=>this.fi.add(l.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(h=>this.fi.add(h.toString()))}).next(()=>r.removeTargetData(t,i))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,r=>{const l=dt.fromPath(r);return this.gi(t,l).next(h=>{h||i.removeEntry(l,bt.min())})}).next(()=>(this.Vi=null,i.apply(t)))}updateLimboDocument(t,i){return this.gi(t,i).next(r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())})}Ti(t){return 0}gi(t,i){return X.or([()=>X.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class Gc{constructor(t,i){this.persistence=t,this.pi=new Lr(r=>Hw(r.path),(r,l)=>r.isEqual(l)),this.garbageCollector=iI(this,i)}static mi(t,i){return new Gc(t,i)}Ei(){}di(t){return X.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(l=>r+l))}wr(t){let i=0;return this.pr(t,r=>{i++}).next(()=>i)}pr(t,i){return X.forEach(this.pi,(r,l)=>this.br(t,r,l).next(h=>h?X.resolve():i(l)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,d=>this.br(t,d,i).next(g=>{g||(r++,h.removeEntry(d,bt.min()))})).next(()=>h.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),X.resolve()}removeReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=bc(t.data.value)),i}br(t,i,r){return X.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return X.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t,i,r,l){this.targetId=t,this.fromCache=i,this.Es=r,this.ds=l}static As(t,i){let r=Ut(),l=Ut();for(const h of i.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Cm(t,i.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rA()?8:Bw(rn())>0?6:4}()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,r,l){const h={result:null};return this.ys(t,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.ws(t,i,l,r).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new gI;return this.Ss(t,i,d).next(g=>{if(h.result=g,this.Vs)return this.bs(t,i,d,g.size)})}).next(()=>h.result)}bs(t,i,r,l){return r.documentReadCount<this.fs?(Oa()<=kt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Ma(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Oa()<=kt.DEBUG&&st("QueryEngine","Query:",Ma(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Oa()<=kt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Ma(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,pi(i))):X.resolve())}ys(t,i){if(sv(i))return X.resolve(null);let r=pi(i);return this.indexManager.getIndexType(t,r).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=Qd(i,null,"F"),r=pi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(h=>{const d=Ut(...h);return this.ps.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,r).next(_=>{const p=this.Ds(i,g);return this.Cs(i,p,d,_.readTime)?this.ys(t,Qd(i,null,"F")):this.vs(t,p,i,_)}))})))}ws(t,i,r,l){return sv(i)||l.isEqual(bt.min())?X.resolve(null):this.ps.getDocuments(t,r).next(h=>{const d=this.Ds(i,h);return this.Cs(i,d,r,l)?X.resolve(null):(Oa()<=kt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ma(i)),this.vs(t,d,i,Pw(l,Rl)).next(g=>g))})}Ds(t,i){let r=new Pe(nE(t));return i.forEach((l,h)=>{sh(t,h)&&(r=r.add(h))}),r}Cs(t,i,r,l){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const h=t.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,i,r){return Oa()<=kt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Ma(i)),this.ps.getDocumentsMatchingQuery(t,i,Gs.min(),r)}vs(t,i,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="LocalStore",yI=3e8;class _I{constructor(t,i,r,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new fe(Pt),this.xs=new Lr(h=>vm(h),Em),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new aI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ms))}}function vI(s,t,i,r){return new _I(s,t,i,r)}async function RE(s,t){const i=Rt(s);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next(h=>(l=h,i.Bs(t),i.mutationQueue.getAllMutationBatches(r))).next(h=>{const d=[],g=[];let _=Ut();for(const p of l){d.push(p.batchId);for(const S of p.mutations)_=_.add(S.key)}for(const p of h){g.push(p.batchId);for(const S of p.mutations)_=_.add(S.key)}return i.localDocuments.getDocuments(r,_).next(p=>({Ls:p,removedBatchIds:d,addedBatchIds:g}))})})}function EI(s,t){const i=Rt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const l=t.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return function(g,_,p,S){const I=p.batch,D=I.keys();let H=X.resolve();return D.forEach(K=>{H=H.next(()=>S.getEntry(_,K)).next(nt=>{const J=p.docVersions.get(K);Kt(J!==null,48541),nt.version.compareTo(J)<0&&(I.applyToRemoteDocument(nt,p),nt.isValidDocument()&&(nt.setReadTime(p.commitVersion),S.addEntry(nt)))})}),H.next(()=>g.mutationQueue.removeMutationBatch(_,I))}(i,r,t,h).next(()=>h.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let _=Ut();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(_=_.add(g.batch.mutations[p].key));return _}(t))).next(()=>i.localDocuments.getDocuments(r,l))})}function IE(s){const t=Rt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Pi.getLastRemoteSnapshotVersion(i))}function TI(s,t){const i=Rt(s),r=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach((S,I)=>{const D=l.get(I);if(!D)return;g.push(i.Pi.removeMatchingKeys(h,S.removedDocuments,I).next(()=>i.Pi.addMatchingKeys(h,S.addedDocuments,I)));let H=D.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(I)!==null?H=H.withResumeToken(Ze.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):S.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(S.resumeToken,r)),l=l.insert(I,H),function(nt,J,gt){return nt.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-nt.snapshotVersion.toMicroseconds()>=yI?!0:gt.addedDocuments.size+gt.modifiedDocuments.size+gt.removedDocuments.size>0}(D,H,S)&&g.push(i.Pi.updateTargetData(h,H))});let _=ts(),p=Ut();if(t.documentUpdates.forEach(S=>{t.resolvedLimboDocuments.has(S)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,S))}),g.push(SI(h,d,t.documentUpdates).next(S=>{_=S.ks,p=S.qs})),!r.isEqual(bt.min())){const S=i.Pi.getLastRemoteSnapshotVersion(h).next(I=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,r));g.push(S)}return X.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,_,p)).next(()=>_)}).then(h=>(i.Ms=l,h))}function SI(s,t,i){let r=Ut(),l=Ut();return i.forEach(h=>r=r.add(h)),t.getEntries(s,r).next(h=>{let d=ts();return i.forEach((g,_)=>{const p=h.get(g);_.isFoundDocument()!==p.isFoundDocument()&&(l=l.add(g)),_.isNoDocument()&&_.version.isEqual(bt.min())?(t.removeEntry(g,_.readTime),d=d.insert(g,_)):!p.isValidDocument()||_.version.compareTo(p.version)>0||_.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(_),d=d.insert(g,_)):st(Nm,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",_.version)}),{ks:d,qs:l}})}function AI(s,t){const i=Rt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=pm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function bI(s,t){const i=Rt(s);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let l;return i.Pi.getTargetData(r,t).next(h=>h?(l=h,X.resolve(l)):i.Pi.allocateTargetId(r).next(d=>(l=new ks(t,d,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next(()=>l))))}).then(r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(t,r.targetId)),r})}async function Zd(s,t,i){const r=Rt(s),l=r.Ms.get(t),h=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",h,d=>r.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!to(d))throw d;st(Nm,`Failed to update sequence numbers for target ${t}: ${d}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function yv(s,t,i){const r=Rt(s);let l=bt.min(),h=Ut();return r.persistence.runTransaction("Execute query","readwrite",d=>function(_,p,S){const I=Rt(_),D=I.xs.get(S);return D!==void 0?X.resolve(I.Ms.get(D)):I.Pi.getTargetData(p,S)}(r,d,pi(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,g.targetId).next(_=>{h=_})}).next(()=>r.Fs.getDocumentsMatchingQuery(d,t,i?l:bt.min(),i?h:Ut())).next(g=>(wI(r,uR(t),g),{documents:g,Qs:h})))}function wI(s,t,i){let r=s.Os.get(t)||bt.min();i.forEach((l,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)}),s.Os.set(t,r)}class _v{constructor(){this.activeTargetIds=gR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RI{constructor(){this.Mo=new _v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,r){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new _v,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="ConnectivityMonitor";class Ev{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(vv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(vv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function Jd(){return yc===null?yc=function(){return 268435456+Math.round(2147483648*Math.random())}():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="RestConnection",CI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===Lc?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,i,r,l,h){const d=Jd(),g=this.zo(t,i.toUriEncodedString());st(Cd,`Sending RPC '${t}' ${d}:`,g,r);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,l,h);const{host:p}=new URL(g),S=Xa(p);return this.Jo(t,g,_,r,S).then(I=>(st(Cd,`Received RPC '${t}' ${d}: `,I),I),I=>{throw qa(Cd,`RPC '${t}' ${d} failed with error: `,I,"url: ",g,"request:",r),I})}Ho(t,i,r,l,h,d){return this.Go(t,i,r,l,h)}jo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),r&&r.headers.forEach((l,h)=>t[h]=l)}zo(t,i){const r=CI[t];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class xI extends NI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,l,h){const d=Jd();return new Promise((g,_)=>{const p=new D0;p.setWithCredentials(!0),p.listenOnce(x0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ac.NO_ERROR:const I=p.getResponseJson();st(en,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(I)),g(I);break;case Ac.TIMEOUT:st(en,`RPC '${t}' ${d} timed out`),_(new ot(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:const D=p.getStatus();if(st(en,`RPC '${t}' ${d} failed with status:`,D,"response text:",p.getResponseText()),D>0){let H=p.getResponseJson();Array.isArray(H)&&(H=H[0]);const K=H?.error;if(K&&K.status&&K.message){const nt=function(gt){const mt=gt.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(mt)>=0?mt:Z.UNKNOWN}(K.status);_(new ot(nt,K.message))}else _(new ot(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else _(new ot(Z.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:t,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{st(en,`RPC '${t}' ${d} completed.`)}});const S=JSON.stringify(l);st(en,`RPC '${t}' ${d} sending request:`,l),p.send(i,"POST",S,r,15)})}T_(t,i,r){const l=Jd(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=V0(),g=M0(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(_.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,r),_.encodeInitMessageHeaders=!0;const S=h.join("");st(en,`Creating RPC '${t}' stream ${l}: ${S}`,_);const I=d.createWebChannel(S,_);this.I_(I);let D=!1,H=!1;const K=new DI({Yo:J=>{H?st(en,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(D||(st(en,`Opening RPC '${t}' stream ${l} transport.`),I.open(),D=!0),st(en,`RPC '${t}' stream ${l} sending:`,J),I.send(J))},Zo:()=>I.close()}),nt=(J,gt,mt)=>{J.listen(gt,ct=>{try{mt(ct)}catch(zt){setTimeout(()=>{throw zt},0)}})};return nt(I,fl.EventType.OPEN,()=>{H||(st(en,`RPC '${t}' stream ${l} transport opened.`),K.o_())}),nt(I,fl.EventType.CLOSE,()=>{H||(H=!0,st(en,`RPC '${t}' stream ${l} transport closed`),K.a_(),this.E_(I))}),nt(I,fl.EventType.ERROR,J=>{H||(H=!0,qa(en,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),K.a_(new ot(Z.UNAVAILABLE,"The operation could not be completed")))}),nt(I,fl.EventType.MESSAGE,J=>{if(!H){const gt=J.data[0];Kt(!!gt,16349);const mt=gt,ct=mt?.error||mt[0]?.error;if(ct){st(en,`RPC '${t}' stream ${l} received error:`,ct);const zt=ct.status;let _t=function(A){const b=Ie[A];if(b!==void 0)return mE(b)}(zt),It=ct.message;_t===void 0&&(_t=Z.INTERNAL,It="Unknown error status: "+zt+" with message "+ct.message),H=!0,K.a_(new ot(_t,It)),I.close()}else st(en,`RPC '${t}' stream ${l} received:`,gt),K.u_(gt)}}),nt(g,O0.STAT_EVENT,J=>{J.stat===jd.PROXY?st(en,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===jd.NOPROXY&&st(en,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{K.__()},0),K}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(i=>i===t)}}function Nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(s){return new kR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,i,r=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=i,this.d_=r,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="PersistentStream";class NE{constructor(t,i,r,l,h,d,g,_){this.Mi=t,this.S_=r,this.b_=l,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CE(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Z.RESOURCE_EXHAUSTED?(Wi(i.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,l])=>{this.D_===i&&this.G_(r,l)},r=>{t(()=>{const l=new ot(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)})})}G_(t,i){const r=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{r(()=>this.z_(l))}),this.stream.onMessage(l=>{r(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return st(Tv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget(()=>this.D_===t?i():(st(Tv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OI extends NE{constructor(t,i,r,l,h,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,d),this.serializer=h}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=LR(this.serializer,t),r=function(h){if(!("targetChange"in h))return bt.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?bt.min():d.readTime?_i(d.readTime):bt.min()}(t);return this.listener.H_(i,r)}Y_(t){const i={};i.database=$d(this.serializer),i.addTarget=function(h,d){let g;const _=d.target;if(g=Fd(_)?{documents:BR(h,_)}:{query:qR(h,_).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=yE(h,d.resumeToken);const p=Yd(h,d.expectedCount);p!==null&&(g.expectedCount=p)}else if(d.snapshotVersion.compareTo(bt.min())>0){g.readTime=Hc(h,d.snapshotVersion.toTimestamp());const p=Yd(h,d.expectedCount);p!==null&&(g.expectedCount=p)}return g}(this.serializer,t);const r=GR(this.serializer,t);r&&(i.labels=r),this.q_(i)}Z_(t){const i={};i.database=$d(this.serializer),i.removeTarget=t,this.q_(i)}}class MI extends NE{constructor(t,i,r,l,h,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Kt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Kt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Kt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=jR(t.writeResults,t.commitTime),r=_i(t.commitTime);return this.listener.na(r,i)}ra(){const t={};t.database=$d(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>zR(this.serializer,r))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{}class kI extends VI{constructor(t,i,r,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ot(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Go(t,Kd(i,r),l,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ot(Z.UNKNOWN,h.toString())})}Ho(t,i,r,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(t,Kd(i,r),l,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ot(Z.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class PI{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wi(i),this.aa=!1):st("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="RemoteStore";class UI{constructor(t,i,r,l,h){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo(d=>{r.enqueueAndForget(async()=>{jr(this)&&(st(Pr,"Restarting streams for network reachability change."),await async function(_){const p=Rt(_);p.Ea.add(4),await Bl(p),p.Ra.set("Unknown"),p.Ea.delete(4),await uh(p)}(this))})}),this.Ra=new PI(r,l)}}async function uh(s){if(jr(s))for(const t of s.da)await t(!0)}async function Bl(s){for(const t of s.da)await t(!1)}function DE(s,t){const i=Rt(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Mm(i)?Om(i):eo(i).O_()&&xm(i,t))}function Dm(s,t){const i=Rt(s),r=eo(i);i.Ia.delete(t),r.O_()&&xE(i,t),i.Ia.size===0&&(r.O_()?r.L_():jr(i)&&i.Ra.set("Unknown"))}function xm(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}eo(s).Y_(t)}function xE(s,t){s.Va.Ue(t),eo(s).Z_(t)}function Om(s){s.Va=new xR({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),eo(s).start(),s.Ra.ua()}function Mm(s){return jr(s)&&!eo(s).x_()&&s.Ia.size>0}function jr(s){return Rt(s).Ea.size===0}function OE(s){s.Va=void 0}async function LI(s){s.Ra.set("Online")}async function zI(s){s.Ia.forEach((t,i)=>{xm(s,t)})}async function jI(s,t){OE(s),Mm(s)?(s.Ra.ha(t),Om(s)):s.Ra.set("Unknown")}async function BI(s,t,i){if(s.Ra.set("Online"),t instanceof pE&&t.state===2&&t.cause)try{await async function(l,h){const d=h.cause;for(const g of h.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))}(s,t)}catch(r){st(Pr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Fc(s,r)}else if(t instanceof Ic?s.Va.Ze(t):t instanceof gE?s.Va.st(t):s.Va.tt(t),!i.isEqual(bt.min()))try{const r=await IE(s.localStore);i.compareTo(r)>=0&&await function(h,d){const g=h.Va.Tt(d);return g.targetChanges.forEach((_,p)=>{if(_.resumeToken.approximateByteSize()>0){const S=h.Ia.get(p);S&&h.Ia.set(p,S.withResumeToken(_.resumeToken,d))}}),g.targetMismatches.forEach((_,p)=>{const S=h.Ia.get(_);if(!S)return;h.Ia.set(_,S.withResumeToken(Ze.EMPTY_BYTE_STRING,S.snapshotVersion)),xE(h,_);const I=new ks(S.target,_,p,S.sequenceNumber);xm(h,I)}),h.remoteSyncer.applyRemoteEvent(g)}(s,i)}catch(r){st(Pr,"Failed to raise snapshot:",r),await Fc(s,r)}}async function Fc(s,t,i){if(!to(t))throw t;s.Ea.add(1),await Bl(s),s.Ra.set("Offline"),i||(i=()=>IE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{st(Pr,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await uh(s)})}function ME(s,t){return t().catch(i=>Fc(s,i,t))}async function ch(s){const t=Rt(s),i=Ks(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:pm;for(;qI(t);)try{const l=await AI(t.localStore,r);if(l===null){t.Ta.length===0&&i.L_();break}r=l.batchId,HI(t,l)}catch(l){await Fc(t,l)}VE(t)&&kE(t)}function qI(s){return jr(s)&&s.Ta.length<10}function HI(s,t){s.Ta.push(t);const i=Ks(s);i.O_()&&i.X_&&i.ea(t.mutations)}function VE(s){return jr(s)&&!Ks(s).x_()&&s.Ta.length>0}function kE(s){Ks(s).start()}async function GI(s){Ks(s).ra()}async function FI(s){const t=Ks(s);for(const i of s.Ta)t.ea(i.mutations)}async function QI(s,t,i){const r=s.Ta.shift(),l=Am.from(r,t,i);await ME(s,()=>s.remoteSyncer.applySuccessfulWrite(l)),await ch(s)}async function YI(s,t){t&&Ks(s).X_&&await async function(r,l){if(function(d){return CR(d)&&d!==Z.ABORTED}(l.code)){const h=r.Ta.shift();Ks(r).B_(),await ME(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,l)),await ch(r)}}(s,t),VE(s)&&kE(s)}async function Sv(s,t){const i=Rt(s);i.asyncQueue.verifyOperationInProgress(),st(Pr,"RemoteStore received new credentials");const r=jr(i);i.Ea.add(3),await Bl(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await uh(i)}async function KI(s,t){const i=Rt(s);t?(i.Ea.delete(2),await uh(i)):t||(i.Ea.add(2),await Bl(i),i.Ra.set("Unknown"))}function eo(s){return s.ma||(s.ma=function(i,r,l){const h=Rt(i);return h.sa(),new OI(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(s.datastore,s.asyncQueue,{Xo:LI.bind(null,s),t_:zI.bind(null,s),r_:jI.bind(null,s),H_:BI.bind(null,s)}),s.da.push(async t=>{t?(s.ma.B_(),Mm(s)?Om(s):s.Ra.set("Unknown")):(await s.ma.stop(),OE(s))})),s.ma}function Ks(s){return s.fa||(s.fa=function(i,r,l){const h=Rt(i);return h.sa(),new MI(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:GI.bind(null,s),r_:YI.bind(null,s),ta:FI.bind(null,s),na:QI.bind(null,s)}),s.da.push(async t=>{t?(s.fa.B_(),await ch(s)):(await s.fa.stop(),s.Ta.length>0&&(st(Pr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,i,r,l,h){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=h,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,l,h){const d=Date.now()+r,g=new Vm(t,i,d,l,h);return g.start(r),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(s,t){if(Wi("AsyncQueue",`${t}: ${s}`),to(s))return new ot(Z.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{static emptySet(t){return new ja(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||dt.comparator(i.key,r.key):(i,r)=>dt.comparator(i.key,r.key),this.keyedMap=dl(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof ja)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=r.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new ja;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.ga=new fe(dt.comparator)}track(t){const i=t.doc.key,r=this.ga.get(i);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(i,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(i):t.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Et(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal((i,r)=>{t.push(r)}),t}}class Ka{constructor(t,i,r,l,h,d,g,_,p){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=p}static fromInitialDocuments(t,i,r,l,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Ka(t,i,ja.emptySet(i),d,r,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ih(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class $I{constructor(){this.queries=bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Rt(i),h=l.queries;l.queries=bv(),h.forEach((d,g)=>{for(const _ of g.Sa)_.onError(r)})})(this,new ot(Z.ABORTED,"Firestore shutting down"))}}function bv(){return new Lr(s=>eE(s),ih)}async function ZI(s,t){const i=Rt(s);let r=3;const l=t.query;let h=i.queries.get(l);h?!h.ba()&&t.Da()&&(r=2):(h=new XI,r=t.Da()?0:1);try{switch(r){case 0:h.wa=await i.onListen(l,!0);break;case 1:h.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=km(d,`Initialization of query '${Ma(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,h),h.Sa.push(t),t.va(i.onlineState),h.wa&&t.Fa(h.wa)&&Pm(i)}async function JI(s,t){const i=Rt(s),r=t.query;let l=3;const h=i.queries.get(r);if(h){const d=h.Sa.indexOf(t);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function WI(s,t){const i=Rt(s);let r=!1;for(const l of t){const h=l.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Fa(l)&&(r=!0);d.wa=l}}r&&Pm(i)}function t2(s,t,i){const r=Rt(s),l=r.queries.get(t);if(l)for(const h of l.Sa)h.onError(i);r.queries.delete(t)}function Pm(s){s.Ca.forEach(t=>{t.next()})}var Wd,wv;(wv=Wd||(Wd={})).Ma="default",wv.Cache="cache";class e2{constructor(t,i,r){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new Ka(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Ka.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Wd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(t){this.key=t}}class UE{constructor(t){this.key=t}}class n2{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ut(),this.mutatedKeys=Ut(),this.eu=nE(t),this.tu=new ja(this.eu)}get nu(){return this.Ya}ru(t,i){const r=i?i.iu:new Av,l=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,p=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((S,I)=>{const D=l.get(S),H=sh(this.query,I)?I:null,K=!!D&&this.mutatedKeys.has(D.key),nt=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let J=!1;D&&H?D.data.isEqual(H.data)?K!==nt&&(r.track({type:3,doc:H}),J=!0):this.su(D,H)||(r.track({type:2,doc:H}),J=!0,(_&&this.eu(H,_)>0||p&&this.eu(H,p)<0)&&(g=!0)):!D&&H?(r.track({type:0,doc:H}),J=!0):D&&!H&&(r.track({type:1,doc:D}),J=!0,(_||p)&&(g=!0)),J&&(H?(d=d.add(H),h=nt?h.add(S):h.delete(S)):(d=d.delete(S),h=h.delete(S)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),h=h.delete(S.key),r.track({type:1,doc:S})}return{tu:d,iu:r,Cs:g,mutatedKeys:h}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort((S,I)=>function(H,K){const nt=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:J})}};return nt(H)-nt(K)}(S.type,I.type)||this.eu(S.doc,I.doc)),this.ou(r),l=l??!1;const g=i&&!l?this._u():[],_=this.Xa.size===0&&this.current&&!l?1:0,p=_!==this.Za;return this.Za=_,d.length!==0||p?{snapshot:new Ka(this.query,t.tu,h,d,t.mutatedKeys,_===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Av,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(i=>this.Ya=this.Ya.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ya=this.Ya.delete(i)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ut(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const i=[];return t.forEach(r=>{this.Xa.has(r)||i.push(new UE(r))}),this.Xa.forEach(r=>{t.has(r)||i.push(new PE(r))}),i}cu(t){this.Ya=t.Qs,this.Xa=Ut();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Um="SyncEngine";class i2{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class s2{constructor(t){this.key=t,this.hu=!1}}class r2{constructor(t,i,r,l,h,d){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Lr(g=>eE(g),ih),this.Iu=new Map,this.Eu=new Set,this.du=new fe(dt.comparator),this.Au=new Map,this.Ru=new Rm,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a2(s,t,i=!0){const r=HE(s);let l;const h=r.Tu.get(t);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await LE(r,t,i,!0),l}async function o2(s,t){const i=HE(s);await LE(i,t,!0,!1)}async function LE(s,t,i,r){const l=await bI(s.localStore,pi(t)),h=l.targetId,d=s.sharedClientState.addLocalQueryTarget(h,i);let g;return r&&(g=await l2(s,t,h,d==="current",l.resumeToken)),s.isPrimaryClient&&i&&DE(s.remoteStore,l),g}async function l2(s,t,i,r,l){s.pu=(I,D,H)=>async function(nt,J,gt,mt){let ct=J.view.ru(gt);ct.Cs&&(ct=await yv(nt.localStore,J.query,!1).then(({documents:M})=>J.view.ru(M,ct)));const zt=mt&&mt.targetChanges.get(J.targetId),_t=mt&&mt.targetMismatches.get(J.targetId)!=null,It=J.view.applyChanges(ct,nt.isPrimaryClient,zt,_t);return Iv(nt,J.targetId,It.au),It.snapshot}(s,I,D,H);const h=await yv(s.localStore,t,!0),d=new n2(t,h.Qs),g=d.ru(h.documents),_=jl.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),p=d.applyChanges(g,s.isPrimaryClient,_);Iv(s,i,p.au);const S=new i2(t,i,d);return s.Tu.set(t,S),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),p.snapshot}async function u2(s,t,i){const r=Rt(s),l=r.Tu.get(t),h=r.Iu.get(l.targetId);if(h.length>1)return r.Iu.set(l.targetId,h.filter(d=>!ih(d,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Zd(r.localStore,l.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(l.targetId),i&&Dm(r.remoteStore,l.targetId),tm(r,l.targetId)}).catch(Wa)):(tm(r,l.targetId),await Zd(r.localStore,l.targetId,!0))}async function c2(s,t){const i=Rt(s),r=i.Tu.get(t),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),Dm(i.remoteStore,r.targetId))}async function h2(s,t,i){const r=_2(s);try{const l=await function(d,g){const _=Rt(d),p=le.now(),S=g.reduce((H,K)=>H.add(K.key),Ut());let I,D;return _.persistence.runTransaction("Locally write mutations","readwrite",H=>{let K=ts(),nt=Ut();return _.Ns.getEntries(H,S).next(J=>{K=J,K.forEach((gt,mt)=>{mt.isValidDocument()||(nt=nt.add(gt))})}).next(()=>_.localDocuments.getOverlayedDocuments(H,K)).next(J=>{I=J;const gt=[];for(const mt of g){const ct=AR(mt,I.get(mt.key).overlayedDocument);ct!=null&&gt.push(new zr(mt.key,ct,K0(ct.value.mapValue),yi.exists(!0)))}return _.mutationQueue.addMutationBatch(H,p,gt,g)}).next(J=>{D=J;const gt=J.applyToLocalDocumentSet(I,nt);return _.documentOverlayCache.saveOverlays(H,J.batchId,gt)})}).then(()=>({batchId:D.batchId,changes:sE(I)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),function(d,g,_){let p=d.Vu[d.currentUser.toKey()];p||(p=new fe(Pt)),p=p.insert(g,_),d.Vu[d.currentUser.toKey()]=p}(r,l.batchId,i),await ql(r,l.changes),await ch(r.remoteStore)}catch(l){const h=km(l,"Failed to persist write");i.reject(h)}}async function zE(s,t){const i=Rt(s);try{const r=await TI(i.localStore,t);t.targetChanges.forEach((l,h)=>{const d=i.Au.get(h);d&&(Kt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Kt(d.hu,14607):l.removedDocuments.size>0&&(Kt(d.hu,42227),d.hu=!1))}),await ql(i,r,t)}catch(r){await Wa(r)}}function Rv(s,t,i){const r=Rt(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach((h,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const _=Rt(d);_.onlineState=g;let p=!1;_.queries.forEach((S,I)=>{for(const D of I.Sa)D.va(g)&&(p=!0)}),p&&Pm(_)}(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function f2(s,t,i){const r=Rt(s);r.sharedClientState.updateQueryState(t,"rejected",i);const l=r.Au.get(t),h=l&&l.key;if(h){let d=new fe(dt.comparator);d=d.insert(h,sn.newNoDocument(h,bt.min()));const g=Ut().add(h),_=new oh(bt.min(),new Map,new fe(Pt),d,g);await zE(r,_),r.du=r.du.remove(h),r.Au.delete(t),Lm(r)}else await Zd(r.localStore,t,!1).then(()=>tm(r,t,i)).catch(Wa)}async function d2(s,t){const i=Rt(s),r=t.batch.batchId;try{const l=await EI(i.localStore,t);BE(i,r,null),jE(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await ql(i,l)}catch(l){await Wa(l)}}async function m2(s,t,i){const r=Rt(s);try{const l=await function(d,g){const _=Rt(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let S;return _.mutationQueue.lookupMutationBatch(p,g).next(I=>(Kt(I!==null,37113),S=I.keys(),_.mutationQueue.removeMutationBatch(p,I))).next(()=>_.mutationQueue.performConsistencyCheck(p)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(p,S,g)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,S)).next(()=>_.localDocuments.getDocuments(p,S))})}(r.localStore,t);BE(r,t,i),jE(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await ql(r,l)}catch(l){await Wa(l)}}function jE(s,t){(s.mu.get(t)||[]).forEach(i=>{i.resolve()}),s.mu.delete(t)}function BE(s,t,i){const r=Rt(s);let l=r.Vu[r.currentUser.toKey()];if(l){const h=l.get(t);h&&(i?h.reject(i):h.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function tm(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach(r=>{s.Ru.containsKey(r)||qE(s,r)})}function qE(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(Dm(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),Lm(s))}function Iv(s,t,i){for(const r of i)r instanceof PE?(s.Ru.addReference(r.key,t),g2(s,r)):r instanceof UE?(st(Um,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||qE(s,r.key)):Et(19791,{wu:r})}function g2(s,t){const i=t.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(st(Um,"New document in limbo: "+i),s.Eu.add(r),Lm(s))}function Lm(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new dt(oe.fromString(t)),r=s.fu.next();s.Au.set(r,new s2(i)),s.du=s.du.insert(i,r),DE(s.remoteStore,new ks(pi(Tm(i.path)),r,"TargetPurposeLimboResolution",Wc.ce))}}async function ql(s,t,i){const r=Rt(s),l=[],h=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach((g,_)=>{d.push(r.pu(_,t,i).then(p=>{if((p||i)&&r.isPrimaryClient){const S=p?!p.fromCache:i?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,S?"current":"not-current")}if(p){l.push(p);const S=Cm.As(_.targetId,p);h.push(S)}}))}),await Promise.all(d),r.Pu.H_(l),await async function(_,p){const S=Rt(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>X.forEach(p,D=>X.forEach(D.Es,H=>S.persistence.referenceDelegate.addReference(I,D.targetId,H)).next(()=>X.forEach(D.ds,H=>S.persistence.referenceDelegate.removeReference(I,D.targetId,H)))))}catch(I){if(!to(I))throw I;st(Nm,"Failed to update sequence numbers: "+I)}for(const I of p){const D=I.targetId;if(!I.fromCache){const H=S.Ms.get(D),K=H.snapshotVersion,nt=H.withLastLimboFreeSnapshotVersion(K);S.Ms=S.Ms.insert(D,nt)}}}(r.localStore,h))}async function p2(s,t){const i=Rt(s);if(!i.currentUser.isEqual(t)){st(Um,"User change. New user:",t.toKey());const r=await RE(i.localStore,t);i.currentUser=t,function(h,d){h.mu.forEach(g=>{g.forEach(_=>{_.reject(new ot(Z.CANCELLED,d))})}),h.mu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ql(i,r.Ls)}}function y2(s,t){const i=Rt(s),r=i.Au.get(t);if(r&&r.hu)return Ut().add(r.key);{let l=Ut();const h=i.Iu.get(t);if(!h)return l;for(const d of h){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function HE(s){const t=Rt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=zE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=y2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=f2.bind(null,t),t.Pu.H_=WI.bind(null,t.eventManager),t.Pu.yu=t2.bind(null,t.eventManager),t}function _2(s){const t=Rt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=d2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=m2.bind(null,t),t}class Qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=lh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return vI(this.persistence,new pI,t.initialUser,this.serializer)}Cu(t){return new wE(Im.mi,this.serializer)}Du(t){return new RI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qc.provider={build:()=>new Qc};class v2 extends Qc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Kt(this.persistence.referenceDelegate instanceof Gc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new eI(r,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new wE(r=>Gc.mi(r,i),this.serializer)}}class em{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=p2.bind(null,this.syncEngine),await KI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $I}()}createDatastore(t){const i=lh(t.databaseInfo.databaseId),r=function(h){return new xI(h)}(t.databaseInfo);return function(h,d,g,_){return new kI(h,d,g,_)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,l,h,d,g){return new UI(r,l,h,d,g)}(this.localStore,this.datastore,t.asyncQueue,i=>Rv(this.syncEngine,i,0),function(){return Ev.v()?new Ev:new II}())}createSyncEngine(t,i){return function(l,h,d,g,_,p,S){const I=new r2(l,h,d,g,_,p);return S&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await async function(i){const r=Rt(i);st(Pr,"RemoteStore shutting down."),r.Ea.add(5),await Bl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}em.provider={build:()=>new em};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Wi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="FirestoreClient";class T2{constructor(t,i,r,l,h){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=nn.UNAUTHENTICATED,this.clientId=mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,async d=>{st(Xs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(st(Xs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=km(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Dd(s,t){s.asyncQueue.verifyOperationInProgress(),st(Xs,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let r=i.initialUser;s.setCredentialChangeListener(async l=>{r.isEqual(l)||(await RE(t.localStore,l),r=l)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function Cv(s,t){s.asyncQueue.verifyOperationInProgress();const i=await S2(s);st(Xs,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener(r=>Sv(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,l)=>Sv(t.remoteStore,l)),s._onlineComponents=t}async function S2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){st(Xs,"Using user provided OfflineComponentProvider");try{await Dd(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;qa("Error using user provided cache. Falling back to memory cache: "+i),await Dd(s,new Qc)}}else st(Xs,"Using default OfflineComponentProvider"),await Dd(s,new v2(void 0));return s._offlineComponents}async function GE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(st(Xs,"Using user provided OnlineComponentProvider"),await Cv(s,s._uninitializedComponentsProvider._online)):(st(Xs,"Using default OnlineComponentProvider"),await Cv(s,new em))),s._onlineComponents}function A2(s){return GE(s).then(t=>t.syncEngine)}async function b2(s){const t=await GE(s),i=t.eventManager;return i.onListen=a2.bind(null,t.syncEngine),i.onUnlisten=u2.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=o2.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=c2.bind(null,t.syncEngine),i}function w2(s,t,i={}){const r=new Bs;return s.asyncQueue.enqueueAndForget(async()=>function(h,d,g,_,p){const S=new E2({next:D=>{S.Nu(),d.enqueueAndForget(()=>JI(h,I));const H=D.docs.has(g);!H&&D.fromCache?p.reject(new ot(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&D.fromCache&&_&&_.source==="server"?p.reject(new ot(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),I=new e2(Tm(g.path),S,{includeMetadataChanges:!0,qa:!0});return ZI(h,I)}(await b2(s),s.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firestore.googleapis.com",Dv=!0;class xv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QE,this.ssl=Dv}else this.host=t.host,this.ssl=t.ssl??Dv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=bE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<WR)throw new ot(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FE(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ot(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ot(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ot(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,l){return r.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hh{constructor(t,i,r,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ww;switch(r.type){case"firstParty":return new Nw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ot(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=Nv.get(i);r&&(st("ComponentProvider","Removing Datastore"),Nv.delete(i),r.terminate())}(this),Promise.resolve()}}function R2(s,t,i,r={}){s=Ga(s,hh);const l=Xa(t),h=s._getSettings(),d={...h,emulatorOptions:s._getEmulatorOptions()},g=`${t}:${i}`;l&&(Hv(`https://${g}`),Gv("Firestore",!0)),h.host!==QE&&h.host!==g&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...h,host:g,ssl:l,emulatorOptions:r};if(!Or(_,d)&&(s._setSettings(_),r.mockUserToken)){let p,S;if(typeof r.mockUserToken=="string")p=r.mockUserToken,S=nn.MOCK_USER;else{p=$S(r.mockUserToken,s._app?.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new ot(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new nn(I)}s._authCredentials=new Rw(new P0(p,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new zm(this.firestore,t,this._query)}}class ke{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ke(this.firestore,t,this._key)}toJSON(){return{type:ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(Ll(i,ke._jsonSchema))return new ke(t,r||null,new dt(oe.fromString(i.referencePath)))}}ke._jsonSchemaVersion="firestore/documentReference/1.0",ke._jsonSchema={type:Ce("string",ke._jsonSchemaVersion),referencePath:Ce("string")};class qs extends zm{constructor(t,i,r){super(t,i,Tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ke(this.firestore,null,new dt(t))}withConverter(t){return new qs(this.firestore,t,this._path)}}function I2(s,t,...i){if(s=Un(s),U0("collection","path",t),s instanceof hh){const r=oe.fromString(t,...i);return F_(r),new qs(s,null,r)}{if(!(s instanceof ke||s instanceof qs))throw new ot(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(oe.fromString(t,...i));return F_(r),new qs(s.firestore,null,r)}}function jm(s,t,...i){if(s=Un(s),arguments.length===1&&(t=mm.newId()),U0("doc","path",t),s instanceof hh){const r=oe.fromString(t,...i);return G_(r),new ke(s,null,new dt(r))}{if(!(s instanceof ke||s instanceof qs))throw new ot(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(oe.fromString(t,...i));return G_(r),new ke(s.firestore,s instanceof qs?s.converter:null,new dt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="AsyncQueue";class Mv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CE(this,"async_queue_retry"),this._c=()=>{const r=Nd();r&&st(Ov,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const i=Nd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Nd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const i=new Bs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!to(t))throw t;st(Ov,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const i=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,Wi("INTERNAL UNHANDLED ERROR: ",Vv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=i,i}enqueueAfterDelay(t,i,r){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Vm.createAndSchedule(this,t,i,r,h=>this.hc(h));return this.tc.push(l),l}uc(){this.nc&&Et(47125,{Pc:Vv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function Vv(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class fh extends hh{constructor(t,i,r,l){super(t,i,r,l),this.type="firestore",this._queue=new Mv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Mv(t),this._firestoreClient=void 0,await t}}}function C2(s,t){const i=typeof s=="object"?s:Kv(),r=typeof s=="string"?s:Lc,l=rm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const h=KS("firestore");h&&R2(l,...h)}return l}function YE(s){if(s._terminated)throw new ot(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||N2(s),s._firestoreClient}function N2(s){const t=s._freezeSettings(),i=function(l,h,d,g){return new Qw(l,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,FE(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new T2(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pn(Ze.fromBase64String(t))}catch(i){throw new ot(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Pn(Ze.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ll(t,Pn._jsonSchema))return Pn.fromBase64String(t.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:Ce("string",Pn._jsonSchemaVersion),bytes:Ce("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ot(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ot(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ot(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(t){if(Ll(t,vi._jsonSchema))return new vi(t.latitude,t.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:Ce("string",vi._jsonSchemaVersion),latitude:Ce("number"),longitude:Ce("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,l){if(r.length!==l.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==l[h])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ll(t,Ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new Ei(t.vectorValues);throw new ot(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:Ce("string",Ei._jsonSchemaVersion),vectorValues:Ce("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/^__.*__$/;class x2{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new zr(t,this.data,this.fieldMask,i,this.fieldTransforms):new zl(t,this.data,i,this.fieldTransforms)}}function KE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:s})}}class Hm{constructor(t,i,r,l,h,d){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Hm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.gc(t),r}yc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Yc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(KE(this.Ac)&&D2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class O2{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||lh(t)}Cc(t,i,r,l=!1){return new Hm({Ac:t,methodName:i,Dc:r,path:$e.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XE(s){const t=s._freezeSettings(),i=lh(s._databaseId);return new O2(s._databaseId,!!t.ignoreUndefinedProperties,i)}function $E(s,t,i,r,l,h={}){const d=s.Cc(h.merge||h.mergeFields?2:0,t,i,l);tT("Data must be an object, but it was:",d,r);const g=JE(r,d);let _,p;if(h.merge)_=new Yn(d.fieldMask),p=d.fieldTransforms;else if(h.mergeFields){const S=[];for(const I of h.mergeFields){const D=M2(t,I,i);if(!d.contains(D))throw new ot(Z.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);k2(S,D)||S.push(D)}_=new Yn(S),p=d.fieldTransforms.filter(I=>_.covers(I.field))}else _=null,p=d.fieldTransforms;return new x2(new kn(g),_,p)}class Gm extends qm{_toFieldTransform(t){return new vR(t.path,new Dl)}isEqual(t){return t instanceof Gm}}function ZE(s,t){if(WE(s=Un(s)))return tT("Unsupported field value:",t,s),JE(s,t);if(s instanceof qm)return function(r,l){if(!KE(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,l){const h=[];let d=0;for(const g of r){let _=ZE(g,l.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),h.push(_),d++}return{arrayValue:{values:h}}}(s,t)}return function(r,l){if((r=Un(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pR(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=le.fromDate(r);return{timestampValue:Hc(l.serializer,h)}}if(r instanceof le){const h=new le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hc(l.serializer,h)}}if(r instanceof vi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:yE(l.serializer,r._byteString)};if(r instanceof ke){const h=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(h))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:wm(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Ei)return function(d,g){return{mapValue:{fields:{[Q0]:{stringValue:Y0},[zc]:{arrayValue:{values:d.toArray().map(p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return Sm(g.serializer,p)})}}}}}}(r,l);throw l.Sc(`Unsupported field value: ${gm(r)}`)}(s,t)}function JE(s,t){const i={};return j0(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ur(s,(r,l)=>{const h=ZE(l,t.mc(r));h!=null&&(i[r]=h)}),{mapValue:{fields:i}}}function WE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof le||s instanceof vi||s instanceof Pn||s instanceof ke||s instanceof qm||s instanceof Ei)}function tT(s,t,i){if(!WE(i)||!L0(i)){const r=gm(i);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function M2(s,t,i){if((t=Un(t))instanceof Bm)return t._internalPath;if(typeof t=="string")return eT(s,t);throw Yc("Field path arguments must be of type string or ",s,!1,void 0,i)}const V2=new RegExp("[~\\*/\\[\\]]");function eT(s,t,i){if(t.search(V2)>=0)throw Yc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Bm(...t.split("."))._internalPath}catch{throw Yc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Yc(s,t,i,r,l){const h=r&&!r.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(h||d)&&(_+=" (found",h&&(_+=` in field ${r}`),d&&(_+=` in document ${l}`),_+=")"),new ot(Z.INVALID_ARGUMENT,g+s+_)}function k2(s,t){return s.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t,i,r,l,h){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new P2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(iT("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class P2 extends nT{data(){return super.data()}}function iT(s,t){return typeof t=="string"?eT(s,t):t instanceof Bm?t._internalPath:t._delegate._internalPath}class U2{convertValue(t,i="none"){switch(Ys(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Te(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Qs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return Ur(t,(l,h)=>{r[l]=this.convertValue(h,i)}),r}convertVectorValue(t){const i=t.fields?.[zc].arrayValue?.values?.map(r=>Te(r.doubleValue));return new Ei(i)}convertGeoPoint(t){return new vi(Te(t.latitude),Te(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=eh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Il(t));default:return null}}convertTimestamp(t){const i=Fs(t);return new le(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=oe.fromString(t);Kt(AE(r),9688,{name:t});const l=new Cl(r.get(1),r.get(3)),h=new dt(r.popFirst(5));return l.isEqual(i)||Wi(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(s,t,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,r}class gl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xr extends nT{constructor(t,i,r,l,h,d){super(t,i,r,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(iT("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=xr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",xr._jsonSchema={type:Ce("string",xr._jsonSchemaVersion),bundleSource:Ce("string","DocumentSnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class Cc extends xr{data(t={}){return super.data(t)}}class Sl{constructor(t,i,r,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new gl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new Cc(this._firestore,this._userDataWriter,r.key,r,new gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ot(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const _=new Cc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new gl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const _=new Cc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new gl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let p=-1,S=-1;return g.type!==0&&(p=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),S=d.indexOf(g.doc.key)),{type:L2(g.type),doc:_,oldIndex:p,newIndex:S}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Sl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach(h=>{h._document!==null&&(i.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function L2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(s){s=Ga(s,ke);const t=Ga(s.firestore,fh);return w2(YE(t),s._key).then(i=>H2(t,s,i))}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:Ce("string",Sl._jsonSchemaVersion),bundleSource:Ce("string","QuerySnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class j2 extends U2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new ke(this.firestore,null,i)}}function B2(s,t,i){s=Ga(s,ke);const r=Ga(s.firestore,fh),l=sT(s.converter,t,i);return rT(r,[$E(XE(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,yi.none())])}function q2(s,t){const i=Ga(s.firestore,fh),r=jm(s),l=sT(s.converter,t);return rT(i,[$E(XE(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,yi.exists(!1))]).then(()=>r)}function rT(s,t){return function(r,l){const h=new Bs;return r.asyncQueue.enqueueAndForget(async()=>h2(await A2(r),l,h)),h.promise}(YE(s),t)}function H2(s,t,i){const r=i.docs.get(t._key),l=new j2(s);return new xr(s,l,t._key,r,new gl(i.hasPendingWrites,i.fromCache),t.converter)}function G2(){return new Gm("serverTimestamp")}(function(t,i=!0){(function(l){Ja=l})($a),Ba(new Mr("firestore",(r,{instanceIdentifier:l,options:h})=>{const d=r.getProvider("app").getImmediate(),g=new fh(new Iw(r.getProvider("auth-internal")),new Dw(d,r.getProvider("app-check-internal")),function(p,S){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ot(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(p.options.projectId,S)}(d,l),d);return h={useFetchStreams:i,...h},g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),Ls(j_,B_,t),Ls(j_,B_,"esm2020")})();const F2="AIzaSyBsinouJnEwskZjSDOOY3H0XbchmjxMV8k",xd={apiKey:"AIzaSyAfmOAI5Skp5WB1Fvm31aqxJRnMJMEvn9Y",authDomain:"augmented-writing.firebaseapp.com",projectId:"augmented-writing",storageBucket:"augmented-writing.appspot.com",messagingSenderId:"609730383522",appId:"1:609730383522:web:bc54e53f972cfb1f4051fb",measurementId:"G-N0WYEGNCEF"},Q2={metadata:'Based on the following initial paper idea, extract a working title, a target conference/venue, and 5-7 relevant keywords. INITIAL IDEA: "{idea}" Output ONLY a valid JSON object with the keys "working_title", "target_venue", and "keywords".',objective:'Based on the following user description for a paper section, generate a concise one-sentence objective and a bulleted list of key points. USER DESCRIPTION: "{description}" Output ONLY a valid JSON object with two keys: "objective" (a string), and "key_points" (an array of strings).',content_judge:`You are a Content Goal Alignment Critic for scientific writing.
Judge ONLY the alignment between the user's goal (KP) and the current text.
Output JSON with: score (1-5), statement (one sentence), reason (one-two sentences), evidence (array of short quotes from the text that support your judgement).
If you cannot find evidence, include an empty array for evidence.
Example: {"score":3,"statement":"...","reason":"...","evidence":[{"quote":"..."}]}
[GOAL]: "{key_point}"
[TEXT]: "{current_text}"`,review_judge:`You are a Reviewer-Style Feedback Critic (peer-review simulation).
For the given text and key point context, give a 1-5 score and an explanation.
Focus on originality, soundness, meaningful comparison, replicability, and substance AS RELEVANT to the current text.
Output JSON with: score (1-5), statement (one sentence), reason (one-two sentences), evidence (array of short quotes).
Do NOT provide suggestions here.
Example: {"score":4,"statement":"...","reason":"...","evidence":[{"quote":"..."}]}
[KEY POINT CONTEXT]: "{key_point}"
[TEXT TO REVIEW]: "{current_text}"`,summary:`You are a research writing assistant. Analyze the user's text to see if it achieves the stated goal. Be concise and encouraging. Explain how it achieves the goal, or what is missing if it does not. [GOAL]: "{key_point}" [USER TEXT]: "{current_text}" Your response MUST be ONLY a valid JSON object with a single key "summary_text".`,suggestion:'You are an expert writing coach. You are given: [GOAL]: "{key_point}", [TEXT]: "{current_text}", [PROBLEM]: "{problem_description}". Generate a "state_description" (why the text is failing) and a "suggestion" (an actionable piece of advice). Your response MUST be ONLY a valid JSON object with two keys: "state_description" and "suggestion".'};async function Y2(s){const t=`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${F2}`,i={contents:[{role:"user",parts:[{text:s}]}],generationConfig:{responseMimeType:"application/json"}};let r=3,l=1e3;for(;r>0;)try{const h=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(h.status===429){console.warn(`Rate limit hit. Retrying in ${l/1e3}s...`),await new Promise(g=>setTimeout(g,l)),l*=2,r--;continue}if(!h.ok){const g=await h.json();throw console.error("Gemini API error:",g),new Error(`API responded with status ${h.status}`)}return(await h.json())?.candidates?.[0]?.content?.parts?.[0]?.text??JSON.stringify({error:"No content returned from API."})}catch(h){if(console.error("Error calling Google API:",h),r--,r<=0)return JSON.stringify({error:`LLM call failed: ${h.message}`});await new Promise(d=>setTimeout(d,l)),l*=2}return JSON.stringify({error:"LLM call failed after multiple retries."})}async function Al(s,t={}){const i=Q2[s];if(!i)return console.error("Invalid prompt type requested:",s),{};let r=i;for(const l in t)r=r.replace(new RegExp(`{${l}}`,"g"),String(t[l]));try{const l=await Y2(r);return JSON.parse(l)}catch(l){return console.error(`Failed to parse JSON for prompt type ${s}:`,l),{error:"JSON parsing failed."}}}const kv=(s,t)=>{let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>s(...r),t)}},K2=({role:s,text:t})=>B.jsx("div",{className:`max-w-[80%] p-3 rounded-lg break-words ${s==="user"?"bg-blue-600 text-white self-end rounded-br-none":"bg-slate-200 text-slate-800 self-start rounded-bl-none"}`,children:t}),X2=({structure:s})=>B.jsxs("div",{className:"p-4 space-y-4 text-sm text-slate-600",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-slate-900",children:"Metadata"}),B.jsxs("p",{children:[B.jsx("strong",{children:"Title:"})," ",s?.metadata?.working_title||"..."]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Venue:"})," ",s?.metadata?.target_venue||"..."]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Keywords:"})," ",(s?.metadata?.keywords||[]).join(", ")||"..."]})]}),B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-slate-900 mt-4",children:"Paper Outline"}),(s?.paper_outline||[]).map((t,i)=>B.jsxs("div",{className:"mt-2 p-3 bg-slate-100 rounded-lg",children:[B.jsx("p",{className:"font-semibold text-slate-800",children:t?.section_name||`Section ${i+1}`}),B.jsx("p",{className:"text-xs italic text-slate-500",children:t?.objective||"..."}),B.jsx("ul",{className:"list-disc list-inside pl-2 mt-1 text-slate-600",children:(t?.key_points||[]).map((r,l)=>B.jsx("li",{children:typeof r=="string"?r:r.text},l))})]},i))]})]}),_c=({path:s,text:t,onUpdate:i,extraClasses:r=""})=>{const[l,h]=ft.useState(!1),[d,g]=ft.useState(t),_=ft.useRef(null);ft.useEffect(()=>{g(t)},[t]),ft.useEffect(()=>{l&&(_.current?.focus(),_.current?.select())},[l]);const p=()=>{h(!1),i(s,d)};return l?B.jsx("input",{ref:_,value:d,onChange:S=>g(S.target.value),onBlur:p,onKeyDown:S=>S.key==="Enter"&&p(),className:`w-full bg-slate-200 text-slate-800 rounded-md p-2 ${r}`}):B.jsx("div",{onDoubleClick:()=>h(!0),className:`goal-bubble-light ${r}`,children:t})},$2=({editorRef:s})=>{const t=(r,l="")=>{const h=s.current;if(!h)return;const{selectionStart:d,selectionEnd:g,value:_}=h,p=_.substring(d,g);d===g?(h.setRangeText(r+l,d,g,"end"),l&&(h.selectionStart=h.selectionEnd=d+r.length)):h.setRangeText(r+p+l,d,g,"select"),h.focus()},i="p-2 rounded-md text-slate-600 hover:bg-slate-200 w-9 h-9 flex items-center justify-center";return B.jsxs("div",{className:"flex items-center p-2 border-b border-slate-200 bg-slate-100 gap-x-1 flex-wrap",children:[B.jsx("button",{onClick:()=>t("**","**"),className:i,title:"Bold",children:B.jsx("strong",{className:"text-base",children:"B"})}),B.jsx("button",{onClick:()=>t("*","*"),className:i,title:"Italic",children:B.jsx("em",{className:"text-base",children:"I"})}),B.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),B.jsx("button",{onClick:()=>t("[","](https://)"),className:i,title:"Link",children:B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),B.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]})}),B.jsx("button",{onClick:()=>t("![Alt Text](","https://)"),className:i,title:"Image",children:B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),B.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),B.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),B.jsx("button",{onClick:()=>t("\n```\n","\n```\n"),className:i,title:"Code",children:"</>"})]})};function Z2(s){return s?s.replace(/\n+/g," ").split(new RegExp("(?<=[.!?])\\s+")).map(t=>t.trim()).filter(Boolean).map((t,i)=>({id:i,text:t})):[]}const J2=({visible:s,anchorRect:t,title:i,sentences:r=[],llm:l=null,onClose:h})=>{if(!s||!t)return null;const g=Math.max(8,t.left-300-16),_=Math.min(window.innerHeight-220,Math.max(8,t.top));return B.jsxs("div",{className:"fixed z-[60] w-[300px] max-h-[220px] overflow-y-auto rounded-xl border border-slate-200 bg-white shadow-2xl p-3 text-slate-800",style:{left:g,top:_},onMouseLeave:h,children:[B.jsx("div",{className:"text-xs uppercase tracking-wide text-sky-600 font-semibold mb-1",children:i}),l&&B.jsxs("div",{className:"mb-2 space-y-1 text-xs",children:[l.statement&&B.jsx("p",{className:"text-slate-900 font-semibold",children:l.statement}),l.reason&&B.jsx("p",{className:"text-slate-600",children:l.reason}),Array.isArray(l.evidence)&&l.evidence.length>0&&B.jsxs("div",{className:"mt-1 p-2 rounded-md bg-slate-100 border border-slate-200",children:[B.jsx("div",{className:"text-[10px] text-slate-500 mb-1",children:"Evidence"}),B.jsx("ul",{className:"space-y-1 list-disc list-inside",children:l.evidence.slice(0,3).map((p,S)=>B.jsxs("li",{className:"text-slate-700 text-xs",children:["",p.quote,""]},S))})]})]}),B.jsx("div",{className:"text-[10px] text-slate-500 mb-1",children:"Sentences mentioning this goal"}),r.length===0?B.jsx("div",{className:"text-xs text-slate-500",children:"No direct mentions detected."}):B.jsx("ul",{className:"space-y-1",children:r.map(p=>B.jsxs("li",{className:"text-xs text-slate-700",children:[" ",p.text.length>160?p.text.slice(0,160)+"":p.text]},p.id))})]})},Pv=({show:s,onClose:t,title:i,children:r})=>{const[l,h]=ft.useState({x:window.innerWidth/2-224,y:100}),[d,g]=ft.useState(!1),[_,p]=ft.useState(null),S=ft.useRef(null),I=K=>{if(K.button!==0||!S.current.contains(K.target)||K.target.tagName==="BUTTON"||!K.currentTarget.classList.contains("modal-header"))return;g(!0);const J=S.current;p({x:K.pageX-J.offsetLeft,y:K.pageY-J.offsetTop}),K.stopPropagation(),K.preventDefault()},D=ft.useCallback(()=>{g(!1)},[]),H=ft.useCallback(K=>{!d||!_||h({x:K.pageX-_.x,y:K.pageY-_.y})},[d,_]);return ft.useEffect(()=>(d&&(document.addEventListener("mousemove",H),document.addEventListener("mouseup",D)),()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",D)}),[d,H,D]),s?B.jsxs("div",{ref:S,style:{left:`${l.x}px`,top:`${l.y}px`},className:"fixed bg-white border border-slate-200 rounded-lg shadow-xl p-4 w-full max-w-md z-50 text-slate-800",children:[B.jsxs("div",{onMouseDown:I,className:"modal-header flex justify-between items-center mb-4 pb-2 border-b border-slate-200 cursor-move",children:[B.jsx("h3",{className:"text-lg font-bold text-slate-900",children:i}),B.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-900",children:""})]}),B.jsx("div",{children:r})]}):null},W2=({goalStructure:s,setGoalStructure:t,onConfirm:i})=>{const[r,l]=ft.useState([{role:"assistant",text:"Hello! I'm your Writing Assistant. To begin, please tell me your initial paper idea."}]),[h,d]=ft.useState(""),[g,_]=ft.useState(!1),[p,S]=ft.useState("awaiting_initial_idea"),[I,D]=ft.useState(0),[H,K]=ft.useState(0),[nt,J]=ft.useState(!1),[gt,mt]=ft.useState(JSON.stringify(s,null,2)),[ct,zt]=ft.useState(!0),_t=ft.useRef(null);ft.useEffect(()=>{_t.current?.scrollIntoView({behavior:"smooth"})},[r]),ft.useEffect(()=>{nt||mt(JSON.stringify(s,null,2))},[s,nt]);const It=(b,C)=>l(O=>[...O,{role:b,text:C}]),M=b=>{const C=b.target.value;mt(C);try{t(JSON.parse(C)),zt(!0)}catch{zt(!1)}},A=async()=>{if(!h.trim()||g)return;const b=h;if(It("user",b),d(""),_(!0),p==="awaiting_initial_idea"){const C=await Al("metadata",{idea:b});t(O=>({...O,metadata:C})),S("awaiting_section_count"),It("assistant","Thanks! I've populated the metadata. Now, how many main sections will your paper have?")}else if(p==="awaiting_section_count"){const C=parseInt(b,10)||0;C>0&&C<15?(D(C),K(0),S("awaiting_section_name"),It("assistant","Great. What is the title of **Section 1**?")):It("assistant","Please enter a valid number (e.g., between 1 and 15).")}else if(p==="awaiting_section_name")t(C=>{const O=[...C.paper_outline||[]];return O[H]={section_name:b,objective:"",key_points:[]},{...C,paper_outline:O}}),S("awaiting_section_objective_description"),It("assistant",`Got it. Now, please briefly describe the main goal of the **${b}** section.`);else if(p==="awaiting_section_objective_description"){const C=await Al("objective",{description:b});t(V=>{const R=[...V.paper_outline];return R[H]={...R[H],objective:C.objective||"",key_points:C.key_points||[]},{...V,paper_outline:R}});const O=H+1;O<I?(K(O),S("awaiting_section_name"),It("assistant",`Excellent. What is the title of **Section ${O+1}**?`)):(S("finalizing"),It("assistant",'Great! The initial plan is complete. Please review it, then click "Confirm & Start Writing".'))}_(!1)};return B.jsxs("div",{className:"flex h-screen w-full bg-slate-100 text-slate-800",children:[B.jsxs("div",{className:"flex flex-col w-full md:w-1/2 h-full bg-slate-50",children:[B.jsx("header",{className:"p-4 border-b border-slate-200",children:B.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Phase 1: Goal Setting"})}),B.jsxs("main",{className:"flex-1 p-4 overflow-y-auto space-y-4 flex flex-col",children:[r.map((b,C)=>B.jsx(K2,{role:b.role,text:b.text},C)),g&&B.jsx("div",{className:"text-sm text-slate-500 self-start",children:"Writing Assistant is thinking..."}),B.jsx("div",{ref:_t})]}),B.jsx("footer",{className:"p-4 border-t border-slate-200 bg-slate-100",children:B.jsxs("div",{className:"flex items-start space-x-2",children:[B.jsx("textarea",{value:h,onChange:b=>d(b.target.value),onKeyDown:b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),A())},className:"flex-1 p-3 bg-white border border-slate-300 rounded-lg text-slate-800 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter your response...",rows:"1"}),B.jsx("button",{onClick:A,disabled:g,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-500 disabled:bg-blue-400",children:"Send"})]})})]}),B.jsxs("div",{className:"flex flex-col w-full md:w-1/2 h-full bg-white",children:[B.jsxs("header",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[B.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Goal Structure"}),B.jsx("button",{onClick:()=>J(!nt),className:"px-3 py-1.5 text-sm bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:nt?"Interactive View":"Raw JSON View"})]}),B.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:nt?B.jsx("textarea",{value:gt,onChange:M,className:`w-full h-full p-4 text-sm font-mono bg-transparent outline-none resize-none ${ct?"":"text-red-500"}`}):B.jsx(X2,{structure:s})}),B.jsx("footer",{className:"p-4 border-t border-slate-200 text-right",children:B.jsx("button",{onClick:i,className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-500 disabled:bg-green-400 disabled:cursor-not-allowed",disabled:p!=="finalizing"||!ct,children:"Confirm & Start Writing"})})]})]})},tC=({firebase:s,initialData:t,logEvent:i,appId:r})=>{const[l,h]=ft.useState(t.goalStructure),[d,g]=ft.useState(t.editorText),_=ft.useMemo(()=>Z2(d),[d]),[p,S]=ft.useState({contentScores:[],reviewScores:[],contentLLM:[],reviewLLM:[]}),[I,D]=ft.useState({show:!1,stage:"",title:"",content:{}}),[H,K]=ft.useState(null),[nt,J]=ft.useState(null),[gt,mt]=ft.useState("Content"),[ct,zt]=ft.useState([]),_t=ft.useRef(null),[It,M]=ft.useState(1),[A,b]=ft.useState(!1),[C,O]=ft.useState("Standard"),V=ft.useRef(0),R=ft.useRef(null),de={Standard:{count:3,delay:300},Weak:{count:7,delay:500},None:{count:1/0,delay:1/0}},ae=ft.useMemo(()=>kv(async at=>{if(s.db&&s.userId){const wt=jm(s.db,`artifacts/${r}/users/${s.userId}/data/main_document`);await B2(wt,at,{merge:!0})}},2e3),[s.db,s.userId,r]);ft.useEffect(()=>{ae({goalStructure:l,editorText:d})},[l,d,ae]);const G=ft.useMemo(()=>{const at=[];return(l.paper_outline||[]).forEach((wt,vt)=>{(wt.key_points||[]).forEach((Lt,$t)=>{const Gt=`paper_outline.${vt}.key_points.${$t}`;at.push({text:typeof Lt=="string"?Lt:Lt.text,path:Gt,type:"main",sectionIdx:vt}),typeof Lt=="object"&&Lt.sub_goals&&Lt.sub_goals.forEach((ye,Kn)=>at.push({text:ye,path:`${Gt}.sub_goals.${Kn}`,type:"sub",sectionIdx:vt}))})}),at},[l]),tt=G.length,lt=(at,wt,vt)=>{const Lt=JSON.parse(JSON.stringify(at));let $t=Lt;const Gt=wt.split(".");for(let ye=0;ye<Gt.length-1;ye++)$t=$t[Gt[ye]];return vt($t,Gt[Gt.length-1]),Lt},Vt=(at,wt)=>{const vt=lt(l,at,(Lt,$t)=>{const Gt=Lt[$t];typeof Gt=="object"&&Gt&&Object.prototype.hasOwnProperty.call(Gt,"text")?Gt.text=wt:Lt[$t]=wt});h(vt)},N=ft.useCallback(async at=>{if(at.trim()===""||G.length===0){S({contentScores:[],reviewScores:[],contentLLM:[],reviewLLM:[]});return}try{const wt=Array(tt).fill(0),vt=Array(tt).fill(0),Lt=Array(tt).fill(null),$t=Array(tt).fill(null),Gt=4;for(let ye=0;ye<tt;ye+=Gt){const Kn=G.slice(ye,ye+Gt);await Promise.all(Kn.map(async(He,no)=>{const Xn=ye+no,[$n,Ln]=await Promise.all([Al("content_judge",{key_point:He.text,current_text:at}),Al("review_judge",{key_point:He.text,current_text:at})]);wt[Xn]=$n?.score?($n.score-1)/4:0,vt[Xn]=Ln?.score?(Ln.score-1)/4:0,Lt[Xn]=$n||null,$t[Xn]=Ln||null}))}S({contentScores:wt,reviewScores:vt,contentLLM:Lt,reviewLLM:$t})}catch(wt){console.error("analyzeText error:",wt),S({contentScores:Array(tt).fill(0),reviewScores:Array(tt).fill(0),contentLLM:[],reviewLLM:[]})}},[G,tt]),$=ft.useMemo(()=>kv(at=>N(at),500),[N]);ft.useEffect(()=>{$(d)},[d,$]);const it=ft.useCallback(()=>{const at=p.contentScores.findIndex((wt,vt)=>wt<.5||p.reviewScores[vt]<.5);if(at!==-1){const wt=p.contentScores[at]<.5?"Content":"Review",vt=G[at].text,Lt={show:!0,stage:"deviation_analysis",title:`Action for: "${vt}"`,content:{keyPointText:vt,type:wt}};D(Lt),Nt(Lt),i("advice_triggered_auto")}b(!1),V.current=0},[p,G,i]),W=at=>{const wt=at.target.value;if(g(wt),C==="None")return;V.current++,clearTimeout(R.current);const{count:vt,delay:Lt}=de[C];R.current=setTimeout(()=>{V.current>=vt&&p.contentScores.some((Gt,ye)=>Gt<.5||p.reviewScores[ye]<.5)&&b(!0),V.current=0},Lt)},ht=(at,wt)=>{const vt=G[at];D({show:!0,stage:"deviation_analysis",title:`Action for: "${vt.text}"`,content:{keyPointText:vt.text,type:wt}}),i("advice_triggered_manual",{goal:vt.text,type:wt})},Nt=async(at=I)=>{const{keyPointText:wt,type:vt}=at.content;D(Gt=>({...Gt,stage:"seeking_advice",title:"Seeking Advice..."}));const $t=await Al("suggestion",{current_text:d,key_point:wt,problem_description:vt==="Content"?"The text is not well-aligned with its goal.":"The text has issues based on peer-review standards."});D(Gt=>({...Gt,stage:"advice_displayed",title:"Suggestions",content:{...Gt.content,...$t}}))},Tt=()=>{const at=I.content.suggestion;i("advice_accepted",{suggestion:at}),D({show:!1})},Se=(at,wt,vt)=>{K(wt),mt(vt),J(at.currentTarget.getBoundingClientRect());const Lt=G[wt]?.text||"";zt(_.filter($t=>Lt&&$t.text.toLowerCase().includes(Lt.toLowerCase())))},Xt=()=>{K(null)};return B.jsxs(B.Fragment,{children:[B.jsx("style",{children:".slider-thumb::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:16px; height:16px; background:#3b82f6; border-radius:9999px; cursor:pointer; } .slider-thumb::-moz-range-thumb{ width:16px; height:16px; background:#3b82f6; border-radius:9999px; cursor:pointer; }"}),B.jsx(Pv,{show:I.show,onClose:()=>D({show:!1}),title:I.title,children:(()=>{const{stage:at,content:wt}=I;switch(at){case"seeking_advice":return B.jsx("p",{children:"Getting advice from AI..."});case"advice_displayed":return B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{className:"p-3 bg-yellow-100 border border-yellow-200 rounded-lg",children:[B.jsx("p",{className:"font-semibold text-sm text-yellow-800",children:B.jsx("strong",{children:"Diagnosis:"})}),B.jsx("p",{className:"text-sm text-yellow-900",children:wt.state_description})]}),B.jsxs("div",{className:"p-3 bg-green-100 border border-green-200 rounded-lg",children:[B.jsx("p",{className:"font-semibold text-sm text-green-800",children:B.jsx("strong",{children:"Suggestion:"})}),B.jsx("p",{className:"text-sm text-green-900",children:wt.suggestion})]}),B.jsxs("div",{className:"flex justify-end items-center pt-4 mt-2 border-t border-slate-200 gap-x-2",children:[B.jsx("button",{onClick:()=>{D({show:!1}),i("advice_rejected")},className:"px-4 py-2 bg-slate-200 text-slate-800 text-sm font-semibold rounded-lg hover:bg-slate-300",children:"Reject"}),B.jsx("button",{onClick:Tt,className:"px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg hover:bg-blue-500",children:"Accept"})]})]});default:return B.jsx("p",{children:"Loading..."})}})()}),B.jsx(Pv,{show:A,onClose:()=>b(!1),title:"Writing Suggestion",children:B.jsxs("div",{className:"space-y-4",children:[B.jsx("p",{children:"It looks like some of your writing may not be strongly aligned with its goals. Would you like some automated advice?"}),B.jsxs("div",{className:"flex justify-end items-center pt-4 mt-4 border-t border-slate-200 gap-x-2",children:[B.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-semibold rounded-lg hover:bg-slate-500",children:"Dismiss"}),B.jsx("button",{onClick:it,className:"px-4 py-2 bg-green-600 text-white text-sm font-semibold rounded-lg hover:bg-green-500",children:"Get Advice"})]})]})}),B.jsx(J2,{visible:H!==null,anchorRect:nt,title:`${gt}  ${G[H||0]?.text||""}`,sentences:ct,llm:H!==null?gt==="Content"?p.contentLLM[H]:p.reviewLLM[H]:null,onClose:Xt}),B.jsxs("div",{className:"flex h-screen w-full bg-white text-slate-700",children:[B.jsxs("div",{className:"w-[25%] h-full flex flex-col bg-slate-50 border-r border-slate-200",children:[B.jsx("header",{className:"p-4 border-b border-slate-200",children:B.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Goal Blueprint"})}),B.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:B.jsxs("div",{className:"space-y-8",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-3 border-b border-slate-200 pb-2",children:"Metadata"}),B.jsxs("div",{className:"space-y-3",children:[B.jsx(_c,{path:"metadata.working_title",text:l.metadata.working_title,onUpdate:Vt,extraClasses:"font-bold text-lg text-slate-900"}),B.jsx(_c,{path:"metadata.target_venue",text:l.metadata.target_venue,onUpdate:Vt,extraClasses:"text-base text-slate-700"})]})]}),(l.paper_outline||[]).map((at,wt)=>B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-3 border-b border-slate-200 pb-2 mt-6",children:at.section_name}),B.jsx(_c,{path:`paper_outline.${wt}.objective`,text:at.objective,onUpdate:Vt,extraClasses:"text-base font-semibold block w-full mb-4 !text-blue-800 !bg-blue-100"}),B.jsx("div",{className:"space-y-2",children:G.map((vt,Lt)=>{if(vt.sectionIdx!==wt)return null;const $t=d.toLowerCase().includes(vt.text.toLowerCase());return B.jsxs("div",{className:`flex items-center group transition-all duration-200 rounded-md p-1 ${vt.type==="sub"?"ml-6":""} ${$t?"opacity-100 bg-slate-200/60":"opacity-60"}`,children:[B.jsx("button",{onClick:()=>ht(Lt,"Content"),className:"mr-2 text-slate-400 group-hover:text-blue-500",title:"Analyze Goal Achievement",children:""}),B.jsx("div",{className:"flex-1",children:B.jsx(_c,{path:vt.path,text:vt.text,onUpdate:Vt,extraClasses:`!bg-transparent ${vt.type==="sub"?"text-sm text-slate-600":"text-base text-slate-800"}`})})]},vt.path)})})]},wt))]})})]}),B.jsxs("div",{className:"w-[50%] h-full flex flex-col bg-white",children:[B.jsx($2,{editorRef:_t}),B.jsx("textarea",{ref:_t,value:d,onChange:W,className:"flex-1 p-8 text-base bg-white text-slate-800 leading-7 focus:outline-none resize-none placeholder-slate-400",placeholder:"Start writing your paper here..."})]}),B.jsxs("div",{className:"w-[25%] h-full bg-slate-50 flex flex-col items-center justify-start p-4 border-l border-slate-200",children:[B.jsxs("div",{className:"w-full max-w-xs space-y-6 my-6",children:[B.jsxs("div",{className:"text-center",children:[B.jsx("label",{className:"text-xs font-semibold text-slate-500 block mb-2",children:"Reviewer Sternness"}),B.jsx("input",{type:"range",min:"0",max:"2",step:"1",value:It,onChange:at=>M(Number(at.target.value)),className:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer slider-thumb"}),B.jsx("span",{className:"text-xs text-slate-500",children:["Gentle","Standard","Harsh"][It]})]}),B.jsxs("div",{className:"text-center",children:[B.jsx("label",{className:"text-xs font-semibold text-slate-500 block mb-2",children:"Auto-Popup Trigger"}),B.jsx("div",{className:"flex justify-center gap-x-2",children:Object.keys(de).map(at=>B.jsx("button",{onClick:()=>O(at),className:`px-3 py-1 text-xs rounded-md ${C===at?"bg-blue-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:at},at))}),B.jsx("span",{className:"text-xs text-slate-500 mt-1 block",children:C!=="None"?`${de[C].count} mods + ${de[C].delay}ms pause`:"Keyboard trigger disabled"})]})]}),B.jsx("div",{className:"flex-1 flex items-center justify-center",children:B.jsx("div",{className:"flex gap-x-8",children:["Content","Review"].map(at=>B.jsxs("div",{className:"text-center select-none",children:[B.jsx("div",{className:"mb-2",children:B.jsx("p",{className:"text-sm font-semibold text-slate-500",children:at})}),B.jsx("div",{className:"flex flex-col items-center gap-y-1.5 relative",children:Array.from({length:tt}).map((wt,vt)=>{const $t=(at==="Content"?p.contentScores:p.reviewScores)[vt]||0,Gt=at==="Content"?0:210,ye=60-$t*25,Kn={backgroundColor:$t>0?`hsl(${Gt}, 70%, ${ye}%)`:"#e2e8f0"};return B.jsx("div",{className:"w-5 h-5 rounded-md cursor-pointer transition-all",style:Kn,onMouseEnter:He=>Se(He,vt,at),onMouseLeave:Xt,onClick:()=>ht(vt,at),title:`${at}  ${G[vt]?.text||""}`},`${at}-${vt}`)})})]},at))})})]})]})]})};function eC(){const s=typeof __app_id<"u"?__app_id:"augmented-writing",[t,i]=ft.useState({app:null,auth:null,db:null,userId:null}),[r,l]=ft.useState(!0),[h,d]=ft.useState("goalSetting"),[g,_]=ft.useState({goalStructure:{metadata:{target_venue:"",working_title:"",keywords:[]},paper_outline:[]},editorText:""}),p=ft.useCallback(async(I,D={})=>{if(!(!t.db||!t.userId))try{const H={eventName:I,timestamp:G2(),...D};await q2(I2(t.db,`artifacts/${s}/users/${t.userId}/logs`),H)}catch(H){console.error("Error logging event:",H)}},[t.db,t.userId,s]);ft.useEffect(()=>{if(!xd||!xd.apiKey){console.error("Firebase config is missing or invalid."),l(!1);return}const I=Yv(xd),D=Aw(I),H=C2(I);f1(D,async K=>{if(K){i({app:I,auth:D,db:H,userId:K.uid});const nt=jm(H,`artifacts/${s}/users/${K.uid}/data/main_document`),J=await z2(nt);if(J.exists()){const gt=J.data();_({goalStructure:gt.goalStructure||g.goalStructure,editorText:gt.editorText||""}),d("writing")}await p("user_session_started"),l(!1)}else a1(D).catch(nt=>{console.error("Anonymous sign-in failed",nt)})})},[s,p]);const S=()=>{p("goal_setting_confirmed"),d("writing")};return r?B.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-100 text-slate-700",children:"Loading..."}):B.jsx("div",{className:"bg-slate-100 overflow-hidden",children:h==="goalSetting"?B.jsx(W2,{goalStructure:g.goalStructure,setGoalStructure:I=>_(D=>({...D,goalStructure:I})),onConfirm:S}):B.jsx(tC,{firebase:t,initialData:g,logEvent:p,appId:s})})}zS.createRoot(document.getElementById("root")).render(B.jsx(ft.StrictMode,{children:B.jsx(eC,{})}));
